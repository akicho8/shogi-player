{"version":3,"sources":["webpack:///./src/parser_base.js","webpack:///src/components/shortcut_modal.vue","webpack:///./src/side_info.js","webpack:///./src/components/ErrorNotify.vue?fcec","webpack:///./src/components/ErrorNotify.vue","webpack:///src/components/ShogiPlayer.vue","webpack:///./src/components/ShogiPlayer.vue?a9c7","webpack:///./src/components/shortcut_modal.vue?23ff","webpack:///./src/components/play_mode_module.js","webpack:///./src/components/SettingModal.vue?f4b3","webpack:///src/components/SettingModal.vue","webpack:///./src/components/sound_module.js","webpack:///./src/preset_info.js","webpack:///src/components/CommentArea.vue","webpack:///./src/components/polling_module.js","webpack:///./src/components/PieceBox.vue","webpack:///./src/theme_info.js","webpack:///./src/components/api_module.js","webpack:///./src/第11回朝日杯将棋オープン戦本戦.kif","webpack:///./src/assets/flip_sound.wav","webpack:///./src/options.md","webpack:///./src/soldier.js","webpack:///./src/store/index.js","webpack:///./src/place.js","webpack:///./src/mediator.js","webpack:///./src/App.vue","webpack:///./src/components/CommentArea.vue?f2ec","webpack:///./src/api.md","webpack:///./src/assets/piece_sound.wav","webpack:///./src/main.js","webpack:///./src/App.vue?d486","webpack:///./src/piece.js","webpack:///./src/license.md","webpack:///./src/bg_variant_info.js","webpack:///./src/piece_variant_info.js","webpack:///./src/components/PieceStand.vue?1244","webpack:///./src/any_func_info.js","webpack:///./src/sfen_serializer.js","webpack:///./src/components/navi_module.js","webpack:///./src/size_info.js","webpack:///./src/components/PieceStand.vue","webpack:///./src/sound.js","webpack:///./src/components/preset_module.js","webpack:///src/components/PieceBox.vue","webpack:///./src/piece_vector.js","webpack:///./src/components/PieceBox.vue?d4b7","webpack:///./src/藤井聡太四段_vs_澤田真吾六段.kif","webpack:///./src/board.js","webpack:///./src/usage.md","webpack:///./src/components/shortcut_module.js","webpack:///./src/location.js","webpack:///./src/components/CommentArea.vue","webpack:///./src/極限早繰り銀.kif","webpack:///./src/components/ShogiPlayer.vue","webpack:///./src/kif_parser.js","webpack:///./src/run_mode_info.js","webpack:///src/components/PieceStand.vue","webpack:///./src/components/any_func_module.js","webpack:///./src/sfen_parser.js","webpack:///./src/assets/made-with-bulma.png","webpack:///./src/components/shortcut_modal.vue","webpack:///src/App.vue","webpack:///./src/components/edit_mode_module.js","webpack:///./src/components/SettingModal.vue"],"names":["__webpack_require__","ParserBase","kifu_body","arguments","length","undefined","_classCallCheck3","default","this","header","offset","location_base","advance","_lodash2","reduce","_location2","values","a","e","key","move_infos","process","argv","name","methods","delete_click_handle","$emit","SideInfo","location_keys","map","fetch","ErrorNotify","render","_h","$createElement","_c","_self","staticClass","_t","staticRenderFns","Component","normalizeComponent","__webpack_exports__","_vuex","Object","defineProperty","_vue2","prototype","value","store","_index2","mixins","_navi_module2","_shortcut_module2","_edit_mode_module2","_play_mode_module2","_sound_module2","_preset_module2","_any_func_module2","_polling_module2","_api_module2","props","run_mode","type","String","start_turn","Number","sfen_show","Boolean","overlay_navi","url_embed_turn","theme","size","bg_variant","piece_variant","debug_mode","digit_show","final_label","board_piece_back_user_style","Function","place","board_piece_back_user_class","board_cell_left_click_user_handle","player_info","components","PieceBox","_PieceBox2","PieceStand","_PieceStand2","SettingModal","_SettingModal2","_ErrorNotify2","CommentArea","_CommentArea2","data","current_run_mode","turn_edit_value","mediator","turn_edit","error_message","update_counter","setting_modal_p","inside_custom_kifu","env","view_mode_turn_offset_save","created","$store","state","current_debug_mode","current_theme","current_size","current_bg_variant","current_piece_variant","kifu_url","axios_call","polling_interval_update","mediator_setup","play_mode_setup_from","preset_key","mediator_setup_by_preset","watch","current_turn_set","kifu_source","before_sfen","to_simple_sfen","log","turn_offset_max","sfen_change_p","sound_call","new_val","old_val","view_mode_mediator_update","turn_offset","new_mediator","_mediator2","data_source","data_source_by","to_position_sfen","current_turn","run","init_location_key","current_location","v","commit","turn","document","location","hash","str","test","_sfen_parser2","_kif_parser2","parse","turn_edit_run","_this","$nextTick","$refs","turn_edit_input","focus","_console","console","apply","board_piece_back_class","xy","_place2","soldier","board","lookup","list","push","to_css_class","holding_p","last_hand","origin_place","isEqual","place_from","cpu_location_p","concat","board_piece_back_style","update_kifu_source","computed","_extends3","class_names","current_vlayout","kifu_body_from_url","init_preset_sfen","turn_base","display_turn","turn_offset_min","mapState","esExports","_vm","class","_e","attrs","slot","_v","_s","model","callback","$$v","current_preset_key","expression","label","icon","_l","record","on","click","$event","mediator_setup_by_preset_info","any_func_key","AnyFuncInfo","any_func_click_handle","stopPropagation","preventDefault","fn_flip_all","fn_flip_h","init_location_toggle","init_location","shortcut_modal_show_handle","summary_show","current_turn_label","directives","rawName","modifiers","number","ref","domProps","blur","$forceUpdate","input","target","composing","_n","active","has-modal-card","update:active","play_mode_full_moves_sfen","edit_mode_snapshot_sfen2","sp_data","$data","update:run_mode","update:kifu_body","current_flip","location_key","hold_pieces","realized_hold_pieces_of","navi_relative_move","board_flip_run","y","x","board_cell_left_click","contextmenu","board_cell_right_click","mouseover","board_mouseover_handle","mouseleave","mouseleave_handle","style","board_piece_fore_class","cell_view","move_to_first","relative_move","move_to_last","min","max","sfen","comments_pack","current_comments","have_piece","piece_box_realize","moves","init_sfen","edit_mode_snapshot_sfen","key_event_capture","interval_id","mouseover_info","staticStyle","width","human_side_key","$watch","emit_update_edit_mode_snapshot_sfen","deep","mounted","handler","init_sfen_set","play_mode_mediator_seek_to","moves_set","_toConsumableArray3","moves_take_turn_offset","turn_next","last","turn_slider","serializer","sfen_serializer","to_board_sfen","to_hold_pieces","join","human_locations","_side_info2","locations","take","aria-label","$parent","close","RunModeInfo","native-value","grouped","flip","vlayout","ThemeInfo","$set","BgVariantInfo","PieceVariantInfo","SizeInfo","readonly","kifu_source2","required","_run_mode_info2","_theme_info2","_size_info2","_bg_variant_info2","_piece_variant_info2","get","set","sound_effect","volume","sound_setup","object","as_key","play","sound_load","_piece_sound2","_flip_sound2","file","isNil","_sound2","options","PresetInfo","first_location_key","piece_box","autolinker","_autolinker2","auto_link","link","_axios","logger_debug","polling_interval","clearInterval","setInterval","_this2","url","accessd_at","Date","now","toString","_axios2","method","params","responseType","timeout","headers","X-SHOGI-PLAYER-TIMESTAMP","then","response","catch","error","status","statusText","request","message","config","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_d8d61cb8_hasScoped_false_transformToRequire_video_src_poster_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_template_compiler_preprocessor_engine_pug_node_modules_vue_loader_lib_selector_type_template_index_0_PieceBox_vue__","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_PieceBox_vue___default","api_random_puton","_soldier2","random","clear","place_on","api_place_on","api_board_clear","api_board_turn_set","api_play_mode_mediator_seek_to","api_flip_set","flag","api_retract_a_move","api_sfen_or_kif_set","sfen_or_kif","module","exports","p","Soldier","attributes","_assign2","_board2","dimension","piece","_piece2","promoted","promotable_p","promoted_name","danger_zone_p","danger_zone_size","css_class_list","top_spaces","flip_if_white","__filename","_vuex2","Store","mutations","flip_toggle","current_debug_mode_set","payload","Place","isString","_parse_from_string2","_parse_from_string","_parse_from_string3","_slicedToArray3","_value","_ref","_x","_y","_freeze2","flip_all","s","_s$split$map","replace","_replace_table","split","_s$split$map2","nx","__new_pos","ny","origin","_trunc2","1","2","3","4","5","6","7","8","9","human_x","human_y","１","２","３","４","５","６","７","８","９","一","二","三","四","五","六","七","八","九","b","c","d","f","g","h","i","human_digits","human_xy_ary","kanji_human_x","kanji_human_y","Mediator","num","times","execute_one","m","drop_piece","_soldier4","hold_pieces_add","promoted_trigger","delete_at","plus","count","hold_pieces_count","counts_hash","delete","to_class_list","index","clamp","previous_location","_entries2","filter","_ref2","_ref3","_ref4","sortBy","_ref5","_ref6","code","piece_box_count","_ref7","_ref8","_ref9","_ref10","_ref11","_ref12","forIn","piece_key","piece_box_add","_this3","preset_info","_this4","piece_box_clear","_preset_info2","forEach","_ref13","_ref14","_this5","hold_piece_all_counts_hash","counts_hash_on_board","piece_counts_hash","_ref15","_ref16","rest","success","king_formation_set","king_formation_unset","position","_this6","soldiers","king_formation_soldiers","some","piece_search_and_place_on","_this7","piece_search_and_decrement","found","piece_search_on_hold_pieces_and_decrement","bx","sx","by","sy","slide_xy","new_board","shuffle_apply","turn_clamp","location_by_offset","to_s","to_s_without_turn","_sfen_serializer2","_this8","counts","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_1beb9d1f_hasScoped_false_transformToRequire_video_src_poster_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_template_compiler_preprocessor_engine_pug_node_modules_vue_loader_lib_selector_type_template_index_0_App_vue__","__vue_styles__","ssrContext","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_App_vue___default","_","isEmpty","innerHTML","productionTip","el","template","App","id","_m","kif_sample1","slider_show","kif_sample2","controller_show","modal_p","usage_md","action","hidden_if_piece_stand_blank","setting_button_show","operation_disable","update:start_turn","update:theme","update:size","update:bg_variant","update:piece_variant","update:debug_mode","update:flip","update:vlayout","update:edit_mode_snapshot_sfen","trigger_check","update:mediator_snapshot_sfen","update:play_mode_advanced_full_moves_sfen","update:play_mode_advanced_snapshot_sfen","update:play_mode_advanced_last_move","update:play_mode_advanced_moves","update:turn_offset","nativeOn","$buefy","toast","open","queue","scopedSlots","_u","fn","group-multiline","step","__r","trim","black_name","white_name","trigger_toast_p","JSON","stringify","play_mode_advanced_full_moves_sfen","rows","play_mode_advanced_snapshot_sfen","play_mode_advanced_last_move","play_mode_advanced_moves","mediator_snapshot_sfen","options_md","run_api_random_puton","run_api_retract_a_move","api_md","license_md","data-target","href","src","alt","height","Piece","_piece_vector2","toUpperCase","_get3","__proto__","_getPrototypeOf2","call","find","alias_name","includes","promoted_alias_name","piece_stand_outer_class","location_name","player_name","piece_stand_class","piece_stand_click","hold_cancel","piece_stand_piece_click","piece_stand_mouseover_handle","piece_back_class","piece_fore_class","func","hold_pieces_to_piece_box","piece_box_to_hold_pieces","piece_box_piece_couns_adjust","piece_box_reset_by_preset","king_formation_auto_set","king_formation_auto_unset","shuffle_dialog_open","SfenSerializer","parts","__base_parts","space","toLowerCase","location_info","compact","shift_key_mag","system_key_mag","window","addEventListener","keydown_hook","beforeDestroy","removeEventListener","shortcut_hook","dom","activeElement","controllers","first","previous","next","tagName","event","flip_sign","shiftKey","ctrlKey","altKey","metaKey","current_turn_add","focus_to","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_3c933f9b_hasScoped_false_transformToRequire_video_src_poster_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_template_compiler_preprocessor_engine_pug_node_modules_vue_loader_lib_selector_type_template_index_0_PieceStand_vue__","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_PieceStand_vue___default","__audio_context__","AudioContext","webkitAudioContext","Sound","buffer","__resource_load","is_loaded","source","createBufferSource","connect","destination","gain_node","createGain","gain","start","req","XMLHttpRequest","onreadystatechange","readyState","decodeAudioData","send","preset_info_values","piece_box_class","PieceVector","basic_once_vectors","basic_repeat_vectors","promoted_once_vectors","promoted_repeat_vectors","force_promote_length","piece_box_other_click","piece_box_have_p","piece_box_piece_click","piece_box_mouseover_handle","piece_box_piece_back_class","piece_box_piece_inner_class","textContent","Board","_surface","new_soldier","rotate_add","places","all_places","shuffled_places","shuffle","_values2","flip_h","shuffle_mode_p","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","_getIterator3","done","loc","char_key","soldier_hold_unless_holding_p","piece_stand_click_shared","err","return","shortcut_modal_toggle_handle","meta_p","_mediator","vector","arrow_vector_table","duration","shuffle_run","shortcut_modal_active_p","shortcut_modal_close_handle","$shortcut_modal","alert","modal","parent","hasModalCard","animation","onCancel","canCancel","component","ArrowRight","ArrowLeft","ArrowUp","ArrowDown","Location","cycle_lookup","Math","abs","value_sign","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_3a87a5fb_hasScoped_false_transformToRequire_video_src_poster_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_CommentArea_vue__","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_CommentArea_vue___default","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_40bb4517_hasScoped_false_transformToRequire_video_src_poster_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_template_compiler_preprocessor_engine_pug_node_modules_vue_loader_lib_selector_type_template_index_0_ShogiPlayer_vue__","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_ShogiPlayer_vue___default","KifParser","before_point","line","md","_xregexp2","exec","__kif_format_move_regexp","_minimalisticAssert2","kif_lookup","sfen_parser","_move_infos","_comments_pack","kif_parser","hold_piece_holding_p","have_piece_location","piece_stand_show_flag","any_func_info","dialog","prompt","inputAttrs","trapFocus","onConfirm","parseInt","_any_func_info2","SfenParser","regex","__location_by_upper_or_lower_case","_hold_pieces","piece_char","ary","init_sfen_strip","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_c193ca80_hasScoped_false_transformToRequire_video_src_poster_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_template_compiler_preprocessor_engine_pug_node_modules_vue_loader_lib_selector_type_template_index_0_shortcut_modal_vue__","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_shortcut_modal_vue___default","use","_buefy2","marked","renderer","Renderer","table","body","setOptions","gfm","tables","breaks","pedantic","sanitize","smartLists","smartypants","modal_p2","ShogiPlayer","_ShogiPlayer2","kanji_human","api_sp","_stringify2","black","white","have_piece_promoted","me_running_p","$me_last_event","cursor_elem_in_board_container","$cursor_elem","mouse_stick","dialog_p","$double_tap_time","state_reset","virtual_piece_destroy","handle","if_view_mode_break","origin_soldier1","soldier_create_from_stand_or_box_on","piece_vector","put_on_my_soldier_p","old","gap","enable","piece_transform","pice_hold_and_put_for_bug","soldier_hold","ox","oy","method_key","vectors","vx","vy","xy_valid_p","next_place","piece_decriment","to_sfen","Error","must_dialog","promotable_piece_moved","confirm","confirmText","cancelText","hold_pieces_move_to_my_hold_pieces","board_soldir_to_hold_pieces","virtual_piece_create","origin_soldier2","hold_piece_source_cut","hold_pieces_can_be_reduced_count","piece_box_can_be_reduced_count","mousemove_hook","requestAnimationFrame","cursor_elem_set_pos","click_hook","which","clientX","clientY","left","top","virtual_piece_dom_create","_piece_fore$classList","createElement","classList","add","piece_back","piece_fore","text","createTextNode","appendChild","board_container_ref","$el","removeChild","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_7e177265_hasScoped_false_transformToRequire_video_src_poster_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_template_compiler_preprocessor_engine_pug_node_modules_vue_loader_lib_selector_type_template_index_0_SettingModal_vue__","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_SettingModal_vue___default"],"mappings":"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","file":"static/js/app.94635a521d0118a2bcbc.js","sourcesContent":["import _ from \"lodash\"\nimport Location from \"./location\"\n\nexport default class ParserBase {\n  constructor(kifu_body = null) {\n    this.kifu_body = kifu_body\n    this.header = {}\n  }\n\n  parse() {\n  }\n\n  get board() {\n    console.warn(\"not implemented\")\n  }\n\n  get hold_pieces() {\n    return _.reduce(Location.values, (a, e) => {\n      a[e.key] = {}\n      return a\n    }, {})\n  }\n\n  get turn_offset_min() {\n    return 0\n  }\n\n  get turn_offset_max() {\n    return this.move_infos.length\n  }\n\n  get turn_base() {\n    return 0\n  }\n\n  location_by_offset(offset) {\n    return this.location_base.advance(offset)\n\n    // 次のようにすると w - 2 から始まるときに後手番なのに先手番になってしまう ← いや、あってる\n    // const index = this.turn_offset_min + offset + (this.komaochi_p ? 1 : 0)\n\n    // const index = this.turn_offset_min + (this.komaochi_p ? 1 : 0) + offset\n    // \"position startpos\" の場合 index が -1 になり (-1 % 2) が -1 になり Location.fetch(-1) でエラーになる\n    // なので Math.abs\n    // return Location.fetch(Math.abs(index) % 2)\n  }\n\n  get move_infos() {\n    console.warn(\"not implemented\")\n  }\n\n  get comments_pack() {\n    return null\n  }\n}\n\nif (process.argv[1] === __filename) {\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/parser_base.js","<template lang=\"pug\">\n.shogi-player.shortcut_modal.modal-card.box.has-text-left(@click=\"delete_click_handle\" style=\"width:auto\")\n  .has-text-weight-bold.simple_title.is-size-5.pb-3\n    | キーボードショートカット\n  table.modal-card-body.table.is-fullwidth.mt-3.mb-0\n    tbody\n      tr\n        th 駒の反転\n        td\n          b-tag(type=\"is-primary\") SPACE\n          b-tag.ml-1(type=\"is-primary\") V\n          b-tag.ml-1(type=\"is-primary\") R\n          b-tag.ml-3(type=\"\") 修飾キー\n          span.mx-1 +\n          b-tag(type=\"\") 左クリック\n      tr\n        th カーソル下の駒と同じ駒を駒台から取り出す\n        td\n          b-tag(type=\"is-primary\") Q\n      tr\n        th 持った駒を元に戻す\n        td\n          b-tag(type=\"is-primary\") ESC\n          b-tag.ml-1(type=\"is-primary\") Q\n          b-tag.ml-3(type=\"\") 右クリック\n      tr\n        th カーソル下の駒を☗の駒台に移動\n        td\n          b-tag(type=\"is-primary\") B\n      tr\n        th カーソル下の駒を☖の駒台に移動\n        td\n          b-tag(type=\"is-primary\") W\n      tr\n        th カーソル下の駒を駒箱に移動\n        td\n          b-tag(type=\"is-primary\") T\n          b-tag.ml-1(type=\"is-primary\") BACKSPACE\n          b-tag.ml-1(type=\"is-primary\") DELETE\n      tr\n        th 盤面シャッフル\n        td\n          b-tag(type=\"is-primary\") !\n          span.is-size-7.mx-1 で ON / OFF して\n          b-tag(type=\"is-primary\") 1\n          span.is-size-7.mx-1 から\n          b-tag(type=\"is-primary\") 9\n\n      tr\n        th 盤面ローテイト\n        td\n          b-tag(type=\"is-primary\") 修飾キー\n          span.mx-1 +\n          b-tag(type=\"is-primary\")\n            b-icon(icon=\"arrow-all\" size=\"is-small\")\n      tr\n        th キーボードショートカットの表示\n        td\n          b-taglist\n            b-tag(type=\"is-primary\") ?\n  hr.is-marginless.mt-2\n  ul.mt-4.has-text-centered.is-size-7\n    li\n      | 移動は\n      b-tag.mx-1(type=\"is-primary\") 修飾キー\n      | を合わせると\n      b まとめて\n      | 行う\n</template>\n\n<script>\n\nexport default {\n  name: \"shortcut_modal\",\n  methods: {\n    delete_click_handle() {\n      this.$emit(\"close\")\n    },\n  },\n}\n</script>\n\n<style lang=\"sass\">\n@import \"~bulma/sass/utilities/initial-variables\"\n// @import \"~bulma/sass/utilities/functions\"\n// @import \"~bulma/sass/utilities/derived-variables\"\n// @import \"~bulma/sass/utilities/mixins\"\n.shogi-player\n  &.shortcut_modal\n    .simple_title\n      border-bottom: 1px solid $grey-lighter\n    .table\n      th\n        font-weight: normal\n        text-align: right\n        border-width: 0\n      td\n        text-align: left\n        border-width: 0\n    .tag\n      font-weight: bold\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/shortcut_modal.vue","import MemoryRecord from \"js-memory-record\"\nimport Location from \"./location\"\n\nexport default class SideInfo extends MemoryRecord {\n  static get define() {\n    return [\n      /* eslint-disable */\n      { key: \"both\",   name: \"☗☖\", location_keys: [\"black\", \"white\"], },\n      { key: \"black\",  name: \"☗\",   location_keys: [\"black\"],          },\n      { key: \"white\",  name: \"☖\",   location_keys: [\"white\"],          },\n      { key: \"none\",   name: \"なし\", location_keys: [],                 },\n      /* eslint-enable */\n    ]\n  }\n\n  get locations() {\n    return this.location_keys.map((e) => Location.fetch(e))\n  }\n}\n\nif (process.argv[1] === __filename) {\n  console.log(SideInfo.fetch(\"both\").locations)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/side_info.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column\"},[_c('article',{staticClass:\"message is-danger has-text-left\"},[_c('div',{staticClass:\"message-header\"},[_vm._t(\"header\")],2),_c('div',{staticClass:\"message-body\"},[_vm._t(\"default\")],2)])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-23aaa820\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/template-compiler/preprocessor.js?engine=pug!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/ErrorNotify.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nvar __vue_script__ = null\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-23aaa820\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/template-compiler/preprocessor?engine=pug!../../node_modules/vue-loader/lib/selector?type=template&index=0!./ErrorNotify.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/ErrorNotify.vue\n// module id = null\n// module chunks = ","<template lang=\"pug\">\n.shogi-player(:class=\"class_names\")\n  //- すべてのリンクを無効化するためのオーバーレイ\n  .top_overlay(v-if=\"operation_disable\")\n\n  div(v-if=\"error_message\")\n    ErrorNotify\n      p(slot=\"header\") ERROR\n      p {{error_message}}\n\n  template(v-if=\"!mediator\")\n    i.fas.fa-spinner.fa-pulse\n\n  //- | {{mouseover_info}}\n  //- | {{edit_mode_snapshot_sfen}}\n\n  div.edit_mode_controller(v-if=\"current_run_mode === 'edit_mode'\")\n    .edit_mode_controller_wrap\n      b-dropdown(v-model=\"current_preset_key\")\n        //  button.button にすると prevent を指定する場所がないため button で外側の form が反応してしまう\n        .button(slot=\"trigger\")\n          b-tooltip(label=\"初期配置\")\n            b-icon(icon=\"apps\" size=\"is-small\")\n          //- b-icon(icon=\"menu-down\")\n        b-dropdown-item(v-for=\"record in preset_info_values\" :value=\"record.key\" :key=\"record.key\" @click=\"mediator_setup_by_preset_info(record)\")\n          | {{record.name}}\n      b-dropdown(v-model=\"any_func_key\")\n        .button(slot=\"trigger\")\n          b-tooltip(label=\"操作\")\n            b-icon(icon=\"menu\" size=\"is-small\")\n        b-dropdown-item(v-for=\"e in AnyFuncInfo.values\" :value=\"e.key\" :key=\"e.key\" @click=\"any_func_click_handle(e)\")\n          | {{e.name}}\n      | &nbsp;\n      button.button.yumincho(@click.stop.prevent=\"fn_flip_all\")\n        b-tooltip(label=\"上下反転\")\n          b-icon(icon=\"pan-vertical\" size=\"is-small\")\n      | &nbsp;\n      button.button.yumincho(@click.stop.prevent=\"fn_flip_h\")\n        b-tooltip(label=\"左右反転\")\n          b-icon(icon=\"pan-horizontal\" size=\"is-small\")\n      | &nbsp;\n      button.button.yumincho(@click.stop.prevent=\"init_location_toggle\")\n        b-tooltip(label=\"手番\")\n          | {{init_location.name}}\n      | &nbsp;\n      button.button.yumincho.has-text-weight-bold(@click.stop.prevent=\"shortcut_modal_show_handle\")\n        b-tooltip(label=\"ショートカット\")\n          | ?\n\n  template(v-if=\"mediator\")\n    .turn_edit_container\n      .turn_number_area(v-if=\"summary_show && (current_run_mode === 'view_mode' || current_run_mode === 'play_mode')\")\n        template(v-if=\"!turn_edit\")\n          span.turn_edit_text(@click.stop.prevent=\"turn_edit_run\")\n            template(v-if=\"current_run_mode === 'view_mode'\")\n              | {{mediator.current_turn_label(this.final_label)}}\n            template(v-if=\"current_run_mode === 'play_mode'\")\n              template(v-if=\"turn_base === 0\")\n                | {{turn_offset}}\n              template(v-if=\"turn_base >= 1\")\n                | {{turn_base}}\n                template(v-if=\"turn_offset >= 1\")\n                  | +{{turn_offset}}\n              | 手\n\n        template(v-if=\"turn_edit\")\n          input.turn_edit_input(type=\"number\" v-model.number=\"turn_edit_value\" @blur=\"turn_edit = false\" ref=\"turn_edit_input\")\n\n      span.is-pulled-right.modal_trigger_dots(@click.stop.prevent=\"setting_modal_p = true\" v-if=\"setting_button_show\")\n        b-icon(icon=\"dots-vertical\" size=\"is-small\")\n\n      b-modal(:active.sync=\"setting_modal_p\" has-modal-card)\n        SettingModal(\n          :run_mode.sync=\"current_run_mode\"\n          :kifu_source=\"kifu_source\"\n          @update:kifu_body=\"update_kifu_source\"\n          :play_mode_full_moves_sfen=\"play_mode_full_moves_sfen\"\n          :edit_mode_snapshot_sfen2=\"edit_mode_snapshot_sfen2\"\n          :sp_data=\"$data\"\n        )\n\n    //- 独自のフォントサイズを適用するのは基本このなかだけとする\n    .board_container.font_size_base(ref=\"board_container_ref\")\n      .flippable(:class=\"[current_flip ? 'flip' : 'no_flip']\")\n        PieceStand.flex_item(:location_key=\"'white'\" :hold_pieces=\"mediator.realized_hold_pieces_of('white')\")\n        .flex_item.board_wrap\n          template(v-if=\"overlay_navi\")\n            .overlay_navi.previous(@click.stop.prevent=\"navi_relative_move(-1, $event)\")\n            .overlay_navi.next(@click.stop.prevent=\"navi_relative_move(+1, $event)\")\n            .overlay_navi.flip_trigger_cell(@click.stop.prevent=\"board_flip_run\")\n          .board_outer\n            table.board_inner\n              tr(v-for=\"y in mediator.dimension\")\n                td(v-for=\"x in mediator.dimension\" @click.stop.prevent=\"board_cell_left_click([x - 1, y - 1], $event)\" @click.stop.prevent.right=\"board_cell_right_click([x - 1, y - 1], $event)\" @mouseover=\"board_mouseover_handle([x - 1, y - 1], $event)\" @mouseleave=\"mouseleave_handle\")\n                  .piece_back(:class=\"board_piece_back_class([x - 1, y - 1])\" :style=\"board_piece_back_style([x - 1, y - 1])\")\n                    .piece_fore(:class=\"mediator.board_piece_fore_class([x - 1, y - 1])\")\n                      | {{mediator.cell_view([x - 1, y - 1])}}\n        .flex_item\n          template(v-if=\"!current_vlayout\")\n            PieceBox\n            //- 先手の駒台が上にくっつてしまうので防ぐため空のdivを入れる\n            div(v-if=\"current_run_mode !== 'edit_mode'\")\n          PieceStand(:location_key=\"'black'\" :hold_pieces=\"mediator.realized_hold_pieces_of('black')\")\n      //- cursor_elem はこの部分に入るので 1em のサイズを .font_size_base で指定したものを基準にできる\n\n      template(v-if=\"current_vlayout\")\n        PieceBox\n\n    div(v-if=\"current_run_mode === 'view_mode' || current_run_mode === 'play_mode'\")\n      .controller_group.buttons.has-addons.is-centered.is-paddingless(v-if=\"controller_show\")\n        button.button.first(    ref=\"first\"    @click.stop.prevent=\"move_to_first\"):             b-icon(icon=\"menu-left\")\n        button.button.previous( ref=\"previous\" @click.stop.prevent=\"relative_move(-1, $event)\"): b-icon(icon=\"chevron-left\"  size=\"is-small\")\n        button.button.next(     ref=\"next\"     @click.stop.prevent=\"relative_move(+1, $event)\"): b-icon(icon=\"chevron-right\" size=\"is-small\")\n        button.button.last(     ref=\"last\"     @click.stop.prevent=\"move_to_last\"):              b-icon(icon=\"menu-right\")\n        button.button.flip(                    @click.stop.prevent=\"board_flip_run\"):            b-icon(icon=\"swap-vertical\" size=\"is-small\")\n      div(v-if=\"slider_show\")\n        input.turn_slider(type=\"range\" :value=\"turn_offset\" @input=\"current_turn_set($event.target.value)\" :min=\"turn_offset_min\" :max=\"turn_offset_max\" ref=\"turn_slider\")\n\n    //- http://kyokumen.jp/positions/lnsgkgsnl/1r5b1/ppppppppp/9/9/2P6/PP1PPPPPP/1B5R1/LNSGKGSNL%20w%20-\n    .sfen_area.is-size-7.has-text-grey(v-if=\"sfen_show\")\n      slot(name=\"sfen_part\" :sfen=\"mediator.to_simple_sfen\" :mediator=\"mediator\")\n        | {{mediator.to_simple_sfen}}\n\n    CommentArea(:comments_pack=\"mediator.data_source.comments_pack\" :current_comments=\"mediator.current_comments\")\n\n  div.debug_table(v-if=\"current_debug_mode\")\n    table.table.is-bordered.is-striped.is-narrow.is-hoverable.is-fullwidth\n      tbody\n        tr: <th>現在のモード(current_run_mode)</th><td>{{current_run_mode}}</td>\n        tr: <th>update_counter</th><td>{{update_counter}}</td>\n        tr: <th>移動元座標(place_from)</th><td>{{place_from}}</td>\n        tr: <th>駒台・駒箱から移動中の駒(have_piece)</th><td>{{have_piece}}</td>\n        template(v-if=\"mediator\")\n          tr: <th>駒箱</th><td>{{mediator.piece_box_realize()}}</td>\n          tr: <th>持駒</th><td>{{mediator.hold_pieces}}</td>\n          tr: <th>次の手番</th><td>{{mediator.current_location.key}}</td>\n          tr: <th>現局面のSFEN</th><td>{{mediator.to_simple_sfen}}</td>\n          tr: <th>正規化手番(turn_offset)</th><td>{{turn_offset}}</td>\n        tr: <th>開始局面番号(start_turn)</th><td>{{start_turn}}</td>\n        tr: <th>初期配置(current_preset_key)</th><td>{{current_preset_key}}</td>\n        tr: <th>play_modeでの指し手(moves)</th><td>{{moves}}</td>\n        tr: <th>play_modeの開始局面(init_sfen)</th><td>{{init_sfen}}</td>\n        tr: <th>編集モード時の手番(init_location_key)</th><td>{{init_location_key}}</td>\n        tr: <th>編集モード時の手番を反映したSFEN(edit_mode_snapshot_sfen)</th><td>{{edit_mode_snapshot_sfen}}</td>\n        tr: <th>play_modeでのSFEN(play_mode_full_moves_sfen)</th><td>{{play_mode_full_moves_sfen}}</td>\n        tr: <th>key_event_capture</th><td>{{key_event_capture}}</td>\n        tr: <th>interval_id</th><td>{{interval_id}}</td>\n        tr: <th>mouseover_info</th><td>{{mouseover_info}}</td>\n</template>\n\n<script>\nimport _ from \"lodash\"\nimport Vue from 'vue'\n\nimport { mapState } from 'vuex'\n\n// Store\nimport store from \"../store/index.js\"\n\n// My Library\nimport Mediator from \"../mediator\"\nimport Place from \"../place\"\nimport SfenParser from \"../sfen_parser\"\nimport KifParser from \"../kif_parser\"\n\n// components\nimport PieceBox from \"./PieceBox\"\nimport PieceStand from \"./PieceStand\"\nimport SettingModal from \"./SettingModal\"\nimport ErrorNotify from \"./ErrorNotify\"\nimport CommentArea from \"./CommentArea\"\n\n// mixins modules\nimport navi_module from \"./navi_module.js\"\nimport shortcut_module from \"./shortcut_module.js\"\nimport edit_mode_module from \"./edit_mode_module.js\"\nimport play_mode_module from \"./play_mode_module.js\"\nimport sound_module from \"./sound_module.js\"\nimport preset_module from \"./preset_module.js\"\nimport any_func_module from \"./any_func_module.js\"\nimport polling_module from \"./polling_module.js\"\nimport api_module from \"./api_module.js\"\n\n// To use lodash's _ in the vue template\nObject.defineProperty(Vue.prototype, '_', {value: _})\n\n/* eslint-disable no-new */\nexport default {\n  name: 'ShogiPlayer',\n\n  store: store,\n\n  mixins: [\n    // ここで直接 require(\"./xxx.js\"), とは書けないので注意\n    navi_module,\n    shortcut_module,\n    edit_mode_module,\n    play_mode_module,\n    sound_module,\n    preset_module,\n    any_func_module,\n    polling_module,\n    api_module,\n  ],\n\n  /* eslint-disable */\n  props: {\n    run_mode:       { type: String,  default: \"view_mode\", },\n    kifu_body:      { type: String,  default: null,        },\n    start_turn:     { type: Number,  default: -1,          },\n    sfen_show:      { type: Boolean, default: false,       },\n    overlay_navi:   { type: Boolean, default: true,        },\n    url_embed_turn: { type: Boolean, default: false,       },\n    theme:          { type: String,  default: \"real\",      },\n    size:           { type: String,  default: \"default\",   },\n    bg_variant:     { type: String,  default: \"a\"          },\n    piece_variant:  { type: String,  default: \"a\"          },\n    debug_mode:     { type: Boolean, default: false,       }, // process.env.NODE_ENV !== 'production'\n    digit_show:     { type: Boolean, default: false,       },\n    final_label:    { type: String,  default: null,        },\n    board_piece_back_user_style: { type: Function, default: place => { return {} }, }, // FIXME: add to README\n    board_piece_back_user_class: { type: Function, default: place => { return [] }, },\n    board_cell_left_click_user_handle: { type: Function, default: null, },\n    player_info:    { type: Object,  default: null, },\n  },\n  /* eslint-enable */\n\n  components: {\n    PieceBox,\n    PieceStand,\n    SettingModal,\n    ErrorNotify,\n    CommentArea,\n  },\n\n  data() {\n    return {\n      current_run_mode: this.run_mode,\n      turn_edit_value: null,    // numberフィールドで current_turn を直接操作すると空にしたとき補正値 0 に変換されて使いづらいため別にする。あと -1 のときの挙動もわかりやすい。\n      mediator: null,           // 局面管理\n      turn_edit: false,         // N手目編集中\n      error_message: null,\n      update_counter: 0,\n      setting_modal_p: false,\n      inside_custom_kifu: null, // 設定ダイアログで変更されたときに入る\n      env: process.env.NODE_ENV,\n      view_mode_turn_offset_save: null, // viewモードを抜けるとき現在の手数を記憶しておく\n    }\n  },\n\n  created() {\n    this.inside_custom_kifu = null\n\n    /* eslint-disable */\n    // TODO: Vuex の方で外からの引数(this.debug_mode)を参照できないのでこんなことになっている\n    this.$store.state.current_debug_mode = this.debug_mode\n    this.$store.state.current_theme      = this.theme\n    this.$store.state.current_size       = this.size\n    this.$store.state.current_bg_variant  = this.bg_variant\n    this.$store.state.current_piece_variant = this.piece_variant\n    /* eslint-enable */\n\n    if (this.current_run_mode === \"view_mode\") {\n      if (this.kifu_url) {\n        this.axios_call()\n        this.polling_interval_update()\n      } else {\n        this.mediator_setup(this.start_turn)\n      }\n    }\n\n    if (this.current_run_mode === \"play_mode\") {\n      this.mediator_setup(this.start_turn)\n      this.play_mode_setup_from(\"view_mode\")\n    }\n\n    if (this.current_run_mode === \"edit_mode\") {\n      if (this.preset_key) {\n        this.mediator_setup_by_preset(this.preset_key) // 駒箱に「玉」を乗せたいため\n      } else {\n        this.mediator_setup(this.start_turn)\n      }\n    }\n  },\n\n  watch: {\n    turn_edit_value() {\n      this.current_turn_set(this.turn_edit_value)\n    },\n\n    start_turn() {\n      this.current_turn_set(this.start_turn)\n    },\n\n    kifu_source() {\n      // const before_turn_offset_max = this.turn_offset_max\n      const before_sfen = this.mediator ? this.mediator.to_simple_sfen : \"\"\n      this.log(`before turn_offset_max: ${this.turn_offset_max}`)\n      this.log(`before sfen: ${before_sfen}`)\n      this.mediator_setup(this.start_turn)\n      this.log(`after turn_offset_max: ${this.turn_offset_max}`)\n      this.log(`after sfen: ${this.mediator.to_simple_sfen}`)\n      const sfen_change_p = (before_sfen !== this.mediator.to_simple_sfen)\n      if (this.current_run_mode === \"view_mode\") {\n        if (sfen_change_p) {\n          this.sound_call(\"piece_sound\")\n        }\n      }\n      if (this.current_run_mode === \"play_mode\") {\n        this.play_mode_setup_from(\"view_mode\")\n        // 棋譜を反映された側は\n        // 1. 相手が指したのか → 駒音だす\n        // 2. 自分の指し手が正しい指し手だと判断された棋譜が返って反映されたのか → 駒音なし\n        // この区別が付かない。なのでここで成らさない方がよい\n        // this.sound_call(\"piece_sound\")\n        // ……と思ったが 1 は turn_offset_max が変化したかどうかで判断できる。いや sfen を見ればわかる？ → そこまでする必要ない\n        // if (before_turn_offset_max !== this.turn_offset_max) {\n        if (sfen_change_p) {\n          this.sound_call(\"piece_sound\")\n        }\n      }\n    },\n\n    // 外からまたはダイアログから変更されたとき\n    current_run_mode(new_val, old_val) {\n      this.$emit(\"update:run_mode\", this.current_run_mode)\n\n      if (this.current_run_mode === \"view_mode\") {\n        this.log(\"current_run_mode: view_mode\")\n        // alert(`復元:${this.view_mode_turn_offset_save}`)\n        this.view_mode_mediator_update(this.view_mode_turn_offset_save)\n        this.view_mode_turn_offset_save = null\n      } else {\n        // view_mode ではなくなったときの最初だけ保存しておく(mediatorをまるごと保存しておく手もあるかも)\n        if (this.view_mode_turn_offset_save === null) {\n          this.view_mode_turn_offset_save = this.turn_offset\n          // alert(`保存:${this.view_mode_turn_offset_save}`)\n        }\n      }\n\n      if (this.current_run_mode === \"play_mode\") {\n        this.play_mode_setup_from(old_val)\n      }\n\n      if (this.current_run_mode === \"edit_mode\") {\n        this.log(\"current_run_mode: edit_mode\")\n\n        const new_mediator = new Mediator()\n        new_mediator.data_source = this.data_source_by(this.mediator.to_position_sfen)\n        new_mediator.current_turn = 0\n        new_mediator.run()\n\n        this.mediator = new_mediator\n        this.init_location_key = new_mediator.current_location.key\n      }\n    },\n\n    // これはひどい。わけがわからない。\n    // 外側に通知したいときは Vuex (../store/index.js) のなかでやってもだめ\n    // 呼ばれているコンポーネントで書かないといけない\n    /* eslint-disable */\n    current_debug_mode(v) { this.$emit(\"update:debug_mode\", v)              }, // 内から外への通知\n    debug_mode(v)         { this.$store.commit(\"current_debug_mode_set\", v) }, // 外から内への反映\n    run_mode(v)           { this.current_run_mode = v                       }, // 外側から run_mode を変更されたとき\n\n    current_theme(v)      { this.$emit(\"update:theme\", v)                   }, // 中 -> 外\n    theme(v)              { this.$store.state.current_theme = v             }, // 外 -> 中\n\n    current_size(v)       { this.$emit(\"update:size\", v)                    }, // 中 -> 外\n    size(v)               { this.$store.state.current_size = v              }, // 外 -> 中\n\n    current_bg_variant(v)  { this.$emit(\"update:bg_variant\", v)               }, // 中 -> 外\n    bg_variant(v)          { this.$store.state.current_bg_variant = v         }, // 外 -> 中\n\n    current_piece_variant(v)  { this.$emit(\"update:piece_variant\", v)               }, // 中 -> 外\n    piece_variant(v)          { this.$store.state.current_piece_variant = v         }, // 外 -> 中\n    /* eslint-enable */\n  },\n\n  methods: {\n    mediator_setup(turn) {\n      this.mediator = new Mediator()\n      this.mediator.data_source = this.data_source_by(this.kifu_source)\n      this.mediator.current_turn = turn\n      this.mediator.run()\n    },\n\n    view_mode_mediator_update(turn) {\n      this.mediator_setup(turn)\n      if (this.url_embed_turn) {\n        document.location.hash = this.turn_offset\n      }\n      // this.sound_call(\"piece_sound\")\n      this.update_counter++\n    },\n\n    data_source_by(str) {\n      let data_source = null\n      if (/position/.test(str)) {\n        data_source = new SfenParser()\n      } else {\n        data_source = new KifParser()\n      }\n      data_source.kifu_body = str\n      data_source.parse()\n      return data_source\n    },\n\n    turn_edit_run() {\n      this.turn_edit = true\n      this.turn_edit_value = this.turn_offset\n      this.$nextTick(() => this.$refs.turn_edit_input.focus())\n    },\n\n    log(...v) {\n      if (this.current_debug_mode) {\n        console.log(...v)\n      }\n    },\n\n    board_piece_back_class(xy) {\n      const place = Place.fetch(xy)\n      const soldier = this.mediator.board.lookup(place)\n      let list = []\n\n      list.push(place.to_css_class) // place_99\n\n      if (this.holding_p) {\n        list.push(\"hoverable_p\")\n      }\n\n      if (!this.holding_p) {\n        if (this.mediator.last_hand) {\n          const origin_place = this.mediator.last_hand.origin_place\n          if (origin_place) {\n            if (_.isEqual(origin_place, place)) {\n              list.push(\"origin_place\")\n            }\n          }\n          if (_.isEqual(this.mediator.last_hand.place, place)) {\n            list.push(\"current\")\n          }\n        }\n      }\n\n      if (_.isEqual(this.place_from, place)) {\n        list.push(\"holding_p\")\n      } else if (soldier) {\n        if (this.current_run_mode === \"edit_mode\" || (!this.cpu_location_p && this.mediator.current_location === soldier.location)) {\n          if (!this.holding_p) {\n            list.push(\"selectable_p\")\n          }\n        }\n      }\n\n      // if (soldier) {\n      //   list = _.concat(list, soldier.to_class_list)\n      // }\n\n      if (this.board_piece_back_user_class) {\n        list = _.concat(list, this.board_piece_back_user_class(place))\n      }\n\n      return list\n    },\n\n    board_piece_back_style(xy) {\n      if (this.board_piece_back_user_style) {\n        return this.board_piece_back_user_style(Place.fetch(xy))\n      }\n    },\n\n    update_kifu_source(v) {\n      this.inside_custom_kifu = v\n      this.$emit(\"update:kifu_body\", v) // 子で emit されたイベントを親(自分)で拾い、同じ内容で親に向けて発火。何この複雑さ。\n    },\n  },\n\n  computed: {\n    class_names() {\n      return [\n        `theme-${this.current_theme}`,\n        `size-${this.current_size}`,\n        `bg_variant-${this.current_bg_variant}`,\n        `piece_variant-${this.current_piece_variant}`,\n        `run_mode-${this.current_run_mode}`,\n        {debug_mode: this.current_debug_mode},\n        {digit_show: this.digit_show},\n        this.current_vlayout ? 'vertical' : 'horizontal',\n      ]\n    },\n\n    kifu_source() {\n      // 設定で棋譜を更新したのが入った inside_custom_kifu が最優先。つまりもう更新はできなくなる。いいのか？\n      return this.inside_custom_kifu || this.kifu_body_from_url || this.kifu_body || this.init_preset_sfen || \"position startpos\"\n    },\n\n    // 本当は delegate したい。this.$watch を使えば動的になりそう？\n    /* eslint-disable */\n    turn_base()       { if (this.mediator) { return this.mediator.turn_base       } }, // 表示する上での開始手数で普通は 0\n    turn_offset()     { if (this.mediator) { return this.mediator.turn_offset     } }, // 手数のオフセット\n    display_turn()    { if (this.mediator) { return this.mediator.display_turn    } }, // turn_base + turn_offset\n    turn_offset_min() { if (this.mediator) { return this.mediator.turn_offset_min } }, // 必ず 0\n    turn_offset_max() { if (this.mediator) { return this.mediator.turn_offset_max } }, // moves.length が 2 なら 2\n    /* eslint-enable */\n\n    // mapState({\n    // // アロー関数は、コードをとても簡潔にできます！\n    // count: state => state.count,\n    // // 文字列を渡すことは、`state => state.count` と同じです\n    // countAlias: 'count',\n    // // `this` からローカルステートを参照するときは、通常の関数を使わなければいけません\n    // countPlusLocalState (state) {\n    //   return state.count + this.localCount\n    // }\n    ...mapState({\n    }),\n    ...mapState([\n      \"current_debug_mode\",\n      \"current_theme\",\n      \"current_size\",\n      \"current_bg_variant\",\n      \"current_piece_variant\",\n    ]),\n  },\n}\n</script>\n\n<style lang=\"sass\">\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/ShogiPlayer.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"shogi-player\",class:_vm.class_names},[(_vm.operation_disable)?_c('div',{staticClass:\"top_overlay\"}):_vm._e(),(_vm.error_message)?_c('div',[_c('ErrorNotify',[_c('p',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_vm._v(\"ERROR\")]),_c('p',[_vm._v(_vm._s(_vm.error_message))])])],1):_vm._e(),(!_vm.mediator)?[_c('i',{staticClass:\"fas fa-spinner fa-pulse\"})]:_vm._e(),(_vm.current_run_mode === 'edit_mode')?_c('div',{staticClass:\"edit_mode_controller\"},[_c('div',{staticClass:\"edit_mode_controller_wrap\"},[_c('b-dropdown',{model:{value:(_vm.current_preset_key),callback:function ($$v) {_vm.current_preset_key=$$v},expression:\"current_preset_key\"}},[_c('div',{staticClass:\"button\",attrs:{\"slot\":\"trigger\"},slot:\"trigger\"},[_c('b-tooltip',{attrs:{\"label\":\"初期配置\"}},[_c('b-icon',{attrs:{\"icon\":\"apps\",\"size\":\"is-small\"}})],1)],1),_vm._l((_vm.preset_info_values),function(record){return _c('b-dropdown-item',{key:record.key,attrs:{\"value\":record.key},on:{\"click\":function($event){return _vm.mediator_setup_by_preset_info(record)}}},[_vm._v(_vm._s(record.name))])})],2),_c('b-dropdown',{model:{value:(_vm.any_func_key),callback:function ($$v) {_vm.any_func_key=$$v},expression:\"any_func_key\"}},[_c('div',{staticClass:\"button\",attrs:{\"slot\":\"trigger\"},slot:\"trigger\"},[_c('b-tooltip',{attrs:{\"label\":\"操作\"}},[_c('b-icon',{attrs:{\"icon\":\"menu\",\"size\":\"is-small\"}})],1)],1),_vm._l((_vm.AnyFuncInfo.values),function(e){return _c('b-dropdown-item',{key:e.key,attrs:{\"value\":e.key},on:{\"click\":function($event){return _vm.any_func_click_handle(e)}}},[_vm._v(_vm._s(e.name))])})],2),_vm._v(\" \"),_c('button',{staticClass:\"button yumincho\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.fn_flip_all($event)}}},[_c('b-tooltip',{attrs:{\"label\":\"上下反転\"}},[_c('b-icon',{attrs:{\"icon\":\"pan-vertical\",\"size\":\"is-small\"}})],1)],1),_vm._v(\" \"),_c('button',{staticClass:\"button yumincho\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.fn_flip_h($event)}}},[_c('b-tooltip',{attrs:{\"label\":\"左右反転\"}},[_c('b-icon',{attrs:{\"icon\":\"pan-horizontal\",\"size\":\"is-small\"}})],1)],1),_vm._v(\" \"),_c('button',{staticClass:\"button yumincho\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.init_location_toggle($event)}}},[_c('b-tooltip',{attrs:{\"label\":\"手番\"}},[_vm._v(_vm._s(_vm.init_location.name))])],1),_vm._v(\" \"),_c('button',{staticClass:\"button yumincho has-text-weight-bold\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.shortcut_modal_show_handle($event)}}},[_c('b-tooltip',{attrs:{\"label\":\"ショートカット\"}},[_vm._v(\"?\")])],1)],1)]):_vm._e(),(_vm.mediator)?[_c('div',{staticClass:\"turn_edit_container\"},[(_vm.summary_show && (_vm.current_run_mode === 'view_mode' || _vm.current_run_mode === 'play_mode'))?_c('div',{staticClass:\"turn_number_area\"},[(!_vm.turn_edit)?[_c('span',{staticClass:\"turn_edit_text\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.turn_edit_run($event)}}},[(_vm.current_run_mode === 'view_mode')?[_vm._v(_vm._s(_vm.mediator.current_turn_label(this.final_label)))]:_vm._e(),(_vm.current_run_mode === 'play_mode')?[(_vm.turn_base === 0)?[_vm._v(_vm._s(_vm.turn_offset))]:_vm._e(),(_vm.turn_base >= 1)?[_vm._v(_vm._s(_vm.turn_base)),(_vm.turn_offset >= 1)?[_vm._v(\"+\"+_vm._s(_vm.turn_offset))]:_vm._e()]:_vm._e(),_vm._v(\"手\")]:_vm._e()],2)]:_vm._e(),(_vm.turn_edit)?[_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.turn_edit_value),expression:\"turn_edit_value\",modifiers:{\"number\":true}}],ref:\"turn_edit_input\",staticClass:\"turn_edit_input\",attrs:{\"type\":\"number\"},domProps:{\"value\":(_vm.turn_edit_value)},on:{\"blur\":[function($event){_vm.turn_edit = false},function($event){return _vm.$forceUpdate()}],\"input\":function($event){if($event.target.composing){ return; }_vm.turn_edit_value=_vm._n($event.target.value)}}})]:_vm._e()],2):_vm._e(),(_vm.setting_button_show)?_c('span',{staticClass:\"is-pulled-right modal_trigger_dots\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();_vm.setting_modal_p = true}}},[_c('b-icon',{attrs:{\"icon\":\"dots-vertical\",\"size\":\"is-small\"}})],1):_vm._e(),_c('b-modal',{attrs:{\"active\":_vm.setting_modal_p,\"has-modal-card\":\"has-modal-card\"},on:{\"update:active\":function($event){_vm.setting_modal_p=$event}}},[_c('SettingModal',{attrs:{\"run_mode\":_vm.current_run_mode,\"kifu_source\":_vm.kifu_source,\"play_mode_full_moves_sfen\":_vm.play_mode_full_moves_sfen,\"edit_mode_snapshot_sfen2\":_vm.edit_mode_snapshot_sfen2,\"sp_data\":_vm.$data},on:{\"update:run_mode\":function($event){_vm.current_run_mode=$event},\"update:kifu_body\":_vm.update_kifu_source}})],1)],1),_c('div',{ref:\"board_container_ref\",staticClass:\"board_container font_size_base\"},[_c('div',{staticClass:\"flippable\",class:[_vm.current_flip ? 'flip' : 'no_flip']},[_c('PieceStand',{staticClass:\"flex_item\",attrs:{\"location_key\":'white',\"hold_pieces\":_vm.mediator.realized_hold_pieces_of('white')}}),_c('div',{staticClass:\"flex_item board_wrap\"},[(_vm.overlay_navi)?[_c('div',{staticClass:\"overlay_navi previous\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.navi_relative_move(-1, $event)}}}),_c('div',{staticClass:\"overlay_navi next\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.navi_relative_move(+1, $event)}}}),_c('div',{staticClass:\"overlay_navi flip_trigger_cell\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.board_flip_run($event)}}})]:_vm._e(),_c('div',{staticClass:\"board_outer\"},[_c('table',{staticClass:\"board_inner\"},_vm._l((_vm.mediator.dimension),function(y){return _c('tr',_vm._l((_vm.mediator.dimension),function(x){return _c('td',{on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.board_cell_left_click([x - 1, y - 1], $event)},\"contextmenu\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.board_cell_right_click([x - 1, y - 1], $event)},\"mouseover\":function($event){return _vm.board_mouseover_handle([x - 1, y - 1], $event)},\"mouseleave\":_vm.mouseleave_handle}},[_c('div',{staticClass:\"piece_back\",class:_vm.board_piece_back_class([x - 1, y - 1]),style:(_vm.board_piece_back_style([x - 1, y - 1]))},[_c('div',{staticClass:\"piece_fore\",class:_vm.mediator.board_piece_fore_class([x - 1, y - 1])},[_vm._v(_vm._s(_vm.mediator.cell_view([x - 1, y - 1])))])])])}),0)}),0)])],2),_c('div',{staticClass:\"flex_item\"},[(!_vm.current_vlayout)?[_c('PieceBox'),(_vm.current_run_mode !== 'edit_mode')?_c('div'):_vm._e()]:_vm._e(),_c('PieceStand',{attrs:{\"location_key\":'black',\"hold_pieces\":_vm.mediator.realized_hold_pieces_of('black')}})],2)],1),(_vm.current_vlayout)?[_c('PieceBox')]:_vm._e()],2),(_vm.current_run_mode === 'view_mode' || _vm.current_run_mode === 'play_mode')?_c('div',[(_vm.controller_show)?_c('div',{staticClass:\"controller_group buttons has-addons is-centered is-paddingless\"},[_c('button',{ref:\"first\",staticClass:\"button first\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.move_to_first($event)}}},[_c('b-icon',{attrs:{\"icon\":\"menu-left\"}})],1),_c('button',{ref:\"previous\",staticClass:\"button previous\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.relative_move(-1, $event)}}},[_c('b-icon',{attrs:{\"icon\":\"chevron-left\",\"size\":\"is-small\"}})],1),_c('button',{ref:\"next\",staticClass:\"button next\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.relative_move(+1, $event)}}},[_c('b-icon',{attrs:{\"icon\":\"chevron-right\",\"size\":\"is-small\"}})],1),_c('button',{ref:\"last\",staticClass:\"button last\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.move_to_last($event)}}},[_c('b-icon',{attrs:{\"icon\":\"menu-right\"}})],1),_c('button',{staticClass:\"button flip\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.board_flip_run($event)}}},[_c('b-icon',{attrs:{\"icon\":\"swap-vertical\",\"size\":\"is-small\"}})],1)]):_vm._e(),(_vm.slider_show)?_c('div',[_c('input',{ref:\"turn_slider\",staticClass:\"turn_slider\",attrs:{\"type\":\"range\",\"min\":_vm.turn_offset_min,\"max\":_vm.turn_offset_max},domProps:{\"value\":_vm.turn_offset},on:{\"input\":function($event){return _vm.current_turn_set($event.target.value)}}})]):_vm._e()]):_vm._e(),(_vm.sfen_show)?_c('div',{staticClass:\"sfen_area is-size-7 has-text-grey\"},[_vm._t(\"sfen_part\",[_vm._v(_vm._s(_vm.mediator.to_simple_sfen))],{\"sfen\":_vm.mediator.to_simple_sfen,\"mediator\":_vm.mediator})],2):_vm._e(),_c('CommentArea',{attrs:{\"comments_pack\":_vm.mediator.data_source.comments_pack,\"current_comments\":_vm.mediator.current_comments}})]:_vm._e(),(_vm.current_debug_mode)?_c('div',{staticClass:\"debug_table\"},[_c('table',{staticClass:\"table is-bordered is-striped is-narrow is-hoverable is-fullwidth\"},[_c('tbody',[_c('tr',[_c('th',[_vm._v(\"現在のモード(current_run_mode)\")]),_c('td',[_vm._v(_vm._s(_vm.current_run_mode))])]),_c('tr',[_c('th',[_vm._v(\"update_counter\")]),_c('td',[_vm._v(_vm._s(_vm.update_counter))])]),_c('tr',[_c('th',[_vm._v(\"移動元座標(place_from)\")]),_c('td',[_vm._v(_vm._s(_vm.place_from))])]),_c('tr',[_c('th',[_vm._v(\"駒台・駒箱から移動中の駒(have_piece)\")]),_c('td',[_vm._v(_vm._s(_vm.have_piece))])]),(_vm.mediator)?[_c('tr',[_c('th',[_vm._v(\"駒箱\")]),_c('td',[_vm._v(_vm._s(_vm.mediator.piece_box_realize()))])]),_c('tr',[_c('th',[_vm._v(\"持駒\")]),_c('td',[_vm._v(_vm._s(_vm.mediator.hold_pieces))])]),_c('tr',[_c('th',[_vm._v(\"次の手番\")]),_c('td',[_vm._v(_vm._s(_vm.mediator.current_location.key))])]),_c('tr',[_c('th',[_vm._v(\"現局面のSFEN\")]),_c('td',[_vm._v(_vm._s(_vm.mediator.to_simple_sfen))])]),_c('tr',[_c('th',[_vm._v(\"正規化手番(turn_offset)\")]),_c('td',[_vm._v(_vm._s(_vm.turn_offset))])])]:_vm._e(),_c('tr',[_c('th',[_vm._v(\"開始局面番号(start_turn)\")]),_c('td',[_vm._v(_vm._s(_vm.start_turn))])]),_c('tr',[_c('th',[_vm._v(\"初期配置(current_preset_key)\")]),_c('td',[_vm._v(_vm._s(_vm.current_preset_key))])]),_c('tr',[_c('th',[_vm._v(\"play_modeでの指し手(moves)\")]),_c('td',[_vm._v(_vm._s(_vm.moves))])]),_c('tr',[_c('th',[_vm._v(\"play_modeの開始局面(init_sfen)\")]),_c('td',[_vm._v(_vm._s(_vm.init_sfen))])]),_c('tr',[_c('th',[_vm._v(\"編集モード時の手番(init_location_key)\")]),_c('td',[_vm._v(_vm._s(_vm.init_location_key))])]),_c('tr',[_c('th',[_vm._v(\"編集モード時の手番を反映したSFEN(edit_mode_snapshot_sfen)\")]),_c('td',[_vm._v(_vm._s(_vm.edit_mode_snapshot_sfen))])]),_c('tr',[_c('th',[_vm._v(\"play_modeでのSFEN(play_mode_full_moves_sfen)\")]),_c('td',[_vm._v(_vm._s(_vm.play_mode_full_moves_sfen))])]),_c('tr',[_c('th',[_vm._v(\"key_event_capture\")]),_c('td',[_vm._v(_vm._s(_vm.key_event_capture))])]),_c('tr',[_c('th',[_vm._v(\"interval_id\")]),_c('td',[_vm._v(_vm._s(_vm.interval_id))])]),_c('tr',[_c('th',[_vm._v(\"mouseover_info\")]),_c('td',[_vm._v(_vm._s(_vm.mouseover_info))])])],2)])]):_vm._e()],2)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-40bb4517\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/template-compiler/preprocessor.js?engine=pug!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/ShogiPlayer.vue\n// module id = 1P1h\n// module chunks = 1 2","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"shogi-player shortcut_modal modal-card box has-text-left\",staticStyle:{\"width\":\"auto\"},on:{\"click\":_vm.delete_click_handle}},[_c('div',{staticClass:\"has-text-weight-bold simple_title is-size-5 pb-3\"},[_vm._v(\"キーボードショートカット\")]),_c('table',{staticClass:\"modal-card-body table is-fullwidth mt-3 mb-0\"},[_c('tbody',[_c('tr',[_c('th',[_vm._v(\"駒の反転\")]),_c('td',[_c('b-tag',{attrs:{\"type\":\"is-primary\"}},[_vm._v(\"SPACE\")]),_c('b-tag',{staticClass:\"ml-1\",attrs:{\"type\":\"is-primary\"}},[_vm._v(\"V\")]),_c('b-tag',{staticClass:\"ml-1\",attrs:{\"type\":\"is-primary\"}},[_vm._v(\"R\")]),_c('b-tag',{staticClass:\"ml-3\",attrs:{\"type\":\"\"}},[_vm._v(\"修飾キー\")]),_c('span',{staticClass:\"mx-1\"},[_vm._v(\"+\")]),_c('b-tag',{attrs:{\"type\":\"\"}},[_vm._v(\"左クリック\")])],1)]),_c('tr',[_c('th',[_vm._v(\"カーソル下の駒と同じ駒を駒台から取り出す\")]),_c('td',[_c('b-tag',{attrs:{\"type\":\"is-primary\"}},[_vm._v(\"Q\")])],1)]),_c('tr',[_c('th',[_vm._v(\"持った駒を元に戻す\")]),_c('td',[_c('b-tag',{attrs:{\"type\":\"is-primary\"}},[_vm._v(\"ESC\")]),_c('b-tag',{staticClass:\"ml-1\",attrs:{\"type\":\"is-primary\"}},[_vm._v(\"Q\")]),_c('b-tag',{staticClass:\"ml-3\",attrs:{\"type\":\"\"}},[_vm._v(\"右クリック\")])],1)]),_c('tr',[_c('th',[_vm._v(\"カーソル下の駒を☗の駒台に移動\")]),_c('td',[_c('b-tag',{attrs:{\"type\":\"is-primary\"}},[_vm._v(\"B\")])],1)]),_c('tr',[_c('th',[_vm._v(\"カーソル下の駒を☖の駒台に移動\")]),_c('td',[_c('b-tag',{attrs:{\"type\":\"is-primary\"}},[_vm._v(\"W\")])],1)]),_c('tr',[_c('th',[_vm._v(\"カーソル下の駒を駒箱に移動\")]),_c('td',[_c('b-tag',{attrs:{\"type\":\"is-primary\"}},[_vm._v(\"T\")]),_c('b-tag',{staticClass:\"ml-1\",attrs:{\"type\":\"is-primary\"}},[_vm._v(\"BACKSPACE\")]),_c('b-tag',{staticClass:\"ml-1\",attrs:{\"type\":\"is-primary\"}},[_vm._v(\"DELETE\")])],1)]),_c('tr',[_c('th',[_vm._v(\"盤面シャッフル\")]),_c('td',[_c('b-tag',{attrs:{\"type\":\"is-primary\"}},[_vm._v(\"!\")]),_c('span',{staticClass:\"is-size-7 mx-1\"},[_vm._v(\"で ON / OFF して\")]),_c('b-tag',{attrs:{\"type\":\"is-primary\"}},[_vm._v(\"1\")]),_c('span',{staticClass:\"is-size-7 mx-1\"},[_vm._v(\"から\")]),_c('b-tag',{attrs:{\"type\":\"is-primary\"}},[_vm._v(\"9\")])],1)]),_c('tr',[_c('th',[_vm._v(\"盤面ローテイト\")]),_c('td',[_c('b-tag',{attrs:{\"type\":\"is-primary\"}},[_vm._v(\"修飾キー\")]),_c('span',{staticClass:\"mx-1\"},[_vm._v(\"+\")]),_c('b-tag',{attrs:{\"type\":\"is-primary\"}},[_c('b-icon',{attrs:{\"icon\":\"arrow-all\",\"size\":\"is-small\"}})],1)],1)]),_c('tr',[_c('th',[_vm._v(\"キーボードショートカットの表示\")]),_c('td',[_c('b-taglist',[_c('b-tag',{attrs:{\"type\":\"is-primary\"}},[_vm._v(\"?\")])],1)],1)])])]),_c('hr',{staticClass:\"is-marginless mt-2\"}),_c('ul',{staticClass:\"mt-4 has-text-centered is-size-7\"},[_c('li',[_vm._v(\"移動は\"),_c('b-tag',{staticClass:\"mx-1\",attrs:{\"type\":\"is-primary\"}},[_vm._v(\"修飾キー\")]),_vm._v(\"を合わせると\"),_c('b',[_vm._v(\"まとめて\")]),_vm._v(\"行う\")],1)])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-c193ca80\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/template-compiler/preprocessor.js?engine=pug!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/shortcut_modal.vue\n// module id = 2TpH\n// module chunks = 1 2","import _ from \"lodash\"\n\nimport Mediator from \"../mediator\"\nimport Location from \"../location\"\nimport SideInfo from \"../side_info\"\n\nexport default {\n  /* eslint-disable */\n  props: {\n    human_side_key: { type: String, default: \"both\", }, // 含まれる側だけ操作できるようにする\n  },\n  /* eslint-enable */\n\n  data() {\n    return {\n      moves: [],                  // play_mode 時の棋譜\n      init_sfen: null,            // play_mode に入ったときの最初の状態\n      init_location_key: \"black\", // play_mode に入ったときの最初の手番\n    }\n  },\n\n  created() {\n    // this.$watch(\"mediator\", () => this.emit_update_edit_mode_snapshot_sfen(), {deep: true})\n    // this.$watch(\"init_location_key\", () => this.emit_update_edit_mode_snapshot_sfen(), {deep: true})\n\n    this.$watch(() => [\n      this.mediator,\n      this.init_location_key,\n      // this.mediator.hold_pieces,\n    ], () => {\n      this.emit_update_edit_mode_snapshot_sfen()\n      // this.$emit(\"update:edit_mode_snapshot_sfen\", this.edit_mode_snapshot_sfen())\n    }, {deep: true})\n  },\n\n  mounted() {\n  },\n\n  watch: {\n    // 不具合確認用\n    edit_mode_snapshot_sfen2(v) {\n      this.$emit(\"update:edit_mode_snapshot_sfen2\", v)\n    },\n\n    // 操作モード(または再生モード)で盤面が変化したとき(常に更新)\n    mediator: {\n      handler(v) {\n        this.$emit(\"update:mediator_snapshot_sfen\", v.to_position_sfen)\n      },\n      deep: true,\n    },\n\n    // 現在の手数を返す\n    // update:start_turn とは別にしてある\n    turn_offset(v) {\n      this.$emit(\"update:turn_offset\", v)\n    },\n\n    // 操作モードで盤面が変化したときの指し手の配列\n    // ・[a, b, c] の指し手があってポインタが c のとき「←」でポインタを b にするとトリガーする\n    // ・このとき [a, b] を返す\n    // moves_take_turn_offset(v) {\n    //   this.$emit(\"update:moves_take_turn_offset\", v)\n    // },\n  },\n\n  methods: {\n    play_mode_setup_from(old_val) {\n      this.log(\"play_mode_setup_from\")\n\n      if (this.mediator.data_source.init_sfen !== undefined) {\n        // 棋譜の最初からの指し手をすべて保持\n        // view_mode -> play_mode\n        if (old_val === \"view_mode\") {\n          this.init_sfen = this.mediator.data_source.init_sfen\n          this.moves = this.mediator.data_source.moves\n        }\n        // edit_mode -> play_mode\n        if (old_val === \"edit_mode\") {\n          this.init_sfen_set()\n        }\n      } else {\n        // 現時点の状態から始める (KIFの場合)\n        if (old_val === \"view_mode\") {\n          this.init_location_key = this.mediator.current_location.key\n        }\n        this.init_sfen_set()\n      }\n\n      this.play_mode_mediator_seek_to(this.turn_offset)\n    },\n\n    // 現在の状態を基点として play_mode に入る\n    init_sfen_set() {\n      this.init_sfen = this.edit_mode_snapshot_sfen()\n      this.moves = []\n    },\n\n    play_mode_mediator_seek_to(turn) {\n      this.mediator = new Mediator()\n      this.mediator.data_source = this.data_source_by(this.play_mode_full_moves_sfen)\n      this.mediator.current_turn = turn\n      this.mediator.run()\n    },\n\n    // 「待った」して指す場合を考慮してカレント以降の指し手を削除してから追加する\n    moves_set(value) {\n      this.moves = [...this.moves_take_turn_offset, value]\n    },\n\n    turn_next() {\n      if (this.current_run_mode === \"play_mode\") {\n        this.mediator = new Mediator()\n        this.mediator.data_source = this.data_source_by(this.play_mode_full_moves_sfen)\n        this.mediator.current_turn = -1\n        this.mediator.run()\n        this.sound_call(\"piece_sound\")\n\n        this.$emit(\"update:play_mode_advanced_full_moves_sfen\", this.play_mode_full_moves_sfen)\n        this.$emit(\"update:play_mode_advanced_last_move\", _.last(this.moves))\n        this.$emit(\"update:play_mode_advanced_moves\", this.moves)\n        this.$emit(\"update:play_mode_advanced_snapshot_sfen\", this.mediator.to_position_sfen)\n\n        // 操作モードで詰将棋を動かしていて間違えて1手すぐに戻したいとき「←」キーですぐに戻せるように(スライダーがあれば)フォーカスする\n        if (this.$refs.turn_slider) {\n          this.$refs.turn_slider.focus()\n        }\n      }\n    },\n\n    // 現在の状態を基点とした moves がない棋譜 (init_location が反映されていることが重要)\n    edit_mode_snapshot_sfen() {\n      if (this.mediator) {\n        const serializer = this.mediator.sfen_serializer\n        return [\n          \"position sfen\",\n          serializer.to_board_sfen,\n          this.init_location.key[0],\n          serializer.to_hold_pieces,\n          1,\n        ].join(\" \")\n      }\n    },\n\n    emit_update_edit_mode_snapshot_sfen() {\n      this.$emit(\"update:edit_mode_snapshot_sfen\", this.edit_mode_snapshot_sfen())\n    },\n  },\n\n  computed: {\n    play_mode_full_moves_sfen() {\n      if (this.init_sfen) {\n        return this.init_sfen + \" moves \" + this.moves.join(\" \")\n      }\n    },\n\n    init_location() {\n      return Location.fetch(this.init_location_key)\n    },\n\n    human_locations() {\n      return SideInfo.fetch(this.human_side_key).locations\n    },\n\n    // moves.take(turn_offset) を返す\n    // ・3手ある棋譜で2手目まで戻したときは2手分の指し手を返す\n    // ・たとえば [a, b, c] の指し手があって turn_offset を 2 にしたとき [a, b] を返す\n    moves_take_turn_offset() {\n      return _.take(this.moves, this.turn_offset)\n    },\n\n    // 現在の状態を基点とした moves がない棋譜 (init_location が反映されていることが重要)\n    //\n    // この方法はリアクティブにならない場合がある\n    //\n    // 不具合再現手順\n    // 1. 編集モード→詰将棋\n    // 2. 51の玉をvで反転(OK)\n    //    → this.mediator.sfen_serializer.to_board_sfen は変化する\n    //    → edit_mode_snapshot_sfen2 も変化する\n    // 3. 駒台の玉を11に置いてvで反転(ここがおかしい)\n    //    → this.mediator.sfen_serializer.to_board_sfen は変化する\n    //    → edit_mode_snapshot_sfen2 が変化しない\n    //\n    // 暫定策として mediator と init_location_key だけを監視する watch を入れてそのなかで edit_mode_snapshot_sfen() を実行している\n    //\n    edit_mode_snapshot_sfen2() {\n      return this.edit_mode_snapshot_sfen()\n      // if (this.mediator) {\n      //   const serializer = this.mediator.sfen_serializer\n      //   return [\n      //     \"position sfen\",\n      //     serializer.to_board_sfen,\n      //     this.init_location.key[0],\n      //     serializer.to_hold_pieces,\n      //     1,\n      //   ].join(\" \")\n      // }\n    },\n  },\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/play_mode_module.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"modal-card has-text-left\",staticStyle:{\"width\":\"auto\"}},[_c('header',{staticClass:\"modal-card-head\"},[_c('p',{staticClass:\"modal-card-title\"},[_vm._v(\"設定\")]),_c('button',{staticClass:\"delete\",attrs:{\"aria-label\":\"close\"},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.$parent.close()}}})]),_c('section',{staticClass:\"modal-card-body\"},[_c('b-field',{attrs:{\"label\":\"モード\"}}),_c('b-field',[_vm._l((_vm.RunModeInfo.values),function(e){return [_c('b-radio-button',{attrs:{\"native-value\":e.key},model:{value:(_vm.current_run_mode),callback:function ($$v) {_vm.current_run_mode=$$v},expression:\"current_run_mode\"}},[_vm._v(_vm._s(e.name))])]})],2),_c('b-field',{attrs:{\"grouped\":\"grouped\"}},[_c('b-field',{attrs:{\"label\":\"反転\"}},[_c('b-switch',{model:{value:(_vm.flip),callback:function ($$v) {_vm.flip=$$v},expression:\"flip\"}})],1),_c('b-field',{attrs:{\"label\":\"縦並び\"}},[_c('b-switch',{model:{value:(_vm.vlayout),callback:function ($$v) {_vm.vlayout=$$v},expression:\"vlayout\"}})],1),_c('b-field',{attrs:{\"label\":\"デバッグモード\"}},[_c('b-switch',{model:{value:(_vm.current_debug_mode),callback:function ($$v) {_vm.current_debug_mode=$$v},expression:\"current_debug_mode\"}})],1)],1),(false)?[_c('b-dropdown',{model:{value:(_vm.$store.state.current_bg_variant),callback:function ($$v) {_vm.$set(_vm.$store.state, \"current_bg_variant\", $$v)},expression:\"$store.state.current_bg_variant\"}},[_c('button',{staticClass:\"button\",attrs:{\"slot\":\"trigger\"},slot:\"trigger\"},[_c('span',[_vm._v(_vm._s(_vm.BgVariantInfo.fetch(_vm.$store.state.current_bg_variant).name))]),_c('b-icon',{attrs:{\"icon\":\"menu-down\"}})],1),_vm._l((_vm.BgVariantInfo.values),function(e){return [_c('b-dropdown-item',{attrs:{\"value\":e.key}},[_vm._v(_vm._s(e.name))])]})],2)]:_vm._e(),_c('b-field',{attrs:{\"label\":\"テーマ\"}}),_c('b-field',[_vm._l((_vm.ThemeInfo.values),function(e){return [_c('b-radio-button',{attrs:{\"native-value\":e.key},model:{value:(_vm.$store.state.current_theme),callback:function ($$v) {_vm.$set(_vm.$store.state, \"current_theme\", $$v)},expression:\"$store.state.current_theme\"}},[_vm._v(_vm._s(e.name))])]})],2),(_vm.$store.state.current_theme === 'real')?[_c('div',{staticClass:\"box\"},[_c('b-field',{attrs:{\"label\":\"背景の種類\"}}),_c('b-field',[_vm._l((_vm.BgVariantInfo.values),function(e){return [_c('b-radio-button',{attrs:{\"native-value\":e.key,\"size\":\"is-small\"},model:{value:(_vm.$store.state.current_bg_variant),callback:function ($$v) {_vm.$set(_vm.$store.state, \"current_bg_variant\", $$v)},expression:\"$store.state.current_bg_variant\"}},[_vm._v(_vm._s(e.name))])]})],2),_c('b-field',{attrs:{\"label\":\"駒の種類\"}}),_c('b-field',[_vm._l((_vm.PieceVariantInfo.values),function(e){return [_c('b-radio-button',{attrs:{\"native-value\":e.key},model:{value:(_vm.$store.state.current_piece_variant),callback:function ($$v) {_vm.$set(_vm.$store.state, \"current_piece_variant\", $$v)},expression:\"$store.state.current_piece_variant\"}},[_vm._v(_vm._s(e.name))])]})],2)],1)]:_vm._e(),_c('b-field',{attrs:{\"label\":\"サイズ\"}}),_c('b-field',[_vm._l((_vm.SizeInfo.values),function(e){return [_c('b-radio-button',{attrs:{\"native-value\":e.key,\"size\":\"is-small\"},model:{value:(_vm.$store.state.current_size),callback:function ($$v) {_vm.$set(_vm.$store.state, \"current_size\", $$v)},expression:\"$store.state.current_size\"}},[_vm._v(_vm._s(e.name))])]})],2),(_vm.sp_data.mediator)?[_c('b-field',{attrs:{\"label\":\"再生モードの現局面(Readonly)\"}},[_c('b-input',{attrs:{\"value\":_vm.sp_data.mediator.to_position_sfen,\"type\":\"input\",\"size\":\"is-small\",\"readonly\":\"readonly\"}})],1)]:_vm._e(),_c('b-field',{attrs:{\"label\":\"編集モードの現局面(Readonly) ※BUG:駒を反転したときに反映されない場合がある\"}},[_c('b-input',{attrs:{\"value\":_vm.edit_mode_snapshot_sfen2,\"type\":\"input\",\"size\":\"is-small\",\"readonly\":\"readonly\"}})],1),_c('b-field',{attrs:{\"label\":\"再生モードの棋譜(編集可)\"}},[_c('b-input',{attrs:{\"type\":\"textarea\",\"size\":\"is-small\"},model:{value:(_vm.kifu_source2),callback:function ($$v) {_vm.kifu_source2=$$v},expression:\"kifu_source2\"}})],1),_c('b-field',{attrs:{\"label\":\"操作モードの棋譜(Readonly)\"}},[_c('b-input',{staticClass:\"is-small\",attrs:{\"value\":_vm.play_mode_full_moves_sfen,\"type\":\"textarea\",\"size\":\"is-small\",\"readonly\":\"readonly\"}})],1)],2),_c('footer',{staticClass:\"modal-card-foot\"},[_c('button',{staticClass:\"button is-primary\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.$parent.close()}}},[_vm._v(\"閉じる\")])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-7e177265\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/template-compiler/preprocessor.js?engine=pug!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/SettingModal.vue\n// module id = 2m4z\n// module chunks = 1 2","<template lang=\"pug\">\n//- style=\"width: auto\"\n.modal-card.has-text-left(style=\"width:auto\")\n  header.modal-card-head\n    p.modal-card-title 設定\n    button.delete(aria-label=\"close\" @click.stop.prevent=\"$parent.close()\")\n\n  section.modal-card-body\n    b-field(label=\"モード\")\n    b-field\n      template(v-for=\"e in RunModeInfo.values\")\n        b-radio-button(v-model=\"current_run_mode\" :native-value=\"e.key\") {{e.name}}\n\n    b-field(grouped)\n      b-field(label=\"反転\")\n        b-switch(v-model=\"flip\")\n      b-field(label=\"縦並び\")\n        b-switch(v-model=\"vlayout\")\n      b-field(label=\"デバッグモード\")\n        b-switch(v-model=\"current_debug_mode\")\n\n    template(v-if=\"false\")\n      b-dropdown(v-model=\"$store.state.current_bg_variant\")\n        button.button(slot=\"trigger\")\n          span\n            | {{BgVariantInfo.fetch($store.state.current_bg_variant).name}}\n          b-icon(icon=\"menu-down\")\n        template(v-for=\"e in BgVariantInfo.values\")\n          b-dropdown-item(:value=\"e.key\") {{e.name}}\n\n    b-field(label=\"テーマ\")\n    b-field\n      template(v-for=\"e in ThemeInfo.values\")\n        b-radio-button(v-model=\"$store.state.current_theme\" :native-value=\"e.key\") {{e.name}}\n\n    template(v-if=\"$store.state.current_theme === 'real'\")\n      .box\n        b-field(label=\"背景の種類\")\n        b-field\n          template(v-for=\"e in BgVariantInfo.values\")\n            b-radio-button(v-model=\"$store.state.current_bg_variant\" :native-value=\"e.key\" size=\"is-small\") {{e.name}}\n\n        b-field(label=\"駒の種類\")\n        b-field\n          template(v-for=\"e in PieceVariantInfo.values\")\n            b-radio-button(v-model=\"$store.state.current_piece_variant\" :native-value=\"e.key\") {{e.name}}\n\n    b-field(label=\"サイズ\")\n    b-field\n      template(v-for=\"e in SizeInfo.values\")\n        b-radio-button(v-model=\"$store.state.current_size\" :native-value=\"e.key\" size=\"is-small\") {{e.name}}\n\n    template(v-if=\"sp_data.mediator\")\n      b-field(label=\"再生モードの現局面(Readonly)\")\n        b-input(:value=\"sp_data.mediator.to_position_sfen\" type=\"input\" size=\"is-small\" readonly)\n\n    b-field(label=\"編集モードの現局面(Readonly) ※BUG:駒を反転したときに反映されない場合がある\")\n      b-input(:value=\"edit_mode_snapshot_sfen2\" type=\"input\" size=\"is-small\" readonly)\n\n    b-field(label=\"再生モードの棋譜(編集可)\")\n      b-input(v-model=\"kifu_source2\" type=\"textarea\" size=\"is-small\")\n\n    b-field(label=\"操作モードの棋譜(Readonly)\")\n      b-input.is-small(:value=\"play_mode_full_moves_sfen\" type=\"textarea\" size=\"is-small\" readonly)\n\n  footer.modal-card-foot\n    button.button.is-primary(@click.stop.prevent=\"$parent.close()\") 閉じる\n</template>\n\n<script>\n// ここではあえていろんな方法を試している\n//\n// run_mode: コンポーネントへの数珠繋ぎ方式\n// flip:     Vuex で管理している変数をコンポーネント側でラップする方式\n//\n\n// import Vue from \"vue\"\nimport RunModeInfo from \"../run_mode_info\"\nimport ThemeInfo from \"../theme_info\"\nimport SizeInfo from \"../size_info\"\nimport BgVariantInfo from \"../bg_variant_info\"\nimport PieceVariantInfo from \"../piece_variant_info\"\n\n// ↓このように定義した場合はアプリ側で再定義しないといけなくなる\n// Object.defineProperty(Vue.prototype, 'RunModeInfo', {value: RunModeInfo})\n// Object.defineProperty(Vue.prototype, 'ThemeInfo', {value: ThemeInfo})\n// Object.defineProperty(Vue.prototype, 'SizeInfo', {value: SizeInfo})\n// Object.defineProperty(Vue.prototype, 'BgVariantInfo', {value: BgVariantInfo})\n\nexport default {\n  props: {\n    run_mode: { required: true },\n    kifu_source: { required: false },\n    play_mode_full_moves_sfen: { required: true }, // TODO: 親をそのまま参照したいんだけど $data を渡しても play_mode_full_moves_sfen は computed だから参照できない\n    edit_mode_snapshot_sfen2: { required: true },  // TODO: 親を受けとりたい\n    sp_data: { required: true },                // TODO: $data ではなく親を受けとりたい\n  },\n\n  data() {\n    return {\n      RunModeInfo,\n      ThemeInfo,\n      SizeInfo,\n      BgVariantInfo,\n      PieceVariantInfo,\n\n      current_run_mode: this.run_mode,\n      kifu_source2: this.kifu_source,\n    }\n  },\n\n  watch: {\n    current_run_mode(value) {\n      this.$emit(\"update:run_mode\", value)\n    },\n    kifu_source2(value) {\n      this.$emit(\"update:kifu_body\", value)\n    },\n  },\n\n  methods: {\n  },\n\n  computed: {\n    // http://chibinowa.net/note/vuejs/vue-11.html\n    flip: {\n      get() { return this.$store.state.current_flip },\n      set(v) { this.$store.state.current_flip = v },\n    },\n    vlayout: {\n      get() { return this.$store.state.current_vlayout },\n      set(v) { this.$store.state.current_vlayout = v },\n    },\n    // ...mapState([\n    //   \"current_debug_mode\",      // これだと get() しか作られない\n    // ]),\n    current_debug_mode: {\n      get() { return this.$store.state.current_debug_mode },\n      set(v) {\n        this.$store.commit(\"current_debug_mode_set\", v) // どんだけ冗長なことやらすんだ。面倒くさいぞこれ\n        // というか別に直接更新してもよい\n        // this.$store.state.current_debug_mode = v\n      },\n    },\n  },\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/components/SettingModal.vue","import _ from \"lodash\"\n\nimport Sound from '../sound'\n\nimport piece_sound_wav from \"../assets/piece_sound.wav\"\nimport flip_sound_wav from \"../assets/flip_sound.wav\"\n\nexport default {\n  /* eslint-disable */\n  props: {\n    sound_effect: { type: Boolean, default: false, },\n    volume:       { type: Number,  default: 0.5,   },\n  },\n  /* eslint-enable */\n\n  data() {\n    return {\n    }\n  },\n\n  created() {\n    this.sound_setup()\n  },\n\n  watch: {\n    sound_effect() {\n      this.sound_setup()\n    },\n\n    volume() {\n      this.sound_setup()\n    },\n  },\n\n  methods: {\n    sound_call(key) {\n      if (this.sound_effect) {\n        key = this.as_key(key)\n        const object = this[key]\n        if (object) {\n          object.play()\n          this.log(`sound_call(\"${key}\")`)\n        }\n      }\n    },\n\n    sound_setup() {\n      this.sound_load(\"piece_sound\", piece_sound_wav)\n      this.sound_load(\"flip_sound\", flip_sound_wav)\n    },\n\n    sound_load(key, file) {\n      if (this.sound_effect) {\n        key = this.as_key(key)\n        const object = this[key]\n\n        if (_.isNil(object)) {\n          this[key] = new Sound(file)\n        }\n        this[key].options[\"volume\"] = this.volume\n      }\n    },\n\n    // this.piece_sound にすると無意味にリアクティブになるので this.$piece_sound にしておく\n    as_key(key) {\n      return \"$\" + key\n    },\n  },\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/sound_module.js","import MemoryRecord from \"js-memory-record\"\n// import Location from \"../location\"\n\nexport default class PresetInfo extends MemoryRecord {\n  static get define() {\n    return [\n      /* eslint-disable */\n      { key: \"詰将棋\",                  sfen: \"position sfen 4k4/9/9/9/9/9/9/9/9 b 2r2b4g4s4n4l18p 1\",                                       first_location_key: \"black\", piece_box: [[\"K\", 1]]},\n      { key: \"詰将棋 - 美濃\",           sfen: \"position sfen ln1g5/1ks6/1ppp5/p8/9/9/9/9/9 b BGSNL2rb2g2s2n2l14p 1\",                         first_location_key: \"black\", piece_box: [[\"K\", 1]]},\n      { key: \"詰将棋 - 矢倉\",           sfen: \"position sfen 7nl/6gk1/5gspp/5pp2/9/9/9/9/9 b BGSNL2rbg2s2n2l14p 1\",                          first_location_key: \"black\", piece_box: [[\"K\", 1]]},\n      { key: \"戦型 右四間 vs 四間飛車\", sfen: \"position sfen ln1g1g1nl/1ks2r3/1pppp1bpp/p3spp2/9/P1P1SP1PP/1P1PP1P2/1BK1GR3/LNSG3NL b - 25\", first_location_key: \"black\", piece_box: []},\n      { key: \"全部駒箱\",                sfen: \"position sfen 9/9/9/9/9/9/9/9/9 b - 1\",                                                       first_location_key: \"black\", piece_box: [[\"B\", 2], [\"R\", 2], [\"L\", 4], [\"N\", 4], [\"S\", 4], [\"G\", 4], [\"P\", 18], [\"K\", 2]]},\n      { key: \"平手\",                    sfen: \"position sfen lnsgkgsnl/1r5b1/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL b - 1\",               first_location_key: \"black\", piece_box: []},\n      { key: \"香落ち\",                  sfen: \"position sfen lnsgkgsn1/1r5b1/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1\",               first_location_key: \"white\", piece_box: [[\"L\", 1]]},\n      { key: \"右香落ち\",                sfen: \"position sfen 1nsgkgsnl/1r5b1/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1\",               first_location_key: \"white\", piece_box: [[\"L\", 1]]},\n      { key: \"角落ち\",                  sfen: \"position sfen lnsgkgsnl/1r7/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1\",                 first_location_key: \"white\", piece_box: [[\"B\", 1]]},\n      { key: \"飛車落ち\",                sfen: \"position sfen lnsgkgsnl/7b1/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1\",                 first_location_key: \"white\", piece_box: [[\"R\", 1]]},\n      { key: \"飛香落ち\",                sfen: \"position sfen lnsgkgsn1/7b1/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1\",                 first_location_key: \"white\", piece_box: [[\"R\", 1], [\"L\", 1]]},\n      { key: \"二枚落ち\",                sfen: \"position sfen lnsgkgsnl/9/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1\",                   first_location_key: \"white\", piece_box: [[\"B\", 1], [\"R\", 1]]},\n      { key: \"三枚落ち\",                sfen: \"position sfen lnsgkgsn1/9/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1\",                   first_location_key: \"white\", piece_box: [[\"B\", 1], [\"R\", 1], [\"L\", 1]]},\n      { key: \"四枚落ち\",                sfen: \"position sfen 1nsgkgsn1/9/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1\",                   first_location_key: \"white\", piece_box: [[\"B\", 1], [\"R\", 1], [\"L\", 2]]},\n      { key: \"六枚落ち\",                sfen: \"position sfen 2sgkgs2/9/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1\",                     first_location_key: \"white\", piece_box: [[\"B\", 1], [\"R\", 1], [\"L\", 2], [\"N\", 2]]},\n      { key: \"八枚落ち\",                sfen: \"position sfen 3gkg3/9/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1\",                       first_location_key: \"white\", piece_box: [[\"B\", 1], [\"R\", 1], [\"L\", 2], [\"N\", 2], [\"S\", 2]]},\n      { key: \"十枚落ち\",                sfen: \"position sfen 4k4/9/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1\",                         first_location_key: \"white\", piece_box: [[\"B\", 1], [\"R\", 1], [\"L\", 2], [\"N\", 2], [\"S\", 2], [\"G\", 2]]},\n      { key: \"十九枚落ち\",              sfen: \"position sfen 4k4/9/9/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1\",                                 first_location_key: \"white\", piece_box: [[\"B\", 1], [\"R\", 1], [\"L\", 2], [\"N\", 2], [\"S\", 2], [\"G\", 2], [\"P\", 9]]},\n      { key: \"二十枚落ち\",              sfen: \"position sfen 9/9/9/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1\",                                   first_location_key: \"white\", piece_box: [[\"B\", 1], [\"R\", 1], [\"L\", 2], [\"N\", 2], [\"S\", 2], [\"G\", 2], [\"P\", 9], [\"K\", 1]]},\n      /* eslint-enable */\n    ]\n  }\n}\n\nif (process.argv[1] === __filename) {\n  console.log(PresetInfo.fetch(\"平手\"))\n  console.log(PresetInfo.fetch(\"香落ち\").first_location_key)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/preset_info.js","<template>\n<div class=\"comment_area\" v-if=\"comments_pack\">\n  <div v-if=\"current_comments\">\n    <div class=\"columns\">\n      <div class=\"column\"><!-- is-three-fifths is-offset-one-fifth -->\n        <article class=\"message is-info has-text-left\">\n          <div class=\"message-body\">\n            <div class=\"content\">\n              <template v-for=\"str in current_comments\">\n                <template v-if=\"_.isEmpty(str)\">\n                  <br>\n                </template>\n                <template v-else>\n                  <div v-html=\"auto_link(str)\"></div>\n                </template>\n              </template>\n            </div>\n          </div>\n        </article>\n      </div>\n    </div>\n  </div>\n</div>\n</template>\n\n<script>\nimport Vue from 'vue'\nimport _ from \"lodash\"\nimport Autolinker from 'autolinker'\n\n// To use lodash's _ in the vue template\nObject.defineProperty(Vue.prototype, '_', {value: _})\n\nexport default {\n  props: {\n    comments_pack: { required: true },\n    current_comments: { required: true },\n  },\n\n  created() {\n    this.autolinker = new Autolinker()\n  },\n\n  methods: {\n    auto_link(str) {\n      return this.autolinker.link(str)\n    },\n  },\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/components/CommentArea.vue","import axios from \"axios\"\nconst logger_debug = require('debug')('debug')\n\nexport default {\n  /* eslint-disable */\n  props: {\n    kifu_url:           { type: String,  default: null, },\n    polling_interval:   { type: Number,  default: 0,    },\n  },\n  /* eslint-enable */\n\n  data() {\n    return {\n      interval_id: null,\n      kifu_body_from_url: null,\n    }\n  },\n\n  created() {\n  },\n\n  mounted() {\n  },\n\n  watch: {\n    kifu_url() {\n      this.axios_call()\n    },\n    polling_interval() {\n      this.polling_interval_update()\n    },\n  },\n\n  methods: {\n    polling_interval_update() {\n      if (this.polling_interval >= 1) {\n        if (this.interval_id) {\n          this.log(`clearInterval(${this.interval_id})`)\n          clearInterval(this.interval_id)\n          this.interval_id = null\n        }\n        this.interval_id = setInterval(() => { this.axios_call() }, this.polling_interval * 1000)\n        this.log(`setInterval() => ${this.interval_id}`)\n      }\n    },\n\n    axios_call() {\n      const url = this.kifu_url\n      // const url = \"http://localhost:3000/wr/hanairobiyori-ispt-20171104_220810.kif\"\n      // const url = \"http://tk2-221-20341.vs.sakura.ne.jp/shogi/wr/ureshino_friend-doglong-20180122_213544.kif\"\n      const accessd_at = Date.now().toString()\n      axios({\n        url: url,\n        method: \"get\",\n        params: {\"accessd_at\": accessd_at},\n        responseType: \"text\",\n        timeout: 1000 * 3,\n        headers: {\"X-SHOGI-PLAYER-TIMESTAMP\": accessd_at},\n      }).then((response) => {\n        this.error_message = null\n        this.inside_custom_kifu = null\n        this.kifu_body_from_url = response.data\n        // this.mediator_setup(this.start_turn)\n      }).catch((error) => {\n        if (error.response) {\n          logger_debug(\"error.response.data: %o\", error.response.data)\n          logger_debug(\"error.response.status: %o\", error.response.status)\n          logger_debug(\"error.response.statusText: %o\", error.response.statusText)\n          logger_debug(\"error.response.headers: %o\", error.response.headers)\n        } else if (error.request) {\n          logger_debug(\"error.request: %o\", error.request)\n        } else {\n          logger_debug('error.message: %o', error.message)\n        }\n        logger_debug('error.config: %o', error.config)\n\n        this.kifu_body_from_url = null\n        this.error_message = error.message\n      })\n    },\n  },\n\n  computed: {\n  },\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/polling_module.js","var normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./PieceBox.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./PieceBox.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-d8d61cb8\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/template-compiler/preprocessor?engine=pug!../../node_modules/vue-loader/lib/selector?type=template&index=0!./PieceBox.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/PieceBox.vue\n// module id = 8SiQ\n// module chunks = 1 2","import MemoryRecord from \"js-memory-record\"\n\nexport default class ThemeInfo extends MemoryRecord {\n  static get define() {\n    return [\n      /* eslint-disable */\n      { key: \"none\",   name: \"なし\",   },\n      { key: \"simple\", name: \"紙面風\", },\n      { key: \"real\",   name: \"画像駒\", },\n      /* eslint-enable */\n    ]\n  }\n}\n\nif (process.argv[1] === __filename) {\n  console.log(ThemeInfo.fetch(\"real\").key)\n  console.log(ThemeInfo.fetch(\"real\").name)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/theme_info.js","import Soldier from \"../soldier\"\nimport Mediator from \"../mediator\"\n\nexport default {\n  methods: {\n    // 盤を消してランダムに駒を配置する\n    api_random_puton() {\n      const soldier = Soldier.random()\n      this.mediator.board.clear()\n      this.mediator.board.place_on(soldier)\n      return soldier\n    },\n\n    // 駒を置く\n    api_place_on(soldier) {\n      this.mediator.board.place_on(soldier)\n    },\n\n    // 盤面クリア\n    api_board_clear() {\n      this.mediator.board.clear()\n    },\n\n    // 指定手数の局面に設定\n    api_board_turn_set(turn) {\n      this.mediator_setup(turn)\n    },\n\n    // 指定手数の局面に設定(play_mode専用・音が出ない)\n    api_play_mode_mediator_seek_to(turn) {\n      this.play_mode_mediator_seek_to(turn)\n    },\n\n    // 反転状態の設定\n    api_flip_set(flag) {\n      this.$store.state.current_flip = flag\n    },\n\n    // 待った\n    api_retract_a_move() {\n      let turn = this.turn_offset - 2\n      if (turn < 0) {\n        turn = 0\n      }\n      this.api_board_turn_set(turn)\n    },\n\n    // 棋譜の反映\n    api_sfen_or_kif_set(sfen_or_kif, options = {}) {\n      this.mediator = new Mediator()\n      this.mediator.data_source = this.data_source_by(sfen_or_kif)\n      this.mediator.current_turn = options.turn || 0\n      this.mediator.run()\n    },\n  },\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/api_module.js","module.exports = \"# --- Kifu for Windows (Pro) V6.65.07 棋譜ファイル ---\\n対局ID：7151\\n記録ID：5a44ac5b15764900041b28c2\\n開始日時：2018/01/14 14:00\\n終了日時：2018/01/14 16:10\\n表題：朝日杯将棋オープン戦\\n棋戦：第11回朝日杯将棋オープン戦本戦\\n戦型：横歩取り△３三角型\\n持ち時間：各40分\\n消費時間：121▲40△40\\n場所：愛知県・東桜会館\\n振り駒：1,0,佐\\n計時方式：チェスクロック\\n秒読み：60秒\\n先手消費時間加算：0\\n後手消費時間加算：0\\n手合割：平手　　\\n先手：藤井聡太四段\\n後手：佐藤天彦名人\\n先手省略名：藤井聡\\n後手省略名：佐藤天\\n手数----指手---------消費時間--\\n*佐藤天彦名人に藤井聡太四段が挑む。第11回朝日杯将棋オープン戦（主催：朝日新聞社）本戦２回戦、佐藤天彦名人−藤井聡太四段戦は１月14日の14時に開始される。対局場は愛知県名古屋市「東桜会館」。持ち時間は各40分（チェスクロック使用）、切れると一分将棋。\\n*名古屋の公開対局の協賛は、東海東京証券、トーエネック、豊田自動織機、松坂屋名古屋店、明治。\\n*本局は本局は朝日新聞デジタル（主に現地大盤解説）、ニコニコ生放送、AbemaTVで動画中継が行われる。現地大盤解説会は木村一基九段・杉本昌隆七段・貞升南女流初段・中澤沙耶女流初段、ニコニコ生放送は井出隼平四段・塚田恵梨花女流１級、AbemaTVは三枚堂達也六段・佐々木大地四段・中村桃子女流初段・飯野愛女流１級が担当する。\\n*\\n*【第11回 朝日杯将棋オープン戦 名古屋対局｜朝日新聞デジタル】\\n*http://www.asahi.com/ad/asahihai2018/ \\n*\\n*【第11回朝日杯将棋オープン戦 本戦 佐藤天彦名人・永瀬拓矢七段・澤田真吾六段・藤井聡太四段 Cブロック - 2018/01/14 10:00開始 - ニコニコ生放送】\\n*http://live.nicovideo.jp/watch/lv310027714 \\n*\\n*【第11回朝日杯将棋オープン戦本戦トーナメント1-2回戦 | AbemaTV(アベマTV)】 \\n*https://abema.tv/channels/shogi/slots/9J1e3V9tVDdC95 \\n*\\n*(棋譜･コメント入力=紋蛇)\\n*[棋譜表示の*はコメント付きの指し手。#は局後の感想が追記された指し手。【】内は中継ブログタイトルならびにリンク]\\n   1 ２六歩(27)   ( 0:16/00:00:16)\\n*佐藤の振り歩先で振り駒が行われ、と金が４枚。藤井の先手が決まった。\\n   2 ３四歩(33)   ( 0:22/00:00:22)\\n*藤井が公式戦でタイトルホルダーと対戦するのは、本局が初めて。名人との対局とあって、報道陣がずらりと並んでいる。\\n   3 ７六歩(77)   ( 0:06/00:00:22)\\n*◆藤井 聡太（ふじい そうた）四段◆\\n*2002年７月19日生まれ、愛知県瀬戸市出身。杉本昌隆七段門下。2016年、四段。棋士番号は307。\\n   4 ８四歩(83)   ( 0:13/00:00:35)\\n*◆佐藤 天彦（さとう あまひこ）名人◆ 1988年１月16日生まれ、福岡県福岡市出身。中田功七段門下。2006年、四段。2016年、九段。棋士番号は263。 タイトル戦登場は４回。獲得は名人２期。棋戦優勝は３回。\\n   5 ２五歩(26)   ( 0:09/00:00:31)\\n*藤井の今年度成績は47勝11敗(0.810)\\n*通算成績は57勝11敗(0.838)\\n   6 ８五歩(84)   ( 0:16/00:00:51)\\n*佐藤の今年度成績は15勝15敗（0.500）\\n*通算成績は318勝145敗（0.687）\\n   7 ７八金(69)   ( 0:04/00:00:35)\\n*藤井は朝日杯に今回からの参加。一次予選で藤岡隼太アマ、大石直嗣六段、竹内雄悟四段、宮本広志五段を破って二次予選入り。二次予選で屋敷伸之九段、松尾歩八段を破って本戦に進んだ。本日行われた本戦１回戦では、澤田真吾六段を破った。\\n   8 ３二金(41)   ( 0:09/00:01:00)\\n*佐藤は本戦から登場し、１回戦で永瀬拓矢七段に勝った。朝日杯には第１回から参加し、14勝10敗(0.583)。本戦参加は第９、10回に続いてで、過去２回は１回戦で敗退している。\\n   9 ２四歩(25)   ( 0:04/00:00:39)\\n*朝日新聞デジタルでは、藤井の特集が多く組まれている。朝日杯全棋譜と解説、自宅でくつろぐ様子、藤井のライバルや名人戦・順位戦の説明など、盛りだくさんだ。\\n*\\n*【藤井四段、地元で初の公式戦へ　朝日杯将棋オープン戦：朝日新聞デジタル】\\n*https://www.asahi.com/articles/ASL1C3T6JL1COIPE00J.html \\n*\\n*【藤井聡太四段、朝日杯に挑む - 第11回朝日杯将棋オープン戦中継：朝日新聞デジタル】\\n*http://www.asahi.com/shougi/asahicup_live/fujii_souta/ \\n*\\n*【将棋｜名人への道 藤井聡太：朝日新聞デジタル】\\n*http://www.asahi.com/shougi/fujii_sota/ \\n*\\n*【藤井聡太に関するトピックス：朝日新聞デジタル】\\n*http://www.asahi.com/topics/word/%E8%97%A4%E4%BA%95%E8%81%A1%E5%A4%AA.html?iref=pc_extlink \\n  10 同　歩(23)   ( 0:10/00:01:10)\\n  11 同　飛(28)   ( 0:06/00:00:45)\\n  12 ８六歩(85)   ( 0:12/00:01:22)\\n  13 同　歩(87)   ( 0:07/00:00:52)\\n  14 同　飛(82)   ( 0:09/00:01:31)\\n  15 ３四飛(24)   ( 0:07/00:00:59)\\n*横歩取りへ。藤井は３局経験しているが、３連敗と苦戦している。\\n  16 ３三角(22)   ( 0:12/00:01:43)\\n*横歩取りは佐藤が名人獲得の原動力になった戦法。エースを新鋭との勝負に持ってきた。\\n  17 ５八玉(59)   ( 0:17/00:01:16)\\n*▲５八玉は今月６日の王位戦予選・大橋貴洸戦で指した手。ほかに▲６八玉と▲３六飛を指していた。▲５八玉は▲３六歩から▲３七桂の青野流を含みにしている。\\n  18 ６二玉(51)   ( 1:31/00:03:14)\\n*「これは佐藤名人が力戦に誘導しようとしていますね」（木村一基九段）\\n*△６二玉の前例は５局しかない。圧倒的に多いのは△５二玉だった。\\n*\\n*※局後の感想※\\n*「△６二玉は指してみたい手でした」（佐藤）\\n  19 ３六飛(34)   ( 3:47/00:05:03)\\n*３分47秒の考慮で▲３六飛。藤井は飛車を引く。穏やかな手で、突っ張るなら▲３六歩から▲３七桂が予想された。\\n  20 ８四飛(86)   ( 2:54/00:06:08)\\n*後手は△６二玉と上がったので、次は△７二銀や△７二玉から後手陣の右辺に囲うことになりそうだ。\\n  21 ３八金(49)   ( 3:01/00:08:04)\\n*先手は金開きに構える。\\n*「△２四飛に▲２七歩は、△８四飛と戻られて歩の打ち損です。▲２八銀と受けるのが形です」（木村九段）\\n*「以下△２七歩に、▲同銀は△８八角成▲同銀△５四角と攻められるので、▲３九銀と引いてどうか」（鈴木大介九段）\\n*\\n*※局後の感想※\\n*「▲３八金に代えて▲２六飛は、△８八角成▲同銀△４四角で先手不利です」（藤井）\\n  22 ９四歩(93)   ( 3:49/00:09:57)\\n  23 ９六歩(97)   ( 2:53/00:10:57)\\n  24 ７二銀(71)   ( 0:24/00:10:21)\\n  25 ４八銀(39)   ( 1:23/00:12:20)\\n  26 ２四飛(84)   ( 4:00/00:14:21)\\n*先手は４筋に銀を上がったので、２筋に歩を受けるしかない。\\n  27 ２八歩打     ( 1:06/00:13:26)\\n*低く受ける。形が悪いが、「▲２七歩は△８八角成▲同銀△５四角の筋が気になったのでしょう」と木村九段。\\n  28 ８四飛(24)   ( 1:48/00:16:09)\\n*歩を打たせたことに満足して、飛車をもとの位置に戻す。横歩取りは大駒の働きに加えて、持ち歩の数が重要。２筋に歩が打てないので、先手の攻め筋が減っている。後手が少しポイントを挙げた。\\n*「後手は玉を中住まいに戻すんじゃないかな」（木村九段）\\n  29 ７七桂(89)   ( 0:21/00:13:47)\\n*先手はどこに主張を求めるかが難しい。▲８七歩はさらに持ち歩が減るので、打ちにくかった。▲７七桂は△８六歩に▲８五歩を用意している。\\n  30 ５二玉(62)   ( 2:34/00:18:43)\\n*「ほら」（木村九段）\\n*「自分だったら浮かばないな」（鈴木九段）\\n*佐藤は玉を中住まいにした。木村九段が指摘していた構想だ。玉寄りは手損でも、先手に２筋の歩を打たせたのが大きいと見ている。\\n  31 ２六飛(36)   ( 3:38/00:17:25)\\n*飛車成りをどう受けるか、態度を尋ねた。持ち歩を温存するなら△２二銀。△４二銀と上がりたいなら△２三歩や△２四歩が考えられる。\\n*\\n*※局後の感想※\\n*▲２六飛に代えて▲５六飛△４二銀▲２六飛もあった。後手は４二に銀を上がっているので、２筋に歩を打って受けることになる。\\n  32 ２二銀(31)   ( 0:19/00:19:02)\\n  33 ５六飛(26)   ( 0:15/00:17:40)\\n*「先手は▲３六歩から▲３七桂で、２枚の桂を跳ねる攻めを狙うのでしょうか」（鈴木九段）\\n  34 ４二角(33)   ( 0:43/00:19:45)\\n*角を引き、あらかじめ▲３七桂から▲４五桂の当たりを避ける。△３三銀から△４四銀と中央に使えば、玉が堅い。\\n  35 ７五歩(76)   ( 1:08/00:18:48)\\n*飛車の可動域を広げた。▲８五歩△２四飛▲８六飛と使うのかもしれない。\\n  36 ４一玉(52)   ( 1:15/00:21:00)\\n*さらに玉を後手陣の左辺に進める。代えて△６四歩は、▲８五歩で△８二飛と引く手に限定された。\\n  37 ８五歩打     ( 1:10/00:19:58)\\n  38 ２四飛(84)   ( 0:17/00:21:17)\\n*互いに模様の取り方が難しい。横歩取りは研究将棋になりやすい戦型だが、本局は力戦形。構想力が問われている。\\n  39 ３六歩(37)   ( 0:28/00:20:26)\\n  40 ３三銀(22)   ( 0:47/00:22:04)\\n  41 ３七桂(29)   ( 0:13/00:20:39)\\n*眠っていた桂を使った。\\n  42 ４四銀(33)   ( 1:15/00:23:19)\\n*▲４五桂を先に受ける。後手は７二銀と６一金を使いにくいのが課題。\\n  43 ８四歩(85)   ( 0:34/00:21:13)\\n*飛車の横利きが止まったのを見て、すかさず伸ばす。\\n  44 ８二歩打     ( 0:28/00:23:47)\\n*▲８三歩成△同銀▲８二歩を受けた。後手は歩を手放したので、主張が減っている。\\n  45 ４六歩(47)   ( 0:50/00:22:03)\\n  46 ３三桂(21)   ( 0:22/00:24:09)\\n  47 ４七銀(48)   ( 1:19/00:23:22)\\n*木村九段と鈴木九段は、先手の模様がよいと見ている。\\n*「後手も歩を手放したから、そうなると歩得の先手がよく見えます」（鈴木九段）\\n*「４七銀の形ができているからなぁ。後手のほうが駒組みに苦労しそうです」（木村九段）\\n  48 ６四歩(63)   ( 5:22/00:29:31)\\n*先手は▲２七歩や▲６八銀など、指したい手が多い。後手は△６三銀と上がれない。▲８三歩成△同歩▲８二歩と攻められてしまう。しかし、このままでは７二銀と６一金が使えない。\\n*\\n*※局後の感想※\\n*△６四歩に代えて△２五桂だったか。佐藤は▲同桂△同飛▲３七桂で後手がつまらないと見た。以下△７五飛は▲９七角△７四飛▲４五歩△３三銀▲６五桂で中央突破できる先手がよいが、△２四飛▲６五桂△５二金▲４五桂△６一桂は難しい。\\n  49 ７六飛(56)   ( 1:19/00:24:41)\\n*先手は角を９七に使うことになりそうか。左辺だけ見れば石田流の形である。\\n  50 ５四歩(53)   ( 1:28/00:30:59)\\n*「▲７四歩と来てくれれば、△同歩▲同飛△６三銀▲７六飛△７四歩▲８三歩成△同歩▲８二歩と勝負できるかもしれないですが。このままだと、金銀が使えません」（鈴木九段）\\n  51 ６八銀(79)   ( 0:54/00:25:35)\\n*先手は７筋の壁を解消でき、強く戦えるようになった。\\n  52 １四歩(13)   ( 1:05/00:32:04)\\n*※局後の感想※\\n*△１四歩に代えて△５五歩は、▲５六歩で反発される。\\n*「後手は厚みがないので。▲５六歩に指したい手がないです」（佐藤）\\n  53 ５六歩(57)   ( 1:08/00:26:43)\\n  54 ３五歩打     ( 1:15/00:33:19)\\n*「勝負手だ」「機敏だ」「待っていたんだよ、飛車の利きが止まるのを」「難しくなったか」\\n*木村九段と鈴木九段が声をそろえる。▲３五同歩は△同銀▲３六歩△２六銀で、△３七銀成▲同金△２八飛成や△２七歩が受からない。▲５六歩を突かないで飛車の横利きを通していれば、３五に銀が来ても▲４五歩と軽く受けることができた。\\n*15時ごろの局面。現局面までの消費時間は▲藤井26分、△佐藤33分。\\n  55 ８五桂(77)   ( 3:05/00:29:48)\\n*角を働かせて攻めを待つ。\\n  56 ３六歩(35)   ( 0:41/00:34:00)\\n  57 同　銀(47)   ( 0:10/00:29:58)\\n  58 ３四飛(24)   ( 0:25/00:34:25)\\n*本格的な戦いが始まった。▲４七銀は△３六歩がある。\\n  59 ２七金(38)   ( 1:52/00:31:50)\\n*金を上がってヒモをつける。\\n*木村九段と鈴木九段は先手持ちだ。後手のほうが陣形が悪いという。ポイントを奪えば、一気に先手は押し切れそうだ。後手は玉が薄く、粘りにくい。\\n*\\n*※局後の感想※\\n*「▲２七金と上がられてひと押しがなかった。後手の動きは大したことがなかったですか」（佐藤）\\n  60 ３五歩打     ( 2:14/00:36:39)\\n*後手は歩切れに。先手は２歩を手持ちにしている。\\n  61 ４七銀(36)   ( 0:19/00:32:09)\\n*後手に１歩あれば△２四飛から△２六歩だが……。後手は手が難しい。\\n  62 ６五歩(64)   ( 1:07/00:37:46)\\n  63 ５七銀(68)   ( 0:31/00:32:40)\\n*「後手がきつい」と木村九段。先手は▲４五歩の攻めが楽しみだ。△同桂は▲同桂△同銀▲１一角成で駒得になるし、△５三銀は▲４六銀左から▲２六金や▲７九角で３五を突破される。\\n  64 ５二玉(41)   ( 1:48/00:39:34)\\n*佐藤は自分から動くことはできない。決戦に備えて、少しでも玉形を整えたい。\\n  65 ６八金(78)   ( 1:49/00:34:29)\\n*金を玉に近づけた。△８七銀の筋には気をつけたい。\\n*\\n*※局後の感想※\\n*▲６八金に代えて▲４五歩は、△５三銀▲４六銀左△６四銀▲９七角が並べられた。\\n  66 ６二金(61)   ( 0:23/00:39:57)\\n*玉の脇腹を締める。遊び駒に玉を近づけたことで、金銀が守り駒に昇格した。\\n  67 ７九飛(76)   ( 3:30/00:37:59)\\n*じっと手を渡す。互いに動きが難しくなってきたか。鈴木九段は形勢互角と判定している。\\n  68 ２三金(32)   ( 0:03/00:40:00)\\n*佐藤は持ち時間を使いきった。\\n  69 ４五歩(46)   ( 0:27/00:38:26)\\n*△４五同桂▲同桂△同銀は▲１一角成で先手の駒得。\\n  70 ５三銀(44)   ( 0:00/00:40:00)\\n*「銀多伝でどうですか。▲４六銀左に△２四金と３五を強化したら、いきなり▲９五歩から端攻めして、▲２六桂の飛車の捕獲を狙います」（鈴木九段）\\n  71 ７四歩(75)   ( 1:34/00:40:00)\\n*藤井も持ち時間を使いきった。ここから一分将棋の叩き合いだ。\\n*「７筋を突き捨てて、▲４六銀左に△５五歩から△８四飛を消すつもりですか」（鈴木九段）\\n  72 同　歩(73)   ( 0:00/00:40:00)\\n  73 ４六銀(57)   ( 0:00/00:40:00)\\n*銀が縦に並んだ形は、お互いの死角を消して好形だ。後手の飛車が狭い。▲３六歩から２七金を使って飛車を狙われそうだ。\\n*「先手が形勢よしと見て、後手の勝負手を消しながら丁寧に指している印象です」（鈴木九段）\\n  74 ５五歩(54)   ( 0:00/00:40:00)\\n*佐藤は苦しくなったといわれている。先手の陣形が厚い。\\n*\\n*※局後の感想※\\n*△５五歩に代えて、藤井の指摘した△２四金がまさったか。▲７三歩△６三銀▲８三歩成△同歩▲８二歩で、▲２六桂の飛車の捕獲を狙われるが、▲８二歩に△２六歩▲同金△２五歩▲２七金△７三桂▲同桂成△同金▲５七銀△２三金▲４六桂△２四飛▲３四歩△同金▲同桂△同飛で、佐藤は「このほうが粘りがありましたか」と話す。先手は歩切れなので、もうひと押しがあるかは明快ではない。\\n  75 同　角(88)   ( 0:00/00:40:00)\\n*後手は飛車を５四に逃げられるようになった。\\n  76 ６四銀(53)   ( 0:00/00:40:00)\\n*▲８二角成を受ける。\\n  77 ８八角(55)   ( 0:00/00:40:00)\\n  78 ７五歩(74)   ( 0:00/00:40:00)\\n*鈴木九段は▲４四歩を指摘している。△同歩に▲４五歩の継ぎ歩攻めや▲３六歩とすれば、４六の銀に活が入る。\\n  79 ４四歩(45)   ( 0:00/00:40:00)\\n  80 同　歩(43)   ( 0:00/00:40:00)\\n  81 ３六歩打     ( 0:00/00:40:00)\\n*後手は玉の近くに飛車角がいる悪形だ。玉は６三に行きたいが、▲４三銀のキズができてしまう。\\n  82 同　歩(35)   ( 0:00/00:40:00)\\n  83 同　金(27)   ( 0:00/00:40:00)\\n*「△２四飛が痛いかと思いきや、▲２九飛がぴったりですか」（鈴木九段）\\n  84 ２四飛(34)   ( 0:00/00:40:00)\\n  85 ２九飛(79)   ( 0:00/00:40:00)\\n*▲７九飛を生かした受け。先手陣に遊び駒がない。次に▲３五銀がある。「先手がさらに一本取っています」と鈴木九段。先手優勢だ。しかも、ただのリードではない。先手は玉が厚い。将棋は逆転勝ちが多いゲームだが、先手に嫌みがないと焦らせることができない。このまま藤井が手堅く押し切る可能性も高い。\\n*\\n*※局後の感想※\\n*藤井は▲７九飛と引いたあたりから、▲２九飛と使うのを考えていたという。つまり、▲７九飛は▲３六歩△同歩▲同金の活用を狙い、△２四飛に▲２九飛を用意した意味だった。\\n  86 ３四歩打     ( 0:00/00:40:00)\\n*▲３五銀を受ける。佐藤はひたすら辛抱の時間だ。\\n  87 ３五歩打     ( 0:00/00:40:00)\\n*相手が守ったところを、すぐこじ開けにいった。\\n*\\n*※局後の感想※\\n*▲３五歩に代えて▲２七歩△６三玉▲２六歩△１五歩▲２五歩も先手有力。「これもきついです」と佐藤。\\n  88 ６三玉(52)   ( 0:00/00:40:00)\\n*玉の逃走を開始。中段玉で粘れるか。\\n  89 ３四歩(35)   ( 0:00/00:40:00)\\n  90 同　金(23)   ( 0:00/00:40:00)\\n*▲３五歩に△４五金と勝負してどうか。駒損を甘受してでも、さばくしかない。\\n  91 ４三歩打     ( 0:00/00:40:00)\\n*△３一角は３三の桂が浮き、▲３五歩に△４五金がやりにくくなる。８八の角を３三に成られては、大駒が狭い。\\n*\\n*※局後の感想※\\n*▲４三歩では▲３五歩も有力だった。以下△４五金に▲同桂△同歩▲５五銀と進める。\\n  92 ５三角(42)   ( 0:00/00:40:00)\\n  93 ３五歩打     ( 0:00/00:40:00)\\n*藤井がさらに優位を拡大するか、それとも佐藤が踏みとどまって押し返すのか。勝負どころだ。\\n  94 ２五金(34)   ( 0:00/00:40:00)\\n*金は五段目でも、２五に出る。桂を手に入れて、△７六桂と打つのが狙いのようだ。\\n*\\n*※局後の感想※\\n*△２五金に代えて△４五歩は、▲３四歩△４六歩▲同銀△３四飛▲３五歩△４四飛▲４二歩成が一例。▲４二歩成に△同飛は▲３三角成、△４二同角は▲４四角で先手よしだが、歩を成った瞬間は甘い。しかし、感想戦で後手に有力手は見つからなかった。\\n  95 同　桂(37)   ( 0:00/00:40:00)\\n  96 同　桂(33)   ( 0:00/00:40:00)\\n*先手は金桂交換の駒得。藤井は模様だけでなく、実利も手にした。\\n  97 ４二歩成(43) ( 0:00/00:40:00)\\n  98 同　角(53)   ( 0:00/00:40:00)\\n  99 ３四歩(35)   ( 0:00/00:40:00)\\n*△３四同飛は▲２五金だ。△７六桂は▲４四角と軽やかにさばいてどうか。\\n*\\n*※局後の感想※\\n*「▲３四歩に代償がなかったです」（佐藤）\\n 100 ６六歩(65)   ( 0:00/00:40:00)\\n*佐藤はアヤをつけるしかない。まずは玉のコビンに手をつける。\\n*\\n*※局後の感想※\\n*△６六歩に代えて△７六桂は、▲４四角から▲５四金を狙われて受けにくい。\\n 101 同　角(88)   ( 0:00/00:40:00)\\n 102 ５四桂打     ( 0:00/00:40:00)\\n*「この両取りはうれしくありません。差が開いていると思います」（脇謙二八段）\\n 103 ５七角(66)   ( 0:00/00:40:00)\\n*角を出なかった。△４六桂に▲同角が飛車取り。一時的に自陣に戻っても、後手は駒損を回復しようとすれば、一気に角が働き。\\n 104 ７三桂(81)   ( 0:00/00:40:00)\\n*桂をぶつけて手駒を増やしにいった。△６五桂と打てれば、先手に嫌みが出てくる。\\n 105 ５五銀(46)   ( 0:00/00:40:00)\\n*天王山に銀を出た。飛車取りにもなっている。\\n 106 同　銀(64)   ( 0:00/00:40:00)\\n 107 同　歩(56)   ( 0:00/00:40:00)\\n*「△６五桂▲２四角△同角▲２三飛△３三銀▲同歩成に△６八角成と勝負しますか」（鈴木九段）\\n*それを先手が嫌うなら、▲５四歩△５七桂成▲同金とするほうが手堅いようだ。\\n 108 ６五桂(73)   ( 0:00/00:40:00)\\n 109 ５四歩(55)   ( 0:00/00:40:00)\\n*鈴木九段が推奨していた▲５四歩。△５七桂成と角を取られても、▲同金で厚い玉形がキープされている。\\n 110 ５七桂成(65) ( 0:00/00:40:00)\\n 111 同　金(68)   ( 0:00/00:40:00)\\n*盤上にいる駒の数が兵力差につながっている。後手は先手に迫れない。\\n 112 ７六歩(75)   ( 0:00/00:40:00)\\n 113 ６五金打     ( 0:00/00:40:00)\\n*玉をしばった。「手厚いねぇ」と脇八段。△７五角を消して手堅い。\\n 114 １七桂(25)   ( 0:00/00:40:00)\\n*飛車取りだが、手抜いてしばるのも有力だ。\\n*「こういうのは取るんですか」（鈴木九段）\\n*「昔は取らなかったけど、最近は取るんですよ」（杉本七段）\\n 115 同　香(19)   ( 0:00/00:40:00)\\n*落ち着いて駒を補充。\\n 116 １八角打     ( 0:00/00:40:00)\\n*飛車を逃げれば△２八飛成で逆転。\\n 117 ４三銀打     ( 0:00/00:40:00)\\n*頃はよしと詰めろをかける。\\n 118 ６一銀(72)   ( 0:00/00:40:00)\\n*▲５五桂の詰めろを受ける。\\n 119 ４二銀成(43) ( 0:00/00:40:00)\\n 120 ２九角成(18) ( 0:00/00:40:00)\\n*後手玉に即詰みがある。\\n 121 ８一角打     ( 0:00/00:40:00)\\n*△７二銀は▲７五桂まで。△７二金は▲同角成△同玉▲６四桂△６二玉▲７四桂△７一玉▲８二桂成△同玉▲７四桂△７一玉▲８二金までの詰み。\\n*この局面で佐藤が投了。藤井が名人をくだした。終局時刻は16時10分。消費時間は、▲藤井40分、△佐藤40分。\\n*藤井はベスト４に進出し、準決勝で羽生善治竜王と対戦する。その対局は２月17日に東京都千代田区「有楽町朝日ホール」で行われる。\\n*\\n*※局後の感想※\\n*「ちょっとずつポイントを失った気がします。歩切れになって、△５二玉から△６二金と狙いのない手を指す状態になっては苦しいと感じました。厚みを失っていく展開になったので、△５五歩では△２四金のほうがよかったです」（佐藤）\\n*「難しいと思っていましたが、▲２九飛と回って指しやすくなりました」（藤井）\\n 122 投了         ( 0:00/00:40:00)\\nまで121手で先手の勝ち\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/第11回朝日杯将棋オープン戦本戦.kif\n// module id = FyVW\n// module chunks = 1","module.exports = __webpack_public_path__ + \"static/media/flip_sound.df51ba2.wav\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/flip_sound.wav\n// module id = G1k4\n// module chunks = 1 2","module.exports = \"| 名前                        | 意味                        | 備考                                                                        | 初期値      | .sync |\\n|-----------------------------|-----------------------------|-----------------------------------------------------------------------------|-------------|-------|\\n| `run_mode`                    | 実行モード                  | `view_mode`:再生 `play_mode`:操作 編集:`edit_mode`。                              | 'view_mode' | ○    |\\n| `human_side_key`              | 人間が操作する側            | play_mode 時のみ有効 `both`, `black`, `white`, `none`                                | 'both'      |       |\\n| `kifu_body`                   | 棋譜の本体                  | KIF と SFEN に対応。駒落ちは SFEN のみ                                      | null        |       |\\n| `kifu_url`                    | 棋譜ファイルURL             |                                                                             | null        |       |\\n| `theme`                       | テーマ名                    | `none`:なし `simple`:シンプル `real`:木目                                         | 'real'      | ○    |\\n| `bg_variant`                  | realテーマの背景            | a .. z                                                                      | 'a'         | ○    |\\n| `piece_variant`               | realテーマの駒種            | a .. b                                                                      | 'a'         | ○    |\\n| `size`                        | 盤面の大きさ                | `none` `xx-small` `x-small` `small` `default` `medium` `large` `x-large` `xx-large` `xxx-large` | 'default'   | ○    |\\n| `start_turn`                  | N手目の局面から表示         | 例 0:開始前 1:初手 -1:投了図 -2:投了一手前                                  | -1          | ○    |\\n| `slider_show`                 | 局面スライダー表示          |                                                                             | false       |       |\\n| `controller_show`             | 前後移動用のボタン類の表示  |                                                                             | false       |       |\\n| `sfen_show`                   | 局面を sfen で表示          | 主に局面ペディア用                                                          | false       |       |\\n| `overlay_navi`                | 盤上の左右で前後操作        | 無効にするとview_modeで駒操作できる                                         |             |       |\\n| `sound_effect`                | 駒音の有無                  |                                                                             | false       |       |\\n| `volume`                      | 駒音の大きさ                | 0 から 1.0                                                                  | 0.5         |       |\\n| `key_event_capture`           | キーボード操作を監視        | どこにもフォーカスしていないときでも左右キーが反応                          | false       |       |\\n| `polling_interval`            | ポーリング間隔(秒)          | 1以上で有効。30 なら30秒間隔で kifu_url を読み直す                          | 0           |       |\\n| `shift_key_mag`               | shiftキー押下時の倍速       | 1 または null 指定で無効にできる                                            | 10          |       |\\n| `system_key_mag`              | システムキー押下時の倍速    | 1 または null 指定で無効にできる                                            | 50          |       |\\n| `url_embed_turn`              | URLのハッシュに手番を埋める | 固定URLを作りたいときの実験用の機能                                         | false       |       |\\n| `debug_mode`                  | デバッグモード              | 主に開発用                                                                  | false       | ○    |\\n| `flip`                        | 盤面を反転する              | △が下にくる                                                                | false       | ○    |\\n| `vlayout`                     | 配置を縦並びにする          | スマホ向き用レイアウト                                                      | false       | ○    |\\n| `digit_show`                  | 盤面の側面に位置を表示      | 上に数字、右端に漢数字を表示する                                            | false       |       |\\n| `final_label`                 | 結果の文字列                | 空だと「○の勝ち」                                                          | null        |       |\\n| `preset_key`                  | 盤面の初期配置              | kifu_body の代わりに指定するとその配置になる                                | null        |       |\\n| `hidden_if_piece_stand_blank` | 持駒がないときは駒台非表示  | view_mode のみ                                                              | false       |       |\\n| `setting_button_show`         | 設定ボタンの表示            | 右端にあるドット3つのアレ(ボタンなのか？)                                   | true        |       |\\n| `summary_show`                | まで○手で○の勝ちの表示    | 盤の上にある○手                                                            | true        |       |\\n| `operation_disable`           | 操作をすべて無効化する      | 無効化すると @click イベントだけが反応する。ショートカットキーも無効化する  | false       |       |\\n| `player_info`                 | 対局者名                    | `{'black': {name: 'xxx'}, 'white': {name: 'xxx'}` 形式                        | null        |       |\\n\\n<br>\\n\\n<article class=\\\"message is-info\\\">\\n  <div class=\\\"message-header\\\">\\n    <p>備考</p>\\n  </div>\\n  <div class=\\\"message-body\\\">\\n    <ul>\\n      <li>kifu_body も preset_key も指定がない場合は `position startpos` (平手) が初期配置になります</li>\\n      <li>`kifu_url` や `kifu_body` をあとから変更したときも同期して再読み込みします</li>\\n      <li>`theme` や `size` の値に `none` を指定したときは何もスタイルを設定しません</li>\\n    </ul>\\n  </div>\\n</article>\\n\\n<article class=\\\"message is-warning\\\">\\n  <div class=\\\"message-header\\\">\\n    <p>注意点</p>\\n  </div>\\n  <div class=\\\"message-body\\\">\\n    `key_event_capture` は副作用があります。有効にするとどこにもフォーカスしていないときでも左右ボタンに反応するようになって便利な面もありますが、他のプログラムの操作を奪ってしまうことになるかもしれません。そのため基本は false にしておいた方がよいです。\\n  </div>\\n</article>\\n\\n## イベント\\n\\n| 名前                                        | 意味                                           | 備考                                                              |\\n|---------------------------------------------|------------------------------------------------|-------------------------------------------------------------------|\\n| `update:mediator_snapshot_sfen`            | 操作モードの盤面の状態                         | コントローラーで手を戻しても変化する。view_mode でも呼ばれる      |\\n| `update:play_mode_advanced_full_moves_sfen` | 操作モードで指した直後の局面を発行(movesあり)  |                                                                   |\\n| `update:play_mode_advanced_snapshot_sfen`   | 操作モードで指した直後の局面を発行(movesなし)  |                                                                   |\\n| `update:play_mode_advanced_last_move`       | 操作モードで指した手(sfenのmovesの最後の1つ)   |                                                                   |\\n| `update:play_mode_advanced_moves`           | 操作モードで指した手の配列   |                                                                   |\\n| `update:edit_mode_snapshot_sfen`            | 編集モードの局面                               | play_mode でも呼ばれるので注意                                    |\\n| `update:start_turn`                         | 手数が変更されたとき                           | start_turn に -1 が指定されたとき必ず呼ばれるので名前変更するかも |\\n| `update:turn_offset`                        | 手数が変更されたとき                           | マイナスにはならない。start_turn と被るので追加。                 |\\n| `update:run_mode`                           | 設定ダイアログでモードが変更されたとき         |                                                                   |\\n| `update:kifu_body`                          | 設定ダイアログで棋譜が変更されたとき           |                                                                   |\\n| `update:debug_mode`                         | 設定ダイアログでデバッグモードが変更されたとき |                                                                   |\\n| `update:flip`                               | 盤面を反転したとき                             |                                                                   |\\n| `update:vlayout`                            | レイアウトを変更したとき                       |                                                                   |\\n| `update:theme`                              | テーマ変更                                     |                                                                   |\\n| `update:bg_variant`                         | 背景の種類変更                                 |                                                                   |\\n| `update:piece_variant`                      | 駒の種類変更                                   |                                                                   |\\n| `update:size`                               | サイズ変更                                     |                                                                   |\\n| `board_cell_left_click_user_handle`         | セルをクリックしたとき                         | place が来るのでどこをクリックしたかわかる                        |\\n| `xxx.native`                                | 任意のイベント (例: `click.native`)            | click の場合はだいたい `operation_disable` と組み合わせる         |\\n\\n## Slot\\n\\n| 名前      | 引数           | 場所                                   |\\n|-----------|----------------|----------------------------------------|\\n| `sfen_part` | `sfen`, `mediator` | sfen_show のときに表示する sfen の部分 |\\n\\n## 内部変数 (読み取り専用)\\n\\n| 名前      | 意味                                                                             |\\n|-----------|----------------------------------------------------------------------------------|\\n| `turn_offset`     | 現在の局面の手数で start_turn に -1 を指定したときは最後の局面の手数になっている |\\n| `turn_offset_min` | 局面手数スライダーの最小値。常に0 |\\n| `turn_offset_max` | 局面手数スライダーの最大値。指し手が 2 つあれば 2 |\\n| `turn_base`       | 普通は 0 だけど sfen で 'b - 10' の指定があったときは 9 になっている。この変数は外から見る必要はない\\n\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/options.md\n// module id = GL4m\n// module chunks = 1","import Vue from \"vue\"\nimport _ from 'lodash'\nimport Board from './board'\nimport Place from './place'\nimport Piece from './piece'\nimport Location from './location'\n\nexport default class Soldier {\n  static random(params = {}) {\n    let place = params.place\n    if (!place) {\n      const x = _.random(0, Board.dimension - 1)\n      const y = _.random(0, Board.dimension - 1)\n      place = Place.fetch([x, y])\n    }\n\n    const piece = Piece.fetch(_.random(0, Piece.values.length - 1))\n    const promoted = piece.promotable_p && _.random(0, 1) === 0\n\n    const location = Location.fetch(_.random(0, Location.values.length - 1))\n\n    return new this({piece: piece, place: place, promoted: promoted, location: location})\n  }\n\n  constructor(attributes) {\n    this.attributes = Object.assign({}, attributes)\n  }\n\n  get piece() {\n    return this.attributes.piece\n  }\n\n  set place(place) {\n    Vue.set(this.attributes, \"place\", place)\n  }\n\n  get place() {\n    return this.attributes.place\n  }\n\n  get location() {\n    return this.attributes.location\n  }\n\n  get promoted() {\n    return !!this.attributes.promoted\n  }\n\n  set promoted(v) {\n    Vue.set(this.attributes, \"promoted\", v)\n  }\n\n  get name() {\n    if (this.promoted) {\n      return this.piece.promoted_name\n    }\n    return this.piece.name\n  }\n\n  get piece_transform() {\n    let attrs = null\n    if (this.piece.promotable_p) {\n      if (this.promoted) {\n        attrs = {location: this.location.flip, promoted: !this.promoted}\n      } else {\n        attrs = {promoted: !this.promoted}\n      }\n    } else {\n      attrs = {location: this.location.flip}\n    }\n    return new Soldier(Object.assign({}, this.attributes, attrs)) // FIXME: this() でいける？\n  }\n\n  get promotable_p() {\n    if (this.piece.promotable_p && !this.promoted) { // 成れるのに成ってなくて\n      return this.danger_zone_p\n    }\n  }\n\n  get danger_zone_p() {\n    if (this.location.key === \"black\") {\n      return this.place.y < Board.danger_zone_size\n    } else {\n      return this.place.y >= (Board.dimension - Board.danger_zone_size)\n    }\n  }\n\n  get to_class_list() {\n    let list = []\n    list.push(`location_${this.location.key}`)\n    list.push(`promoted_${this.promoted}`)\n    list = _.concat(list, this.piece.css_class_list)\n    return list\n  }\n\n  // 自分の側の一番下を0としてどれだけ前に進んでいるかを返す\n  get bottom_spaces() {\n    return Board.dimension - 1 - this.top_spaces\n  }\n\n  // 自分の側の一番上を0としてあとどれだけで突き当たるかの値\n  get top_spaces() {\n    return this.place.flip_if_white(this.location).y\n  }\n}\n\nif (process.argv[1] === __filename) {\n  const soldier = new Soldier({\n    place: new Place([1, 7]),\n    piece: Piece.fetch(\"P\"),\n    promoted: true,\n    location: Location.fetch(\"white\"),\n  })\n  console.log(soldier.name)\n  console.log(soldier.top_spaces)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/soldier.js","import Vuex from \"vuex\"\n\n// ここで Vue.use(Vuex) すると利用する側と干渉するので注意\n\nconst store = () => new Vuex.Store({\n  state: {\n    current_flip: false,                // 反転したか？\n    current_vlayout: false,             // 縦レイアウト\n    current_debug_mode: false,\n    current_theme: null,\n    current_size: null,\n    current_bg_variant: null,\n    current_piece_variant: null,\n  },\n  mutations: {\n    // this.$store.commit(\"flip_toggle\") として呼び出す\n    flip_toggle(state) {\n      state.current_flip = !state.current_flip\n    },\n\n    // this.$store.commit(\"current_debug_mode_set\", true)\n    current_debug_mode_set(state, payload) {\n      state.current_debug_mode = payload\n      // ここで呼び出しても意味ない。効き目なし。\n      this.$emit(\"update:debug_mode\", payload)\n    },\n  },\n})\n\nexport default store\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/index.js","import _ from \"lodash\"\n\nimport Board from \"./board\"\n\nexport default class Place {\n  static fetch(v) {\n    if (v instanceof this) {\n      return v\n    }\n    return Object.freeze(new Place(v))\n  }\n\n  static xy_valid_p(x, y) {\n    return 0 <= x && x < Board.dimension && 0 <= y && y < Board.dimension\n  }\n\n  constructor(value) {\n    let x, y\n    if (_.isString(value)) {\n      [x, y] = this._parse_from_string(value)\n    } else {\n      [x, y] = value            // valus is array\n    }\n    [this._x, this._y] = [x, y]\n  }\n\n  get key() {\n    return [this._x, this._y].toString()\n  }\n\n  get x() {\n    return this._x\n  }\n\n  get y() {\n    return this._y\n  }\n\n  get human_x() {\n    return Board.dimension - this._x\n  }\n\n  get kanji_human_x() {\n    return {1: \"１\", 2: \"２\", 3: \"３\", 4: \"４\", 5: \"５\", 6: \"６\", 7: \"７\", 8: \"８\", 9: \"９\"}[this.human_x]\n  }\n\n  get kanji_human_y() {\n    return {1: \"一\", 2: \"二\", 3: \"三\", 4: \"四\", 5: \"五\", 6: \"六\", 7: \"七\", 8: \"八\", 9: \"九\"}[this.human_y]\n  }\n\n  get human_y() {\n    return this._y + 1\n  }\n\n  get flip_all() {\n    return Place.fetch([Board.dimension - 1 - this._x, Board.dimension - 1 - this._y])\n  }\n\n  get flip_h() {\n    return Place.fetch([Board.dimension - 1 - this._x, this._y])\n  }\n\n  flip_if_white(location) {\n    if (location.key === \"white\") {\n      return this.flip_all\n    } else {\n      return this\n    }\n  }\n\n  _parse_from_string(s) {\n    s = s.replace(/([１-９一二三四五六七八九a-z])/g, (e) => this._replace_table[e])\n    const [x, y] = s.split(\"\").map((e) => Number(e))\n    return [Board.dimension - x, y - 1]\n  }\n\n  get _replace_table() {\n    /* eslint-disable object-property-newline, key-spacing */\n    return {\n      \"１\": 1, \"２\": 2, \"３\": 3, \"４\": 4, \"５\": 5, \"６\": 6, \"７\": 7, \"８\": 8, \"９\": 9,\n      \"一\": 1, \"二\": 2, \"三\": 3, \"四\": 4, \"五\": 5, \"六\": 6, \"七\": 7, \"八\": 8, \"九\": 9,\n      \"a\":  1, \"b\":  2, \"c\":  3, \"d\":  4, \"e\":  5, \"f\":  6, \"g\":  7, \"h\":  8, \"i\":  9,\n    }\n  }\n\n  get to_sfen() {\n    const y_table = [\"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\", \"h\", \"i\"]\n    return [Board.dimension - this._x, y_table[this._y]].join(\"\")\n  }\n\n  get to_css_class() {\n    return `place_${this.human_digits}`\n  }\n\n  get human_xy_ary() {\n    return [this.human_x, this.human_y]\n  }\n\n  get human_digits() {\n    return this.human_xy_ary.join(\"\")\n  }\n\n  get kanji_human() {\n    return [this.kanji_human_x, this.kanji_human_y].join(\"\")\n  }\n\n  // x, y を足した新しい位置を返す\n  // はみでたのは反対側の座標とする\n  rotate_add(x, y) {\n    const nx = this.__new_pos(this._x, x)\n    const ny = this.__new_pos(this._y, y)\n    return Place.fetch([nx, ny])\n  }\n\n  // private\n  __new_pos(origin, v) {\n    return Math.trunc((origin + v + Board.dimension) % Board.dimension) // (x + 1).modulo(dimension)\n  }\n\n}\n\nif (process.argv[1] === __filename) {\n  console.log(Place.fetch(\"6a\").key)\n  console.log(Place.fetch([1, 2]).key)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/place.js","import _ from \"lodash\"\nimport Vue from \"vue\"\n\nimport Board from \"./board\"\nimport Place from \"./place\"\nimport Piece from \"./piece\"\nimport Soldier from \"./soldier\"\nimport SfenParser from \"./sfen_parser\"\nimport SfenSerializer from \"./sfen_serializer\"\nimport PresetInfo from \"./preset_info\"\nimport Location from \"./location.js\"\n\nexport default class Mediator {\n  constructor() {\n    const data_source = new SfenParser()\n    data_source.kifu_body = \"position startpos\"\n    data_source.parse()\n\n    this.data_source = data_source\n    this.current_turn = 0\n    this.board = null\n    this.hold_pieces = null\n    this.last_hand = null\n    this.piece_box = {}\n\n    this.env = process.env.NODE_ENV\n  }\n\n  run() {\n    this.board = this.data_source.board\n    this.hold_pieces = this.data_source.hold_pieces\n    this.last_hand = null\n\n    const move_infos = this.data_source.move_infos\n\n    const num = this.turn_offset - this.turn_offset_min\n    _(num).times((i) => { this.execute_one(move_infos[i]) })\n  }\n\n  execute_one(m) {\n    this.last_hand = m\n    if (m.drop_piece) {\n      const soldier = new Soldier({\n        piece: m.drop_piece,\n        place: m.place,\n        promoted: m.promoted,\n        location: m.location,\n      })\n      this.hold_pieces_add(m.location, soldier.piece, -1)\n      this.board.place_on(soldier)\n    } else {\n      {\n        const soldier = this.board.lookup(m.place)\n        if (soldier) {\n          this.hold_pieces_add(m.location, soldier.piece, 1)\n        }\n      }\n      const soldier = this.board.lookup(m.origin_place)\n      if (m.promoted_trigger) {\n        soldier.promoted = true\n      }\n      soldier.place = m.place\n      this.board.delete_at(m.origin_place)\n      this.board.place_on(soldier)\n    }\n  }\n\n  hold_pieces_count(location, piece) {\n    return this.hold_pieces[location.key][piece.key] || 0\n  }\n\n  hold_pieces_add(location, piece, plus = 1) {\n    const count = this.hold_pieces_count(location, piece) + plus\n    const counts_hash = this.hold_pieces[location.key]\n\n    // 次のように書いた場合、ハッシュの値(count)がいくら変化してもそのタイミングではトリガーが発生しない\n    //\n    //   if (count >= 1) {\n    //     Vue.set(counts_hash, piece.key, count) // ←ここが問題\n    //   } else {\n    //     Vue.delete(counts_hash, piece.key)\n    //   }\n    //\n    // そこで count を更新するときは「キーが新規で追加」されたことでトリガーを発生させるようにする\n    // つまり count を更新するときは「キー削除」→「キー追加」とする\n\n    Vue.delete(counts_hash, piece.key)\n    if (count >= 1) {\n      Vue.set(counts_hash, piece.key, count)\n    }\n  }\n\n  // location の piece を count 減らしたいとき本当に減らせる数を返す\n  hold_pieces_can_be_reduced_count(location, piece, count) {\n    const max = this.hold_pieces_count(location, piece)\n    if (count > max) {\n      count = max\n    }\n    return count\n  }\n\n  board_safe_delete_on(place) {\n    this.board.delete_at(place)\n  }\n\n  board_piece_fore_class(xy) {\n    const place = Place.fetch(xy)\n    const soldier = this.board.lookup(place)\n\n    if (soldier) {\n      return soldier.to_class_list\n    }\n\n    return []\n  }\n\n  cell_piece_class(xy) {\n    const place = Place.fetch(xy)\n    const soldier = this.board.lookup(place)\n    let list = []\n    if (soldier) {\n      list.push(`location_${soldier.location.key}`)\n    }\n    return list\n  }\n\n  cell_view(xy) {\n    const place = Place.fetch(xy)\n    const soldier = this.board.lookup(place)\n    let str = \"\"\n    if (soldier) {\n      str = soldier.name\n    }\n    return str\n  }\n\n  get dimension() {\n    return Board.dimension\n  }\n\n  // ruby style array index access\n  get turn_offset() {\n    let index = Number(this.current_turn)\n    if (index < 0) {\n      index += this.turn_offset_max + 1\n    }\n    return this.turn_clamp(index)\n  }\n\n  turn_clamp(index) {\n    return _.clamp(Number(index), this.turn_offset_min, this.turn_offset_max)\n  }\n\n  get previous_location() {\n    return this.data_source.location_by_offset(this.turn_offset - 1)\n  }\n\n  get current_location() {\n    return this.data_source.location_by_offset(this.turn_offset)\n  }\n\n  get current_comments() {\n    if (this.data_source.comments_pack) {\n      return this.data_source.comments_pack[this.turn_offset]\n    }\n  }\n\n  get turn_offset_min() {\n    return this.data_source.turn_offset_min\n  }\n\n  get turn_offset_max() {\n    return this.data_source.turn_offset_max\n  }\n\n  current_turn_label(final_label) {\n    if (this.turn_offset === this.turn_offset_max) {\n      if (final_label) {\n        return `まで${this.display_turn}手で${final_label}`\n      } else {\n        return `まで${this.display_turn}手で${this.previous_location.name}の勝ち`\n      }\n    } else {\n      return `${this.display_turn}手`\n    }\n  }\n\n  // 100手目から始まっている棋譜でオフセットが20のときは足して 120 を返す\n  get display_turn() {\n    return this.turn_base + this.turn_offset\n  }\n\n  // 何手目から始まっているかを返す\n  get turn_base() {\n    return this.data_source.turn_base\n  }\n\n  realized_hold_pieces_of(location_key) {\n    const list = Object.entries(this.hold_pieces[location_key])\n    return _(list)\n      .filter(([key, count]) => count >= 1)\n      .map(([key, count]) => [Piece.fetch(key), count])\n      .sortBy(([key, count]) => key.code)\n      .value()\n  }\n\n  // -------------------------------------------------------------------------------- serialize\n\n  // 4k4/9/4G4/9/9/9/9/9/9 b G2r2b2g4s4n4l18p 1\n  get to_simple_sfen() {\n    return this.sfen_serializer.to_s\n  }\n\n  // 4k4/9/4G4/9/9/9/9/9/9 b G2r2b2g4s4n4l18p\n  get to_sfen_without_turn() {\n    return this.sfen_serializer.to_s_without_turn\n  }\n\n  // position sfen 4k4/9/4G4/9/9/9/9/9/9 b G2r2b2g4s4n4l18p 1\n  get to_position_sfen() {\n    return `position sfen ${this.to_simple_sfen}`\n  }\n\n  get sfen_serializer() {\n    return new SfenSerializer(this)\n  }\n\n  // -------------------------------------------------------------------------------- piece_box\n\n  piece_box_count(piece) {\n    return this.piece_box[piece.key] || 0\n  }\n\n  piece_box_add(piece, plus = 1) {\n    const count = this.piece_box_count(piece) + plus\n    Vue.delete(this.piece_box, piece.key)\n    if (count >= 1) {\n      Vue.set(this.piece_box, piece.key, count)\n    }\n  }\n\n  // piece を count 減らしたいとき本当に減らせる数を返す\n  piece_box_can_be_reduced_count(piece, count) {\n    const max = this.piece_box_count(piece)\n    if (count > max) {\n      count = max\n    }\n    return count\n  }\n\n  piece_box_realize() {\n    const list = Object.entries(this.piece_box) // {a: 1} => [['a', 1]]\n    return _(list)\n      .filter(([key, count]) => count >= 1)\n      .map(([key, count]) => [Piece.fetch(key), count])\n      .sortBy(([key, count]) => key.code)\n      .value()\n  }\n\n  // -------------------------------------------------------------------------------- Utilities\n\n  // location の駒台の駒をすべて駒箱に移動する\n  hold_pieces_to_piece_box(location) {\n    _.forIn(this.hold_pieces[location.key], (count, piece_key) => {\n      const piece = Piece.fetch(piece_key)\n      this.hold_pieces_add(location, piece, -count)\n      this.piece_box_add(piece, count)\n    })\n  }\n\n  // 駒箱の駒をすべて location の駒台に移動する\n  piece_box_to_hold_pieces(location) {\n    _.forIn(this.piece_box, (count, piece_key) => {\n      const piece = Piece.fetch(piece_key)\n      this.piece_box_add(piece, -count)\n      this.hold_pieces_add(location, piece, count)\n    })\n  }\n\n  // プリセットに対応するように駒箱をセットする\n  piece_box_reset_by_preset(preset_info) {\n    this.piece_box_clear()\n\n    const info = PresetInfo.fetch(preset_info)\n    info.piece_box.forEach(([e, c]) => {\n      this.piece_box_add(Piece.fetch(e), c)\n    })\n  }\n\n  // 駒箱に足りない駒だけにする\n  piece_box_piece_couns_adjust() {\n    this.piece_box_clear()\n\n    const counts_hash = this.hold_piece_all_counts_hash       // 両者の持駒の合計\n    const counts_hash_on_board = this.board.piece_counts_hash // 盤上の駒の合計\n\n    const info = PresetInfo.fetch(\"全部駒箱\")\n    info.piece_box.forEach(([e, c]) => {\n      const piece = Piece.fetch(e)\n      const rest = c - ((counts_hash[piece.key] || 0) + (counts_hash_on_board[piece.key] || 0))\n      this.piece_box_add(piece, rest)\n    })\n  }\n\n  // 両者の持駒を合わせたハッシュを返す\n  get hold_piece_all_counts_hash() {\n    const counts = {}\n    Location.values.forEach(e => {\n      _.forIn(this.hold_pieces[e.key], (count, piece_key) => {\n        counts[piece_key] = (counts[piece_key] || 0) + count\n      })\n    })\n    return counts\n  }\n\n  piece_box_clear() {\n    this.piece_box = {}\n  }\n\n  //////////////////////////////////////////////////////////////////////////////// ランダム配置\n\n  /* eslint-disable */\n  //////////////////////////////////////////////////////////////////////////////// 指将棋用玉配置\n\n  // 指将棋用玉配置(自動)\n  king_formation_auto_set() {\n    let success = false\n    if (!success) {\n      success = this.king_formation_set(\"bottom_left\")\n    }\n    if (!success) {\n      success = this.king_formation_set(\"bottom_right\")\n    }\n    return success\n  }\n\n  // 指将棋用玉配置解除\n  // 玉は駒箱へ\n  // それ以外は相手の駒台へ\n  king_formation_auto_unset() {\n    let success = false\n    if (!success) {\n      success = this.king_formation_unset(\"bottom_left\")\n    }\n    if (!success) {\n      success = this.king_formation_unset(\"bottom_right\")\n    }\n    return success\n  }\n\n  // 指将棋用玉配置\n  king_formation_set(position) {\n    const soldiers = this.king_formation_soldiers(position)\n\n    // 置きたいところに駒が1つでも置かれていたら何もしない\n    if (soldiers.some(e => this.board.lookup(e.place))) {\n      return\n    }\n\n    // 配置\n    soldiers.forEach(e => this.piece_search_and_place_on(e))\n\n    return true\n  }\n\n  // 指将棋用玉配置解除\n  // 玉は駒箱へ\n  // それ以外は相手の駒台へ\n  king_formation_unset(position) {\n    const soldiers = this.king_formation_soldiers(position)\n\n    // 駒がそろってないときは何もしない\n    if (soldiers.some(e => !this.board.lookup(e.place))) {\n      return\n    }\n\n    soldiers.forEach(e => {\n      const soldier = this.board.lookup(e.place)\n      if (soldier) {\n        const piece = soldier.piece\n        this.board.delete_at(soldier.place)\n        if (piece.key === \"K\") {\n          // 玉の場合は駒箱にとらげる\n          this.piece_box_add(piece)\n        } else {\n          // 他の駒は相手の駒箱へ\n          this.hold_pieces_add(Location.fetch(\"white\"), piece)\n        }\n      }\n    })\n\n    return true\n  }\n\n  // soldier.piece に対応する駒を探してあれば -1 して soldier.place の位置に配置する\n  piece_search_and_place_on(soldier) {\n    // すでに何か置かれていれば何もしない\n    if (this.board.lookup(soldier.place)) {\n      return\n    }\n\n    // 玉の場合は初期配置の時点で存在しない場合もあるので「あれば」-1 するだけ\n    if (soldier.piece.key === \"K\") {\n      this.piece_search_and_decrement(soldier.piece)\n    } else {\n      // 玉以外は駒が数が増えてしまってややこしくなるのを防ぐため必ず「あったときだけ」-1 し、なければ何もしない\n      if (!this.piece_search_and_decrement(soldier.piece)) {\n        return\n      }\n    }\n\n    this.board.place_on(soldier)\n  }\n\n  // 相手の駒→駒箱→自分の駒の順で駒を探してあれば -1 して true を返す\n  piece_search_and_decrement(piece) {\n    let found = false\n\n    // 相手の駒から探す\n    if (!found) {\n      found = this.piece_search_on_hold_pieces_and_decrement(\"white\", piece)\n    }\n\n    // 駒箱から探す\n    if (!found) {\n      if (this.piece_box_count(piece) >= 1) {\n        this.piece_box_add(piece, -1)\n        found = true\n      }\n    }\n\n    if (false) {\n      // 自分の駒から探す\n      if (!found) {\n        found = this.piece_search_on_hold_pieces_and_decrement(\"black\", piece)\n      }\n    }\n\n    return found\n  }\n\n  // location_key の持駒から piece を探してあれば -1 して true を返す\n  piece_search_on_hold_pieces_and_decrement(location_key, piece) {\n    const location = Location.fetch(location_key)\n    if (this.hold_pieces_count(location, piece) >= 1) {\n      this.hold_pieces_add(location, piece, -1)\n      return true\n    }\n  }\n\n  // TODO: SFENで定義する方法もあり\n  king_formation_soldiers(position) {\n    let bx = null\n    let sx = null\n    let by = null\n    let sy = null\n    if (position === \"bottom_left\") {\n      bx = 0\n      sx = 1\n      by = Board.dimension - 1\n      sy = -1\n    }\n    if (position === \"bottom_right\") {\n      bx = Board.dimension - 1\n      sx = -1\n      by = Board.dimension - 1\n      sy = -1\n    }\n    return [\n      { piece: \"K\", promoted: false, location: \"black\", place: [bx,           by           ] },\n      { piece: \"P\", promoted: true,  location: \"white\", place: [bx,           by + sy + sy ] },\n      { piece: \"P\", promoted: true,  location: \"white\", place: [bx + sx,      by + sy + sy ] },\n      { piece: \"P\", promoted: true,  location: \"white\", place: [bx + sx + sx, by + sy + sy ] },\n      { piece: \"P\", promoted: true,  location: \"white\", place: [bx + sx + sx, by + sy      ] },\n      { piece: \"P\", promoted: true,  location: \"white\", place: [bx + sx + sx, by           ] },\n    ].map(e => {\n      return new Soldier({\n        piece: Piece.fetch(e.piece),\n        promoted: e.promoted,\n        location: Location.fetch(e.location),\n        place: Place.fetch(e.place),\n      })\n    })\n  }\n\n  ////////////////////////////////////////////////////////////////////////////////\n  /* eslint-enable */\n\n  // 左右スライド\n  slide_xy(x, y) {\n    this.board = this.board.slide_xy(x, y)\n  }\n\n  shuffle_apply(size) {\n    const new_board = this.board.shuffle_apply(size)\n    if (new_board) {\n      this.board = new_board\n      return true\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/mediator.js","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-1beb9d1f\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"indentedSyntax\\\":true,\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1beb9d1f\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/template-compiler/preprocessor?engine=pug!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = M93x\n// module chunks = 1","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.comments_pack)?_c('div',{staticClass:\"comment_area\"},[(_vm.current_comments)?_c('div',[_c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column\"},[_c('article',{staticClass:\"message is-info has-text-left\"},[_c('div',{staticClass:\"message-body\"},[_c('div',{staticClass:\"content\"},[_vm._l((_vm.current_comments),function(str){return [(_vm._.isEmpty(str))?[_c('br')]:[_c('div',{domProps:{\"innerHTML\":_vm._s(_vm.auto_link(str))}})]]})],2)])])])])]):_vm._e()]):_vm._e()}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-3a87a5fb\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/CommentArea.vue\n// module id = N+at\n// module chunks = 1 2","module.exports = \"| Method                                 | 動作                                                                |\\n|----------------------------------------|---------------------------------------------------------------------|\\n| `api_random_puton()`                   | 盤面をクリアしてランダムに駒を1つ配置し、Soldier インスタンスを返す |\\n| `api_place_on(soldier)`                | 盤面に駒を置く                                                      |\\n| `api_board_clear()`                    | 盤面をクリア                                                        |\\n| `api_board_turn_set(turn)`             | 指定手数の局面に設定                                                |\\n| `api_play_mode_mediator_seek_to(turn)` | 指定手数の局面に設定・play_mode専用・音出ない                       |\\n| `api_flip_set(flag)`                   | 反転状態の設定                                                      |\\n| `api_retract_a_move()`                 | 待った(2手戻す)                                                     |\\n| `api_sfen_or_kif_set()`                | 棋譜の設定                                                    |\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/api.md\n// module id = N+m4\n// module chunks = 1","module.exports = __webpack_public_path__ + \"static/media/piece_sound.5cc2312.wav\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/piece_sound.wav\n// module id = N1+3\n// module chunks = 1 2","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue'\nimport App from './App'\n\n// import 'bulma/bulma.sass'\n// import \"buefy/src/scss/buefy-build.scss\"\n\n// import \"~buefy/src/scss/buefy-build.scss\"\n// import \"./components/ShogiPlayer.sass\" // Rails 側で sp_assets_dir を変更してから読み込みたいので .vue の中では読まないようにする\n\nVue.config.productionTip = false\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  template: '<App/>',\n  components: { App }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_vm._m(0),_vm._m(1),_c('div',{staticClass:\"section\"},[_c('a',{attrs:{\"name\":\"examples\"}}),_c('div',{staticClass:\"container\"},[_c('h2',{staticClass:\"title\"},[_vm._v(\"デモ\")]),_c('hr'),_c('div',{staticClass:\"section\"},[_c('div',{staticClass:\"container has-text-centered\"},[_c('h3',{staticClass:\"title has-text-left\"},[_vm._v(\"1. 再生モード\")]),_c('hr'),_c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column\"},[_vm._m(2),_c('h3',{staticClass:\"title yumincho\"},[_vm._v(\"藤井聡太四段 vs 佐藤天彦名人\")]),_vm._m(3),_c('hr'),_c('ShogiPlayer',{staticClass:\"original\",attrs:{\"kifu_body\":_vm.kif_sample1,\"start_turn\":9,\"slider_show\":true,\"theme\":'real',\"size\":'x-large',\"bg_variant\":'a',\"sound_effect\":true,\"volume\":0.25,\"debug_mode\":false}})],1)]),_c('br'),_c('br'),_c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column\"},[_vm._m(4),_c('h3',{staticClass:\"title yumincho\"},[_vm._v(\"羽生善治名人 vs 渡辺明竜王\")]),_c('p',{staticClass:\"subtitle yumincho\"},[_vm._v(\"第21期竜王戦七番勝負第4局\")]),_c('hr'),_c('ShogiPlayer',{attrs:{\"kifu_body\":'position startpos moves 2g2f 8c8d 2f2e 8d8e 6i7h 4a3b 2e2d 2c2d 2h2d P*2c 2d2h 7a7b 3i3h 3c3d 9g9f 9c9d 1g1f 1c1d 3h2g 8e8f 8g8f 8b8f P*8g 8f8d 2g3f 5a5b 7g7f 7c7d 8h2b+ 3a2b 7i8h 7b7c 8h7g 7c6d 3f4e 7d7e 4e5f 2b3c 6g6f 3c4d 5f6g 6a7b 5i6h 8a7c 4i5h 2a3c 6h7i 7e7f 6g7f 4d5e P*7e 9d9e B*7d P*8h 7i8h 7b8c 9f9e 8c7d 7e7d 8d7d P*7e 7d8d 5h6g P*7d 7e7d 8d7d P*7e 6d7e 7f7e 7d7e 7g7f 7e7d S*7e 7d4d P*7d 4d4g+ P*2d 2c2d 7d7c+ 4g4i 2h2d P*2c 2d3d 4c4d P*7i 5b4c 3d3e S*4e 6g5f P*7g 8i7g P*3d 3e4e 3c4e 5f5e R*2h N*3f 2h7h+ 8h9g 4e5g+ 5e4d 4i4d S*5b 4c5d 7i7h 4d4i G*6e 5d4e R*4d 4e5f 4d4i G*4h S*3h 4h4i R*5e 5f4f 3h4i G*4e P*4g 5g4g P*4h 4g3g 2i3g 4f3g 5e4e R*8i G*3h 3g3f G*4f 3f2f 9i9h 8i4i+ P*3i S*2i 3h2h 4i3i',\"start_turn\":-1,\"theme\":'real',\"bg_variant\":'p',\"piece_variant\":'b'}})],1),_c('div',{staticClass:\"column\"},[_vm._m(5),_c('h3',{staticClass:\"title yumincho\"},[_vm._v(\"藤井猛六段 vs 井上慶太六段\")]),_c('p',{staticClass:\"subtitle yumincho\"},[_vm._v(\"第54期順位戦B級2組7回戦\")]),_c('hr'),_c('ShogiPlayer',{attrs:{\"kifu_body\":'position startpos moves 7g7f 8c8d 2h6h 3c3d 6g6f 7a6b 3i3h 5a4b 4g4f 4b3b 3g3f 2b3c 1g1f 8d8e 8h7g 3b2b 7i7h 5c5d 7h6g 6a5b 2i3g 1a1b 6g5f 5d5e 5f4e 8b8d 3f3e 3d3e 3g2e 3c4d 6f6e 2c2d 6e6d 2d2e 4e4d 4c4d 7g5e N*3b P*3c 2b3c B*4e P*5d 5e6f 3c2b 6f8d 4d4e 6d6c+',\"start_turn\":0,\"slider_show\":true,\"theme\":'real',\"bg_variant\":'g'}})],1)]),_c('br'),_c('br'),_c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column\"},[_vm._m(6),_c('h3',{staticClass:\"title yumincho\"},[_vm._v(\"藤井聡太四段 vs 澤田真吾六段\")]),_c('p',{staticClass:\"subtitle yumincho\"},[_vm._v(\"第43期棋王戦予選\")]),_c('hr'),_c('ShogiPlayer',{attrs:{\"kifu_body\":_vm.kif_sample2,\"start_turn\":121,\"controller_show\":true,\"slider_show\":true,\"theme\":'simple'}})],1),_c('div',{staticClass:\"column\"},[_vm._m(7),_c('h3',{staticClass:\"title yumincho\"},[_vm._v(\"小池重明 vs 加藤一二三十段\")]),_c('p',{staticClass:\"subtitle yumincho\"},[_vm._v(\"加藤一二三の駒落道場\")]),_c('hr'),_c('ShogiPlayer',{attrs:{\"kifu_body\":'position sfen lnsgkgsnl/1r7/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1 moves 8c8d 7g7f 7a6b 5g5f 8d8e 8h7g 5c5d 2h5h 6b5c 7i6h 5a4b 5i4h 3a3b 4h3h 4c4d 5f5e 3b4c 5e5d 4c5d 6h5g 5d6e 5g5f 6e7f 5f5e 7f6g+ P*5d 5c6b 5h5f 6g7g 8i7g B*3d 5f6f P*5b 6i7i 8b8d 5e4d 8d7d P*7h 7d5d S*4c 3d4c 4d4c+ 4b4c B*7f 5b5c 7i6h 4c3b 6h5h P*4c 7f5d 5c5d 8g8f B*7i 8f8e P*8b 6f8f 7i3e+ 8e8d S*7b 8f8i 3e4e P*6g 7c7d 9g9f 4e5f 8i8f 5f5e 9f9e 5e6d 8f8i 7d7e 7g8e 5d5e 8e9c+ 8a9c 9e9d P*9h 9i9h 6d6e 8i8f 6e9h 9d9c+ 9a9c R*9a 9h6e 9a9c+ 5e5f 5h4h L*9b 9c8b P*8a N*7g 6e7d 8b9a S*8b 9a8b 8a8b S*6e 7d9f 8f5f 9f7h 7g8e 7h6g P*7c 7b8a P*9c 6c6d P*6h 6g8e 9c9b+ 8a9b 7c7b+ 6a7b 6e5d N*4b 5d5c+ P*5d 5c6b 7b6b L*2f R*6i L*2e N*3a 5f4f S*3d 3g3f 6b5c 2i3g 4c4d 4f5f 2c2d 2e2d P*2c 3f3e 3d3e 2d2c+ 3a2c 2f2c+ 3b2c P*3f 3e2d 5f5i 6i6h+ 1g1f L*3d N*2h 4d4e 5i5h 6h7g 2g2f 1c1d 2f2e 2d1c 3g4e 5c4d S*4f P*2f 4e5c+ L*4e 4f5g 8e7d P*6e 7d6e P*5f 5d5e 4h3g 5e5f 5g4h P*4f 3g4f 4e4f',\"start_turn\":-1,\"controller_show\":true,\"slider_show\":true,\"sfen_show\":true,\"theme\":'simple'}})],1)]),_c('br'),_c('br'),_vm._m(8),_c('br'),_c('br'),_c('br'),_c('h3',{staticClass:\"title has-text-left\"},[_vm._v(\"2. 操作モード\")]),_c('hr'),_c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column\"},[_vm._m(9),_c('ShogiPlayer',{attrs:{\"kifu_body\":'position startpos moves 7g7f 8c8d 2h6h 3c3d 6g6f 7a6b 3i3h 5a4b 4g4f 4b3b 3g3f 2b3c 1g1f 8d8e 8h7g 3b2b 7i7h 5c5d 7h6g 6a5b 2i3g 1a1b 6g5f 5d5e 5f4e 8b8d 3f3e 3d3e 3g2e 3c4d 6f6e 2c2d 6e6d 2d2e 4e4d 4c4d 7g5e N*3b P*3c 2b3c B*4e P*5d 5e6f 3c2b 6f8d 4d4e 6d6c+',\"start_turn\":-1,\"slider_show\":true,\"controller_show\":true,\"theme\":'real',\"size\":'medium',\"bg_variant\":'a',\"sound_effect\":true,\"volume\":0.25,\"debug_mode\":false,\"run_mode\":'play_mode'}})],1),_c('div',{staticClass:\"column\"},[_vm._m(10),_c('ShogiPlayer',{attrs:{\"kifu_body\":'position startpos moves 7g7f 8c8d 2h6h 3c3d 6g6f 7a6b 3i3h 5a4b 4g4f 4b3b 3g3f 2b3c 1g1f 8d8e 8h7g 3b2b 7i7h 5c5d 7h6g 6a5b 2i3g 1a1b 6g5f 5d5e 5f4e 8b8d 3f3e 3d3e 3g2e 3c4d 6f6e 2c2d 6e6d 2d2e 4e4d 4c4d 7g5e N*3b P*3c 2b3c B*4e P*5d 5e6f 3c2b 6f8d 4d4e 6d6c+',\"start_turn\":20,\"slider_show\":true,\"controller_show\":true,\"theme\":'real',\"size\":'medium',\"bg_variant\":'a',\"sound_effect\":true,\"volume\":0.25,\"debug_mode\":false,\"run_mode\":'play_mode',\"human_side_key\":'black'}})],1)]),_c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column\"},[_vm._m(11),_c('ShogiPlayer',{attrs:{\"kifu_body\":\"position sfen 4k4/9/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1\",\"start_turn\":-1,\"theme\":'simple',\"run_mode\":'play_mode'}})],1),_c('div',{staticClass:\"column\"},[_vm._m(12),_c('ShogiPlayer',{attrs:{\"kifu_body\":\"position sfen lnsgkgsnl/1r5b1/ppppppppp/9/9/2P6/PP1PPPPPP/1B5R1/LNSGKGSNL w - 2\",\"start_turn\":-1,\"theme\":'simple',\"run_mode\":'play_mode'}})],1)]),_c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column\"},[_vm._m(13),_c('ShogiPlayer',{attrs:{\"kifu_body\":'position sfen lr4knl/3g2gs1/4ppP2/p4bNpp/2pSsN3/PPPP1P2P/2N1P1G2/2G6/L1K4RL w BPs3p 72',\"start_turn\":-1,\"theme\":'simple',\"run_mode\":'play_mode'}})],1)]),_vm._m(14),_c('br'),_c('br'),_c('h3',{staticClass:\"title has-text-left\"},[_vm._v(\"3. 編集モード\")]),_c('hr'),_c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column\"},[_vm._m(15),_c('ShogiPlayer',{attrs:{\"kifu_body\":'position startpos moves 7g7f 8c8d 2h6h 3c3d 6g6f 7a6b 3i3h 5a4b 4g4f 4b3b 3g3f 2b3c 1g1f 8d8e 8h7g 3b2b 7i7h 5c5d 7h6g 6a5b 2i3g 1a1b 6g5f 5d5e 5f4e 8b8d 3f3e 3d3e 3g2e 3c4d 6f6e 2c2d 6e6d 2d2e 4e4d 4c4d 7g5e N*3b P*3c 2b3c B*4e P*5d 5e6f 3c2b 6f8d 4d4e 6d6c+',\"start_turn\":-1,\"slider_show\":true,\"theme\":'real',\"size\":'medium',\"bg_variant\":'a',\"sound_effect\":true,\"volume\":0.25,\"debug_mode\":false,\"run_mode\":'edit_mode'}})],1),_c('div',{staticClass:\"column\"},[_vm._m(16),_c('ShogiPlayer',{attrs:{\"preset_key\":'詰将棋',\"slider_show\":true,\"theme\":'real',\"size\":'medium',\"bg_variant\":'a',\"sound_effect\":true,\"volume\":0.25,\"debug_mode\":false,\"run_mode\":'edit_mode'}})],1)]),_c('br'),_c('br'),(false)?[_c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column\"},[_vm._m(17),_c('ShogiPlayer',{attrs:{\"kifu_url\":'http://tk2-221-20341.vs.sakura.ne.jp/shogi/wr/ureshino_friend-doglong-20180122_213544.kif?plain=1',\"start_turn\":-1,\"controller_show\":true,\"slider_show\":true,\"debug_mode\":true,\"polling_interval\":30}})],1)]),_c('br'),_c('br')]:_vm._e(),_vm._m(18),_c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column\"},[_c('article',{staticClass:\"message is-success has-text-left\"},[_vm._m(19),_c('div',{staticClass:\"message-body\"},[_c('div',{staticClass:\"content\"},[_c('ul',[_c('li',[_vm._v(\"右の\"),_c('b-icon',{attrs:{\"icon\":\"dots-vertical\",\"size\":\"is-small\"}}),_vm._v(\"をクリックするとモードを切り替えることができます\")],1),_c('li',[_vm._v(\"棋譜再生モードの途中で「操作」に切り替えると手番側の駒を動かせるようになります。主に検討したいときに使います\")]),_c('li',[_vm._v(\"「操作」モードに入るとき SFEN (USI) の場合はそのまま再生モードでの棋譜を保持した状態で始まります。(スライダーで最初の局面に戻せます)\")]),_vm._m(20),_c('li',[_vm._v(\"(SFENと同様になるようにしようかと思いましたが、「操作」モードにに入ったところを基点(0手目)とするのでわかりやすいというメリットがあることに気づきました)\")]),_c('li',[_vm._v(\"手番に関わらず、ただ自由に駒を動かしたいときは「編集」モードになります\")]),_c('li',[_vm._v(\"棋譜再生モードの途中で「操作」に切り替えると手番側の駒を動かせるようになります\")]),_c('li',[_vm._v(\"再生モードから他のモードに切り替えてから再生モードに戻ったとき、他のモードに切り替える前の状態に復帰します (つまり継盤のような形になります)\")])])])])])])])],2)])])]),_c('div',{staticClass:\"section\"},[_c('a',{attrs:{\"name\":\"modal_in_style\"}}),_c('div',{staticClass:\"container\"},[_c('h3',{staticClass:\"title\"},[_vm._v(\"モーダル内表示の例\")]),_c('hr'),_c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column\"},[_c('article',{staticClass:\"message is-info\"},[_c('div',{staticClass:\"message-body\"},[_c('div',{staticClass:\"content\"},[_vm._v(\"mobile のときは size オプションで指定したサイズは無効になり、なるべく横幅いっぱいになるように調整します。\\n右の\"),_c('b-icon',{attrs:{\"icon\":\"dots-vertical\",\"size\":\"is-small\"}}),_vm._v(\"も非表示にします。\")],1)])]),_c('div',{staticClass:\"buttons\"},[_c('a',{staticClass:\"button is-primary is-fullwidth\",on:{\"click\":function($event){_vm.modal_p = true}}},[_vm._v(\"開く\")])]),_c('p',[_vm._v(\".modal-card.is-shogi-player-modal-card のようにします\")]),_c('b-modal',{attrs:{\"active\":_vm.modal_p,\"has-modal-card\":\"has-modal-card\"},on:{\"update:active\":function($event){_vm.modal_p=$event}}},[_c('div',{staticClass:\"modal-card is-shogi-player-modal-card\"},[_c('header',{staticClass:\"modal-card-head\"},[_c('p',{staticClass:\"modal-card-title is-size-5\"},[_vm._v(\"モーダル内表示例\")]),_c('button',{staticClass:\"delete\",attrs:{\"aria-label\":\"close\"},on:{\"click\":function($event){_vm.modal_p = false}}})]),_c('section',{staticClass:\"modal-card-body\"},[_c('shogi-player',{attrs:{\"run_mode\":'view_mode',\"debug_mode\":false,\"start_turn\":0,\"kifu_body\":'position sfen 4R1gnk/6+Bsl/5+P1pp/9/9/9/9/9/9 b rb3g3s3n2l15p 1 moves 3b2a 3a2a 5a2a+ 1a2a G*3b 2a1a 3b2b 1a2b N*3d 2b1a S*2b',\"key_event_capture\":true,\"slider_show\":true,\"controller_show\":true,\"theme\":'simple',\"size\":'default',\"sound_effect\":true}}),_c('div',{staticClass:\"box is-size-6\"},[_vm._v(\"1手目と5手詰が重要\")])],1),_c('footer',{staticClass:\"modal-card-foot\"},[_c('a',{staticClass:\"button\",on:{\"click\":function($event){_vm.modal_p = false}}},[_vm._v(\"閉じる\")]),_c('a',{staticClass:\"button\",on:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();}}},[_vm._v(\"ボタン2\")]),_c('a',{staticClass:\"button\",on:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();}}},[_vm._v(\"ボタン3\")])])])]),_c('pre',[_vm._v(\"b-modal(:active.sync=\\\"modal_p\\\" has-modal-card)\\n  .modal-card.is-shogi-player-modal-card\\n    header.modal-card-head\\n      p.modal-card-title.is-size-5\\n        | モーダル内表示例\\n      button(class=\\\"delete\\\" aria-label=\\\"close\\\" @click=\\\"modal_p = false\\\")\\n\\n    section.modal-card-body\\n      shogi-player(\\n        :run_mode=\\\"'view_mode'\\\"\\n        :debug_mode=\\\"false\\\"\\n        :start_turn=\\\"0\\\"\\n        :kifu_body=\\\"'position sfen 4R1gnk/6+Bsl/5+P1pp/9/9/9/9/9/9 b rb3g3s3n2l15p 1 moves 3b2a 3a2a 5a2a+ 1a2a G*3b 2a1a 3b2b 1a2b N*3d 2b1a S*2b'\\\"\\n        :key_event_capture=\\\"true\\\"\\n        :slider_show=\\\"true\\\"\\n        :sfen_show=\\\"false\\\"\\n        :controller_show=\\\"true\\\"\\n        :theme=\\\"'simple'\\\"\\n        :size=\\\"'default'\\\"\\n        :sound_effect=\\\"true\\\"\\n      )\\n\\n      .box.is-size-6\\n        | 1手目と5手詰が重要\\n\\n    footer.modal-card-foot.space_between\\n      a.button(@click=\\\"modal_p = false\\\") 閉じる\")])],1)])])]),_c('div',{staticClass:\"section\"},[_c('a',{attrs:{\"name\":\"usage\"}}),_c('div',{staticClass:\"container\"},[_c('h3',{staticClass:\"title\"},[_vm._v(\"使い方\")]),_c('hr'),_c('div',{staticClass:\"content\",domProps:{\"innerHTML\":_vm._s(_vm.usage_md)}})])]),_c('div',{staticClass:\"section\"},[_c('a',{attrs:{\"name\":\"options\"}}),_c('div',{staticClass:\"container\"},[_c('h2',{staticClass:\"title\"},[_vm._v(\"オプション\")]),_c('hr'),_c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column\"},[_c('form',{attrs:{\"action\":\"/\"}},[_c('ShogiPlayer',{attrs:{\"run_mode\":_vm.run_mode,\"kifu_body\":_vm.kifu_body,\"start_turn\":_vm.start_turn,\"theme\":_vm.theme,\"size\":_vm.size,\"bg_variant\":_vm.bg_variant,\"piece_variant\":_vm.piece_variant,\"debug_mode\":_vm.debug_mode,\"hidden_if_piece_stand_blank\":_vm.hidden_if_piece_stand_blank,\"setting_button_show\":_vm.setting_button_show,\"summary_show\":_vm.summary_show,\"operation_disable\":_vm.operation_disable,\"flip\":_vm.flip,\"vlayout\":_vm.vlayout,\"digit_show\":_vm.digit_show,\"final_label\":_vm.final_label,\"player_info\":_vm.player_info,\"key_event_capture\":_vm.key_event_capture,\"slider_show\":_vm.slider_show,\"controller_show\":_vm.controller_show,\"sfen_show\":_vm.sfen_show,\"overlay_navi\":_vm.overlay_navi,\"sound_effect\":_vm.sound_effect,\"volume\":_vm.volume,\"human_side_key\":_vm.human_side_key},on:{\"update:run_mode\":function($event){_vm.run_mode=$event},\"update:kifu_body\":function($event){_vm.kifu_body=$event},\"update:start_turn\":function($event){_vm.start_turn=$event},\"update:theme\":function($event){_vm.theme=$event},\"update:size\":function($event){_vm.size=$event},\"update:bg_variant\":function($event){_vm.bg_variant=$event},\"update:piece_variant\":function($event){_vm.piece_variant=$event},\"update:debug_mode\":function($event){_vm.debug_mode=$event},\"update:flip\":function($event){_vm.flip=$event},\"update:vlayout\":function($event){_vm.vlayout=$event},\"update:edit_mode_snapshot_sfen\":function (e) { return _vm.trigger_check('edit_mode_snapshot_sfen', e); },\"update:mediator_snapshot_sfen\":function (e) { return _vm.trigger_check('mediator_snapshot_sfen', e); },\"update:play_mode_advanced_full_moves_sfen\":function (e) { return _vm.trigger_check('play_mode_advanced_full_moves_sfen', e); },\"update:play_mode_advanced_snapshot_sfen\":function (e) { return _vm.trigger_check('play_mode_advanced_snapshot_sfen', e); },\"update:play_mode_advanced_last_move\":function (e) { return _vm.trigger_check('play_mode_advanced_last_move', e); },\"update:play_mode_advanced_moves\":function (e) { return _vm.trigger_check('play_mode_advanced_moves', e); },\"update:turn_offset\":function (e) { return _vm.trigger_check('turn_offset', e); }},nativeOn:{\"click\":function($event){return (function () { return _vm.$buefy.toast.open({message: '全体のどこかをクリック', queue: false}); })($event)}},scopedSlots:_vm._u([{key:\"sfen_part\",fn:function(props){return [_vm._v(\"(\"+_vm._s(props.mediator.to_simple_sfen)+\")\")]}}])})],1),_c('hr')])]),_c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column\"},[_c('section',[_c('b-field',{attrs:{\"label\":\"run_mode\"}},[_c('div',{staticClass:\"block\"},[_vm._l((_vm.RunModeInfo.values),function(e){return [_c('b-radio',{attrs:{\"native-value\":e.key},model:{value:(_vm.run_mode),callback:function ($$v) {_vm.run_mode=$$v},expression:\"run_mode\"}},[_vm._v(_vm._s(e.name)+\"(\"+_vm._s(e.key)+\")\")])]})],2)]),_c('div',{staticClass:\"box\"},[_c('b-field',{attrs:{\"label\":\"theme\"}},[_c('div',{staticClass:\"block\"},[_vm._l((_vm.ThemeInfo.values),function(e){return [_c('b-radio',{attrs:{\"native-value\":e.key},model:{value:(_vm.theme),callback:function ($$v) {_vm.theme=$$v},expression:\"theme\"}},[_vm._v(_vm._s(e.name)+\"(\"+_vm._s(e.key)+\")\")])]})],2)]),_c('b-field',{attrs:{\"label\":\"bg_variant\"}},[_c('div',{staticClass:\"block\"},[_vm._l((_vm.BgVariantInfo.values),function(e){return [_c('b-radio',{attrs:{\"native-value\":e.key},model:{value:(_vm.bg_variant),callback:function ($$v) {_vm.bg_variant=$$v},expression:\"bg_variant\"}},[_vm._v(_vm._s(e.name))])]})],2)]),_c('b-field',{attrs:{\"label\":\"piece_variant\"}},[_c('div',{staticClass:\"block\"},[_vm._l((_vm.PieceVariantInfo.values),function(e){return [_c('b-radio',{attrs:{\"native-value\":e.key},model:{value:(_vm.piece_variant),callback:function ($$v) {_vm.piece_variant=$$v},expression:\"piece_variant\"}},[_vm._v(_vm._s(e.name)+\"(\"+_vm._s(e.key)+\")\")])]})],2)]),_c('b-field',{attrs:{\"label\":\"size\"}},[_c('div',{staticClass:\"block\"},[_vm._l((_vm.SizeInfo.values),function(e){return [_c('b-radio',{attrs:{\"native-value\":e.key},model:{value:(_vm.size),callback:function ($$v) {_vm.size=$$v},expression:\"size\"}},[_vm._v(_vm._s(e.key))])]})],2)])],1),_c('div',{staticClass:\"box\"},[_c('b-field',{attrs:{\"grouped\":\"grouped\",\"group-multiline\":\"group-multiline\"}},[_c('b-field',{attrs:{\"label\":\"sound_effect\"}},[_c('b-switch',{model:{value:(_vm.sound_effect),callback:function ($$v) {_vm.sound_effect=$$v},expression:\"sound_effect\"}})],1),_c('b-field',{attrs:{\"label\":\"volume\"}},[_c('div',{staticClass:\"block\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.volume),expression:\"volume\",modifiers:{\"number\":true}}],attrs:{\"type\":\"range\",\"min\":\"0\",\"max\":\"1.0\",\"step\":\"0.01\"},domProps:{\"value\":(_vm.volume)},on:{\"__r\":function($event){_vm.volume=_vm._n($event.target.value)},\"blur\":function($event){return _vm.$forceUpdate()}}}),_vm._v(_vm._s(_vm.volume))])])],1)],1),_c('b-field',{attrs:{\"grouped\":\"grouped\",\"group-multiline\":\"group-multiline\"}},[_c('b-field',{attrs:{\"label\":\"start_turn\"}},[_c('b-input',{attrs:{\"type\":\"number\"},model:{value:(_vm.start_turn),callback:function ($$v) {_vm.start_turn=$$v},expression:\"start_turn\"}})],1),_c('b-field',{attrs:{\"label\":\"final_label\"}},[_c('b-input',{attrs:{\"type\":\"text\"},model:{value:(_vm.final_label),callback:function ($$v) {_vm.final_label=(typeof $$v === 'string'? $$v.trim(): $$v)},expression:\"final_label\"}})],1)],1),_c('b-field',{attrs:{\"grouped\":\"grouped\",\"group-multiline\":\"group-multiline\"}},[_c('b-field',{attrs:{\"label\":\"player_info.black.name\"}},[_c('b-input',{attrs:{\"type\":\"text\"},model:{value:(_vm.black_name),callback:function ($$v) {_vm.black_name=(typeof $$v === 'string'? $$v.trim(): $$v)},expression:\"black_name\"}})],1),_c('b-field',{attrs:{\"label\":\"player_info.white.name\"}},[_c('b-input',{attrs:{\"type\":\"text\"},model:{value:(_vm.white_name),callback:function ($$v) {_vm.white_name=(typeof $$v === 'string'? $$v.trim(): $$v)},expression:\"white_name\"}})],1)],1),_c('b-field',{attrs:{\"grouped\":\"grouped\",\"group-multiline\":\"group-multiline\"}},[_c('b-field',{attrs:{\"label\":\"slider_show\"}},[_c('b-switch',{model:{value:(_vm.slider_show),callback:function ($$v) {_vm.slider_show=$$v},expression:\"slider_show\"}})],1),_c('b-field',{attrs:{\"label\":\"controller_show\"}},[_c('b-switch',{model:{value:(_vm.controller_show),callback:function ($$v) {_vm.controller_show=$$v},expression:\"controller_show\"}})],1),_c('b-field',{attrs:{\"label\":\"sfen_show\"}},[_c('b-switch',{model:{value:(_vm.sfen_show),callback:function ($$v) {_vm.sfen_show=$$v},expression:\"sfen_show\"}})],1),_c('b-field',{attrs:{\"label\":\"overlay_navi\"}},[_c('b-switch',{model:{value:(_vm.overlay_navi),callback:function ($$v) {_vm.overlay_navi=$$v},expression:\"overlay_navi\"}})],1),_c('b-field',{attrs:{\"label\":\"key_event_capture\"}},[_c('b-switch',{model:{value:(_vm.key_event_capture),callback:function ($$v) {_vm.key_event_capture=$$v},expression:\"key_event_capture\"}})],1),_c('b-field',{attrs:{\"label\":\"flip\"}},[_c('b-switch',{model:{value:(_vm.flip),callback:function ($$v) {_vm.flip=$$v},expression:\"flip\"}})],1),_c('b-field',{attrs:{\"label\":\"vlayout\"}},[_c('b-switch',{model:{value:(_vm.vlayout),callback:function ($$v) {_vm.vlayout=$$v},expression:\"vlayout\"}})],1),_c('b-field',{attrs:{\"label\":\"digit_show\"}},[_c('b-switch',{model:{value:(_vm.digit_show),callback:function ($$v) {_vm.digit_show=$$v},expression:\"digit_show\"}})],1),_c('b-field',{attrs:{\"label\":\"debug_mode\"}},[_c('b-switch',{model:{value:(_vm.debug_mode),callback:function ($$v) {_vm.debug_mode=$$v},expression:\"debug_mode\"}})],1),_c('b-field',{attrs:{\"label\":\"hidden_if_piece_stand_blank\"}},[_c('b-switch',{model:{value:(_vm.hidden_if_piece_stand_blank),callback:function ($$v) {_vm.hidden_if_piece_stand_blank=$$v},expression:\"hidden_if_piece_stand_blank\"}})],1),_c('b-field',{attrs:{\"label\":\"setting_button_show\"}},[_c('b-switch',{model:{value:(_vm.setting_button_show),callback:function ($$v) {_vm.setting_button_show=$$v},expression:\"setting_button_show\"}})],1),_c('b-field',{attrs:{\"label\":\"summary_show\"}},[_c('b-switch',{model:{value:(_vm.summary_show),callback:function ($$v) {_vm.summary_show=$$v},expression:\"summary_show\"}})],1),_c('b-field',{attrs:{\"label\":\"operation_disable\"}},[_c('b-switch',{model:{value:(_vm.operation_disable),callback:function ($$v) {_vm.operation_disable=$$v},expression:\"operation_disable\"}})],1)],1),_c('b-field',{attrs:{\"label\":\"human_side_key\"}},[_c('div',{staticClass:\"block\"},[_vm._l((_vm.SideInfo.values),function(e){return [_c('b-radio',{attrs:{\"native-value\":e.key},model:{value:(_vm.human_side_key),callback:function ($$v) {_vm.human_side_key=$$v},expression:\"human_side_key\"}},[_vm._v(_vm._s(e.key))])]})],2)]),_c('b-field',{attrs:{\"label\":\"kifu_body (KIF or USI(sfen)形式\"}},[_c('b-input',{attrs:{\"type\":\"textarea\"},model:{value:(_vm.kifu_body),callback:function ($$v) {_vm.kifu_body=$$v},expression:\"kifu_body\"}})],1),_c('article',{staticClass:\"message is-primary has-text-left\"},[_vm._m(21),_c('div',{staticClass:\"message-body\"},[_vm._v(\"<shogi-player\\n:\"),_c('b',[_vm._v(\"run_mode\")]),_vm._v(\"=\\\"'\"+_vm._s(_vm.run_mode)+\"'\\\"\\n:\"),_c('b',[_vm._v(\"theme\")]),_vm._v(\"=\\\"'\"+_vm._s(_vm.theme)+\"'\\\"\\n:\"),_c('b',[_vm._v(\"bg_variant\")]),_vm._v(\"=\\\"'\"+_vm._s(_vm.bg_variant)+\"'\\\"\\n:\"),_c('b',[_vm._v(\"piece_variant\")]),_vm._v(\"=\\\"'\"+_vm._s(_vm.piece_variant)+\"'\\\"\\n:\"),_c('b',[_vm._v(\"size\")]),_vm._v(\"=\\\"'\"+_vm._s(_vm.size)+\"'\\\"\\n:\"),_c('b',[_vm._v(\"start_turn\")]),_vm._v(\"=\\\"\"+_vm._s(_vm.start_turn)+\"\\\"\\n:\"),_c('b',[_vm._v(\"slider_show\")]),_vm._v(\"=\\\"\"+_vm._s(_vm.slider_show)+\"\\\"\\n:\"),_c('b',[_vm._v(\"controller_show\")]),_vm._v(\"=\\\"\"+_vm._s(_vm.controller_show)+\"\\\"\\n:\"),_c('b',[_vm._v(\"sfen_show\")]),_vm._v(\"=\\\"\"+_vm._s(_vm.sfen_show)+\"\\\"\\n:\"),_c('b',[_vm._v(\"overlay_navi\")]),_vm._v(\"=\\\"\"+_vm._s(_vm.overlay_navi)+\"\\\"\\n:\"),_c('b',[_vm._v(\"human_side_key\")]),_vm._v(\"=\\\"'\"+_vm._s(_vm.human_side_key)+\"'\\\"\\n:\"),_c('b',[_vm._v(\"sound_effect\")]),_vm._v(\"=\\\"\"+_vm._s(_vm.sound_effect)+\"\\\"\\n:\"),_c('b',[_vm._v(\"volume\")]),_vm._v(\"=\\\"\"+_vm._s(_vm.volume)+\"\\\"\\n:\"),_c('b',[_vm._v(\"key_event_capture\")]),_vm._v(\"=\\\"\"+_vm._s(_vm.key_event_capture)+\"\\\"\\n:\"),_c('b',[_vm._v(\"debug_mode\")]),_vm._v(\"=\\\"\"+_vm._s(_vm.debug_mode)+\"\\\"\\n:\"),_c('b',[_vm._v(\"hidden_if_piece_stand_blank\")]),_vm._v(\"=\\\"\"+_vm._s(_vm.hidden_if_piece_stand_blank)+\"\\\"\\n:\"),_c('b',[_vm._v(\"setting_button_show\")]),_vm._v(\"=\\\"\"+_vm._s(_vm.setting_button_show)+\"\\\"\\n:\"),_c('b',[_vm._v(\"summary_show\")]),_vm._v(\"=\\\"\"+_vm._s(_vm.summary_show)+\"\\\"\\n:\"),_c('b',[_vm._v(\"operation_disable\")]),_vm._v(\"=\\\"\"+_vm._s(_vm.operation_disable)+\"\\\"\\n:\"),_c('b',[_vm._v(\"flip\")]),_vm._v(\"=\\\"\"+_vm._s(_vm.flip)+\"\\\"\\n:\"),_c('b',[_vm._v(\"vlayout\")]),_vm._v(\"=\\\"\"+_vm._s(_vm.vlayout)+\"\\\"\\n:\"),_c('b',[_vm._v(\"digit_show\")]),_vm._v(\"=\\\"\"+_vm._s(_vm.digit_show)+\"\\\"\\n:\"),_c('b',[_vm._v(\"final_label\")]),_vm._v(\"=\\\"'\"+_vm._s(_vm.final_label)+\"'\\\"\\n:\"),_c('b',[_vm._v(\"player_info\")]),_vm._v(\"=\\\"\"+_vm._s(_vm.player_info)+\"\\\"\\n:\"),_c('b',[_vm._v(\"kifu_body\")]),_vm._v(\"=\\\"'\"+_vm._s(_vm.kifu_body)+\"'\\\"\\n/>\")])]),_c('br'),_c('br'),_c('h4',{staticClass:\"title\"},[_vm._v(\"操作モードのイベント受信内容\")]),_c('b-field',{attrs:{\"label\":\"イベント確認(buefy.toast)\"}},[_c('b-switch',{model:{value:(_vm.trigger_toast_p),callback:function ($$v) {_vm.trigger_toast_p=$$v},expression:\"trigger_toast_p\"}})],1),_c('b-field',{attrs:{\"label\":\"@update:play_mode_advanced_full_moves_sfen: 操作モードで指した直後の局面を発行(movesあり)\"}},[_c('b-input',{attrs:{\"value\":JSON.stringify(_vm.play_mode_advanced_full_moves_sfen),\"readonly\":\"readonly\",\"type\":\"textarea\",\"rows\":\"1\"}})],1),_c('b-field',{attrs:{\"label\":\"@update:play_mode_advanced_snapshot_sfen: 操作モードで指した直後の局面を発行(movesなし)\"}},[_c('b-input',{attrs:{\"value\":JSON.stringify(_vm.play_mode_advanced_snapshot_sfen),\"readonly\":\"readonly\",\"type\":\"text\"}})],1),_c('b-field',{attrs:{\"label\":\"@update:play_mode_advanced_last_move: 操作モードで指した手(sfenのmovesの最後の1つ)\"}},[_c('b-input',{attrs:{\"value\":JSON.stringify(_vm.play_mode_advanced_last_move),\"readonly\":\"readonly\",\"type\":\"text\"}})],1),_c('b-field',{attrs:{\"label\":\"@update:play_mode_advanced_moves: 操作モードで指した手を含むmoves配列\"}},[_c('b-input',{attrs:{\"value\":JSON.stringify(_vm.play_mode_advanced_moves),\"readonly\":\"readonly\",\"type\":\"text\"}})],1),_c('b-field',{attrs:{\"label\":\"@update:mediator_snapshot_sfen: 操作モード(または再生モード)で盤面が変化したとき(常に更新)\"}},[_c('b-input',{attrs:{\"value\":JSON.stringify(_vm.mediator_snapshot_sfen),\"readonly\":\"readonly\",\"type\":\"text\"}})],1),_c('b-field',{attrs:{\"label\":\"@update:edit_mode_snapshot_sfen: 編集モードで盤面が変化したとき\"}},[_c('b-input',{attrs:{\"value\":JSON.stringify(_vm.edit_mode_snapshot_sfen),\"readonly\":\"readonly\",\"type\":\"text\"}})],1),_c('b-field',{attrs:{\"label\":\"@update:turn_offset: 手数が変化したとき\"}},[_c('b-input',{attrs:{\"value\":JSON.stringify(_vm.turn_offset),\"readonly\":\"readonly\",\"type\":\"text\"}})],1),_c('br')],1)])]),_c('div',{staticClass:\"table_wrap\"},[_c('div',{staticClass:\"content\",domProps:{\"innerHTML\":_vm._s(_vm.options_md)}})])])]),_c('div',{staticClass:\"section\"},[_c('a',{attrs:{\"name\":\"api\"}}),_c('div',{staticClass:\"container\"},[_c('h2',{staticClass:\"title\"},[_vm._v(\"API Methods\")]),_c('hr'),_c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column\"},[_c('ShogiPlayer',{ref:\"api_sp\",attrs:{\"summary_show\":false,\"hidden_if_piece_stand_blank\":true,\"board_cell_left_click_user_handle\":_vm.board_cell_left_click_user_handle,\"overlay_navi\":false,\"debug_mode\":false}})],1)]),_c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column\"},[_c('div',{staticClass:\"buttons is-centered\"},[_c('b-button',{attrs:{\"label\":\"api_random_puton\"},on:{\"click\":_vm.run_api_random_puton}}),_c('b-button',{attrs:{\"label\":\"api_retract_a_move\"},on:{\"click\":_vm.run_api_retract_a_move}})],1)])]),_c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column\"},[_c('div',{staticClass:\"table_wrap\"},[_c('div',{staticClass:\"content\",domProps:{\"innerHTML\":_vm._s(_vm.api_md)}})])])])])]),_c('div',{staticClass:\"section\"},[_c('a',{attrs:{\"name\":\"license\"}}),_c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"table_wrap\"},[_c('div',{staticClass:\"content\",domProps:{\"innerHTML\":_vm._s(_vm.license_md)}})])])]),_vm._m(22)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"hero is-primary is-medium\"},[_c('div',{staticClass:\"hero-head\"},[_c('nav',{staticClass:\"navbar\"},[_c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"navbar-brand\"},[_c('span',{staticClass:\"navbar-burger burger\",attrs:{\"data-target\":\"navbarMenuHeroA\"}},[_c('span'),_c('span'),_c('span')])]),_c('div',{staticClass:\"navbar-menu\",attrs:{\"id\":\"navbarMenuHeroA\"}},[_c('div',{staticClass:\"navbar-end\"},[_c('a',{staticClass:\"navbar-item\",attrs:{\"href\":\"https://github.com/akicho8/shogi-player\"}},[_c('span',{staticClass:\"icon\"},[_c('i',{staticClass:\"fab fa-github\"})]),_c('span',[_vm._v(\"Github\")])])])])])])]),_c('div',{staticClass:\"hero-body\"},[_c('div',{staticClass:\"container has-text-centered\"},[_c('h1',{staticClass:\"title\"},[_vm._v(\"shogi-player\")])])]),_c('div',{staticClass:\"hero-foot\"},[_c('nav',{staticClass:\"tabs\"},[_c('div',{staticClass:\"container\"},[_c('ul',[_c('li',[_c('a',{attrs:{\"href\":\"#summary\"}},[_vm._v(\"概要\")])]),_c('li',[_c('a',{attrs:{\"href\":\"#examples\"}},[_vm._v(\"デモ\")])]),_c('li',[_c('a',{attrs:{\"href\":\"#usage\"}},[_vm._v(\"使い方\")])]),_c('li',[_c('a',{attrs:{\"href\":\"#options\"}},[_vm._v(\"オプション\")])]),_c('li',[_c('a',{attrs:{\"href\":\"#api\"}},[_vm._v(\"API\")])])])])])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"section\"},[_c('a',{attrs:{\"name\":\"summary\"}}),_c('div',{staticClass:\"container\"},[_c('h2',{staticClass:\"title\"},[_vm._v(\"概要\")]),_c('hr'),_c('div',{staticClass:\"content\"},[_c('p',[_vm._v(\"将棋の棋譜を再生できる JavaScript で次の特徴があります\")]),_c('ul',[_c('li',[_vm._v(\"自分で駒を動かせる (play_mode)\")]),_c('li',[_vm._v(\"編集モードで詰将棋などが作れる (edit_mode)\")]),_c('li',[_vm._v(\"KIF と SFEN フォーマットに対応\")])]),_c('p',[_vm._v(\"その他\")]),_c('ul',[_c('li',[_vm._v(\"Vue.js で動作\")]),_c('li',[_vm._v(\"Buefy 使用\")])])])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('article',{staticClass:\"message is-info\"},[_c('div',{staticClass:\"message-body\"},[_vm._v(\"コメント付きの KIF 表示。9手目から表示。テーマ:real。駒音あり\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',{staticClass:\"subtitle yumincho\"},[_c('a',{attrs:{\"href\":\"http://www.asahi.com/shougi/asahicup_live/?ref=jsa\",\"target\":\"_blank\"}},[_vm._v(\"第11回朝日杯将棋オープン戦本戦\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('article',{staticClass:\"message is-info\"},[_c('div',{staticClass:\"message-body\"},[_vm._v(\"シンプル。最終手から表示。※盤面クリックで操作可。天王山クリックで反転\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('article',{staticClass:\"message is-info\"},[_c('div',{staticClass:\"message-body\"},[_vm._v(\"スライダーのみ表示。初手から表示\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('article',{staticClass:\"message is-info\"},[_c('div',{staticClass:\"message-body\"},[_vm._v(\"コントローラーとスライダー付き。121手目から表示。\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('article',{staticClass:\"message is-info\"},[_c('div',{staticClass:\"message-body\"},[_vm._v(\"駒落ち。最終手から表示。局面のSFENも表示\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column\"},[_c('article',{staticClass:\"message is-success has-text-left\"},[_c('div',{staticClass:\"message-header\"},[_c('p',[_vm._v(\"共通する操作方法\")])]),_c('div',{staticClass:\"message-body\"},[_c('div',{staticClass:\"content\"},[_c('ul',[_c('li',[_vm._v(\"盤面の左右をクリックすると前後の手番に進みます\")]),_c('li',[_vm._v(\"シフトを押しながらで10倍速になります\")]),_c('li',[_vm._v(\"シフト以外のシステムキーだと50倍速になります(シフトキーも押していると500倍速)\")]),_c('li',[_vm._v(\"天王山(５五の地点)をクリックすると反転します\")]),_c('li',[_vm._v(\"「N手目」の部分をクリックで編集できます\")]),_c('li',[_vm._v(\"スライダーがある場合は優先的にフォーカスします\")]),_c('li',[_vm._v(\"スライダーにフォーカスがある状態だと左右キーが効きます(ブラウザの標準機能)\")]),_c('li',[_vm._v(\"スライダーは fn + ←→ キーで最初と最後に移動します(ブラウザの標準機能)\")])])])])])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('article',{staticClass:\"message is-info\"},[_c('div',{staticClass:\"message-body\"},[_vm._v(\"自分で操作できる。戻れば操作をやり直せる\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('article',{staticClass:\"message is-info\"},[_c('div',{staticClass:\"message-body\"},[_vm._v(\"human_side_key オプションで先手側だけ操作できるようにする\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('article',{staticClass:\"message is-info\"},[_c('div',{staticClass:\"message-body\"},[_vm._v(\"駒落ちの場合は後手から始まる\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('article',{staticClass:\"message is-info\"},[_c('div',{staticClass:\"message-body\"},[_vm._v(\"2手目の盤面から開始する場合も後手から始まる\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('article',{staticClass:\"message is-info\"},[_c('div',{staticClass:\"message-body\"},[_vm._v(\"SFENで72となっていても71手目の局面を表示している(後手番)\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column\"},[_c('article',{staticClass:\"message is-success has-text-left\"},[_c('div',{staticClass:\"message-header\"},[_c('p',[_vm._v(\"操作モードについて\")])]),_c('div',{staticClass:\"message-body\"},[_c('div',{staticClass:\"content\"},[_c('ul',[_c('li',[_vm._v(\"スライダー等で変更した任意局面から手番側の操作が行えます\")]),_c('li',[_vm._v(\"いちど指すとその手が最終手になります(分岐には対応していません)\")]),_c('li',[_vm._v(\"human_side_key オプションで片側の操作のみに絞れます\")]),_c('li',[_vm._v(\"Emitイベントに反応して、相手側の指し手を追加した棋譜で kifu_body を更新すればCPUとの対戦のようなことができます\")]),_c('li',[_vm._v(\"再生モードの棋譜とは独立しています(再生モードの棋譜を上書きしません)\")]),_c('li',[_vm._v(\"指し手を決定したときスライダーがあればスライダーにフォーカスにするのですぐに「←」キーで手を戻すことができます(2019-05-02)\")])])])])])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('article',{staticClass:\"message is-info\"},[_c('div',{staticClass:\"message-body\"},[_vm._v(\"すべての駒を自由に動かせる\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('article',{staticClass:\"message is-info\"},[_c('div',{staticClass:\"message-body\"},[_vm._v(\"詰将棋用の初期配置で開始\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('article',{staticClass:\"message is-info\"},[_c('div',{staticClass:\"message-body\"},[_vm._v(\"外部KIFファイルの読み込み\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column\"},[_c('article',{staticClass:\"message is-success has-text-left\"},[_c('div',{staticClass:\"message-header\"},[_c('p',[_vm._v(\"操作方法\")])]),_c('div',{staticClass:\"message-body\"},[_c('div',{staticClass:\"content\"},[_c('ul',[_c('li',[_vm._v(\"ダブルタップまたは右クリックで盤上の駒の反転と向きを変更できます(ショートカットキー: v, r, Space)\")]),_c('li',[_vm._v(\"修飾キー(shift, option, meta, control キーのいずれか)を押しながら「左クリック」でも変更できます\")]),_c('li',[_vm._v(\"駒を持った状態で右クリックすると駒を元に戻せます (ショートカットキー: Escape, q)\")]),_c('li',[_vm._v(\"駒台と駒箱をクリックしたことにするショートカットキーがあります(b:先手の駒台 w:後手の駒台 Backspace または t で駒箱)\")]),_c('li',[_vm._v(\"その際に、修飾キーを押しているとまとめて移動します\")]),_c('li',[_vm._v(\"たとえば先手の駒箱の歩をクリックしてから shift + w で先手の駒台の歩がすべて後手の駒台に移動します\")]),_c('li',[_vm._v(\"駒を持っていない状態で、盤上の駒にカーソルを合わせて w, b, Backspace, t したときは自動的に持ち上げてからそのキーをタイプしたことになります(持ち上げる手間が省略できる)\")]),_c('li',[_vm._v(\"駒を持っていない状態で盤上の駒にカーソルを合わせて q をタイプすると駒台から同種の駒を取り出したことになります (factorioのピペットツールのように動作します)\")])])])])])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"message-header\"},[_c('p',[_vm._v(\"再生モードからのモード切り替えについて\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('li',[_vm._v(\"一方 KIF の場合は都合上\"),_c('b',[_vm._v(\"現在の局面から\")]),_vm._v(\"の開始になります。(つまりスライダーで最初の局面に戻せません)\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"message-header\"},[_c('p',[_vm._v(\"引数\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('footer',{staticClass:\"footer\"},[_c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column has-text-centered\"},[_c('a',{attrs:{\"href\":\"https://bulma.io\"}},[_c('img',{attrs:{\"src\":require(\"./assets/made-with-bulma.png\"),\"alt\":\"Made with Bulma\",\"width\":\"128\",\"height\":\"24\"}})])])])])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-1beb9d1f\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/template-compiler/preprocessor.js?engine=pug!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = Nrde\n// module chunks = 1","import MemoryRecord from \"js-memory-record\"\nimport PieceVector from \"./piece_vector.js\"\n\nexport default class Piece extends MemoryRecord {\n  static get define() {\n    return [\n      // 順序について\n      // http://yaneuraou.yaneu.com/2016/07/15/sfen%E6%96%87%E5%AD%97%E5%88%97%E3%81%AF%E6%9C%AC%E6%9D%A5%E3%81%AF%E4%B8%80%E6%84%8F%E3%81%AB%E5%AE%9A%E3%81%BE%E3%82%8B%E4%BB%B6/\n      // https://web.archive.org/web/20080131070731/http://www.glaurungchess.com/shogi/usi.html\n      { key: \"K\", name: \"玉\", alias_name: \"王\", promoted_name: null, promoted_alias_name: null, },\n      { key: \"R\", name: \"飛\", alias_name: null, promoted_name: \"龍\", promoted_alias_name: \"竜\", },\n      { key: \"B\", name: \"角\", alias_name: null, promoted_name: \"馬\", promoted_alias_name: null, },\n      { key: \"G\", name: \"金\", alias_name: null, promoted_name: null, promoted_alias_name: null, },\n      { key: \"S\", name: \"銀\", alias_name: null, promoted_name: \"全\", promoted_alias_name: null, },\n      { key: \"N\", name: \"桂\", alias_name: null, promoted_name: \"圭\", promoted_alias_name: null, },\n      { key: \"L\", name: \"香\", alias_name: null, promoted_name: \"杏\", promoted_alias_name: null, },\n      { key: \"P\", name: \"歩\", alias_name: null, promoted_name: \"と\", promoted_alias_name: null, },\n    ]\n  }\n\n  static lookup(key) {\n    if (typeof key === \"string\") {\n      key = key.toUpperCase()\n    }\n    return super.lookup(key)\n  }\n\n  static kif_lookup(key) {\n    return this.values.find((e) => [e.name, e.alias_name].includes(key))\n  }\n\n  static kif_promoted_lookup(key) {\n    return this.values.find((e) => [e.promoted_name, e.promoted_alias_name].includes(key))\n  }\n\n  get css_class_list() {\n    return [\"piece_name\", `piece_${this.key}`]\n  }\n\n  get promotable_p() {\n    return !!this.promoted_name\n  }\n\n  get piece_vector() {\n    return PieceVector.fetch(this.key)\n  }\n\n}\n\nif (process.argv[1] === __filename) {\n  console.log(Piece.fetch(\"K\"))\n  console.log(Piece.fetch(\"K\"))\n  console.log(Piece.lookup(\"\"))\n  console.log(Piece.values)\n  console.log(Piece.values_map.get(\"K\"))\n  console.log(Piece.fetch(\"K\").key)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/piece.js","module.exports = \"<br>\\n<br>\\n  \\n# クレジット (利用素材)\\n<hr>\\n\\n将棋駒と将棋盤 画像フリー素材 | 無料素材倶楽部\\nhttp://sozai.7gates.net/docs/japanese-chess/\\n\\n将棋図案駒\\nhttps://twitter.com/Shogi_Zuan\\n\\nCC Resources for Shogi Applications | 将棋アプリ用クリエイティブコモンズ画像\\nhttp://mucho.girly.jp/bona/\\n \\nフリー画像素材 - BEIZ Graphics(ベイツ・グラフィックス)\\nhttps://www.beiz.jp/\\n \\nぱくたそ-フリー素材・無料写真ダウンロード\\nhttps://www.pakutaso.com/\\n \\nしんえれ外部駒\\nhttp://shineleckoma.web.fc2.com/\\n \\n8 bit FX | SampleScience\\nhttps://www.samplescience.ca/2018/03/8-bit-fx.html\\n \\nPaper-co | 紙のテクスチャー素材を無料でダウンロードできるサイト\\nhttp://free-paper-texture.com/\\n \\nフリーテクスチャ素材館／畳のテクスチャ素材01（PHOTO）\\nhttps://free-texture.net/seamless-pattern/tatami01.html\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/license.md\n// module id = PYSR\n// module chunks = 1","import MemoryRecord from \"js-memory-record\"\n\nexport default class BgVariantInfo extends MemoryRecord {\n  static get define() {\n    return [\n      /* eslint-disable */\n      { key: 'a', },\n      { key: 'b', },\n      { key: 'c', },\n      { key: 'd', },\n      { key: 'e', },\n      { key: 'f', },\n      { key: 'g', },\n      { key: 'h', },\n      { key: 'i', },\n      { key: 'j', },\n      { key: 'k', },\n      { key: 'l', },\n      { key: 'm', },\n      { key: 'n', },\n      { key: 'o', },\n      { key: 'p', },\n      { key: 'q', },\n      { key: 'r', },\n      { key: 's', },\n      { key: 't', },\n      { key: 'u', },\n      { key: 'v', },\n      { key: 'w', },\n      { key: 'x', },\n      { key: 'y', },\n      { key: 'z', },\n      /* eslint-enable */\n    ]\n  }\n}\n\nif (process.argv[1] === __filename) {\n  console.log(BgVariantInfo.fetch(\"a\").key)\n  console.log(BgVariantInfo.fetch(\"a\").name)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/bg_variant_info.js","import MemoryRecord from \"js-memory-record\"\n\nexport default class PieceVariantInfo extends MemoryRecord {\n  static get define() {\n    return [\n      /* eslint-disable */\n      { key: 'a', name: \"デフォルト\",      },\n      { key: 'b', name: \"将棋図案駒(新)\",  },\n      { key: 'c', name: \"将棋図案駒(旧)\",  },\n      /* eslint-enable */\n    ]\n  }\n}\n\nif (process.argv[1] === __filename) {\n  console.log(PieceVariantInfo.fetch(\"a\").key)\n  console.log(PieceVariantInfo.fetch(\"a\").name)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/piece_variant_info.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.piece_stand_show_flag)?_c('div',{staticClass:\"piece_stand_outer\",class:_vm.piece_stand_outer_class},[_c('div',{staticClass:\"location_mark_wrap\"},[_c('div',{staticClass:\"location_mark\",domProps:{\"innerHTML\":_vm._s(_vm.location_name)}}),(_vm.$parent.theme === 'simple')?[(!_vm.$parent.current_vlayout)?[_c('div',{staticClass:\"piece_count piece_count1\"},[_vm._v(\"99\")])]:_vm._e()]:_vm._e(),(_vm.$parent.current_vlayout && _vm.player_name)?[_c('div',{staticClass:\"player_name\"},[_vm._v(_vm._s(_vm.player_name))])]:_vm._e()],2),(!_vm.$parent.current_vlayout && _vm.player_name)?[_c('div',{staticClass:\"player_name\"},[_vm._v(_vm._s(_vm.player_name))])]:_vm._e(),_c('ul',{staticClass:\"piece_stand\",class:_vm.piece_stand_class,on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.$parent.piece_stand_click(_vm.location, $event)},\"contextmenu\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.$parent.hold_cancel($event)}}},_vm._l((_vm.hold_pieces),function(ref){\nvar piece = ref[0];\nvar count = ref[1];\nreturn _c('li',{on:{\"click\":function($event){$event.stopPropagation();return _vm.$parent.piece_stand_piece_click(_vm.location, piece, false, $event)},\"mouseover\":function($event){return _vm.$parent.piece_stand_mouseover_handle(_vm.location, piece, $event)},\"mouseleave\":_vm.$parent.mouseleave_handle}},[_c('div',{staticClass:\"piece_back\",class:_vm.piece_back_class(piece)},[_c('div',{staticClass:\"piece_fore\",class:_vm.piece_fore_class(piece)},[_vm._v(_vm._s(piece.name))])]),(count >= 1)?_c('div',{staticClass:\"piece_count\",class:(\"piece_count\" + count)},[_vm._v(_vm._s(count))]):_vm._e()])}),0)],2):_vm._e()}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-3c933f9b\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/template-compiler/preprocessor.js?engine=pug!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/PieceStand.vue\n// module id = WC9Z\n// module chunks = 1 2","import MemoryRecord from \"js-memory-record\"\nimport Location from \"./location\"\n\nexport default class AnyFuncInfo extends MemoryRecord {\n  static get define() {\n    return [\n      /* eslint-disable */\n      { key: \"☖の持駒を駒箱へ\",   func: e => { e.mediator.hold_pieces_to_piece_box(Location.fetch(\"white\")) }, },\n      { key: \"駒箱から☖の持駒へ\", func: e => { e.mediator.piece_box_to_hold_pieces(Location.fetch(\"white\")) }, },\n      { key: \"駒箱を正規化\",       func: e => { e.mediator.piece_box_piece_couns_adjust() }, },\n      { key: \"駒箱に駒を一式生成\", func: e => { e.mediator.piece_box_reset_by_preset(\"全部駒箱\") }, },\n      { key: \"駒箱の駒をクリア\",   func: e => { e.mediator.piece_box_clear() }, },\n      { key: \"指将棋用玉配置\",     func: e => { e.mediator.king_formation_auto_set()   }, },\n      { key: \"指将棋用玉回収\",     func: e => { e.mediator.king_formation_auto_unset() }, },\n      // { key: \"盤面をシャッフル\",   func: e => { e.mediator.shuffle_apply(4) }, },\n      { key: \"盤面シャッフル\",     func: e => { e.shuffle_dialog_open() }, },\n      { key: \"上ローテイト\",       func: e => { e.mediator.slide_xy(0, -1) }, },\n      { key: \"下ローテイト\",       func: e => { e.mediator.slide_xy(0, 1)  }, },\n      { key: \"左ローテイト\",       func: e => { e.mediator.slide_xy(-1, 0) }, },\n      { key: \"右ローテイト\",       func: e => { e.mediator.slide_xy(1, 0)  }, },\n      // { key: \"指将棋用玉配置(左)\", func: e => { e.mediator.king_formation_set(\"bottom_left\") }, },\n      // { key: \"指将棋用玉回収(左)\", func: e => { e.mediator.king_formation_unset(\"bottom_left\") }, },\n      // { key: \"指将棋用玉配置(右)\", func: e => { e.mediator.king_formation_set(\"bottom_right\") }, },\n      // { key: \"指将棋用玉回収(右)\", func: e => { e.mediator.king_formation_unset(\"bottom_right\") }, },\n      /* eslint-enable */\n    ]\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/any_func_info.js","import _ from \"lodash\"\n\nimport Piece from \"./piece\"\nimport Place from \"./place\"\nimport Mediator from \"./mediator\"\nimport Location from \"./location\"\nimport Board from \"./board\"\n\nexport default class SfenSerializer {\n  constructor(mediator) {\n    this.mediator = mediator\n  }\n\n  get to_s() {\n    const parts = this.__base_parts\n    parts.push(this.mediator.display_turn + 1)           // 1\n    return parts.join(\" \")\n  }\n\n  // 局面ペディア用(ターンを指定するとエラーになるため)\n  get to_s_without_turn() {\n    return this.__base_parts.join(\" \")\n  }\n\n  get to_board_sfen() {\n    const rows = []\n    _.times(Board.dimension, (y) => {\n      let str = \"\"\n      let space = 0\n      _.times(Board.dimension, (x) => {\n        const place = Place.fetch([x, y])\n        const soldier = this.mediator.board.lookup(place)\n        if (_.isNil(soldier)) {\n          space++\n        } else {\n          if (space >= 1) {\n            str += space\n            space = 0\n          }\n          if (soldier.promoted) {\n            str += \"+\"\n          }\n          let key = soldier.piece.key\n          if (soldier.location.key === \"white\") {\n            key = key.toLowerCase()\n          }\n          str += key\n        }\n      })\n      if (space >= 1) {\n        str += space\n      }\n      rows.push(str)\n    })\n    return rows.join(\"/\")\n  }\n\n  get to_hold_pieces() {\n    let str = Location.values.map((location_info) => {\n      const hold_pieces = this.mediator.hold_pieces[location_info.key]\n      const values = Piece.values.map((e) => {\n        let count = hold_pieces[e.key] || 0\n        let str = \"\"\n        if (count === 0) {\n          return null\n        }\n        if (count >= 2) {\n          str += count\n        }\n        let key = e.key\n        if (location_info.key === \"white\") {\n          key = key.toLowerCase()\n        } else {\n          key = key.toUpperCase()\n        }\n        str += key\n        return str\n      })\n      return _.compact(values).join(\"\")\n    }).join(\"\")\n\n    if (_.isEmpty(str)) {\n      str = \"-\"\n    }\n\n    return str\n  }\n\n  // private\n\n  get __base_parts() {\n    const parts = []\n    parts.push(this.to_board_sfen)                    // 9/9/9/9...\n    parts.push(this.mediator.current_location.key[0]) // \"b\"\n    parts.push(this.to_hold_pieces)                   // \"-\"\n    return parts\n  }\n}\n\nif (process.argv[1] === __filename) {\n  const mediator = new Mediator()\n  mediator.kifu_body = \"position sfen +lnsgkgsnl/1r5b1/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL b S2s 1 moves 7i6h S*2d\"\n  mediator.current_turn = 1\n  mediator.run()\n  const sfen_serializer = new SfenSerializer(mediator)\n  console.log(sfen_serializer.to_s)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/sfen_serializer.js","import _ from \"lodash\"\nimport { mapState } from 'vuex'\n\nexport default {\n  /* eslint-disable */\n  props: {\n    slider_show:                 { type: Boolean, default: false, },\n    controller_show:             { type: Boolean, default: false, },\n    key_event_capture:           { type: Boolean, default: false  },\n    shift_key_mag:               { type: Number,  default: 10,    },\n    system_key_mag:              { type: Number,  default: 50,    },\n    flip:                        { type: Boolean, default: false, },\n    vlayout:                     { type: Boolean, default: false, },\n    hidden_if_piece_stand_blank: { type: Boolean, default: false, },\n    setting_button_show:         { type: Boolean, default: true,  },\n    summary_show:                { type: Boolean, default: true,  },\n    operation_disable:           { type: Boolean, default: false, },\n  },\n  /* eslint-enable */\n\n  data() {\n    return {\n    }\n  },\n\n  mounted() {\n    window.addEventListener(\"keydown\", this.keydown_hook, false)\n  },\n\n  beforeDestroy() {\n    window.removeEventListener('keydown', this.keydown_hook)\n  },\n\n  created() {\n    this.$store.state.current_flip = this.flip\n    this.$store.state.current_vlayout = this.vlayout\n  },\n\n  watch: {\n    /* eslint-disable */\n    current_flip(v)     { this.$emit(\"update:flip\", v)       }, // 中 -> 外\n    flip(v)             { this.$store.state.current_flip = v }, // 外 -> 中\n\n    current_vlayout(v)     { this.$emit(\"update:vlayout\", v)       }, // 中 -> 外\n    vlayout(v)             { this.$store.state.current_vlayout = v }, // 外 -> 中\n    /* eslint-enable */\n  },\n\n  methods: {\n    keydown_hook(e) {\n      if (this.current_debug_mode && false) {\n        this.log(document.activeElement)\n        this.log(e.shiftKey, e.ctrlKey, e.altKey, e.metaKey)\n        this.log(\"e\", e)\n        this.log(\"key\", e.key)\n        this.log(\"code\", e.code)\n        this.log(\"repeat\", e.repeat)\n      }\n\n      if (this.operation_disable) {\n        return\n      }\n\n      if (this.shortcut_hook(e)) {\n        return\n      }\n\n      if (!this.key_event_capture) {\n        return\n      }\n\n      if (this.current_run_mode === \"view_mode\" || this.current_run_mode === \"play_mode\") {\n        const dom = document.activeElement\n        const controllers = [this.$refs.first, this.$refs.previous, this.$refs.next, this.$refs.last] // FIXME: 指定DOMの下にあるか？の方法がわかればもっと簡潔になる\n        if (!(dom === undefined || dom.tagName === \"BODY\" || _.includes(controllers, dom))) {\n          return\n        }\n\n        if (e.code === \"Backspace\" || e.code === \"ArrowUp\" || e.code === \"ArrowLeft\" || e.key === \"k\" || e.key === \"p\" || e.key === \"b\") {\n          this.relative_move(-1, e)\n          e.preventDefault()\n        }\n\n        if (e.code === \"Space\" || e.code === \"Enter\" || e.code === \"ArrowDown\" || e.code === \"ArrowRight\" || e.key === \"j\" || e.key === \"n\" || e.key === \"f\") {\n          this.relative_move(1, e)\n          e.preventDefault()\n        }\n      }\n\n      // let gap = null\n      // let force_value = null\n      //\n      // if (e.code === \"Space\" || e.code === \"Enter\" || e.code === \"ArrowDown\" || e.code === \"ArrowRight\" || e.key === \"j\" || e.key === \"n\" || e.key === \"f\") {\n      //   gap = 1\n      // }\n      // if (e.code === \"Backspace\" || e.code === \"ArrowUp\" || e.code === \"ArrowLeft\" || e.key === \"k\" || e.key === \"p\" || e.key === \"b\") {\n      //   gap = -1\n      // }\n      // if (e.key === \"PageUp\") {\n      //   gap = -10\n      // }\n      // if (e.key === \"PageDown\") {\n      //   gap = 10\n      // }\n      // if (e.shiftKey || e.ctrlKey || e.altKey || e.metaKey) {\n      //   if (gap) {\n      //     gap *= 10\n      //   }\n      // }\n      // if (e.key === \"[\" || e.key === \"Home\" || e.code === \"Escape\") {\n      //   force_value = this.turn_offset_min\n      // }\n      // if (e.key === \"]\" || e.key === \"End\") {\n      //   force_value = this.turn_offset_max\n      // }\n      //\n      // let v = this.current_turn\n      // if (gap !== null) {\n      //   v += gap\n      // }\n      // if (force_value !== null) {\n      //   v = force_value\n      // }\n      // if (v < this.turn_offset_min) {\n      //   v = this.turn_offset_min\n      // }\n      // if (this.turn_offset_max < v) {\n      //   v = this.turn_offset_max\n      // }\n      // this.current_turn = v\n      //\n      // if (gap !== null || force_value !== null) {\n      //   e.preventDefault()\n      // }\n    },\n\n    navi_relative_move(v, event) {\n      this.relative_move(v * this.flip_sign, event)\n    },\n\n    relative_move(v, event = null) {\n      if (event) {\n        if (event.shiftKey) {\n          if (this.shift_key_mag) {\n            v *= this.shift_key_mag\n          }\n        }\n        if (event.ctrlKey || event.altKey || event.metaKey) {\n          if (this.system_key_mag) {\n            v *= this.system_key_mag\n          }\n        }\n      }\n\n      this.current_turn_add(v)\n\n      if (!this.focus_to(\"turn_slider\")) {\n        if (v > 0) {\n          this.focus_to(\"next\")\n        } else {\n          this.focus_to(\"previous\")\n        }\n      }\n    },\n\n    move_to_first() {\n      this.current_turn_set(this.turn_offset_min)\n      this.focus_to(\"turn_slider\") || this.focus_to(\"first\")\n    },\n\n    move_to_last() {\n      this.current_turn_set(this.turn_offset_max)\n      this.focus_to(\"turn_slider\") || this.focus_to(\"last\")\n    },\n\n    current_turn_add(v) {\n      this.current_turn_set(this.mediator.turn_offset + v)\n    },\n\n    current_turn_set(v) {\n      const new_val = this.mediator.turn_clamp(v)\n      const updated = this.turn_offset !== new_val\n\n      if (updated) {\n        if (this.current_run_mode === \"view_mode\") {\n          this.view_mode_mediator_update(new_val)\n        }\n        if (this.current_run_mode === \"play_mode\") {\n          this.play_mode_mediator_seek_to(new_val)\n        }\n        this.sound_call(\"piece_sound\")\n        this.$emit(\"update:start_turn\", this.turn_offset)\n      }\n    },\n\n    focus_to(key) {\n      const el = this.$refs[key]\n      if (el) {\n        el.focus()\n        return true\n      }\n      return false\n    },\n\n    board_flip_run() {\n      this.$store.commit(\"flip_toggle\")\n      this.sound_call(\"flip_sound\")\n      this.focus_to(\"turn_slider\")\n    },\n  },\n\n  //\n  // ...mapState([\n  //   \"current_flip\",\n  // ]),\n  //\n  // が、\n  //\n  // Failed to compile.\n  //\n  // ./node_modules/shogi-player/src/components/navi_module.js\n  // Module parse failed: Unexpected token (191:4)\n  // You may need an appropriate loader to handle this file type.\n  // |       return this.current_flip ? -1 : 1\n  // |     },\n  // |     ...mapState([\n  // |       \"current_flip\",\n  // |     ]),\n  //  @ ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./node_modules/shogi-player/src/components/ShogiPlayer.vue 49:19-46\n  //  @ ./node_modules/shogi-player/src/components/ShogiPlayer.vue\n  //  @ ./app/javascript/packs/application.js\n  //  @ multi (webpack)-dev-server/client?http://localhost:3035 ./app/javascript/packs/application.js\n  //\n  // となるため仕方なく Object.assign を使う\n  //\n  computed: Object.assign({}, {\n    flip_sign() {\n      return this.current_flip ? -1 : 1\n    },\n  }, mapState([\n    \"current_flip\",\n    \"current_vlayout\",\n  ])),\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/navi_module.js","import MemoryRecord from \"js-memory-record\"\n\nexport default class SizeInfo extends MemoryRecord {\n  static get define() {\n    return [\n      /* eslint-disable */\n      { key: \"none\",      },\n      { key: \"xx-small\",  },\n      { key: \"x-small\",   },\n      { key: \"small\",     },\n      { key: \"default\",   },\n      { key: \"medium\",    },\n      { key: \"large\",     },\n      { key: \"x-large\",   },\n      { key: \"xx-large\",  },\n      { key: \"xxx-large\", },\n      /* eslint-enable */\n    ]\n  }\n}\n\nif (process.argv[1] === __filename) {\n  console.log(SizeInfo.fetch(\"x-small\").key)\n  console.log(SizeInfo.fetch(\"x-small\").name)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/size_info.js","var normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./PieceStand.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./PieceStand.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3c933f9b\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/template-compiler/preprocessor?engine=pug!../../node_modules/vue-loader/lib/selector?type=template&index=0!./PieceStand.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/PieceStand.vue\n// module id = a83v\n// module chunks = 1 2","// const piece_sound = new Sound(\"../static/piece_sound.wav\", {volume: 0.5})\n// piece_sound.options[:volume] = 0.2\n// piece_sound.play()\n\nimport axios from \"axios\"\n\nvar __audio_context__\n\n// new Sound() のたびに new AudioContext() すると6回目ぐらいでエラーになるため根本的な解決にはなっていないが外で一回だけ呼ぶ\nif (typeof window !== \"undefined\" && process.env.NODE_ENV !== \"test\") {\n  window.AudioContext = window.AudioContext || window.webkitAudioContext\n  __audio_context__ = new AudioContext()\n}\n\nexport default class Sound {\n  constructor(url, options = {}) {\n    this.url = url\n    this.options = options\n    this.buffer = null\n\n    if (process.env.NODE_ENV === \"test\") {\n      return\n    }\n\n    this.__resource_load()\n  }\n\n  play() {\n    if (this.is_loaded) {\n      const source = __audio_context__.createBufferSource()\n      source.buffer = this.buffer\n      if (this.volume === null) {\n        // Sound -> Destination\n        source.connect(__audio_context__.destination)\n      } else {\n        // Sound -> GainNode -> Destination\n        const gain_node = __audio_context__.createGain()\n        source.connect(gain_node)\n        gain_node.connect(__audio_context__.destination)\n        gain_node.gain.value = this.volume\n      }\n      source.start(0)\n    }\n  }\n\n  get is_loaded() {\n    return this.buffer !== null\n  }\n\n  get volume() {\n    let volume = 1.0\n    if (this.options[\"volume\"] !== undefined) {\n      volume = this.options[\"volume\"]\n    }\n    return volume\n  }\n\n  __resource_load() {\n    // 動かない\n    if (false) {\n      axios(this.uri, {responseType: \"arraybuffer\"})\n        .then(data => this.context.decodeAudioData(data))\n        .then(buffer => { this.buffer = buffer })\n    }\n\n    // Safari でも動く\n    if (true) {\n      const req = new XMLHttpRequest()\n      req.responseType = \"arraybuffer\"\n      req.onreadystatechange = () => {\n        if (req.readyState === 4) {\n          if (req.status === 0 || req.status === 200) {\n            console.log(`${this.constructor.name}#__resource_load(\"${this.url}\")`)\n            __audio_context__.decodeAudioData(req.response, buffer => { this.buffer = buffer })\n          }\n        }\n      }\n      req.open(\"GET\", this.url, true)\n      req.send(\"\")\n    }\n\n    // 簡単だけどsafariでは動かない\n    if (false) {\n      fetch(this.url)\n        .then(response => response.arrayBuffer())\n        .then(bin => __audio_context__.decodeAudioData(bin, buffer => (this.buffer = buffer)))\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/sound.js","import Mediator from \"../mediator\"\nimport PresetInfo from \"../preset_info\"\n\nexport default {\n  /* eslint-disable */\n  props: {\n    preset_key: { type: String,  default: null, },\n  },\n  /* eslint-enable */\n\n  data() {\n    return {\n      current_preset_key: this.preset_key, // 選択中の初期配置\n    }\n  },\n\n  created() {\n  },\n\n  mounted() {\n  },\n\n  watch: {\n    preset_key(v) { this.current_preset_key = v },              // 引数の変更を反映\n    current_preset_key(v) { this.mediator_setup_by_preset(v) }, // 設定での変更を反映\n  },\n\n  methods: {\n    mediator_setup_by_preset(value) {\n      if (value) {\n        const preset_info = PresetInfo.fetch(value)\n        this.mediator_setup_by_preset_info(preset_info)\n      }\n    },\n\n    // FIXME: pulldown から選択したときに2回呼ばれてしまう\n    mediator_setup_by_preset_info(preset_info) {\n      this.mediator = new Mediator()\n      if (preset_info.sfen) {\n        this.mediator.data_source = this.data_source_by(preset_info.sfen)\n      }\n      this.mediator.piece_box_reset_by_preset(preset_info)\n      this.mediator.run()\n\n      // 駒落ちのときは△の手番から始まるので edit_mode での手番に反映する\n      // mediator の current_turn が 0 のまま run しているので mediator.current_location.key で最初の手番がわかる\n      this.init_location_key = this.mediator.current_location.key\n    },\n  },\n\n  computed: {\n    // テンプレートの中で PresetInfo を簡単に参照できないVueの制約のため\n    preset_info_values() {\n      return PresetInfo.values\n    },\n\n    // 初期配置指定がある場合、その sfen を返す\n    init_preset_sfen() {\n      if (this.preset_key) {\n        return PresetInfo.fetch(this.preset_key).sfen\n      }\n    },\n  },\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/preset_module.js","<template lang=\"pug\">\nul.piece_box(:class=\"piece_box_class\" v-if=\"$parent.current_run_mode === 'edit_mode'\" @click.stop.prevent=\"$parent.piece_box_other_click\" @click.right.prevent=\"$parent.hold_cancel\")\n  li(v-for=\"[piece, count] in $parent.mediator.piece_box_realize()\" @click.stop.prevent=\"$parent.piece_box_piece_click(piece, $event)\" :class=\"{holding_p: $parent.piece_box_have_p(piece)}\" @mouseover=\"$parent.piece_box_mouseover_handle(piece, $event)\" @mouseleave=\"$parent.mouseleave_handle\")\n    .piece_back(:class=\"$parent.piece_box_piece_back_class(piece)\")\n      .piece_fore(:class=\"$parent.piece_box_piece_inner_class(piece)\" v-text=\"piece.name\")\n    .piece_count(v-if=\"count >= 1\" :class=\"`piece_count${count}`\")\n      | {{count}}\n</template>\n\n<script>\n// import Location from \"../location\"\n// import _ from \"lodash\"\n\nexport default {\n  props: {\n  },\n\n  methods: {\n  },\n\n  computed: {\n    piece_box_class() {\n      const list = []\n\n      if (this.$parent.holding_p) {\n        list.push(\"hoverable_p\")\n      }\n\n      return list\n    },\n  },\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/components/PieceBox.vue","import MemoryRecord from \"js-memory-record\"\n// import Location from \"./location\"\n\nexport default class PieceVector extends MemoryRecord {\n  static get define() {\n    return [\n      // force_promote_length: 死に駒になる前方にある壁との隙間の数(この値以下で死に駒になる)\n      { key: \"K\", basic_once_vectors: \"pattern_king\",       basic_repeat_vectors: null,           promoted_once_vectors: null,           promoted_repeat_vectors: null,           force_promote_length: null, },\n      { key: \"R\", basic_once_vectors: null,                 basic_repeat_vectors: \"pattern_plus\", promoted_once_vectors: \"pattern_x\",    promoted_repeat_vectors: \"pattern_plus\", force_promote_length: null, },\n      { key: \"B\", basic_once_vectors: null,                 basic_repeat_vectors: \"pattern_x\",    promoted_once_vectors: \"pattern_plus\", promoted_repeat_vectors: \"pattern_x\",    force_promote_length: null, },\n      { key: \"G\", basic_once_vectors: \"pattern_gold\",       basic_repeat_vectors: null,           promoted_once_vectors: null,           promoted_repeat_vectors: null,           force_promote_length: null, },\n      { key: \"S\", basic_once_vectors: \"pattern_silver\",     basic_repeat_vectors: null,           promoted_once_vectors: \"pattern_gold\", promoted_repeat_vectors: null,           force_promote_length: null, },\n      { key: \"N\", basic_once_vectors: \"pattern_knight\",     basic_repeat_vectors: null,           promoted_once_vectors: \"pattern_gold\", promoted_repeat_vectors: null,           force_promote_length: 1,    },\n      { key: \"L\", basic_once_vectors: null,                 basic_repeat_vectors: \"pattern_pawn\", promoted_once_vectors: \"pattern_gold\", promoted_repeat_vectors: null,           force_promote_length: 0,    },\n      { key: \"P\", basic_once_vectors: \"pattern_pawn\",       basic_repeat_vectors: null,           promoted_once_vectors: \"pattern_gold\", promoted_repeat_vectors: null,           force_promote_length: 0,    },\n    ]\n  }\n\n  // get brave_p() {\n  //   return this.promoted_repeat_vectors\n  // }\n  //\n  // // get all_vectors(promoted:, location:) {\n  // //   @all_vectors ||= {}\n  // //   @all_vectors[[promoted, location.key]] ||= -> {\n  // //     vectors = __select_vectors(promoted)\n  // //     normalized_vectors(location, vectors)\n  // //   }.call\n  // // }\n  //\n  // // private\n  //\n  // __select_vectors(promoted) {\n  //   // raise MustNotHappen if !piece.promotable? && promoted\n  //\n  //   if (promoted) {\n  //     return this.promoted_vectors\n  //   } else {\n  //     return this.basic_vectors\n  //   }\n  // }\n  //\n  // get piece() {\n  //   Piece.fetch(this.key)\n  // }\n  //\n  // normalized_vectors(location, vectors) {\n  //   if (location.key === \"white\") {\n  //     vectors = vectors.map(e => e.flip_sign)\n  //   }\n  //   return vectors\n  // }\n  //\n  // get basic_vectors() {\n  //   if (this._basic_vectors) { return this._basic_vectors }\n  //   this._basic_vectors = this.build_vectors(this.basic_once_vectors, this.basic_repeat_vectors)\n  //   return this._basic_vectors\n  // }\n  //\n  // get promoted_vectors() {\n  //   if (this._promoted_vectors) { return this._promoted_vectors }\n  //   this._promoted_vectors = this.build_vectors(this.promoted_once_vectors, this.promoted_repeat_vectors)\n  //   return this._promoted_vectors\n  // }\n\n  // get build_vectors(ov, rv) {\n  //   let v = ov.compact + rv.compact\n  //   if (v.size != v.uniq.size) {\n  //     raise MustNotHappen\n  //   }\n  //\n  //   [\n  //       *ov.compact.collect { |v| OnceVector[*v]   },\n  //       *rv.compact.collect { |v| RepeatVector[*v] },\n  //   ].to_set\n  // }\n\n  // get basic_once_vectors()\n  //   return __vectors_at(super)\n  // }\n\n  // get basic_repeat_vectors() {\n  //   return __vectors_at(super)\n  // }\n\n  // get promoted_once_vectors() {\n  // return __vectors_at(super)\n  // }\n\n  // get promoted_repeat_vectors() {\n  //   return __vectors_at(super)\n  // }\n\n  // get __vectors_at(value)\n  //   if value\n  //     if value.kind_of?(Symbol)\n  //       send(value)\n  //     else\n  //       value\n  //     }\n  //   else\n  //     []\n  //   }\n  // }\n\n  static get pattern_plus() {\n    return [\n      null,    [0,-1],   null,\n      [-1, 0],       [1, 0],\n      null,    [0, 1],   null,\n    ]\n  }\n\n  static get pattern_x() {\n    return [\n      [-1, -1], null, [1, -1],\n      null,      null,     null,\n      [-1,  1], null, [1,  1],\n    ]\n  }\n\n  static get pattern_silver() {\n    return [\n      [-1, -1], [0, -1], [1, -1],\n      null,          null,     null,\n      [-1,  1],     null, [1,  1],\n    ]\n  }\n\n  static get pattern_gold() {\n    return [\n      [-1, -1], [0, -1], [1, -1],\n      [-1,  0],          [1,  0],\n      null,      [0,  1],     null,\n    ]\n  }\n\n  static get pattern_king() {\n    return [\n      [-1, -1], [0, -1], [1, -1],\n      [-1,  0],     null, [1,  0],\n      [-1,  1], [0,  1], [1,  1],\n    ]\n  }\n\n  static get pattern_knight() {\n    return [[-1, -2], [1, -2]]\n  }\n\n  static get pattern_pawn() {\n    return [[0, -1]]\n  }\n}\n\nif (process.argv[1] === __filename) {\n  // console.log(Piece.fetch(\"K\"))\n  // console.log(Piece.fetch(\"K\"))\n  // console.log(Piece.lookup(\"\"))\n  // console.log(Piece.values)\n  // console.log(Piece.values_map.get(\"K\"))\n  // console.log(Piece.fetch(\"K\").key)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/piece_vector.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.$parent.current_run_mode === 'edit_mode')?_c('ul',{staticClass:\"piece_box\",class:_vm.piece_box_class,on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.$parent.piece_box_other_click($event)},\"contextmenu\":function($event){$event.preventDefault();return _vm.$parent.hold_cancel($event)}}},_vm._l((_vm.$parent.mediator.piece_box_realize()),function(ref){\nvar piece = ref[0];\nvar count = ref[1];\nreturn _c('li',{class:{holding_p: _vm.$parent.piece_box_have_p(piece)},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.$parent.piece_box_piece_click(piece, $event)},\"mouseover\":function($event){return _vm.$parent.piece_box_mouseover_handle(piece, $event)},\"mouseleave\":_vm.$parent.mouseleave_handle}},[_c('div',{staticClass:\"piece_back\",class:_vm.$parent.piece_box_piece_back_class(piece)},[_c('div',{staticClass:\"piece_fore\",class:_vm.$parent.piece_box_piece_inner_class(piece),domProps:{\"textContent\":_vm._s(piece.name)}})]),(count >= 1)?_c('div',{staticClass:\"piece_count\",class:(\"piece_count\" + count)},[_vm._v(_vm._s(count))]):_vm._e()])}),0):_vm._e()}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-d8d61cb8\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/template-compiler/preprocessor.js?engine=pug!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/PieceBox.vue\n// module id = i2Xt\n// module chunks = 1 2","module.exports = \"先手の囲い：銀矢倉\\n後手の囲い：銀矢倉\\n先手の戦型：角換わり腰掛け銀\\n後手の戦型：角換わり腰掛け銀\\n手合割：平手\\n手数----指手---------消費時間--\\n1 ７六歩(77)   (00:00/00:00:00)\\n2 ８四歩(83)   (00:00/00:00:00)\\n3 ２六歩(27)   (00:00/00:00:00)\\n4 ３二金(41)   (00:00/00:00:00)\\n5 ７八金(69)   (00:00/00:00:00)\\n6 ８五歩(84)   (00:00/00:00:00)\\n7 ７七角(88)   (00:00/00:00:00)\\n8 ３四歩(33)   (00:00/00:00:00)\\n9 ６八銀(79)   (00:00/00:00:00)\\n10 ７七角成(22) (00:00/00:00:00)\\n11 ７七銀(68)   (00:00/00:00:00)\\n*▲戦型：角換わり\\n12 ２二銀(31)   (00:00/00:00:00)\\n13 ３八銀(39)   (00:00/00:00:00)\\n14 ６二銀(71)   (00:00/00:00:00)\\n15 ３六歩(37)   (00:00/00:00:00)\\n16 ３三銀(22)   (00:00/00:00:00)\\n17 ４六歩(47)   (00:00/00:00:00)\\n18 ６四歩(63)   (00:00/00:00:00)\\n19 ６八玉(59)   (00:00/00:00:00)\\n20 ６三銀(62)   (00:00/00:00:00)\\n21 ３七桂(29)   (00:00/00:00:00)\\n22 ４二玉(51)   (00:00/00:00:00)\\n23 ４七銀(38)   (00:00/00:00:00)\\n24 ７四歩(73)   (00:00/00:00:00)\\n25 ４八金(49)   (00:00/00:00:00)\\n26 ７三桂(81)   (00:00/00:00:00)\\n27 ２九飛(28)   (00:00/00:00:00)\\n28 ８一飛(82)   (00:00/00:00:00)\\n29 ６六歩(67)   (00:00/00:00:00)\\n30 ６二金(61)   (00:00/00:00:00)\\n31 ５六銀(47)   (00:00/00:00:00)\\n*▲戦型：角換わり腰掛け銀\\n32 ９四歩(93)   (00:00/00:00:00)\\n33 ９六歩(97)   (00:00/00:00:00)\\n34 １四歩(13)   (00:00/00:00:00)\\n35 １六歩(17)   (00:00/00:00:00)\\n36 ５四銀(63)   (00:00/00:00:00)\\n*△戦型：角換わり腰掛け銀\\n37 ７九玉(68)   (00:00/00:00:00)\\n38 ６三銀(54)   (00:00/00:00:00)\\n39 ８八玉(79)   (00:00/00:00:00)\\n40 ５四銀(63)   (00:00/00:00:00)\\n41 ２五歩(26)   (00:00/00:00:00)\\n42 ６三銀(54)   (00:00/00:00:00)\\n43 ６七銀(56)   (00:00/00:00:00)\\n*▲囲い：銀矢倉\\n44 ５四銀(63)   (00:00/00:00:00)\\n45 ５六歩(57)   (00:00/00:00:00)\\n46 ４四歩(43)   (00:00/00:00:00)\\n47 ５九飛(29)   (00:00/00:00:00)\\n48 ３一玉(42)   (00:00/00:00:00)\\n49 ５五歩(56)   (00:00/00:00:00)\\n50 ４三銀(54)   (00:00/00:00:00)\\n51 ５六銀(67)   (00:00/00:00:00)\\n52 ２二玉(31)   (00:00/00:00:00)\\n*△囲い：銀矢倉\\n53 ６九飛(59)   (00:00/00:00:00)\\n54 ３一玉(22)   (00:00/00:00:00)\\n55 ２九飛(69)   (00:00/00:00:00)\\n56 ２二玉(31)   (00:00/00:00:00)\\n57 ４五歩(46)   (00:00/00:00:00)\\n58 ４五歩(44)   (00:00/00:00:00)\\n59 ４五銀(56)   (00:00/00:00:00)\\n60 ８六歩(85)   (00:00/00:00:00)\\n61 ８六歩(87)   (00:00/00:00:00)\\n62 ８五歩打     (00:00/00:00:00)\\n63 ８五歩(86)   (00:00/00:00:00)\\n64 ９五歩(94)   (00:00/00:00:00)\\n65 ９五歩(96)   (00:00/00:00:00)\\n66 ７五歩(74)   (00:00/00:00:00)\\n67 ７五歩(76)   (00:00/00:00:00)\\n68 ６五歩(64)   (00:00/00:00:00)\\n69 ７六角打     (00:00/00:00:00)\\n70 ５二金(62)   (00:00/00:00:00)\\n71 ８六銀(77)   (00:00/00:00:00)\\n72 ６六歩(65)   (00:00/00:00:00)\\n73 ７七桂(89)   (00:00/00:00:00)\\n74 ４四歩打     (00:00/00:00:00)\\n75 ５六銀(45)   (00:00/00:00:00)\\n76 ３五歩(34)   (00:00/00:00:00)\\n77 ３五歩(36)   (00:00/00:00:00)\\n78 ８五桂(73)   (00:00/00:00:00)\\n79 ８五桂(77)   (00:00/00:00:00)\\n80 ３六歩打     (00:00/00:00:00)\\n81 ４五桂(37)   (00:00/00:00:00)\\n82 ４五歩(44)   (00:00/00:00:00)\\n83 ６四歩打     (00:00/00:00:00)\\n84 ７二桂打     (00:00/00:00:00)\\n85 ６三歩成(64) (00:00/00:00:00)\\n86 ６三金(52)   (00:00/00:00:00)\\n87 ４三角成(76) (00:00/00:00:00)\\n88 ４三金(32)   (00:00/00:00:00)\\n89 ５二銀打     (00:00/00:00:00)\\n90 ７六角打     (00:00/00:00:00)\\n91 ７七金(78)   (00:00/00:00:00)\\n92 ８七歩打     (00:00/00:00:00)\\n93 ８七金(77)   (00:00/00:00:00)\\n94 ６七角打     (00:00/00:00:00)\\n95 ６七銀(56)   (00:00/00:00:00)\\n96 ８七角成(76) (00:00/00:00:00)\\n97 ８七玉(88)   (00:00/00:00:00)\\n98 ６七歩成(66) (00:00/00:00:00)\\n99 ８九角打     (00:00/00:00:00)\\n100 ６六と(67)   (00:00/00:00:00)\\n101 ４三銀成(52) (00:00/00:00:00)\\n102 ７六金打     (00:00/00:00:00)\\n103 ８八玉(87)   (00:00/00:00:00)\\n104 ８六金(76)   (00:00/00:00:00)\\n105 ７九玉(88)   (00:00/00:00:00)\\n106 ７七金(86)   (00:00/00:00:00)\\n107 ６八歩打     (00:00/00:00:00)\\n108 ６七銀打     (00:00/00:00:00)\\n109 ６七角(89)   (00:00/00:00:00)\\n110 ６七と(66)   (00:00/00:00:00)\\n111 ３三全(43)   (00:00/00:00:00)\\n112 ３三玉(22)   (00:00/00:00:00)\\n113 ３四銀打     (00:00/00:00:00)\\n114 ４四玉(33)   (00:00/00:00:00)\\n115 ２二角打     (00:00/00:00:00)\\n116 ３三銀打     (00:00/00:00:00)\\n117 ３三銀(34)   (00:00/00:00:00)\\n118 ５五玉(44)   (00:00/00:00:00)\\n119 ３二銀(33)   (00:00/00:00:00)\\n120 ６四玉(55)   (00:00/00:00:00)\\n121 ７六桂打     (00:00/00:00:00)\\n122 ７六金(77)   (00:00/00:00:00)\\n123 ６七歩(68)   (00:00/00:00:00)\\n124 ４六角打     (00:00/00:00:00)\\n125 ５七銀打     (00:00/00:00:00)\\n126 ５五桂打     (00:00/00:00:00)\\n127 ５六銀打     (00:00/00:00:00)\\n128 ８五飛(81)   (00:00/00:00:00)\\n129 ４六銀(57)   (00:00/00:00:00)\\n130 ７八銀打     (00:00/00:00:00)\\n131 ７八玉(79)   (00:00/00:00:00)\\n132 ６七桂成(55) (00:00/00:00:00)\\n133 ６七銀(56)   (00:00/00:00:00)\\n134 ８七飛成(85) (00:00/00:00:00)\\n135 ７九玉(78)   (00:00/00:00:00)\\n136 ６七金(76)   (00:00/00:00:00)\\n137 ５五角成(22) (00:00/00:00:00)\\n138 ７五玉(64)   (00:00/00:00:00)\\n139 ６五金打     (00:00/00:00:00)\\n140 ８五玉(75)   (00:00/00:00:00)\\n141 ７七桂打     (00:00/00:00:00)\\n142 ７六玉(85)   (00:00/00:00:00)\\n143 ７五金(65)   (00:00/00:00:00)\\n144 ７五玉(76)   (00:00/00:00:00)\\n145 ６五馬(55)   (00:00/00:00:00)\\n146 ８四玉(75)   (00:00/00:00:00)\\n147 ８七馬(65)   (00:00/00:00:00)\\n148 ６八銀打     (00:00/00:00:00)\\n149 ８九玉(79)   (00:00/00:00:00)\\n150 ７七銀成(68) (00:00/00:00:00)\\n151 ８一飛打     (00:00/00:00:00)\\n152 ８三桂打     (00:00/00:00:00)\\n153 ８五歩打     (00:00/00:00:00)\\n154 ７三玉(84)   (00:00/00:00:00)\\n155 ７四歩打     (00:00/00:00:00)\\n156 投了\\nまで155手で先手の勝ち\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/藤井聡太四段_vs_澤田真吾六段.kif\n// module id = iC1h\n// module chunks = 1","import _ from 'lodash'\nimport Vue from 'vue'\nimport Soldier from \"./soldier\"\nimport Place from \"./place.js\"\n\nexport default class Board {\n  static get dimension() {\n    return 9\n  }\n\n  static get danger_zone_size() {\n    return 3\n  }\n\n  constructor() {\n    this._surface = {}\n  }\n\n  place_on(soldier) {\n    this.delete_at(soldier.place) // リアクティブにするため「削除」→「追加」とする\n    Vue.set(this._surface, soldier.place.key, soldier)\n  }\n\n  lookup(place) {\n    return this._surface[place.key]\n  }\n\n  delete_at(place) {\n    Vue.delete(this._surface, place.key)\n  }\n\n  clear() {\n    this._surface = {}\n  }\n\n  //////////////////////////////////////////////////////////////////////////////// Utilities\n\n  get soldiers() {\n    return Object.values(this._surface)\n  }\n\n  // soldier を piece にしてその個数をハッシュにして返す\n  get piece_counts_hash() {\n    const counts = {}\n    _.forEach(this.soldiers, e => {\n      counts[e.piece.key] = (counts[e.piece.key] || 0) + 1\n    })\n    return counts\n  }\n\n  get flip_all() {\n    const new_board = new Board()\n    _.forEach(this._surface, (soldier, place) => {\n      const new_soldier = new Soldier(Object.assign({}, soldier.attributes, {\n        location: soldier.location.flip,\n        place: soldier.place.flip_all,\n      }))\n      new_board.place_on(new_soldier)\n    })\n    return new_board\n  }\n\n  // 左右反転\n  get flip_h() {\n    const new_board = new Board()\n    _.forEach(this._surface, (soldier, place) => {\n      const new_soldier = new Soldier(Object.assign({}, soldier.attributes, {\n        location: soldier.location,\n        place: soldier.place.flip_h,\n      }))\n      new_board.place_on(new_soldier)\n    })\n    return new_board\n  }\n\n  // 上下左右ローテイト\n  slide_xy(x, y) {\n    const new_board = new Board()\n    _.forEach(this._surface, (soldier, place) => {\n      const new_soldier = new Soldier(Object.assign({}, soldier.attributes, {\n        location: soldier.location,\n        place: soldier.place.rotate_add(x, y),\n      }))\n      new_board.place_on(new_soldier)\n    })\n    return new_board\n  }\n\n  shuffle_apply(size) {\n    // const new_board = new Board()\n    // _.forEach(this._surface, (soldier, place) => {\n    //   while (true) {\n    //     const nx = _.random(0, size - 1)\n    //     const ny = _.random(0, size - 1)\n    //     const new_place = Place.fetch([nx, ny])\n    //     if (new_board.lookup(new_place)) {\n    //       const new_soldier = new Soldier(Object.assign({}, soldier.attributes, {\n    //         location: soldier.location,\n    //         place: new_place,\n    //       }))\n    //       new_board.place_on(new_soldier)\n    //       break\n    //     }\n    //   }\n    // })\n    // return new_board\n\n    if ((size * size) < this.soldiers.length) {\n      // alert(`再配置するスペースより駒の数の方が多いため処理できません`)\n      return\n    }\n\n    const places = this.all_places(size)\n    const shuffled_places = _.shuffle(places)\n    // console.log(places)\n    // if (places.length < this.soldiers.length) {\n    //   alert(\"空がありません\")\n    //   return\n    // }\n\n    const new_board = new Board()\n    let i = 0\n    _.forEach(this._surface, (soldier, place) => {\n      const new_soldier = new Soldier(Object.assign({}, soldier.attributes, {\n        location: soldier.location,\n        place: shuffled_places[i],\n      }))\n      new_board.place_on(new_soldier)\n      i += 1\n    })\n    return new_board\n  }\n\n  // 単純に右上を原点として size x size のセルの Place オブジェクトの配列を返す\n  all_places(size) {\n    const bx = Board.dimension - size\n    const by = 0\n\n    const places = []\n    for (let y = 0; y < size; y++) {\n      for (let x = 0; x < size; x++) {\n        const place = Place.fetch([bx + x, by + y])\n        // if (!this.lookup(place)) {\n        places.push(place)\n        // }\n      }\n    }\n    return places\n  }\n}\n\nif (process.argv[1] === __filename) {\n  console.log(Board.dimension)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/board.js","module.exports = \"## Rails + Vue.js の場合\\n\\nインストール\\n\\n    % yarn add shogi-player\\n\\n読み込み\\n\\n(in app/javascript/packs/shogi_player_app.js)\\n\\n    import Vue from 'vue/dist/vue.esm'\\n\\n    import Buefy from 'buefy'\\n    // import 'buefy/lib/buefy.css'\\n    Vue.use(Buefy)\\n\\n    import Vuex from \\\"vuex\\\"\\n    Vue.use(Vuex)\\n\\n    import _ from \\\"lodash\\\"\\n    Object.defineProperty(Vue.prototype, '_', {value: _})\\n\\n    import ShogiPlayer from 'shogi-player/src/components/ShogiPlayer.vue'\\n\\n    document.addEventListener('DOMContentLoaded', () => {\\n      new Vue({\\n        el: '#app',\\n        components: {\\n          ShogiPlayer,\\n        },\\n      })\\n    })\\n\\n(in app/javascript/packs/shogi_player_app.sass)\\n\\n    // Bulma\\n    // @import \\\"../../../node_modules/bulma/sass/utilities/initial-variables.sass\\\"\\n    // @import \\\"../../../node_modules/bulma/sass/utilities/derived-variables.sass\\\"\\n    @import \\\"~buefy/src/scss/buefy-build.scss\\\"\\n\\n    // ShogiPlayer\\n    $sp_assets_dir: \\\"../../../node_modules/shogi-player/src/assets\\\"\\n    @import \\\"../../../node_modules/shogi-player/src/components/ShogiPlayer.sass\\\"\\n\\n表示\\n\\n(in app/views/xxx/show.html.erb)\\n\\n    <%= javascript_pack_tag(\\\"shogi_player_app\\\") %>\\n    <%= stylesheet_pack_tag(\\\"shogi_player_app\\\") %>\\n\\n    <div id=\\\"shogi_player_app\\\">\\n      <ShogiPlayer :kifu_body=\\\"'position startpos moves 7g7f 8c8d'\\\"></ShogiPlayer>\\n    </div>\\n\\n## React で使う場合\\n\\n    import React from 'react'\\n    import ReactDOM from 'react-dom'\\n    import ShogiPlayer from 'shogi-player/react/src/ShogiPlayer.js'\\n\\n    class App extends React.Component {\\n      render() {\\n        return (\\n          <ShogiPlayer kifu_body='position startpos moves 7g7f 8c8d' start_turn=\\\"9\\\" />\\n        )\\n      }\\n    }\\n\\n    ReactDOM.render(\\n      <App />,\\n      document.getElementById('app')\\n    )\\n\\n<article class=\\\"message is-warning\\\">\\n  <div class=\\\"message-header\\\">\\n    <p>注意点</p>\\n  </div>\\n  <div class=\\\"message-body\\\">\\n     React 版は最低限の機能しかありません\\n  </div>\\n</article>\\n\\n## JavaScript に変換したものを直接使う場合\\n\\n    TODO: どうやったら単体ビルドできるんですか……\\n\\n## 独自のスライダーを定義する例(非推奨)\\n\\n    <ShogiPlayer kifu_body='position startpos moves 7g7f 8c8d' ref=\\\"sp\\\" />\\n\\n    <template v-if=\\\"$refs.sp\\\">\\n      <input type=\\\"range\\\" :value=\\\"$refs.sp.turn_offset\\\" @input=\\\"$refs.sp.current_turn_set($event.target.value)\\\" :min=\\\"$refs.sp.turn_offset_min\\\" :max=\\\"$refs.sp.turn_offset_max\\\" />\\n\\n$refs をテンプレート内で使うのはよくないようです(2019-05-09)\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/usage.md\n// module id = jTCi\n// module chunks = 1","import Location from \"../location\"\nimport Place from \"../place\"\nimport shortcut_modal from \"./shortcut_modal.vue\"\n\nexport default {\n  data() {\n    return {\n      mouseover_info: null,    // マウスが hover している物\n      shuffle_mode_p: false,\n    }\n  },\n\n  methods: {\n    shortcut_hook(e) {\n      // w, b で駒台をクリックしたことにする\n      for (const loc of Location.values) {\n        const key = e.key.toLowerCase()\n        if (key === loc.char_key) {\n          this.soldier_hold_unless_holding_p(e)\n          if (this.piece_stand_click_shared(loc, e)) { // 駒台クリック\n            e.preventDefault()\n            return true\n          }\n        }\n      }\n\n      // 駒箱クリック\n      if (this.current_run_mode === \"edit_mode\") {\n        if (e.code === \"Backspace\" || e.code === \"Delete\" || e.key.toLowerCase() === \"t\") {\n          this.soldier_hold_unless_holding_p(e)\n          if (this.piece_box_other_click(e)) {\n            e.preventDefault()\n            return true\n          }\n        }\n      }\n\n      // 移動キャンセル\n      if (e.code === \"Escape\") {\n        if (this.hold_cancel(e)) {\n          e.preventDefault()\n          return true\n        }\n      }\n\n      // 何も持っていない状態 → 持駒に同じ駒があれば持つ\n      // 何か持っている状態   → キャンセル\n      // https://wikiwiki.jp/factorio/%E6%93%8D%E4%BD%9C%E6%96%B9%E6%B3%95\n      if (e.key === \"q\") {\n        // 何か持っている状態ならキャンセルする\n        if (this.holding_p) {\n          if (this.hold_cancel(e)) {\n            e.preventDefault()\n            return true\n          }\n        }\n\n        // 何も持っていない状態なので持駒に同じ駒があれば持つ\n        if (this.mouseover_info) {\n          if (this.mouseover_info.type === \"board\") {\n            const place = Place.fetch(this.mouseover_info.xy)\n            const soldier = this.mediator.board.lookup(place)\n            if (soldier) {\n              this.piece_stand_piece_click(soldier.location, soldier.piece, soldier.promoted, null) // キーボードのイベントなので null 指定\n              e.preventDefault()\n              return true\n            }\n          }\n        }\n      }\n\n      // 反転\n      if (e.key === \"v\" || e.key === \"r\" || e.code === \"Space\") {\n        if (this.mouseover_info) {\n          if (this.mouseover_info.type === \"board\") {\n            this.board_cell_right_click(this.mouseover_info.xy, e)\n            e.preventDefault()\n            return true\n          }\n        }\n      }\n\n      if (this.current_run_mode === \"edit_mode\") {\n        if (e.key === \"?\") {\n          this.shortcut_modal_toggle_handle()\n          e.preventDefault()\n          return true\n        }\n      }\n\n      // 移動\n      if (this.current_run_mode === \"edit_mode\") {\n        if (this.meta_p(e)) {\n          const vector = this.arrow_vector_table[e.key]\n          if (vector) {\n            this.mediator.slide_xy(...vector)\n            e.preventDefault()\n            return true\n          }\n        }\n      }\n\n      if (this.current_run_mode === \"edit_mode\") {\n        if (e.key === \"!\") {\n          this.shuffle_mode_p = !this.shuffle_mode_p\n          if (this.shuffle_mode_p) {\n            this.$buefy.toast.open({message: `盤面シャッフルモード: ON (TAP: 1-9)`, position: \"is-bottom\", queue: false, duration: 1000 * 2, type: \"is-primary\"})\n          } else {\n            this.$buefy.toast.open({message: \"盤面シャッフルモード: OFF\", position: \"is-bottom\", queue: false, duration: 1000 * 0.5})\n          }\n        }\n        if (this.shuffle_mode_p) {\n          if (e.key === \"1\" || e.key === \"2\" || e.key === \"3\" || e.key === \"4\" || e.key === \"5\" || e.key === \"6\" || e.key === \"7\" || e.key === \"8\" || e.key === \"9\") {\n            this.shuffle_run(e.key)\n            e.preventDefault()\n            return true\n          }\n        }\n\n        // if (this.meta_p(e)) {\n        //   const vector = this.arrow_vector_table[e.key]\n        //   if (vector) {\n        //     this.mediator.slide_xy(...vector)\n        //     e.preventDefault()\n        //     return true\n        //   }\n        // }\n      }\n\n      return false\n    },\n\n    board_mouseover_handle(xy, e) {\n      this.mouseover_info = { type: \"board\", xy: xy }\n    },\n\n    piece_stand_mouseover_handle(location, piece, e) {\n      this.mouseover_info = { type: \"piece_stand\", location: location, piece: piece }\n    },\n\n    piece_box_mouseover_handle(piece, e) {\n      this.mouseover_info = { type: \"piece_box\", piece: piece }\n    },\n\n    mouseleave_handle() {\n      this.mouseover_info = null\n    },\n\n    // 盤上にマウスがあって駒を持っていなかったら左クリック\n    soldier_hold_unless_holding_p(e) {\n      if (this.mouseover_info) {                             // 盤上にマウスがあって\n        if (!this.holding_p) {                                // 駒を持っていなかったら\n          if (this.mouseover_info.type === \"board\") {\n            this.board_cell_left_click(this.mouseover_info.xy, e) // 左クリック\n          }\n          if (this.mouseover_info.type === \"piece_stand\") {\n            this.piece_stand_piece_click(this.mouseover_info.location, this.mouseover_info.piece, false, e)\n          }\n          if (this.mouseover_info.type === \"piece_box\") {\n            this.piece_box_piece_click(this.mouseover_info.piece, e)\n          }\n        }\n      }\n    },\n\n    //////////////////////////////////////////////////////////////////////////////// キーボードショートカット modal 表示\n\n    shortcut_modal_toggle_handle() {\n      if (this.shortcut_modal_active_p()) {\n        this.shortcut_modal_close_handle()\n      } else {\n        this.shortcut_modal_show_handle()\n      }\n    },\n    shortcut_modal_show_handle() {\n      this.shortcut_modal_close_handle()\n      if (this.$shortcut_modal) { alert(\"this.$shortcut_modal\") }\n      this.$shortcut_modal = this.$buefy.modal.open({\n        parent: this,\n        hasModalCard: true,\n        props: { },\n        animation: \"\",\n        onCancel: () => { this.shortcut_modal_close_handle() },\n        // fullScreen: true,\n        canCancel: [\"escape\", \"outside\"],\n        component: shortcut_modal,\n        // events: {\n        //   \"close\": () => { alert(\"x\") },\n        // },\n      })\n    },\n    shortcut_modal_close_handle() {\n      if (this.$shortcut_modal) {\n        this.$shortcut_modal.close()\n        this.$shortcut_modal = null\n      }\n    },\n    shortcut_modal_active_p() {\n      return !!this.$shortcut_modal\n    },\n  },\n\n  computed: {\n    arrow_vector_table() {\n      return {\n        \"ArrowRight\": [ 1,  0],\n        \"ArrowLeft\":  [-1,  0],\n        \"ArrowUp\":    [ 0, -1],\n        \"ArrowDown\":  [ 0,  1],\n      }\n    },\n  },\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/shortcut_module.js","import MemoryRecord from \"js-memory-record\"\n\nexport default class Location extends MemoryRecord {\n  static get define() {\n    return [\n      // { key: \"black\", name: '☗', hirate_name: \"先手\", komaochi_name: \"下手\", char_key: \"b\", },\n      // { key: \"white\", name: '☖', hirate_name: \"後手\", komaochi_name: \"上手\", char_key: \"w\", },\n      { key: \"black\", name: '☗', char_key: \"b\", value_sign: +1, },\n      { key: \"white\", name: '☖', char_key: \"w\", value_sign: -1, },\n    ]\n  }\n\n  static cycle_lookup(value) {\n    if (typeof value !== \"number\") {\n      alert(`ArgumentError: ${value}`)\n    }\n    return Location.lookup(Math.abs(value) % Location.values.length)\n  }\n\n  get flip() {\n    return Location.cycle_lookup(this.code + 1)\n  }\n\n  // any_name(komaochi_p) {\n  //   return komaochi_p ? this.komaochi_name : this.hirate_name\n  // }\n\n  advance(value) {\n    return Location.cycle_lookup(this.code + value)\n  }\n}\n\nif (process.argv[1] === __filename) {\n  console.log(Location.cycle_lookup(-1))\n\n  console.log(Location.fetch(\"black\"))\n\n  Location.values.map((e) => {\n    console.log(e)\n  })\n\n  console.log(Location.fetch(\"black\").flip)\n  console.log(Location.fetch(\"white\").flip)\n  // console.log(Location.fetch(\"white\").any_name(false))\n  // console.log(Location.fetch(\"white\").any_name(true))\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/location.js","var normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./CommentArea.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./CommentArea.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3a87a5fb\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./CommentArea.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/CommentArea.vue\n// module id = lujB\n// module chunks = 1 2","module.exports = \"position startpos moves 2g2f 3c3d 2f2e 2b3c 7g7f 3a2b 3i4h 4a3b 3g3f 7a6b 4h3g 5a4a 3g4f 6a5b 3f3e 3d3e 4f3e 5c5d P*3d 3c4b 2e2d 2c2d 3e2d 4b6d P*2c 2b2c 2d2c+ 6d2h+ 2c3b 4a3b 8h1a+ S*2b 1a2a 3b2a S*3c B*1e L*3g P*3b N*2d\\n\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/極限早繰り銀.kif\n// module id = nUh5\n// module chunks = 1","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-40bb4517\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"indentedSyntax\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ShogiPlayer.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ShogiPlayer.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ShogiPlayer.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-40bb4517\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/template-compiler/preprocessor?engine=pug!../../node_modules/vue-loader/lib/selector?type=template&index=0!./ShogiPlayer.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/ShogiPlayer.vue\n// module id = oS6v\n// module chunks = 1 2","import XRegExp from \"xregexp\"\nimport assert from \"minimalistic-assert\"\n\nimport ParserBase from \"./parser_base\"\nimport Piece from \"./piece\"\nimport Place from \"./place\"\nimport Location from \"./location\"\nimport SfenParser from \"./sfen_parser\"\n\nexport default class KifParser extends ParserBase {\n  get board() {\n    const sfen_parser = new SfenParser()\n    sfen_parser.kifu_body = \"position startpos\" // TODO: sfen形式の値のテーブルを持って駒落ちに対応する\n    sfen_parser.parse()\n    return sfen_parser.board\n  }\n\n  get location_base() {\n    let key = null\n    const value = this.header[\"手合割\"] || \"平手\"\n    if (value === \"平手\") {\n      key = \"black\"\n    } else {\n      key = \"white\"\n    }\n    return Location.fetch(key)\n  }\n\n  parse() {\n    this.move_infos = []\n    this.comments_pack = {}\n    let before_point = null\n\n    this.kifu_body.split(/\\n/).forEach((line) => {\n      const md = XRegExp.exec(line, this.__kif_format_move_regexp)\n      if (md) {\n        const attrs = {}\n        attrs[\"location\"] = this.location_by_offset(Number(md[\"number\"]) - 1)\n        if (md[\"origin_place\"]) {\n          attrs[\"origin_place\"] = Place.fetch(md[\"origin_place\"])\n        }\n        assert(md[\"to\"] || md[\"same\"])\n        if (md[\"to\"]) {\n          attrs[\"place\"] = Place.fetch(md[\"to\"])\n          before_point = attrs[\"place\"]\n        } else {\n          assert(md[\"same\"])\n          assert(before_point)\n          attrs[\"place\"] = before_point\n        }\n        if (md[\"motion\"] === \"成\") {\n          attrs[\"promoted_trigger\"] = true\n        }\n        if (md[\"motion\"] === \"打\") {\n          attrs[\"drop_piece\"] = Piece.kif_lookup(md[\"piece\"])\n        }\n        this.move_infos.push(attrs)\n      } else {\n        const md = XRegExp.exec(line, XRegExp(\"^\\\\*(?<comment>.*)\"))\n        if (md) {\n          const index = this.move_infos.length\n          this.comments_pack[index] = this.comments_pack[index] || []\n          this.comments_pack[index].push(md[\"comment\"])\n        }\n      }\n    })\n  }\n\n  set move_infos(v) {\n    this._move_infos = v\n  }\n\n  get move_infos() {\n    return this._move_infos || []\n  }\n\n  set comments_pack(v) {\n    this._comments_pack = v\n  }\n\n  get comments_pack() {\n    return this._comments_pack || []\n  }\n\n  get __kif_format_move_regexp() {\n    return XRegExp(`\n        ^\\\\s*(?<number>\\\\d+)\\\\s+\n        (?<to>[１-９1-9一二三四五六七八九]{2})?\n        (?<same>同)?\\\\s*\n        (?<piece>成[銀桂香]|[王玉金銀全桂圭香杏角馬飛龍竜歩と])\n        (?<suffix>[左右直]?[寄引上]?)\n        (?<motion>不?成|打|合|生)?\n        (\\\\((?<origin_place>\\\\d{2})\\\\))? # KIFフォーマットの移動元用\n      `, 'xm')\n  }\n}\n\nif (process.argv[1] === __filename) {\n  const kif_parser = new KifParser()\n//   kif_parser.kifu_body = `\n// # ----  Kifu for Windows V6.26 棋譜ファイル  ----\n// key：value\n// 手数----指手---------消費時間--\n// *コメント0a\n// *コメント0b\n//    1 ７六歩(77)   ( 0:00/00:00:00)\n// *コメント1a\n// *コメント1b\n//    2 ３四歩(33)   ( 0:00/00:00:00)\n//    3 投了         ( 0:00/00:00:00)\n// `\n\n  kif_parser.kifu_body = `\n   1 ２六歩(27)   ( 0:16/00:00:16)\n   2 ３四歩(33)   ( 0:22/00:00:22)\n   3 ７六歩(77)   ( 0:06/00:00:22)\n   4 ８四歩(83)   ( 0:13/00:00:35)\n   5 ２五歩(26)   ( 0:09/00:00:31)\n   6 ８五歩(84)   ( 0:16/00:00:51)\n   7 ７八金(69)   ( 0:04/00:00:35)\n   8 ３二金(41)   ( 0:09/00:01:00)\n   9 ２四歩(25)   ( 0:04/00:00:39)\n  10 同 歩(23)    ( 0:10/00:01:10)\n`\n  kif_parser.parse()\n  // console.log(kif_parser.board)\n  // console.log(kif_parser.location_base)\n  // console.log(kif_parser.hold_pieces)\n  console.log(kif_parser.move_infos)\n  console.log(kif_parser.comments_pack)\n  console.log(kif_parser.init_sfen === undefined)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/kif_parser.js","import MemoryRecord from \"js-memory-record\"\n\nexport default class RunModeInfo extends MemoryRecord {\n  static get define() {\n    return [\n      /* eslint-disable */\n      { key: \"view_mode\", name: \"再生\", },\n      { key: \"play_mode\", name: \"操作\", },\n      { key: \"edit_mode\", name: \"編集\", },\n      /* eslint-enable */\n    ]\n  }\n}\n\nif (process.argv[1] === __filename) {\n  console.log(RunModeInfo.fetch(\"simple\").key)\n  console.log(RunModeInfo.fetch(\"simple\").name)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/run_mode_info.js","<template lang=\"pug\">\n.piece_stand_outer(:class=\"piece_stand_outer_class\" v-if=\"piece_stand_show_flag\")\n  .location_mark_wrap\n    .location_mark(v-html=\"location_name\")\n\n    //- 2桁にして幅を常に予約しておく\n    template(v-if=\"$parent.theme === 'simple'\")\n      template(v-if=\"!$parent.current_vlayout\")\n        .piece_count.piece_count1\n          | 99\n\n    template(v-if=\"$parent.current_vlayout && player_name\")\n      .player_name\n        | {{player_name}}\n\n  template(v-if=\"!$parent.current_vlayout && player_name\")\n    .player_name\n      | {{player_name}}\n\n  ul.piece_stand(:class=\"piece_stand_class\" @click.stop.prevent=\"$parent.piece_stand_click(location, $event)\" @click.right.stop.prevent=\"$parent.hold_cancel\")\n    li(v-for=\"[piece, count] in hold_pieces\" @click.stop=\"$parent.piece_stand_piece_click(location, piece, false, $event)\" @mouseover=\"$parent.piece_stand_mouseover_handle(location, piece, $event)\" @mouseleave=\"$parent.mouseleave_handle\")\n      .piece_back(:class=\"piece_back_class(piece)\")\n        .piece_fore(:class=\"piece_fore_class(piece)\")\n          | {{piece.name}}\n      .piece_count(v-if=\"count >= 1\" :class=\"`piece_count${count}`\")\n        | {{count}}\n\n</template>\n\n<script>\nimport Location from \"../location\"\nimport _ from \"lodash\"\n\nexport default {\n  props: {\n    location_key: { required: true },\n    hold_pieces: { required: true },\n  },\n\n  methods: {\n    hold_piece_holding_p(piece) {\n      return this.$parent.have_piece_location === this.location && this.$parent.have_piece === piece\n    },\n\n    piece_back_class(piece) {\n      let list = []\n\n      // if (this.holding_p) {\n      //   list.push(\"hoverable_p\")\n      // }\n\n      if (this.hold_piece_holding_p(piece)) {\n        list.push(\"holding_p\")\n      } else if (this.$parent.current_run_mode === \"edit_mode\" || (!this.$parent.cpu_location_p && this.$parent.mediator.current_location === this.location)) {\n        if (!this.holding_p) {\n          list.push(\"selectable_p\")\n        }\n      }\n\n      // list = _.concat(list, piece.css_class_list)\n      // list.push(`location_${this.location.key}`)\n      // list.push(\"promoted_false\")\n\n      return list\n    },\n\n    piece_fore_class(piece) {\n      let list = []\n      list = _.concat(list, piece.css_class_list)\n      list.push(`location_${this.location.key}`)\n      list.push(\"promoted_false\")\n      return list\n    },\n  },\n\n  computed: {\n    holding_p() {\n      return this.$parent.holding_p\n    },\n\n    location() {\n      return Location.fetch(this.location_key)\n    },\n\n    piece_stand_outer_class() {\n      const list = []\n\n      list.push(`location_${this.location.key}`)\n      list.push(this.$parent.env)\n      if (this.$parent.mediator.current_location === this.location) {\n        list.push(\"turn_active\")\n      }\n      return list\n    },\n\n    location_name() {\n      // if (this.location.key === \"white\") {\n      //   return '<span style=\"color:white\">☗</span>'\n      // } else {\n      return this.location.name\n      // }\n    },\n\n    piece_stand_class() {\n      const list = []\n\n      if (this.holding_p) {\n        list.push(\"hoverable_p\")\n      }\n\n      return list\n    },\n\n    // ビューモードのとき持駒が空なら駒台を表示しない\n    piece_stand_show_flag() {\n      if (this.$parent.current_run_mode === \"view_mode\" && this.$parent.hidden_if_piece_stand_blank && _.isEmpty(this.hold_pieces)) {\n        return false\n      }\n      return true\n    },\n\n    player_name() {\n      if (this.player_info) {\n        return this.player_info[this.location.key].name\n      }\n    },\n\n    player_info() {\n      return this.$parent.player_info\n    },\n  },\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/components/PieceStand.vue","import AnyFuncInfo from \"../any_func_info\"\nimport Board from \"../board\"\n\nexport default {\n  /* eslint-disable */\n  props: {\n  },\n  /* eslint-enable */\n\n  data() {\n    return {\n      any_func_key: null, // 常に選択してないことにしたくて v-model にして設定して any_func_key 変更のタイミングで null に再設定したけど選択してないことにはできなかったのでこれ意味ない\n    }\n  },\n\n  methods: {\n    any_func_click_handle(any_func_info) {\n      any_func_info.func(this)\n    },\n\n    shuffle_dialog_open() {\n      this.shuffle_mode_p = false // 数字が入力できないため OFF にする\n\n      this.$buefy.dialog.prompt({\n        message: \"寸法の一辺のサイズを指定してください\",\n        inputAttrs: { type: \"number\", value: 4, min: 1, max: Board.dimension},\n        trapFocus: true,\n        onConfirm: e => this.shuffle_run(e),\n      })\n    },\n\n    shuffle_run(size) {\n      size = parseInt(size)\n      if (!this.mediator.shuffle_apply(size)) {\n        this.$buefy.toast.open({message: `${size} x ${size} が盤上の駒の数より少ないため何もしませんでした`, position: \"is-bottom\", queue: false, duration: 1000 * 2.0, type: \"is-warning\"})\n      }\n    },\n  },\n\n  computed: {\n    AnyFuncInfo() { return AnyFuncInfo },\n  },\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/any_func_module.js","import XRegExp from \"xregexp\"\nimport Vue from \"vue\"\nimport _ from \"lodash\"\n\nimport Board from \"./board\"\nimport ParserBase from \"./parser_base\"\nimport Piece from \"./piece\"\nimport Place from \"./place\"\nimport Soldier from \"./soldier\"\nimport Location from \"./location\"\n\nexport default class SfenParser extends ParserBase {\n  static parse(kifu_body) {\n    const object = new this(kifu_body)\n    object.parse()\n    return object\n  }\n\n  parse() {\n    this.kifu_body = this.kifu_body.replace(/startpos/, \"sfen lnsgkgsnl/1r5b1/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL b - 1\")\n    const regex = XRegExp(\"sfen\\\\s+(?<board>\\\\S+)\\\\s+(?<b_or_w>\\\\S+)\\\\s+(?<hold_pieces>\\\\S+)\\\\s+(?<turn_counter_next>\\\\d+)(\\\\s+moves\\\\s+(?<moves>.*))?\")\n    this.attributes = XRegExp.exec(this.kifu_body, regex)\n    if (process.env.NODE_ENV === \"deveopment\") {\n      console.log(this.attributes)\n    }\n  }\n\n  get board() {\n    const board = new Board()\n    this.attributes[\"board\"].split(\"/\").forEach((e, y) => {\n      let x = 0\n      XRegExp.forEach(e, XRegExp(\"(?<promoted>\\\\+?)(?<piece>\\\\S)\"), (m, i) => {\n        if (/\\d+/.test(m.piece)) {\n          x += Number(m.piece)\n        } else {\n          const soldier = new Soldier({\n            place: new Place([x, y]),\n            piece: Piece.fetch(m.piece),\n            promoted: (m.promoted === \"+\"),\n            location: this.__location_by_upper_or_lower_case(m.piece),\n          })\n          board.place_on(soldier)\n          x++\n        }\n      })\n    })\n    return board\n  }\n\n  get location_base() {\n    let key = null\n    if (this.attributes[\"b_or_w\"] === \"b\") {\n      key = \"black\"\n    } else {\n      key = \"white\"\n    }\n    return Location.fetch(key)\n  }\n\n  get hold_pieces() {\n    const _hold_pieces = super.hold_pieces\n    if (this.attributes[\"hold_pieces\"] !== \"-\") {\n      XRegExp.forEach(this.attributes[\"hold_pieces\"], XRegExp(\"(?<count>\\\\d+)?(?<piece_char>\\\\S)\"), (md, i) => {\n        const piece = Piece.fetch(md.piece_char)\n        let count = Number(md.count || 1)\n        const location = this.__location_by_upper_or_lower_case(md.piece_char)\n        count += _hold_pieces[location.key][piece.key] || 0\n        Vue.set(_hold_pieces[location.key], piece.key, count)\n      })\n    }\n    return _hold_pieces\n  }\n\n  // sfen_serializer 用\n  get turn_base() {\n    return Number(this.attributes[\"turn_counter_next\"]) - 1\n  }\n\n  // \"b - 1\" なら 0\n  // \"w - 2\" なら 1\n  // \"b - 3\" なら 2\n  // get turn_offset_min() {\n  //   // return Number(this.attributes[\"turn_counter_next\"]) - 1\n  //   // return Number(this.attributes[\"turn_counter_next\"]) - 1\n  // }\n\n  // // \"b - 1\" -> turn_offset_min:0 % 2 -> 0 && w\n  // // \"w - 2\" -> turn_offset_min:1 % 2 -> 1 && w\n  // // \"b - 3\" -> turn_offset_min:2 % 2 -> 0 && w\n  // // \"w - 1\" -> turn_offset_min:0 % 2 -> 0 && w -> true\n  // // \"b - 2\" -> turn_offset_min:1 % 2 -> 1 && w\n  // // \"w - 3\" -> turn_offset_min:2 % 2 -> 0 && w -> true\n  // get komaochi_p() {\n  //   return (this.turn_offset_min % 2) === 0 && this.location_base.key === \"white\"\n  // }\n\n  get move_infos() {\n    // this.moves.map((e, i) => { としたかったが break できないため lodash の forEach に変更。lodash のは false で break できる\n    const ary = []\n    _.forEach(this.moves, (e, i) => {\n      const attrs = {}\n      // if (true) {\n      //   attrs[\"scene_index\"] = this.turn_offset_min + i\n      //   attrs[\"scene_offset\"] = i\n      // }\n      attrs[\"location\"] = this.location_base.advance(i)\n      const md = XRegExp.exec(e, XRegExp(\"(?<origin_x>\\\\S)(?<origin_y>\\\\S)(?<pos_x>\\\\S)(?<pos_y>\\\\S)(?<promoted>\\\\+?)?\"))\n      if (!md) {\n        return false            // break\n      }\n      attrs[\"promoted_trigger\"] = (md.promoted === \"+\")\n      if (md[\"origin_y\"] === \"*\") {\n        attrs[\"drop_piece\"] = Piece.fetch(md[\"origin_x\"])\n      } else {\n        attrs[\"origin_place\"] = Place.fetch(`${md[\"origin_x\"]}${md[\"origin_y\"]}`)\n      }\n      attrs[\"place\"] = Place.fetch(`${md[\"pos_x\"]}${md[\"pos_y\"]}`)\n      ary.push(attrs)\n    })\n    return ary\n  }\n\n  get moves() {\n    let moves = this.attributes[\"moves\"]\n    if (_.isNil(moves) || moves === \"\") {\n      return []\n    }\n    return moves.split(/\\s+/)\n  }\n\n  // 最初の局面\n  get init_sfen() {\n    const parts = []\n    parts.push(\"position\")\n    parts.push(\"sfen\")\n    parts.push(this.init_sfen_strip)\n    return parts.join(\" \")\n  }\n\n  // 最初の局面(position sfenなし)\n  get init_sfen_strip() {\n    const parts = []\n    parts.push(this.attributes[\"board\"])\n    parts.push(this.attributes[\"b_or_w\"])\n    parts.push(this.attributes[\"hold_pieces\"])\n    parts.push(this.attributes[\"turn_counter_next\"])\n    return parts.join(\" \")\n  }\n\n  __location_by_upper_or_lower_case(v) {\n    let key = null\n    if (/[A-Z]/.test(v)) {\n      key = \"black\"\n    } else {\n      key = \"white\"\n    }\n    return Location.fetch(key)\n  }\n}\n\nif (process.argv[1] === __filename) {\n  let sfen_parser\n\n  sfen_parser = SfenParser.parse(\"position sfen +lnsgkgsnl/1r5b1/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL b S2s 1 moves 7i6h S*2d\")\n  console.log(sfen_parser)\n\n  sfen_parser = SfenParser.parse(\"position sfen +lnsgkgsnl/1r5b1/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL b S2s 1 moves 7i6h S*2d\")\n  console.log(sfen_parser)\n\n  // sfen_parser = new SfenParser(\"position sfen +lnsgkgsnl/1r5b1/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL b S2s 1 moves 7i6h S*2d\")\n  // sfen_parser.parse()\n  // console.log(sfen_parser.board)\n  // console.log(sfen_parser.location_base.key)\n  // console.log(sfen_parser.hold_pieces)\n  // console.log(sfen_parser.move_infos)\n  // console.log(sfen_parser.moves)\n  // console.log(sfen_parser.init_sfen)\n  //\n  // sfen_parser = new SfenParser(\"position sfen lr4knl/3g2gs1/4ppP2/p4bNpp/2pSsN3/PPPP1P2P/2N1P1G2/2G6/L1K4RL w BPs3p 72 moves 2b3c\")\n  // sfen_parser.parse()\n  // console.log(sfen_parser.location_by_offset(0))\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/sfen_parser.js","module.exports = __webpack_public_path__ + \"static/img/made-with-bulma.e0eab74.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/made-with-bulma.png\n// module id = waGJ\n// module chunks = 1","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-c193ca80\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"indentedSyntax\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./shortcut_modal.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./shortcut_modal.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./shortcut_modal.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-c193ca80\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/template-compiler/preprocessor?engine=pug!../../node_modules/vue-loader/lib/selector?type=template&index=0!./shortcut_modal.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/shortcut_modal.vue\n// module id = xGbI\n// module chunks = 1 2","<template lang=\"pug\">\n//- #app\n//-   shogi-player(\n//-     :run_mode=\"'view_mode'\"\n//-     :debug_mode=\"true\"\n//-     :start_turn=\"0\"\n//-     :kifu_body=\"'position sfen 4R1gnk/6+Bsl/5+P1pp/9/9/9/9/9/9 b rb3g3s3n2l15p 1 moves 3b2a 3a2a 5a2a+ 1a2a G*3b 2a1a 3b2b 1a2b N*3d 2b1a S*2b'\"\n//-     :key_event_capture=\"true\"\n//-     :slider_show=\"true\"\n//-     :controller_show=\"true\"\n//-     :theme=\"'simple'\"\n//-     :size=\"'default'\"\n//-     :sound_effect=\"true\"\n//-     :vlayout=\"false\"\n//-     :overlay_navi=\"true\"\n//-   )\n//-   shogi-player(\n//-     :run_mode=\"'view_mode'\"\n//-     :debug_mode=\"true\"\n//-     :start_turn=\"0\"\n//-     :kifu_body=\"'position sfen 4R1gnk/6+Bsl/5+P1pp/9/9/9/9/9/9 b rb3g3s3n2l15p 1 moves 3b2a 3a2a 5a2a+ 1a2a G*3b 2a1a 3b2b 1a2b N*3d 2b1a S*2b'\"\n//-     :key_event_capture=\"true\"\n//-     :slider_show=\"true\"\n//-     :controller_show=\"true\"\n//-     :theme=\"'simple'\"\n//-     :size=\"'default'\"\n//-     :sound_effect=\"true\"\n//-     :vlayout=\"true\"\n//-     :overlay_navi=\"true\"\n//-   )\n#app\n  .hero.is-primary.is-medium\n    .hero-head\n      nav.navbar\n        .container\n          .navbar-brand\n            span.navbar-burger.burger(data-target=\"navbarMenuHeroA\")\n              span\n              span\n              span\n\n          #navbarMenuHeroA.navbar-menu\n            .navbar-end\n              a.navbar-item(href=\"https://github.com/akicho8/shogi-player\")\n                span.icon\n                  i.fab.fa-github\n                span\n                 | Github\n\n    .hero-body\n      .container.has-text-centered\n        h1.title\n          | shogi-player\n\n    .hero-foot\n      nav.tabs\n        .container\n          ul\n            li: a(href=\"#summary\") 概要\n            li: a(href=\"#examples\") デモ\n            li: a(href=\"#usage\") 使い方\n            li: a(href=\"#options\") オプション\n            li: a(href=\"#api\") API\n\n  // ShogiPlayer(:kifu_body=\"`position startpos moves 7g7f 7c7d 7f7e 7d7e 7i7h 7e7f 7h7g 7f7g+ 6i5h 7g8h 9i9h 7a6b`\" :start_turn=\"-1\" :theme=\"'simple'\" :run_mode=\"'edit_mode'\" :sfen_show=\"true\" :debug_mode=\"true\")\n  //- ShogiPlayer(:kifu_body=\"`position startpos moves 7g7f 7c7d 7f7e 7d7e 7i7h 7e7f 7h7g 7f7g+ 6i5h 7g8h 9i9h 7a6b`\" :start_turn=\"-1\" :theme=\"'simple'\")\n  //- ShogiPlayer(:kifu_body=\"`position startpos moves 7g7f 7c7d 7f7e 7d7e 7i7h 7e7f 7h7g 7f7g+ 6i5h 7g8h 9i9h 7a6b`\" :start_turn=\"-1\" :theme=\"'simple'\" :run_mode=\"'edit_mode'\")\n  //- ShogiPlayer(:kifu_body=\"`position sfen 4k4/9/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1`\" :start_turn=\"-1\" :theme=\"'simple'\" :run_mode=\"'play_mode'\")\n  //- ShogiPlayer(:kifu_body=\"`position startpos`\" :start_turn=\"-1\" :theme=\"'simple'\" :run_mode=\"'play_mode'\")\n  //- ShogiPlayer(:kifu_body=\"`position sfen lnsgkgsnl/1r5b1/ppppppppp/9/9/2P6/PP1PPPPPP/1B5R1/LNSGKGSNL b - 1`\" :start_turn=\"-1\" :theme=\"'simple'\" :run_mode=\"'play_mode'\")\n  //- ShogiPlayer(:kifu_body=\"`position sfen lnsgkgsnl/1r5b1/ppppppppp/9/9/2P6/PP1PPPPPP/1B5R1/LNSGKGSNL w - 2`\" :start_turn=\"-1\" :theme=\"'simple'\" :run_mode=\"'play_mode'\")\n\n  .section\n    a(name=\"summary\")\n    .container\n      h2.title 概要\n      hr\n      .content\n        p\n          | 将棋の棋譜を再生できる JavaScript で次の特徴があります\n        ul\n          li 自分で駒を動かせる (play_mode)\n          li 編集モードで詰将棋などが作れる (edit_mode)\n          li KIF と SFEN フォーマットに対応\n        p\n          | その他\n        ul\n          li Vue.js で動作\n          li Buefy 使用\n\n  .section\n    a(name=\"examples\")\n    .container\n      h2.title デモ\n      hr\n      .section\n        .container.has-text-centered\n          h3.title.has-text-left 1. 再生モード\n          hr\n          .columns\n            .column\n              article.message.is-info\n                .message-body\n                  | コメント付きの KIF 表示。9手目から表示。テーマ:real。駒音あり\n\n              h3.title.yumincho 藤井聡太四段 vs 佐藤天彦名人\n              p.subtitle.yumincho\n                a(href=\"http://www.asahi.com/shougi/asahicup_live/?ref=jsa\" target=\"_blank\") 第11回朝日杯将棋オープン戦本戦\n              hr\n              ShogiPlayer.original(\n                :kifu_body=\"kif_sample1\"\n                :start_turn=\"9\"\n                :slider_show=\"true\"\n                :theme=\"'real'\"\n                :size=\"'x-large'\"\n                :bg_variant=\"'a'\"\n                :sound_effect=\"true\"\n                :volume=\"0.25\"\n                :debug_mode=\"false\"\n              )\n          br\n          br\n\n          .columns\n            .column\n              article.message.is-info\n                .message-body\n                  | シンプル。最終手から表示。※盤面クリックで操作可。天王山クリックで反転\n\n              h3.title.yumincho 羽生善治名人 vs 渡辺明竜王\n              p.subtitle.yumincho 第21期竜王戦七番勝負第4局\n              hr\n              ShogiPlayer(:kifu_body=\"'position startpos moves 2g2f 8c8d 2f2e 8d8e 6i7h 4a3b 2e2d 2c2d 2h2d P*2c 2d2h 7a7b 3i3h 3c3d 9g9f 9c9d 1g1f 1c1d 3h2g 8e8f 8g8f 8b8f P*8g 8f8d 2g3f 5a5b 7g7f 7c7d 8h2b+ 3a2b 7i8h 7b7c 8h7g 7c6d 3f4e 7d7e 4e5f 2b3c 6g6f 3c4d 5f6g 6a7b 5i6h 8a7c 4i5h 2a3c 6h7i 7e7f 6g7f 4d5e P*7e 9d9e B*7d P*8h 7i8h 7b8c 9f9e 8c7d 7e7d 8d7d P*7e 7d8d 5h6g P*7d 7e7d 8d7d P*7e 6d7e 7f7e 7d7e 7g7f 7e7d S*7e 7d4d P*7d 4d4g+ P*2d 2c2d 7d7c+ 4g4i 2h2d P*2c 2d3d 4c4d P*7i 5b4c 3d3e S*4e 6g5f P*7g 8i7g P*3d 3e4e 3c4e 5f5e R*2h N*3f 2h7h+ 8h9g 4e5g+ 5e4d 4i4d S*5b 4c5d 7i7h 4d4i G*6e 5d4e R*4d 4e5f 4d4i G*4h S*3h 4h4i R*5e 5f4f 3h4i G*4e P*4g 5g4g P*4h 4g3g 2i3g 4f3g 5e4e R*8i G*3h 3g3f G*4f 3f2f 9i9h 8i4i+ P*3i S*2i 3h2h 4i3i'\" :start_turn=\"-1\" :theme=\"'real'\" :bg_variant=\"'p'\" :piece_variant=\"'b'\")\n\n            .column\n              article.message.is-info\n                .message-body\n                  | スライダーのみ表示。初手から表示\n\n              h3.title.yumincho 藤井猛六段 vs 井上慶太六段\n              p.subtitle.yumincho 第54期順位戦B級2組7回戦\n              hr\n              ShogiPlayer(:kifu_body=\"'position startpos moves 7g7f 8c8d 2h6h 3c3d 6g6f 7a6b 3i3h 5a4b 4g4f 4b3b 3g3f 2b3c 1g1f 8d8e 8h7g 3b2b 7i7h 5c5d 7h6g 6a5b 2i3g 1a1b 6g5f 5d5e 5f4e 8b8d 3f3e 3d3e 3g2e 3c4d 6f6e 2c2d 6e6d 2d2e 4e4d 4c4d 7g5e N*3b P*3c 2b3c B*4e P*5d 5e6f 3c2b 6f8d 4d4e 6d6c+'\" :start_turn=\"0\" :slider_show=\"true\" :theme=\"'real'\" :bg_variant=\"'g'\")\n\n          br\n          br\n\n          .columns\n            .column\n              article.message.is-info\n                .message-body\n                  | コントローラーとスライダー付き。121手目から表示。\n\n              h3.title.yumincho 藤井聡太四段 vs 澤田真吾六段\n              p.subtitle.yumincho 第43期棋王戦予選\n              hr\n              ShogiPlayer(:kifu_body=\"kif_sample2\" :start_turn=\"121\" :controller_show=\"true\" :slider_show=\"true\" :theme=\"'simple'\")\n\n            .column\n              article.message.is-info\n                .message-body\n                  | 駒落ち。最終手から表示。局面のSFENも表示\n\n              h3.title.yumincho 小池重明 vs 加藤一二三十段\n              p.subtitle.yumincho 加藤一二三の駒落道場\n              hr\n              ShogiPlayer(:kifu_body=\"'position sfen lnsgkgsnl/1r7/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1 moves 8c8d 7g7f 7a6b 5g5f 8d8e 8h7g 5c5d 2h5h 6b5c 7i6h 5a4b 5i4h 3a3b 4h3h 4c4d 5f5e 3b4c 5e5d 4c5d 6h5g 5d6e 5g5f 6e7f 5f5e 7f6g+ P*5d 5c6b 5h5f 6g7g 8i7g B*3d 5f6f P*5b 6i7i 8b8d 5e4d 8d7d P*7h 7d5d S*4c 3d4c 4d4c+ 4b4c B*7f 5b5c 7i6h 4c3b 6h5h P*4c 7f5d 5c5d 8g8f B*7i 8f8e P*8b 6f8f 7i3e+ 8e8d S*7b 8f8i 3e4e P*6g 7c7d 9g9f 4e5f 8i8f 5f5e 9f9e 5e6d 8f8i 7d7e 7g8e 5d5e 8e9c+ 8a9c 9e9d P*9h 9i9h 6d6e 8i8f 6e9h 9d9c+ 9a9c R*9a 9h6e 9a9c+ 5e5f 5h4h L*9b 9c8b P*8a N*7g 6e7d 8b9a S*8b 9a8b 8a8b S*6e 7d9f 8f5f 9f7h 7g8e 7h6g P*7c 7b8a P*9c 6c6d P*6h 6g8e 9c9b+ 8a9b 7c7b+ 6a7b 6e5d N*4b 5d5c+ P*5d 5c6b 7b6b L*2f R*6i L*2e N*3a 5f4f S*3d 3g3f 6b5c 2i3g 4c4d 4f5f 2c2d 2e2d P*2c 3f3e 3d3e 2d2c+ 3a2c 2f2c+ 3b2c P*3f 3e2d 5f5i 6i6h+ 1g1f L*3d N*2h 4d4e 5i5h 6h7g 2g2f 1c1d 2f2e 2d1c 3g4e 5c4d S*4f P*2f 4e5c+ L*4e 4f5g 8e7d P*6e 7d6e P*5f 5d5e 4h3g 5e5f 5g4h P*4f 3g4f 4e4f'\" :start_turn=\"-1\" :controller_show=\"true\" :slider_show=\"true\" :sfen_show=\"true\" :theme=\"'simple'\")\n\n          br\n          br\n\n          .columns\n            .column\n              article.message.is-success.has-text-left\n                .message-header\n                  p 共通する操作方法\n\n                .message-body\n                  .content\n                    ul\n                      li 盤面の左右をクリックすると前後の手番に進みます\n                      li シフトを押しながらで10倍速になります\n                      li シフト以外のシステムキーだと50倍速になります(シフトキーも押していると500倍速)\n                      li 天王山(５五の地点)をクリックすると反転します\n                      li 「N手目」の部分をクリックで編集できます\n                      li スライダーがある場合は優先的にフォーカスします\n                      li スライダーにフォーカスがある状態だと左右キーが効きます(ブラウザの標準機能)\n                      li スライダーは fn + ←→ キーで最初と最後に移動します(ブラウザの標準機能)\n\n          br\n          br\n          br\n          h3.title.has-text-left 2. 操作モード\n          hr\n\n          .columns\n            .column\n              article.message.is-info\n                .message-body\n                  | 自分で操作できる。戻れば操作をやり直せる\n\n              ShogiPlayer(:kifu_body=\"'position startpos moves 7g7f 8c8d 2h6h 3c3d 6g6f 7a6b 3i3h 5a4b 4g4f 4b3b 3g3f 2b3c 1g1f 8d8e 8h7g 3b2b 7i7h 5c5d 7h6g 6a5b 2i3g 1a1b 6g5f 5d5e 5f4e 8b8d 3f3e 3d3e 3g2e 3c4d 6f6e 2c2d 6e6d 2d2e 4e4d 4c4d 7g5e N*3b P*3c 2b3c B*4e P*5d 5e6f 3c2b 6f8d 4d4e 6d6c+'\" :start_turn=\"-1\" :slider_show=\"true\" :controller_show=\"true\" :theme=\"'real'\" :size=\"'medium'\" :bg_variant=\"'a'\" :sound_effect=\"true\" :volume=\"0.25\" :debug_mode=\"false\" :run_mode=\"'play_mode'\")\n\n            .column\n              article.message.is-info\n                .message-body\n                  | human_side_key オプションで先手側だけ操作できるようにする\n\n              ShogiPlayer(:kifu_body=\"'position startpos moves 7g7f 8c8d 2h6h 3c3d 6g6f 7a6b 3i3h 5a4b 4g4f 4b3b 3g3f 2b3c 1g1f 8d8e 8h7g 3b2b 7i7h 5c5d 7h6g 6a5b 2i3g 1a1b 6g5f 5d5e 5f4e 8b8d 3f3e 3d3e 3g2e 3c4d 6f6e 2c2d 6e6d 2d2e 4e4d 4c4d 7g5e N*3b P*3c 2b3c B*4e P*5d 5e6f 3c2b 6f8d 4d4e 6d6c+'\" :start_turn=\"20\" :slider_show=\"true\" :controller_show=\"true\" :theme=\"'real'\" :size=\"'medium'\" :bg_variant=\"'a'\" :sound_effect=\"true\" :volume=\"0.25\" :debug_mode=\"false\" :run_mode=\"'play_mode'\" :human_side_key=\"'black'\")\n\n          .columns\n            .column\n              article.message.is-info\n                .message-body\n                  | 駒落ちの場合は後手から始まる\n              ShogiPlayer(:kifu_body=\"`position sfen 4k4/9/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1`\" :start_turn=\"-1\" :theme=\"'simple'\" :run_mode=\"'play_mode'\")\n\n            .column\n              article.message.is-info\n                .message-body\n                  | 2手目の盤面から開始する場合も後手から始まる\n              ShogiPlayer(:kifu_body=\"`position sfen lnsgkgsnl/1r5b1/ppppppppp/9/9/2P6/PP1PPPPPP/1B5R1/LNSGKGSNL w - 2`\" :start_turn=\"-1\" :theme=\"'simple'\" :run_mode=\"'play_mode'\")\n\n          .columns\n            .column\n              article.message.is-info\n                .message-body\n                  | SFENで72となっていても71手目の局面を表示している(後手番)\n              ShogiPlayer(:kifu_body=\"'position sfen lr4knl/3g2gs1/4ppP2/p4bNpp/2pSsN3/PPPP1P2P/2N1P1G2/2G6/L1K4RL w BPs3p 72'\" :start_turn=\"-1\" :theme=\"'simple'\" :run_mode=\"'play_mode'\")\n\n          .columns\n            .column\n              article.message.is-success.has-text-left\n                .message-header\n                  p 操作モードについて\n\n                .message-body\n                  .content\n                    ul\n                      li スライダー等で変更した任意局面から手番側の操作が行えます\n                      li いちど指すとその手が最終手になります(分岐には対応していません)\n                      li human_side_key オプションで片側の操作のみに絞れます\n                      li Emitイベントに反応して、相手側の指し手を追加した棋譜で kifu_body を更新すればCPUとの対戦のようなことができます\n                      li 再生モードの棋譜とは独立しています(再生モードの棋譜を上書きしません)\n                      li 指し手を決定したときスライダーがあればスライダーにフォーカスにするのですぐに「←」キーで手を戻すことができます(2019-05-02)\n\n          br\n          br\n          h3.title.has-text-left 3. 編集モード\n          hr\n\n          .columns\n            .column\n              article.message.is-info\n                .message-body\n                  | すべての駒を自由に動かせる\n\n              ShogiPlayer(:kifu_body=\"'position startpos moves 7g7f 8c8d 2h6h 3c3d 6g6f 7a6b 3i3h 5a4b 4g4f 4b3b 3g3f 2b3c 1g1f 8d8e 8h7g 3b2b 7i7h 5c5d 7h6g 6a5b 2i3g 1a1b 6g5f 5d5e 5f4e 8b8d 3f3e 3d3e 3g2e 3c4d 6f6e 2c2d 6e6d 2d2e 4e4d 4c4d 7g5e N*3b P*3c 2b3c B*4e P*5d 5e6f 3c2b 6f8d 4d4e 6d6c+'\" :start_turn=\"-1\" :slider_show=\"true\" :theme=\"'real'\" :size=\"'medium'\" :bg_variant=\"'a'\" :sound_effect=\"true\" :volume=\"0.25\" :debug_mode=\"false\" :run_mode=\"'edit_mode'\")\n\n            .column\n              article.message.is-info\n                .message-body\n                  | 詰将棋用の初期配置で開始\n\n              ShogiPlayer(:preset_key=\"'詰将棋'\" :slider_show=\"true\" :theme=\"'real'\" :size=\"'medium'\" :bg_variant=\"'a'\" :sound_effect=\"true\" :volume=\"0.25\" :debug_mode=\"false\" :run_mode=\"'edit_mode'\")\n\n          br\n          br\n\n          template(v-if=\"false\")\n            .columns\n              .column\n                article.message.is-info\n                  .message-body\n                    | 外部KIFファイルの読み込み\n\n                ShogiPlayer(:kifu_url=\"'http://tk2-221-20341.vs.sakura.ne.jp/shogi/wr/ureshino_friend-doglong-20180122_213544.kif?plain=1'\" :start_turn=\"-1\" :controller_show=\"true\" :slider_show=\"true\" :debug_mode=\"true\" :polling_interval=\"30\")\n\n            br\n            br\n\n          .columns\n            .column\n              article.message.is-success.has-text-left\n                .message-header\n                  p 操作方法\n\n                .message-body\n                  .content\n                    ul\n                      li ダブルタップまたは右クリックで盤上の駒の反転と向きを変更できます(ショートカットキー: v, r, Space)\n                      li 修飾キー(shift, option, meta, control キーのいずれか)を押しながら「左クリック」でも変更できます\n                      li 駒を持った状態で右クリックすると駒を元に戻せます (ショートカットキー: Escape, q)\n                      li 駒台と駒箱をクリックしたことにするショートカットキーがあります(b:先手の駒台 w:後手の駒台 Backspace または t で駒箱)\n                      li その際に、修飾キーを押しているとまとめて移動します\n                      li たとえば先手の駒箱の歩をクリックしてから shift + w で先手の駒台の歩がすべて後手の駒台に移動します\n                      li 駒を持っていない状態で、盤上の駒にカーソルを合わせて w, b, Backspace, t したときは自動的に持ち上げてからそのキーをタイプしたことになります(持ち上げる手間が省略できる)\n                      li 駒を持っていない状態で盤上の駒にカーソルを合わせて q をタイプすると駒台から同種の駒を取り出したことになります (factorioのピペットツールのように動作します)\n          .columns\n            .column\n              article.message.is-success.has-text-left\n                .message-header\n                  p 再生モードからのモード切り替えについて\n\n                .message-body\n                  .content\n                    ul\n                      li 右の<b-icon icon=\"dots-vertical\" size=\"is-small\"></b-icon>をクリックするとモードを切り替えることができます\n                      li 棋譜再生モードの途中で「操作」に切り替えると手番側の駒を動かせるようになります。主に検討したいときに使います\n                      li 「操作」モードに入るとき SFEN (USI) の場合はそのまま再生モードでの棋譜を保持した状態で始まります。(スライダーで最初の局面に戻せます)\n                      li 一方 KIF の場合は都合上<b>現在の局面から</b>の開始になります。(つまりスライダーで最初の局面に戻せません)\n                      li (SFENと同様になるようにしようかと思いましたが、「操作」モードにに入ったところを基点(0手目)とするのでわかりやすいというメリットがあることに気づきました)\n                      li 手番に関わらず、ただ自由に駒を動かしたいときは「編集」モードになります\n                      li 棋譜再生モードの途中で「操作」に切り替えると手番側の駒を動かせるようになります\n                      li 再生モードから他のモードに切り替えてから再生モードに戻ったとき、他のモードに切り替える前の状態に復帰します (つまり継盤のような形になります)\n\n  .section\n    a(name=\"modal_in_style\")\n    .container\n      h3.title モーダル内表示の例\n      hr\n      .columns\n        .column\n          article.message.is-info\n            .message-body\n              .content\n                | mobile のときは size オプションで指定したサイズは無効になり、なるべく横幅いっぱいになるように調整します。\n                | 右の<b-icon icon=\"dots-vertical\" size=\"is-small\"></b-icon>も非表示にします。\n\n          .buttons\n            a.button.is-primary.is-fullwidth(@click=\"modal_p = true\") 開く\n\n          p\n            | .modal-card.is-shogi-player-modal-card のようにします\n\n          b-modal(:active.sync=\"modal_p\" has-modal-card)\n            .modal-card.is-shogi-player-modal-card\n              header.modal-card-head\n                p.modal-card-title.is-size-5\n                  | モーダル内表示例\n                button(class=\"delete\" aria-label=\"close\" @click=\"modal_p = false\")\n\n              section.modal-card-body\n                shogi-player(\n                  :run_mode=\"'view_mode'\"\n                  :debug_mode=\"false\"\n                  :start_turn=\"0\"\n                  :kifu_body=\"'position sfen 4R1gnk/6+Bsl/5+P1pp/9/9/9/9/9/9 b rb3g3s3n2l15p 1 moves 3b2a 3a2a 5a2a+ 1a2a G*3b 2a1a 3b2b 1a2b N*3d 2b1a S*2b'\"\n                  :key_event_capture=\"true\"\n                  :slider_show=\"true\"\n                  :controller_show=\"true\"\n                  :theme=\"'simple'\"\n                  :size=\"'default'\"\n                  :sound_effect=\"true\"\n                )\n\n                .box.is-size-6\n                  | 1手目と5手詰が重要\n\n              footer.modal-card-foot\n                //- b-tooltip(label=\"この局面から自分で操作\")\n                //-   b-switch(v-model=\"sp_run_mode\" true-value=\"play_mode\" false-value=\"view_mode\") 継盤\n                a.button(@click=\"modal_p = false\") 閉じる\n                a.button(@click.prevent.stop=\"\") ボタン2\n                a.button(@click.prevent.stop=\"\") ボタン3\n\n          pre\n            | b-modal(:active.sync=\"modal_p\" has-modal-card)\n            |   .modal-card.is-shogi-player-modal-card\n            |     header.modal-card-head\n            |       p.modal-card-title.is-size-5\n            |         | モーダル内表示例\n            |       button(class=\"delete\" aria-label=\"close\" @click=\"modal_p = false\")\n            |\n            |     section.modal-card-body\n            |       shogi-player(\n            |         :run_mode=\"'view_mode'\"\n            |         :debug_mode=\"false\"\n            |         :start_turn=\"0\"\n            |         :kifu_body=\"'position sfen 4R1gnk/6+Bsl/5+P1pp/9/9/9/9/9/9 b rb3g3s3n2l15p 1 moves 3b2a 3a2a 5a2a+ 1a2a G*3b 2a1a 3b2b 1a2b N*3d 2b1a S*2b'\"\n            |         :key_event_capture=\"true\"\n            |         :slider_show=\"true\"\n            |         :sfen_show=\"false\"\n            |         :controller_show=\"true\"\n            |         :theme=\"'simple'\"\n            |         :size=\"'default'\"\n            |         :sound_effect=\"true\"\n            |       )\n            |\n            |       .box.is-size-6\n            |         | 1手目と5手詰が重要\n            |\n            |     footer.modal-card-foot.space_between\n            |       a.button(@click=\"modal_p = false\") 閉じる\n  .section\n    a(name=\"usage\")\n    .container\n      h3.title 使い方\n      hr\n      .content(v-html=\"usage_md\")\n\n  .section\n    a(name=\"options\")\n    .container\n      h2.title オプション\n      hr\n      .columns\n        .column\n          //- この form は prevent が効いているか確認するためのもの\n          form(action=\"/\")\n            ShogiPlayer(\n              :run_mode.sync=\"run_mode\"\n              :kifu_body.sync=\"kifu_body\"\n              :start_turn.sync=\"start_turn\"\n              :theme.sync=\"theme\"\n              :size.sync=\"size\"\n              :bg_variant.sync=\"bg_variant\"\n              :piece_variant.sync=\"piece_variant\"\n              :debug_mode.sync=\"debug_mode\"\n              :hidden_if_piece_stand_blank=\"hidden_if_piece_stand_blank\"\n              :setting_button_show=\"setting_button_show\"\n              :summary_show=\"summary_show\"\n              :operation_disable=\"operation_disable\"\n              :flip.sync=\"flip\"\n              :vlayout.sync=\"vlayout\"\n              :digit_show=\"digit_show\"\n              :final_label=\"final_label\"\n              :player_info=\"player_info\"\n              :key_event_capture=\"key_event_capture\"\n              :slider_show=\"slider_show\"\n              :controller_show=\"controller_show\"\n              :sfen_show=\"sfen_show\"\n              :overlay_navi=\"overlay_navi\"\n              :sound_effect=\"sound_effect\"\n              :volume=\"volume\"\n              :human_side_key=\"human_side_key\"\n\n              @update:edit_mode_snapshot_sfen=\"e => trigger_check('edit_mode_snapshot_sfen', e)\"\n              @update:mediator_snapshot_sfen=\"e => trigger_check('mediator_snapshot_sfen', e)\"\n              @update:play_mode_advanced_full_moves_sfen=\"e => trigger_check('play_mode_advanced_full_moves_sfen', e)\"\n              @update:play_mode_advanced_snapshot_sfen=\"e => trigger_check('play_mode_advanced_snapshot_sfen', e)\"\n              @update:play_mode_advanced_last_move=\"e => trigger_check('play_mode_advanced_last_move', e)\"\n              @update:play_mode_advanced_moves=\"e => trigger_check('play_mode_advanced_moves', e)\"\n              @update:turn_offset=\"e => trigger_check('turn_offset', e)\"\n\n              @click.native=\"() => $buefy.toast.open({message: '全体のどこかをクリック', queue: false})\"\n              )\n              //- Slot動作確認用\n              template(slot=\"sfen_part\" slot-scope=\"props\")\n                | ({{props.mediator.to_simple_sfen}})\n                //- hr\n                //- | ({{props.mediator.to_sfen_without_turn}})\n          hr\n\n      .columns\n        .column\n          section\n            b-field(label=\"run_mode\")\n              .block\n                template(v-for=\"e in RunModeInfo.values\")\n                  b-radio(v-model=\"run_mode\" :native-value=\"e.key\") {{e.name}}({{e.key}})\n\n            .box\n              b-field(label=\"theme\")\n                .block\n                  template(v-for=\"e in ThemeInfo.values\")\n                    b-radio(v-model=\"theme\" :native-value=\"e.key\") {{e.name}}({{e.key}})\n\n              b-field(label=\"bg_variant\")\n                .block\n                  template(v-for=\"e in BgVariantInfo.values\")\n                    b-radio(v-model=\"bg_variant\" :native-value=\"e.key\") {{e.name}}\n\n              b-field(label=\"piece_variant\")\n                .block\n                  template(v-for=\"e in PieceVariantInfo.values\")\n                    b-radio(v-model=\"piece_variant\" :native-value=\"e.key\") {{e.name}}({{e.key}})\n\n              b-field(label=\"size\")\n                .block\n                  template(v-for=\"e in SizeInfo.values\")\n                    b-radio(v-model=\"size\" :native-value=\"e.key\") {{e.key}}\n\n            .box\n              b-field(grouped group-multiline)\n                b-field(label=\"sound_effect\")\n                  b-switch(v-model=\"sound_effect\")\n\n                b-field(label=\"volume\")\n                  .block\n                    input(v-model.number=\"volume\" type=\"range\" min=\"0\" max=\"1.0\" step=\"0.01\")\n                    | {{volume}}\n\n            b-field(grouped group-multiline)\n              b-field(label=\"start_turn\")\n                b-input(v-model=\"start_turn\" type=\"number\")\n\n              b-field(label=\"final_label\")\n                b-input(v-model.trim=\"final_label\" type=\"text\")\n\n            b-field(grouped group-multiline)\n              b-field(label=\"player_info.black.name\")\n                b-input(v-model.trim=\"black_name\" type=\"text\")\n              b-field(label=\"player_info.white.name\")\n                b-input(v-model.trim=\"white_name\" type=\"text\")\n\n            b-field(grouped group-multiline)\n              b-field(label=\"slider_show\")\n                b-switch(v-model=\"slider_show\")\n\n              b-field(label=\"controller_show\")\n                b-switch(v-model=\"controller_show\")\n\n              b-field(label=\"sfen_show\")\n                b-switch(v-model=\"sfen_show\")\n\n              b-field(label=\"overlay_navi\")\n                b-switch(v-model=\"overlay_navi\")\n\n              b-field(label=\"key_event_capture\")\n                b-switch(v-model=\"key_event_capture\")\n\n              b-field(label=\"flip\")\n                b-switch(v-model=\"flip\")\n\n              b-field(label=\"vlayout\")\n                b-switch(v-model=\"vlayout\")\n\n              b-field(label=\"digit_show\")\n                b-switch(v-model=\"digit_show\")\n\n              b-field(label=\"debug_mode\")\n                b-switch(v-model=\"debug_mode\")\n\n              b-field(label=\"hidden_if_piece_stand_blank\")\n                b-switch(v-model=\"hidden_if_piece_stand_blank\")\n\n              b-field(label=\"setting_button_show\")\n                b-switch(v-model=\"setting_button_show\")\n\n              b-field(label=\"summary_show\")\n                b-switch(v-model=\"summary_show\")\n\n              b-field(label=\"operation_disable\")\n                b-switch(v-model=\"operation_disable\")\n\n            b-field(label=\"human_side_key\")\n              .block\n                template(v-for=\"e in SideInfo.values\")\n                  b-radio(v-model=\"human_side_key\" :native-value=\"e.key\") {{e.key}}\n\n            b-field(label=\"kifu_body (KIF or USI(sfen)形式\")\n              b-input(v-model=\"kifu_body\" type=\"textarea\")\n\n            article.message.is-primary.has-text-left\n              .message-header\n                p 引数\n\n              .message-body\n                | &lt;shogi-player\n                | :<b>run_mode</b>=\"'{{run_mode}}'\"\n                | :<b>theme</b>=\"'{{theme}}'\"\n                | :<b>bg_variant</b>=\"'{{bg_variant}}'\"\n                | :<b>piece_variant</b>=\"'{{piece_variant}}'\"\n                | :<b>size</b>=\"'{{size}}'\"\n                | :<b>start_turn</b>=\"{{start_turn}}\"\n                | :<b>slider_show</b>=\"{{slider_show}}\"\n                | :<b>controller_show</b>=\"{{controller_show}}\"\n                | :<b>sfen_show</b>=\"{{sfen_show}}\"\n                | :<b>overlay_navi</b>=\"{{overlay_navi}}\"\n                | :<b>human_side_key</b>=\"'{{human_side_key}}'\"\n                | :<b>sound_effect</b>=\"{{sound_effect}}\"\n                | :<b>volume</b>=\"{{volume}}\"\n                | :<b>key_event_capture</b>=\"{{key_event_capture}}\"\n                | :<b>debug_mode</b>=\"{{debug_mode}}\"\n                | :<b>hidden_if_piece_stand_blank</b>=\"{{hidden_if_piece_stand_blank}}\"\n                | :<b>setting_button_show</b>=\"{{setting_button_show}}\"\n                | :<b>summary_show</b>=\"{{summary_show}}\"\n                | :<b>operation_disable</b>=\"{{operation_disable}}\"\n                | :<b>flip</b>=\"{{flip}}\"\n                | :<b>vlayout</b>=\"{{vlayout}}\"\n                | :<b>digit_show</b>=\"{{digit_show}}\"\n                | :<b>final_label</b>=\"'{{final_label}}'\"\n                | :<b>player_info</b>=\"{{player_info}}\"\n                | :<b>kifu_body</b>=\"'{{kifu_body}}'\"\n                | /&gt;\n\n            br\n            br\n            h4.title 操作モードのイベント受信内容\n\n            b-field(label=\"イベント確認(buefy.toast)\")\n              b-switch(v-model=\"trigger_toast_p\")\n\n            b-field(label=\"@update:play_mode_advanced_full_moves_sfen: 操作モードで指した直後の局面を発行(movesあり)\")\n              b-input(:value=\"JSON.stringify(play_mode_advanced_full_moves_sfen)\" readonly type=\"textarea\" rows=\"1\")\n\n            b-field(label=\"@update:play_mode_advanced_snapshot_sfen: 操作モードで指した直後の局面を発行(movesなし)\")\n              b-input(:value=\"JSON.stringify(play_mode_advanced_snapshot_sfen)\" readonly type=\"text\")\n\n            b-field(label=\"@update:play_mode_advanced_last_move: 操作モードで指した手(sfenのmovesの最後の1つ)\")\n              b-input(:value=\"JSON.stringify(play_mode_advanced_last_move)\" readonly type=\"text\")\n\n            b-field(label=\"@update:play_mode_advanced_moves: 操作モードで指した手を含むmoves配列\")\n              b-input(:value=\"JSON.stringify(play_mode_advanced_moves)\" readonly type=\"text\")\n\n            b-field(label=\"@update:mediator_snapshot_sfen: 操作モード(または再生モード)で盤面が変化したとき(常に更新)\")\n              b-input(:value=\"JSON.stringify(mediator_snapshot_sfen)\" readonly type=\"text\")\n\n            b-field(label=\"@update:edit_mode_snapshot_sfen: 編集モードで盤面が変化したとき\")\n              b-input(:value=\"JSON.stringify(edit_mode_snapshot_sfen)\" readonly type=\"text\")\n\n            b-field(label=\"@update:turn_offset: 手数が変化したとき\")\n              b-input(:value=\"JSON.stringify(turn_offset)\" readonly type=\"text\")\n            br\n\n      .table_wrap\n        .content(v-html=\"options_md\")\n\n  .section\n    a(name=\"api\")\n    .container\n      h2.title API Methods\n      hr\n      .columns\n        .column\n          ShogiPlayer(\n            ref=\"api_sp\"\n            :summary_show=\"false\"\n            :hidden_if_piece_stand_blank=\"true\"\n            :board_cell_left_click_user_handle=\"board_cell_left_click_user_handle\"\n            :overlay_navi=\"false\"\n            :debug_mode=\"false\"\n          )\n      .columns\n        .column\n          .buttons.is-centered\n            b-button(label=\"api_random_puton\" @click=\"run_api_random_puton\")\n            b-button(label=\"api_retract_a_move\" @click=\"run_api_retract_a_move\")\n      .columns\n        .column\n          .table_wrap\n            .content(v-html=\"api_md\")\n\n  .section\n    a(name=\"license\")\n    .container\n      .table_wrap\n        .content(v-html=\"license_md\")\n\n  footer.footer\n    .container\n      .columns\n        .column.has-text-centered\n          a(href=\"https://bulma.io\")\n            img(src=\"./assets/made-with-bulma.png\" alt=\"Made with Bulma\" width=\"128\" height=\"24\")\n</template>\n\n<script>\n/* eslint-disable import/first */\n\nimport \"css-browser-selector\"\n\nimport Vue from 'vue'\nimport Vuex from 'vuex'\nimport Buefy from 'buefy'\n\nVue.use(Vuex)\nVue.use(Buefy)\n\nimport ShogiPlayer from './components/ShogiPlayer'\n\nimport SideInfo from \"./side_info\"\nimport RunModeInfo from \"./run_mode_info\"\nimport ThemeInfo from \"./theme_info\"\nimport BgVariantInfo from \"./bg_variant_info\"\nimport PieceVariantInfo from \"./piece_variant_info\"\nimport SizeInfo from \"./size_info\"\n\n// Object.defineProperty(Vue.prototype, 'SideInfo', {value: SideInfo})\n\n// Object.defineProperty(Vue.prototype, 'RunModeInfo', {value: RunModeInfo})\n// Object.defineProperty(Vue.prototype, 'ThemeInfo', {value: ThemeInfo})\n// Object.defineProperty(Vue.prototype, 'BgVariantInfo', {value: BgVariantInfo})\n// Object.defineProperty(Vue.prototype, 'SizeInfo', {value: SizeInfo})\n\nconst marked = require('marked')\nconst renderer = new marked.Renderer()\nrenderer.table = (header, body) => '<div class=\"table_wrap\"><table>\\n' + '<thead>\\n' + header + '</thead>\\n' + '<tbody>\\n' + body + '</tbody>\\n' + '</table></div>\\n'\nmarked.setOptions({\n  renderer: renderer,\n  gfm: true,\n  tables: true,\n  breaks: false,\n  pedantic: false,\n  sanitize: false,\n  smartLists: true,\n  smartypants: false,\n})\n\nexport default {\n  name: 'app',\n\n  data() {\n    // FIXME: npm run unit で raw-loader が効かない問題を回避している。が、SideInfo.values などがないとテストがこけるので最低限入れとく\n    if (process.env.NODE_ENV === \"test\") {\n      return {\n        SideInfo,\n        RunModeInfo,\n        ThemeInfo,\n        BgVariantInfo,\n        PieceVariantInfo,\n        SizeInfo,\n      }\n    }\n\n    return {\n      SideInfo,\n      RunModeInfo,\n      ThemeInfo,\n      BgVariantInfo,\n      PieceVariantInfo,\n      SizeInfo,\n\n      modal_p: false,\n      modal_p2: false,\n\n      // カスタマイズ用\n      run_mode: \"view_mode\",   // play_mode\n      theme: \"real\",\n      bg_variant: \"a\",\n      piece_variant: \"a\",\n      size: \"default\",\n      start_turn: -1,\n      slider_show: true,\n      overlay_navi: true,\n      controller_show: true,\n      sfen_show: true,\n      human_side_key: 'both',\n      sound_effect: true,\n      volume: 0.5,\n      key_event_capture: false,\n      debug_mode: false,\n      hidden_if_piece_stand_blank: false,\n      setting_button_show: true,\n      summary_show: true,\n      operation_disable: false,\n      flip: false,\n      vlayout: false,\n      digit_show: false,\n      black_name: '先手',\n      white_name: '後手',\n\n      final_label: null,\n      kifu_body: require(\"./極限早繰り銀.kif\"),\n\n      trigger_toast_p: false,\n\n      edit_mode_snapshot_sfen: null,\n      mediator_snapshot_sfen: null,\n      play_mode_advanced_full_moves_sfen: null,\n      play_mode_advanced_snapshot_sfen: null,\n      play_mode_advanced_last_move: null,\n      play_mode_advanced_moves: null,\n      turn_offset: null,\n\n      kif_sample1: require(\"./第11回朝日杯将棋オープン戦本戦.kif\"),\n      kif_sample2: require(\"./藤井聡太四段_vs_澤田真吾六段.kif\"),\n      usage_md: marked(require('./usage.md')),\n      options_md: marked(require('./options.md')),\n      license_md: marked(require('./license.md')),\n      api_md: marked(require('./api.md')),\n    }\n  },\n\n  components: {\n    ShogiPlayer\n  },\n\n  methods: {\n    board_cell_left_click_user_handle(place, event) {\n      this.$buefy.toast.open({message: `${place.kanji_human}のセルをクリック`, queue: false})\n      return true\n    },\n\n    run_api_random_puton()   { this.$refs.api_sp.api_random_puton()   },\n    run_api_retract_a_move() { this.$refs.api_sp.api_retract_a_move() },\n\n    // edit_mode_snapshot_sfen_set(v)            { this.edit_mode_snapshot_sfen            = v },\n    // mediator_snapshot_sfen_set(v)             { this.mediator_snapshot_sfen             = v },\n    // play_mode_advanced_full_moves_sfen_set(v) { this.play_mode_advanced_full_moves_sfen = v },\n    // play_mode_advanced_snapshot_sfen_set(v)   { this.play_mode_advanced_snapshot_sfen   = v },\n    // play_mode_advanced_last_move_set(v)       { this.play_mode_advanced_last_move       = v },\n    // play_mode_advanced_moves_set(v)           { this.play_mode_advanced_moves           = v },\n    // turn_offset_set(v)                        { this.turn_offset                        = v },\n    // update_kifu_source(v) {\n    //   // this.kifu_body = v\n    // },\n\n    trigger_check(key, v) {\n      this.$data[key] = v\n      if (this.trigger_toast_p) {\n        this.$buefy.toast.open({message: `${key} -> ${JSON.stringify(v)}`, queue: false})\n      }\n    },\n  },\n\n  computed: {\n    player_info() {\n      if (this.black_name || this.white_name) {\n        return {\n          black: {name: this.black_name},\n          white: {name: this.white_name},\n        }\n      }\n    }\n  },\n}\n</script>\n\n<style lang=\"sass\">\n@import \"./App.sass\"\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","import _ from \"lodash\"\n\nimport Place from \"../place\"\nimport Board from \"../board\"\nimport PieceVector from \"../piece_vector.js\"\nimport Soldier from \"../soldier\"\nimport Location from \"../location\"\n\nconst PLAY_MODE_LEGAL_MOVE_ONLY = true // play-mode で合法手のみに絞る\nconst AUTO_PROMOTE              = true // 死に駒になるときは自動的に成る\nconst NOT_PUT_IF_DEATH_SOLDIER  = true // 死に駒になるときは置けないようにする\nconst DOUBLE_CLICK_TIME = 350\n\nexport default {\n  /* eslint-disable */\n  props: {\n  },\n  /* eslint-enable */\n\n  data() {\n    return {\n      // |------------------------+------------+------------+---------------------|\n      // | どこの駒を持ち上げた？ | place_from | have_piece | have_piece_location |\n      // |------------------------+------------+------------+---------------------|\n      // | 盤上                   | ○         |            | ○                  |\n      // | 駒台                   |            | ○         | ○                  |\n      // | 駒箱                   |            | ○         |                     |\n      // |------------------------+------------+------------+---------------------|\n      place_from: null,           // 盤上ら動かそうとしているときの元位置\n      have_piece: null,           // 駒台 or 駒箱から持った駒\n      have_piece_location: null,  // 駒台から持ったときだけ先後が入っている。駒箱から取り出しているときは null\n      have_piece_promoted: null,    // 持ったとき成った状態にするか？\n\n      // プレフィクスに_をつけるとVueに監視されない\n      me_running_p: false,        // mousemove イベント緩和用\n      $me_last_event: null,        // mousemove イベント\n\n      cursor_elem_in_board_container: true,\n\n      $cursor_elem: null,        // 持ちあげている駒のDOM\n      mouse_stick: false,       // 持ち上げている駒をマウスに追随させるか？\n      dialog_p: false,          // 成り確認ダイアログ表示中か？\n\n      $double_tap_time: null,   // ダブルクリック判定用\n    }\n  },\n\n  watch: {\n    current_run_mode() {\n      this.state_reset() // モードが切り替わったときに持ち上げた駒を元に戻す(こうしないとカーソルから駒が離れない)\n    },\n  },\n\n  beforeDestroy() {\n    this.virtual_piece_destroy()\n  },\n\n  methods: {\n    // 盤をクリック\n    board_cell_left_click(xy, e) {\n      this.log(\"board_cell_left_click\")\n      this.log(`shiftKey: ${e.shiftKey}`)\n\n      const place = Place.fetch(xy)\n\n      const handle = this.board_cell_left_click_user_handle\n      if (handle) {\n        this.log(`ユーザー指定のクリックハンドル実行: ${place.human_digits}`)\n        if (handle(place, e)) {\n          return\n        }\n      }\n\n      if (this.if_view_mode_break) {\n        return\n      }\n\n      // 移動後の取れる駒\n      const soldier = this.mediator.board.lookup(place)\n\n      // 移動後の駒\n      let new_soldier = null\n      let promotable_p = null\n      if (this.origin_soldier1) {\n        new_soldier = new Soldier({\n          piece: this.origin_soldier1.piece,\n          place: place,\n          promoted: this.origin_soldier1.promoted,\n          location: this.origin_soldier1.location,\n        })\n        // 入って成る？ それとも出てなる？\n        promotable_p = new_soldier.promotable_p || this.origin_soldier1.promotable_p\n      }\n\n      // -------------------------------------------------------------------------------- Validation\n\n      if (this.cpu_location_p) {\n        this.log(\"片方の手番だけを操作できるようにする human_side_key の指定があってCPU側なので無効とする\")\n        return\n      }\n\n      if (this.current_run_mode === \"play_mode\" && !this.holding_p && soldier && soldier.location !== this.mediator.current_location) {\n        this.log(\"自分の手番で相手の駒を持ち上げようとしたので無効とする\")\n        return\n      }\n\n      if (this.current_run_mode === \"play_mode\" && this.have_piece && soldier) {\n        this.log(\"駒台や駒箱から持ち上げた駒を盤上の駒の上に置こうとしたので無効とする\")\n        return\n      }\n\n      if (NOT_PUT_IF_DEATH_SOLDIER && this.current_run_mode === \"play_mode\" && this.have_piece && !soldier) {\n        const new_soldier = this.soldier_create_from_stand_or_box_on(place)\n        const force_promote_length = new_soldier.piece.piece_vector.force_promote_length // 死に駒になる上の隙間\n        if (force_promote_length != null) {                                              // チェックしない場合は null\n          if (new_soldier.top_spaces <= force_promote_length) {                          // 実際の上の隙間 <= 死に駒になる上の隙間\n            this.log(\"駒台や駒箱から持ち上げた駒を置こうとしたけど死に駒なので無効とする\")\n            return\n          }\n        }\n      }\n\n      if (!this.holding_p && !soldier) {\n        this.log(\"持たずに何もないところをクリックしたので無効とする\")\n        return\n      }\n\n      if (this.current_run_mode === \"play_mode\" && this.put_on_my_soldier_p(soldier)) {\n        this.log(\"自分の駒の上に駒を重ねようとしたので無効とする(盤上の移動元の駒を含まない)\")\n        // this.state_reset() // ←元の位置に戻す場合\n        return\n      }\n\n      // ダブルタップで裏返すとシングルクリックの遅延がすさまじいことになるためダブルタップは使ってはいけない\n      if (this.current_run_mode === \"edit_mode\") {\n        const old = this.$double_tap_time\n        this.$double_tap_time = Date.now()\n        if (soldier) {\n          if (_.isEqual(this.place_from, place)) { // この処理をスキップすると3連打で2回反転できるが誤操作が頻発するのでやめ\n            if (old) {\n              const gap = this.$double_tap_time - old\n              const enable = gap < DOUBLE_CLICK_TIME\n              this.log(`ダブルクリック判定: (${gap} ms < ${DOUBLE_CLICK_TIME}) -> ${enable}`)\n              if (enable) {\n                this.log(`操作モードで盤上の駒を持って同じ位置に戻したときに盤上の駒を裏返す`)\n                this.mediator.board.place_on(soldier.piece_transform)\n                this.pice_hold_and_put_for_bug(place, e) // 不具合対策\n                return\n              }\n            }\n          }\n        }\n      }\n\n      if (_.isEqual(this.place_from, place)) {\n        this.log(\"盤上の駒を持って同じ位置に戻したので状況キャンセル\")\n        this.state_reset()\n        return\n      }\n\n      // --------------------------------------------------------------------------------\n\n      if (this.current_run_mode === \"edit_mode\") {\n        this.log(`holding_p: ${this.holding_p}`)\n        if (this.meta_p(e)) {\n          if (!this.holding_p && soldier) { // 持ってなくて、駒がある\n            this.log(\"盤上の駒を裏返す\")\n            this.mediator.board.place_on(soldier.piece_transform)\n            this.pice_hold_and_put_for_bug(place, e) // 不具合対策\n            return\n          }\n        }\n      }\n\n      // 盤上の駒を持ちあげる\n      if (!this.holding_p) {\n        this.log(\"盤上の駒を持ちあげる\")\n        this.soldier_hold(place, e)\n        return\n      }\n\n      // 盤上から移動させようとしたとき合法手以外は指せないようにする\n      if (PLAY_MODE_LEGAL_MOVE_ONLY && this.current_run_mode === \"play_mode\" && this.place_from) {\n        const piece_vector = PieceVector.fetch(this.origin_soldier1.piece.key)\n        const ox = this.place_from.x\n        const oy = this.place_from.y\n\n        let method_key = null\n        let found = false\n\n        // 1つだけ動ける系\n        if (!found) {\n          if (this.origin_soldier1.promoted) {\n            method_key = piece_vector.promoted_once_vectors\n          } else {\n            method_key = piece_vector.basic_once_vectors\n          }\n          const vectors = PieceVector[method_key]\n          if (vectors) {\n            found = vectors.some(e => {\n              if (e) {\n                const vx = e[0]\n                const vy = e[1] * this.origin_soldier1.location.value_sign\n                const x = ox + vx\n                const y = oy + vy\n                return x === place.x && y === place.y\n              }\n            })\n          }\n        }\n\n        //\n        if (!found) {\n          if (this.origin_soldier1.promoted) {\n            method_key = piece_vector.promoted_repeat_vectors\n          } else {\n            method_key = piece_vector.basic_repeat_vectors\n          }\n          const vectors = PieceVector[method_key]\n          if (vectors) {\n            found = vectors.some(e => {\n              if (e) {\n                const vx = e[0]\n                const vy = e[1] * this.origin_soldier1.location.value_sign\n\n                let x = ox + vx\n                let y = oy + vy\n\n                while (true) {\n                  if (!Place.xy_valid_p(x, y)) {\n                    break\n                  }\n                  if (x === place.x && y === place.y) {\n                    return true\n                  }\n                  const next_place = Place.fetch([x, y])\n                  const next_soldier = this.mediator.board.lookup(next_place)\n                  if (next_soldier) {\n                    break\n                  }\n                  x += vx\n                  y += vy\n                }\n              }\n            })\n          }\n        }\n\n        if (!found) {\n          return\n        }\n      }\n\n      // 盤上から移動\n      if (this.place_from) {\n        this.log(\"盤上から移動\")\n        if (soldier) {\n          this.mediator.hold_pieces_add(this.origin_soldier1.location, soldier.piece) // 相手の駒があれば取る\n          // this.$forceUpdate()\n        }\n\n        if (this.current_run_mode === \"play_mode\" && promotable_p) { // 入って成る or 出て成る\n\n          let must_dialog = true\n          if (AUTO_PROMOTE) {\n            const force_promote_length = new_soldier.piece.piece_vector.force_promote_length // 死に駒になる上の隙間\n            if (force_promote_length != null) {                                              // チェックしない場合は null\n              if (new_soldier.top_spaces <= force_promote_length) {                          // 実際の上の隙間 <= 死に駒になる上の隙間\n                this.promotable_piece_moved(new_soldier, true)                               // 死に駒になるなら自動的に成る\n                must_dialog = false                                                          // ダイアログを表示する必要はなくなった\n              }\n            }\n          }\n\n          if (must_dialog) {\n            this.mouse_stick = false // ダイアログ選択時時は動かしている駒を止める\n            this.dialog_p = true\n            this.$buefy.dialog.confirm({\n              message: '成りますか？',\n              confirmText: '成る',\n              cancelText: '成らない',\n              onConfirm: () => { this.promotable_piece_moved(new_soldier, true)  },\n              onCancel:  () => { this.promotable_piece_moved(new_soldier, false) },\n            })\n          }\n        } else {\n          if (this.current_run_mode === \"play_mode\") {\n            this.moves_set(this.origin_soldier1.place.to_sfen + place.to_sfen) // 7g7f\n          }\n          this.mediator.board.place_on(new_soldier) // 置く\n          this.mediator.board.delete_at(this.place_from)\n          this.state_reset()\n          this.turn_next()\n        }\n\n        return\n      }\n\n      // 持駒を置く\n      if (this.have_piece) {\n        this.log(\"持駒を置く\")\n\n        // 駒の上に置いた場合は取る\n        if (soldier) {\n          if (this.have_piece_location) {\n            // have_piece_location の駒台から移動した駒で取ったので have_piece_location の方に置く\n            this.mediator.hold_pieces_add(this.have_piece_location, soldier.piece)\n          } else {\n            // 駒箱から移動した駒で取ったので soldier.location に返すとする場合\n            if (false) {\n              this.mediator.hold_pieces_add(soldier.location, soldier.piece)\n            } else {\n              // 駒の向きは先手と同じなのでわかりやすいように 先手に返す\n              this.mediator.hold_pieces_add(Location.fetch(\"black\"), soldier.piece)\n            }\n          }\n        }\n\n        const new_soldier = this.soldier_create_from_stand_or_box_on(place)\n        this.piece_decriment()\n        this.mediator.board.place_on(new_soldier) // 置く\n        this.moves_set(new_soldier.piece.key + \"*\" + place.to_sfen) // P*7g\n        this.state_reset()\n        this.turn_next()\n        return\n      }\n\n      throw new Error(\"must not happen\")\n    },\n\n    // board_cell_left_dblclick(xy, e) {\n    //   if (this.if_view_mode_break) {\n    //     return\n    //   }\n    //\n    //   const place = Place.fetch(xy)\n    //   const soldier = this.mediator.board.lookup(place)\n    //\n    //   if (this.current_run_mode === \"edit_mode\") {\n    //     if (!this.holding_p) {\n    //       if (soldier) {\n    //         this.log(\"操作モードでダブルタップしたので裏返す\")\n    //         // this.mediator.board.place_on(soldier.piece_transform)\n    //         // this.pice_hold_and_put_for_bug(place, e) // 不具合対策\n    //         return\n    //       }\n    //     }\n    //   }\n    //\n    //   return \"eslint対策のreturn\"\n    // },\n\n    // 成れる状態の駒をどうするか\n    promotable_piece_moved(new_soldier, promoted) {\n      this.dialog_p = false\n\n      this.$set(new_soldier, \"promoted\", promoted)\n\n      this.moves_set(this.origin_soldier1.place.to_sfen + new_soldier.place.to_sfen + (new_soldier.promoted ? \"+\" : \"\")) // 7g7f+\n      this.mediator.board.place_on(new_soldier) // 置く\n      this.mediator.board.delete_at(this.place_from)\n      this.state_reset()\n      this.turn_next()\n    },\n\n    board_cell_right_click(xy, e) {\n      this.log(\"盤のセルを右クリック\")\n\n      if (this.if_view_mode_break) {\n        return\n      }\n\n      const place = Place.fetch(xy)\n      const soldier = this.mediator.board.lookup(place)\n\n      if (this.hold_cancel(e)) {\n        return\n      }\n\n      if (this.current_run_mode === \"edit_mode\") {\n        if (!this.holding_p && soldier) {\n          this.log(\"盤上の駒を裏返す\")\n          this.mediator.board.place_on(soldier.piece_transform)\n          this.pice_hold_and_put_for_bug(place, e) // 不具合対策\n        }\n      }\n    },\n\n    // board_cell_right_click2(xy, e) {\n    //   this.log(\"盤のセルを右クリック\")\n    //\n    //   if (this.if_view_mode_break) {\n    //     return\n    //   }\n    //\n    //   const place = Place.fetch(xy)\n    //   const soldier = this.mediator.board.lookup(place)\n    //\n    //   if (this.hold_cancel(e)) {\n    //     return\n    //   }\n    //\n    //   if (this.current_run_mode === \"edit_mode\") {\n    //     if (!this.holding_p && soldier) {\n    //       this.log(\"盤上の駒を裏返す\")\n    //       this.mediator.board.place_on(soldier.piece_transform)\n    //       this.pice_hold_and_put_for_bug(place, e) // 不具合対策\n    //     }\n    //   }\n    // },\n\n    // 駒台 or 駒台の駒をクリックしたときの共通処理\n    piece_stand_click_shared(location, e) {\n      if (this.have_piece_location === location && this.have_piece) {\n        this.log(\"自分の駒台から駒を持ち上げているならキャンセル\")\n        this.state_reset()\n        return true\n      }\n\n      // 相手の駒台から自分の駒台、または駒箱から自分の駒台へ移動\n      if (this.current_run_mode === \"edit_mode\") {\n        // if (this.have_piece_location !== location && this.have_piece) {\n        if (this.have_piece) {\n          // 相手の持駒を自分の駒台に移動\n          this.hold_pieces_move_to_my_hold_pieces(e, location)\n          return true\n        }\n      }\n\n      if (this.current_run_mode === \"play_mode\") {\n        if (this.origin_soldier1) {\n          this.log(\"play_mode では盤上の駒を駒台に置くことはできない\")\n          return true\n        }\n      }\n\n      // 盤上の駒を駒台に置く\n      if (this.origin_soldier1) {\n        this.log(\"盤上の駒を駒台に置く\")\n        this.board_soldir_to_hold_pieces(location)\n        return true\n      }\n\n      return false\n    },\n\n    // 駒台クリック\n    piece_stand_click(location, e) {\n      this.piece_stand_click_shared(location, e)\n    },\n\n    // 駒台の駒をクリック\n    piece_stand_piece_click(location, piece, have_piece_promoted, e) {\n      this.log(\"駒台の駒をクリック\")\n\n      if (this.piece_stand_click_shared(location, e)) {\n        return\n      }\n\n      // クリックしたけど持駒がない\n      if (this.mediator.hold_pieces_count(location, piece) <= 0) {\n        this.log(\"クリックしたけど持駒がない\")\n        return\n      }\n\n      // 相手の持駒を持とうとしたときは無効\n      if (this.current_run_mode === \"play_mode\" && location !== this.mediator.current_location) {\n        this.log(\"相手の持駒を持とうとしたときは無効\")\n        return\n      }\n\n      if (this.cpu_location_p) {\n        this.log(\"片方の手番だけを操作できるようにする human_side_key の指定があってCPU側なので無効とする\")\n        return\n      }\n\n      this.log(\"駒台の駒を持つ\")\n      this.have_piece = piece\n      this.have_piece_location = location\n      this.have_piece_promoted = have_piece_promoted\n      this.virtual_piece_create(e, this.origin_soldier2)\n    },\n\n    // 駒箱の駒を持ち上げている？\n    piece_box_have_p(piece) {\n      return _.isNil(this.have_piece_location) && this.have_piece === piece\n    },\n\n    // FIXME: 駒を持っているときは「駒箱の駒」に対して一切反応しないようにしたい。そうすると駒箱だけの判定で済む\n    piece_box_other_click(e) {\n      this.log(\"piece_box_other_click:駒箱クリック\")\n\n      if (_.isNil(this.have_piece_location) && this.have_piece) {\n        this.log(\"持っているならキャンセル\")\n        this.state_reset()\n        return true\n      }\n\n      if (this.have_piece_location && this.have_piece) {\n        this.log(\"駒台から駒箱に移動\")\n        const count = this.hold_piece_source_cut(e)               // 相手の持駒を減らして減らした分だけ\n        this.mediator.piece_box_add(this.have_piece, count) // 駒箱に加算する\n        this.state_reset()\n        return true\n      }\n\n      if (this.origin_soldier1) {\n        this.log(\"盤上の駒を駒箱に移動\")\n        this.mediator.piece_box_add(this.origin_soldier1.piece)\n        this.mediator.board.delete_at(this.origin_soldier1.place)\n        this.state_reset()\n        return true\n      }\n\n      return false\n    },\n\n    // 駒箱の駒をクリック\n    piece_box_piece_click(piece, e) {\n      // 駒をクリックしたとき駒箱をクリックするのと同じ処理を実行\n      if (this.piece_box_other_click(e)) {\n        return\n      }\n\n      this.log(\"piece_box_piece_click:駒箱の駒を持つ\")\n      this.have_piece = piece\n      this.have_piece_location = null\n      this.have_piece_promoted = false\n      this.virtual_piece_create(e, this.origin_soldier2)\n    },\n\n    // FIXME: click_hook のところだけで行いたい\n    // 成り選択ダイアログ表示中に Escape でこれが呼ばれるので dialog_p のときは実行しない\n    hold_cancel(e) {\n      if (!this.dialog_p) {\n        if (this.holding_p) {\n          this.log(\"持ち上げた駒を元に戻す\")\n          this.state_reset()\n          return true\n        }\n      }\n\n      return false\n    },\n\n    // 盤上の駒を駒台に置く\n    board_soldir_to_hold_pieces(location) {\n      this.mediator.hold_pieces_add(location, this.origin_soldier1.piece) // 駒台にプラス\n      this.mediator.board.delete_at(this.origin_soldier1.place)\n      this.state_reset()\n    },\n\n    hold_pieces_move_to_my_hold_pieces(e, location) {\n      this.log(\"相手の持駒を自分の駒台に移動\")\n      const count = this.hold_piece_source_cut(e)                           // 相手の持駒を減らして減らした分だけ\n      this.mediator.hold_pieces_add(location, this.have_piece, count) // 自分に加算する\n      this.state_reset()\n    },\n\n    // 持ち上げている駒を元の場所から減らす\n    hold_piece_source_cut(e) {\n      let count = 1\n\n      if (this.have_piece_location) {\n        this.log(\"相手の駒箱から移動\")\n        if (this.meta_p(e)) {\n          this.log(\"シフトが押されていたので全部移動\")\n          count = this.mediator.hold_pieces_count(this.have_piece_location, this.have_piece)\n        }\n        count = this.mediator.hold_pieces_can_be_reduced_count(this.have_piece_location, this.have_piece, count)\n        this.mediator.hold_pieces_add(this.have_piece_location, this.have_piece, -count)\n      } else {\n        this.log(\"駒箱から移動\")\n        if (this.meta_p(e)) {\n          this.log(\"シフトが押されていたので全部移動\")\n          count = this.mediator.piece_box_count(this.have_piece)\n        }\n        count = this.mediator.piece_box_can_be_reduced_count(this.have_piece, count) // 減らせる数を clamp する。そうしないと駒箱から移動するときに駒が増えいく\n        this.mediator.piece_box_add(this.have_piece, -count)\n      }\n\n      // 実際に減らせれた数を返す(重要)\n      return count\n    },\n\n    // 駒を1つ減らす\n    piece_decriment() {\n      if (this.have_piece_location) {\n        this.mediator.hold_pieces_add(this.have_piece_location, this.have_piece, -1)\n      } else {\n        this.mediator.piece_box_add(this.have_piece, -1)\n      }\n    },\n\n    // 自分の駒の上に重ねた？ (移動元にある駒を含まない)\n    put_on_my_soldier_p(soldier) {\n      if (this.holding_p) {\n        if (soldier && soldier.location === this.mediator.current_location) {\n          if (_.isEqual(this.place_from, soldier.place)) {\n          } else {\n            return true\n          }\n        }\n      }\n    },\n\n    // 盤面の駒を持ち上げる\n    soldier_hold(place, e) {\n      this.place_from = place\n      this.virtual_piece_create(e, this.origin_soldier1)\n    },\n\n    // 駒を持ってない状態にする\n    state_reset() {\n      if (this.dialog_p) {\n        alert(\"ダイアログ表示中に state_reset が呼ばれてはいけない\")\n      }\n      this.log(\"state_reset\")\n      this.place_from = null // 持ってない状態にする\n      this.have_piece = null\n      this.have_piece_location = null\n      this.have_piece_promoted = null\n      this.virtual_piece_destroy()\n    },\n\n    // 駒を持つ → そのまま置く\n    // これは Vue がリアクティブにならない対策として入れているのでできれば外したい\n    pice_hold_and_put_for_bug(place, e) {\n      // this.soldier_hold(place, e)\n      this.state_reset() // ←これは絶対にいる\n      // emitされない不具合の暫定対策でちょうどここが共通処理になっているのでつっこんでおく\n      // this.emit_update_edit_mode_snapshot_sfen()\n    },\n\n    // -------------------------------------------------------------------------------- piece_box\n\n    // 駒箱の駒\n    piece_box_piece_back_class(piece) {\n      let list = []\n      if (this.piece_box_have_p(piece)) {\n        list.push(\"holding_p\")\n      } else if (this.current_run_mode === \"edit_mode\") {\n        if (!this.holding_p) {\n          list.push(\"selectable_p\")\n        }\n      }\n\n      // list = _.concat(list, piece.css_class_list)\n      // list.push(\"location_black\")\n      // list.push(\"promoted_false\")\n\n      return list\n    },\n\n    // 駒箱の駒のテクスチャ\n    piece_box_piece_inner_class(piece) {\n      let list = []\n      list = _.concat(list, piece.css_class_list)\n      list.push(\"location_black\")\n      list.push(\"promoted_false\")\n      return list\n    },\n\n    // --------------------------------------------------------------------------------\n\n    fn_flip_all() {\n      // 盤面反転\n      this.mediator.board = this.mediator.board.flip_all\n\n      // 持駒反転\n      this.mediator.hold_pieces = _.reduce(Location.values, (a, e) => {\n        a[e.key] = this.mediator.hold_pieces[e.flip.key]\n        return a\n      }, {})\n    },\n\n    fn_flip_h() {\n      // 盤面左右反転\n      this.mediator.board = this.mediator.board.flip_h\n    },\n\n    init_location_toggle() {\n      this.init_location_key = this.init_location.flip.key\n    },\n\n    // 駒箱や駒台から持ち上げている駒\n    soldier_create_from_stand_or_box_on(place) {\n      return new Soldier({\n        piece: this.have_piece,\n        place: place,\n        promoted: this.have_piece_promoted || false,\n        location: this.have_piece_location || Location.fetch(\"black\"),\n      })\n    },\n\n    mousemove_hook(e) {\n      this.$me_last_event = e\n\n      // 連続で呼ばれるイベント処理を緩和する方法\n      // https://qiita.com/noplan1989/items/9333faad731f5ecaaccd\n      // ※試してみているけどあまり効果がない\n      if (true) {\n        // 呼び出されるまで何もしない\n        if (!this.me_running_p) {\n          this.me_running_p = true\n\n          // 描画する前のタイミングで呼び出してもらう\n          window.requestAnimationFrame(() => {\n            this.cursor_elem_set_pos()\n\n            this.me_running_p = false\n          })\n        }\n      } else {\n        this.cursor_elem_set_pos()\n      }\n    },\n\n    // 右クリックならキャンセル(動いてないっぽい)\n    click_hook(e) {\n      if (e.which !== 1) {\n        this.state_reset()\n      }\n    },\n\n    cursor_elem_set_pos() {\n      if (this.$cursor_elem && this.$me_last_event && this.mouse_stick) {\n        // TODO: これが遅いのか？ もっと速く設定できる方法があれば変更したい\n        let x = this.$me_last_event.clientX\n        let y = this.$me_last_event.clientY\n\n        if (this.cursor_elem_in_board_container) {\n          // const rect = this.$refs.board_container_ref.getBoundingClientRect()\n          // x -= rect.left\n          // y -= rect.top\n        }\n\n        this.$cursor_elem.style.left = `${x}px`\n        this.$cursor_elem.style.top  = `${y}px`\n      }\n    },\n\n    // マウス位置に表示する駒の生成\n    //\n    //   .piece_back.cursor_elem\n    //     .piece_fore.virtual_piece_flip\n    //\n    virtual_piece_create(event, soldier) {\n      this.virtual_piece_destroy()\n      this.virtual_piece_dom_create(soldier)\n\n      this.mouse_stick = true   // マウスに追随する\n\n      // キーボードイベントの場合は null が来るようにしている\n      // マウスを動かしてはじめて座標が取れるのでキーボードの場合はすぐに駒は表示されない\n      if (event) {\n        this.$me_last_event = event\n        this.cursor_elem_set_pos()\n      }\n\n      window.addEventListener(\"mousemove\", this.mousemove_hook, false)\n      window.addEventListener(\"click\", this.click_hook, false)\n    },\n\n    // 注意: リターンキーでこの soldier をいくら反転させようと考えてはいけない。(origin_soldier1 が元なので意味がない)\n    virtual_piece_dom_create(soldier) {\n      this.$cursor_elem = document.createElement(\"div\")\n      this.$cursor_elem.classList.add(\"cursor_elem\")\n\n      const piece_back = document.createElement(\"div\")\n      piece_back.classList.add(\"piece_back\")\n\n      const piece_fore = document.createElement(\"div\")\n      piece_fore.classList.add(\"piece_fore\", ...soldier.to_class_list)\n\n      const text = document.createTextNode(soldier.name)\n      piece_fore.appendChild(text)\n\n      // const list = _.concat(class_list, [\"piece_back\"])\n      // piece_fore.classList.add(...list)\n\n      if (this.current_flip) {\n        // this.$cursor_elem.classList.add(\"virtual_piece_flip\") // 盤面を反転している場合は駒も反転する\n        piece_back.classList.add(\"virtual_piece_flip\") // 盤面を反転している場合は駒も反転する\n      }\n\n      piece_back.appendChild(piece_fore)\n      this.$cursor_elem.appendChild(piece_back)\n\n      // マウスイベントが発生するまでは画面内に表示されてしまうので画面外に出す\n      this.$cursor_elem.style.left = \"-50%\"\n      this.$cursor_elem.style.top  = \"-50%\"\n\n      if (this.cursor_elem_in_board_container) {\n        this.$refs.board_container_ref.appendChild(this.$cursor_elem)\n      } else {\n        this.$el.appendChild(this.$cursor_elem)\n      }\n    },\n\n    virtual_piece_destroy() {\n      if (this.$cursor_elem) {\n        if (this.cursor_elem_in_board_container) {\n          this.$refs.board_container_ref.removeChild(this.$cursor_elem)\n        } else {\n          this.$el.removeChild(this.$cursor_elem)\n        }\n\n        this.$cursor_elem = null\n        this.mouse_stick = false\n\n        window.removeEventListener(\"mousemove\", this.mousemove_hook, false)\n        window.removeEventListener(\"click\", this.click_hook, false)\n      }\n    },\n\n    meta_p(e) {\n      return e.shiftKey | e.ctrlKey | e.altKey | e.metaKey\n    },\n  },\n\n  computed: {\n    // 移動元の駒(盤上から)\n    origin_soldier1() {\n      if (this.place_from) {\n        return this.mediator.board.lookup(this.place_from)\n      }\n    },\n\n    // 移動元の駒(駒台 or 駒箱から)\n    origin_soldier2() {\n      if (this.have_piece) {\n        const place = Place.fetch([0, 0])\n        return this.soldier_create_from_stand_or_box_on(place)\n      }\n    },\n\n    // 駒を持ち上げている状態？\n    holding_p() {\n      return !_.isNil(this.place_from) || !_.isNil(this.have_piece)\n    },\n\n    // 片方の手番だけを操作できるようにする human_side_key の指定があってCPUの手番？\n    cpu_location_p() {\n      if (this.current_run_mode === \"play_mode\") {\n        return !_.includes(this.human_locations, this.mediator.current_location)\n      }\n    },\n\n    if_view_mode_break() {\n      // return this.current_run_mode === \"view_mode\"\n    },\n\n  },\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/edit_mode_module.js","var normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./SettingModal.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./SettingModal.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7e177265\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/template-compiler/preprocessor?engine=pug!../../node_modules/vue-loader/lib/selector?type=template&index=0!./SettingModal.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/SettingModal.vue\n// module id = zlNq\n// module chunks = 1 2"],"sourceRoot":""}
{"version":3,"sources":["webpack:///./src/parser_base.js","webpack:///src/components/shortcut_modal.vue","webpack:///./src/side_info.js","webpack:///./src/components/ErrorNotify.vue?fcec","webpack:///./src/components/ErrorNotify.vue","webpack:///src/components/ShogiPlayer.vue","webpack:///./src/components/shortcut_modal.vue?23ff","webpack:///./src/components/play_mode_module.js","webpack:///./src/components/SettingModal.vue?f4b3","webpack:///src/components/SettingModal.vue","webpack:///./src/components/sound_module.js","webpack:///./src/preset_info.js","webpack:///src/components/CommentArea.vue","webpack:///./src/components/polling_module.js","webpack:///./src/components/PieceBox.vue","webpack:///./src/components/ShogiPlayer.vue?d18d","webpack:///./src/theme_info.js","webpack:///./src/assets/Universal_Sound_FX/TABLE_TENNIS_Racket_Ball_Hit_07_Hard_mono.wav","webpack:///./src/components/api_module.js","webpack:///./src/soldier.js","webpack:///./src/store/index.js","webpack:///./src/place.js","webpack:///./src/mediator.js","webpack:///./src/components/CommentArea.vue?f2ec","webpack:///./src/piece.js","webpack:///./src/bg_variant_info.js","webpack:///./src/piece_variant_info.js","webpack:///./src/components/PieceStand.vue?1244","webpack:///./src/any_func_info.js","webpack:///./src/sfen_serializer.js","webpack:///./src/components/navi_module.js","webpack:///./src/size_info.js","webpack:///./src/components/PieceStand.vue","webpack:///./src/sound.js","webpack:///./src/components/preset_module.js","webpack:///./src/assets/Universal_Sound_FX/RELOAD_Rechamber_Leaver_Action_stereo.wav","webpack:///src/components/PieceBox.vue","webpack:///./src/piece_vector.js","webpack:///./src/components/PieceBox.vue?d4b7","webpack:///./src/board.js","webpack:///./src/components/shortcut_module.js","webpack:///./src/location.js","webpack:///./src/components/CommentArea.vue","webpack:///./src/components/ShogiPlayer.vue","webpack:///./src/kif_parser.js","webpack:///./src/run_mode_info.js","webpack:///src/components/PieceStand.vue","webpack:///./src/components/any_func_module.js","webpack:///./src/sfen_parser.js","webpack:///./src/components/shortcut_modal.vue","webpack:///./src/components/edit_mode_module.js","webpack:///./src/components/SettingModal.vue"],"names":["__webpack_require__","ParserBase","kifu_body","arguments","length","undefined","_classCallCheck3","default","this","header","offset","location_base","advance","_lodash2","reduce","_location2","values","a","e","key","move_infos","process","argv","name","methods","delete_click_handle","$emit","SideInfo","location_keys","map","fetch","ErrorNotify","render","_h","$createElement","_c","_self","staticClass","_t","staticRenderFns","Component","normalizeComponent","__webpack_exports__","_vuex","Object","defineProperty","_vue2","prototype","value","store","_index2","mixins","_navi_module2","_shortcut_module2","_edit_mode_module2","_play_mode_module2","_sound_module2","_preset_module2","_any_func_module2","_polling_module2","_api_module2","props","run_mode","type","String","start_turn","Number","sfen_show","Boolean","overlay_navi","url_embed_turn","theme","size","bg_variant","piece_variant","debug_mode","digit_show","final_label","board_piece_back_user_style","Function","place","board_piece_back_user_class","board_cell_left_click_user_handle","board_cell_pointerdown_user_handle","player_info","components","PieceBox","_PieceBox2","PieceStand","_PieceStand2","SettingModal","_SettingModal2","_ErrorNotify2","CommentArea","_CommentArea2","data","current_run_mode","turn_edit_value","mediator","turn_edit","error_message","update_counter","setting_modal_p","inside_custom_kifu","env","view_mode_turn_offset_save","created","$store","state","current_debug_mode","current_theme","current_size","current_bg_variant","current_piece_variant","kifu_url","axios_call","polling_interval_update","mediator_setup","play_mode_setup_from","preset_key","mediator_setup_by_preset","mediator_setup_for_edit_mode","watch","current_turn_set","kifu_source","before_sfen","to_simple_sfen","log","turn_offset_max","sfen_change_p","sound_call","new_val","old_val","view_mode_mediator_update","turn_offset","new_mediator","_mediator2","data_source","data_source_by","to_position_sfen","current_turn","run","init_location_key","current_location","v","commit","turn","flip_if_white_run","piece_box_piece_couns_adjust","flip_if_white","current_flip","document","location","hash","str","test","_sfen_parser2","_kif_parser2","parse","turn_edit_run","_this","$nextTick","$refs","turn_edit_input","focus","_console","console","apply","board_piece_back_class","xy","_place2","soldier","board","lookup","list","push","to_css_class","holding_p","last_hand","origin_place","isEqual","place_from","cpu_location_p","concat","board_piece_back_style","update_kifu_source","computed","_extends3","class_names","current_vlayout","kifu_body_from_url","init_preset_sfen","turn_base","display_turn","turn_offset_min","mapState","esExports","_vm","staticStyle","width","on","click","_v","attrs","icon","human_side_key","moves","init_sfen","$watch","emit_update_edit_mode_snapshot_sfen","deep","mounted","edit_mode_snapshot_sfen2","handler","moves_take_turn_offset","init_sfen_set","play_mode_mediator_seek_to","edit_mode_snapshot_sfen","play_mode_full_moves_sfen","moves_set","_toConsumableArray3","turn_next","last","turn_slider","serializer","sfen_serializer","to_board_sfen","init_location","to_hold_pieces","join","human_locations","_side_info2","locations","take","aria-label","$event","stopPropagation","preventDefault","$parent","close","label","_l","RunModeInfo","native-value","model","callback","$$v","expression","_s","grouped","flip","vlayout","_e","ThemeInfo","$set","BgVariantInfo","PieceVariantInfo","SizeInfo","sp_data","readonly","kifu_source2","required","_run_mode_info2","_theme_info2","_size_info2","_bg_variant_info2","_piece_variant_info2","get","set","sound_effect","volume","sound_setup","beforeDestroy","object","as_key","play","sound_load","_piece_sound2","_flip_sound2","file","isNil","_sound2","options","PresetInfo","sfen","first_location_key","piece_box","comments_pack","current_comments","autolinker","_autolinker2","auto_link","link","_axios","logger_debug","polling_interval","interval_id","clearInterval","setInterval","_this2","url","accessd_at","Date","now","toString","_axios2","method","params","responseType","timeout","headers","X-SHOGI-PLAYER-TIMESTAMP","then","response","catch","error","status","statusText","request","message","config","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_d8d61cb8_hasScoped_false_transformToRequire_video_src_poster_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_template_compiler_preprocessor_engine_pug_node_modules_vue_loader_lib_selector_type_template_index_0_PieceBox_vue__","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_PieceBox_vue___default","class","slot","current_preset_key","record","any_func_key","AnyFuncInfo","any_func_click_handle","fn_flip_all","fn_flip_h","init_location_toggle","shortcut_modal_show_handle","summary_show","current_turn_label","directives","rawName","modifiers","number","ref","domProps","blur","$forceUpdate","input","target","composing","_n","active","has-modal-card","update:active","$data","update:run_mode","update:kifu_body","location_key","hold_pieces","realized_hold_pieces_of","navi_relative_move","board_flip_run","y","x","pointerdown","board_cell_pointerdown_handle","board_cell_left_click","contextmenu","board_cell_right_click","mouseover","board_mouseover_handle","mouseleave","mouseleave_handle","style","board_piece_fore_class","cell_view","move_to_first","relative_move","move_to_last","min","max","have_piece","piece_box_realize","key_event_capture","mouseover_info","module","exports","p","api_random_puton","_soldier2","random","clear","place_on","api_place_on","api_board_clear","api_board_turn_set","api_play_mode_mediator_seek_to","api_flip_set","flag","api_retract_a_move","api_sfen_or_kif_set","sfen_or_kif","Soldier","attributes","_assign2","_board2","dimension","piece","_piece2","promoted","promotable_p","promoted_name","danger_zone_p","danger_zone_size","css_class_list","top_spaces","__filename","_vuex2","Store","mutations","flip_toggle","current_debug_mode_set","payload","Place","isString","_parse_from_string2","_parse_from_string","_parse_from_string3","_slicedToArray3","_value","_ref","_x","_y","_freeze2","flip_all","s","_s$split$map","replace","_replace_table","split","_s$split$map2","nx","__new_pos","ny","origin","_trunc2","1","2","3","4","5","6","7","8","9","human_x","human_y","１","２","３","４","５","６","７","８","９","一","二","三","四","五","六","七","八","九","b","c","d","f","g","h","i","human_digits","human_xy_ary","kanji_human_x","kanji_human_y","Mediator","num","times","execute_one","m","drop_piece","_soldier4","hold_pieces_add","promoted_trigger","delete_at","plus","count","hold_pieces_count","counts_hash","delete","to_class_list","index","clamp","previous_location","_entries2","filter","_ref2","_ref3","_ref4","sortBy","_ref5","_ref6","code","piece_box_count","_ref7","_ref8","_ref9","_ref10","_ref11","_ref12","forIn","piece_key","piece_box_add","_this3","preset_info","_this4","piece_box_clear","_preset_info2","forEach","_ref13","_ref14","_this5","hold_piece_all_counts_hash","counts_hash_on_board","piece_counts_hash","_ref15","_ref16","rest","success","king_formation_set","king_formation_unset","position","_this6","soldiers","king_formation_soldiers","some","piece_search_and_place_on","_this7","piece_search_and_decrement","found","piece_search_on_hold_pieces_and_decrement","bx","sx","by","sy","slide_xy","new_board","shuffle_apply","turn_clamp","location_by_offset","to_s","to_s_without_turn","_sfen_serializer2","_this8","counts","_","isEmpty","innerHTML","Piece","_piece_vector2","toUpperCase","_get3","__proto__","_getPrototypeOf2","call","find","alias_name","includes","promoted_alias_name","piece_stand_outer_class","location_name","player_name","piece_stand_class","piece_stand_click","hold_cancel","piece_stand_piece_click","piece_stand_mouseover_handle","piece_back_class","piece_fore_class","func","hold_pieces_to_piece_box","piece_box_to_hold_pieces","piece_box_reset_by_preset","king_formation_auto_set","king_formation_auto_unset","shuffle_dialog_open","SfenSerializer","parts","__base_parts","rows","space","toLowerCase","location_info","compact","slider_show","controller_show","shift_key_mag","system_key_mag","hidden_if_piece_stand_blank","setting_button_show","operation_disable","window","addEventListener","keydown_hook","removeEventListener","shortcut_hook","dom","activeElement","controllers","first","previous","next","tagName","event","flip_sign","shiftKey","ctrlKey","altKey","metaKey","current_turn_add","focus_to","el","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_3c933f9b_hasScoped_false_transformToRequire_video_src_poster_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_template_compiler_preprocessor_engine_pug_node_modules_vue_loader_lib_selector_type_template_index_0_PieceStand_vue__","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_PieceStand_vue___default","__audio_context__","AudioContext","webkitAudioContext","Sound","buffer","__resource_load","is_loaded","source","createBufferSource","connect","destination","gain_node","createGain","gain","start","req","XMLHttpRequest","onreadystatechange","readyState","decodeAudioData","open","send","preset_info_values","piece_box_class","PieceVector","basic_once_vectors","basic_repeat_vectors","promoted_once_vectors","promoted_repeat_vectors","force_promote_length","piece_box_other_click","piece_box_have_p","piece_box_piece_click","piece_box_mouseover_handle","piece_box_piece_back_class","piece_box_piece_inner_class","textContent","Board","_surface","new_soldier","rotate_add","places","all_places","shuffled_places","shuffle","_values2","flip_h","shuffle_mode_p","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","_getIterator3","done","loc","char_key","soldier_hold_unless_holding_p","piece_stand_click_shared","err","return","shortcut_modal_toggle_handle","meta_p","_mediator","vector","arrow_vector_table","$buefy","toast","queue","duration","shuffle_run","shortcut_modal_active_p","shortcut_modal_close_handle","$shortcut_modal","alert","modal","parent","hasModalCard","animation","onCancel","canCancel","component","ArrowRight","ArrowLeft","ArrowUp","ArrowDown","Location","cycle_lookup","Math","abs","value_sign","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_3a87a5fb_hasScoped_false_transformToRequire_video_src_poster_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_CommentArea_vue__","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_CommentArea_vue___default","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_2c5c139b_hasScoped_false_transformToRequire_video_src_poster_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_template_compiler_preprocessor_engine_pug_node_modules_vue_loader_lib_selector_type_template_index_0_ShogiPlayer_vue__","__vue_styles__","ssrContext","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_ShogiPlayer_vue___default","KifParser","before_point","line","md","_xregexp2","exec","__kif_format_move_regexp","_minimalisticAssert2","kif_lookup","sfen_parser","_move_infos","_comments_pack","kif_parser","hold_piece_holding_p","have_piece_location","piece_stand_show_flag","any_func_info","dialog","prompt","confirmText","cancelText","inputAttrs","trapFocus","onConfirm","parseInt","_any_func_info2","SfenParser","regex","__location_by_upper_or_lower_case","_hold_pieces","piece_char","ary","init_sfen_strip","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_c193ca80_hasScoped_false_transformToRequire_video_src_poster_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_template_compiler_preprocessor_engine_pug_node_modules_vue_loader_lib_selector_type_template_index_0_shortcut_modal_vue__","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_shortcut_modal_vue___default","have_piece_promoted","me_running_p","$me_last_event","cursor_elem_in_board_container","$cursor_elem","mouse_stick","dialog_p","$double_tap_time","state_reset","virtual_piece_destroy","handle","if_view_mode_break","origin_soldier1","soldier_create_from_stand_or_box_on","piece_vector","put_on_my_soldier_p","old","gap","enable","piece_transform","pice_hold_and_put_for_bug","soldier_hold","ox","oy","method_key","vectors","vx","vy","xy_valid_p","next_place","piece_decriment","to_sfen","Error","must_dialog","promotable_piece_moved","confirm","hold_pieces_move_to_my_hold_pieces","board_soldir_to_hold_pieces","virtual_piece_create","origin_soldier2","hold_piece_source_cut","hold_pieces_can_be_reduced_count","piece_box_can_be_reduced_count","mousemove_hook","requestAnimationFrame","cursor_elem_set_pos","click_hook","which","clientX","clientY","left","top","virtual_piece_dom_create","_piece_fore$classList","createElement","classList","add","piece_back","piece_fore","text","createTextNode","appendChild","board_container_ref","$el","removeChild","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_7e177265_hasScoped_false_transformToRequire_video_src_poster_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_template_compiler_preprocessor_engine_pug_node_modules_vue_loader_lib_selector_type_template_index_0_SettingModal_vue__","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_SettingModal_vue___default"],"mappings":"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","file":"static/js/shogi_player.d3488a04d0fad73a15b2.js","sourcesContent":["import _ from \"lodash\"\nimport Location from \"./location\"\n\nexport default class ParserBase {\n  constructor(kifu_body = null) {\n    this.kifu_body = kifu_body\n    this.header = {}\n  }\n\n  parse() {\n  }\n\n  get board() {\n    console.warn(\"not implemented\")\n  }\n\n  get hold_pieces() {\n    return _.reduce(Location.values, (a, e) => {\n      a[e.key] = {}\n      return a\n    }, {})\n  }\n\n  get turn_offset_min() {\n    return 0\n  }\n\n  get turn_offset_max() {\n    return this.move_infos.length\n  }\n\n  get turn_base() {\n    return 0\n  }\n\n  location_by_offset(offset) {\n    return this.location_base.advance(offset)\n\n    // 次のようにすると w - 2 から始まるときに後手番なのに先手番になってしまう ← いや、あってる\n    // const index = this.turn_offset_min + offset + (this.komaochi_p ? 1 : 0)\n\n    // const index = this.turn_offset_min + (this.komaochi_p ? 1 : 0) + offset\n    // \"position startpos\" の場合 index が -1 になり (-1 % 2) が -1 になり Location.fetch(-1) でエラーになる\n    // なので Math.abs\n    // return Location.fetch(Math.abs(index) % 2)\n  }\n\n  get move_infos() {\n    console.warn(\"not implemented\")\n  }\n\n  get comments_pack() {\n    return null\n  }\n}\n\nif (process.argv[1] === __filename) {\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/parser_base.js","<template lang=\"pug\">\n.shogi-player.shortcut_modal.modal-card.box.has-text-left(@click=\"delete_click_handle\" style=\"width:auto\")\n  .has-text-weight-bold.simple_title.is-size-5.pb-3\n    | キーボードショートカット\n  table.modal-card-body.table.is-fullwidth.mt-3.mb-0\n    tbody\n      tr\n        th 駒の反転\n        td\n          b-tag(type=\"is-primary\") SPACE\n          b-tag.ml-1(type=\"is-primary\") V\n          b-tag.ml-1(type=\"is-primary\") R\n          b-tag.ml-3(type=\"\") 修飾キー\n          span.mx-1 +\n          b-tag(type=\"\") 左クリック\n      tr\n        th カーソル下の駒と同じ駒を駒台から取り出す\n        td\n          b-tag(type=\"is-primary\") Q\n      tr\n        th 持った駒を元に戻す\n        td\n          b-tag(type=\"is-primary\") ESC\n          b-tag.ml-1(type=\"is-primary\") Q\n          b-tag.ml-3(type=\"\") 右クリック\n      tr\n        th カーソル下の駒を☗の駒台に移動\n        td\n          b-tag(type=\"is-primary\") B\n      tr\n        th カーソル下の駒を☖の駒台に移動\n        td\n          b-tag(type=\"is-primary\") W\n      tr\n        th カーソル下の駒を駒箱に移動\n        td\n          b-tag(type=\"is-primary\") T\n          b-tag.ml-1(type=\"is-primary\") BACKSPACE\n          b-tag.ml-1(type=\"is-primary\") DELETE\n      tr\n        th 盤面シャッフル\n        td\n          b-tag(type=\"is-primary\") !\n          span.is-size-7.mx-1 で ON / OFF して\n          b-tag(type=\"is-primary\") 1\n          span.is-size-7.mx-1 から\n          b-tag(type=\"is-primary\") 9\n\n      tr\n        th 盤面ローテイト\n        td\n          b-tag(type=\"is-primary\") 修飾キー\n          span.mx-1 +\n          b-tag(type=\"is-primary\")\n            b-icon(icon=\"arrow-all\" size=\"is-small\")\n      tr\n        th キーボードショートカットの表示\n        td\n          b-taglist\n            b-tag(type=\"is-primary\") ?\n  hr.is-marginless.mt-2\n  ul.mt-4.has-text-centered.is-size-7\n    li\n      | 移動は\n      b-tag.mx-1(type=\"is-primary\") 修飾キー\n      | を合わせると\n      b まとめて\n      | 行う\n</template>\n\n<script>\n\nexport default {\n  name: \"shortcut_modal\",\n  methods: {\n    delete_click_handle() {\n      this.$emit(\"close\")\n    },\n  },\n}\n</script>\n\n<style lang=\"sass\">\n@import \"~bulma/sass/utilities/initial-variables\"\n// @import \"~bulma/sass/utilities/functions\"\n// @import \"~bulma/sass/utilities/derived-variables\"\n// @import \"~bulma/sass/utilities/mixins\"\n.shogi-player\n  &.shortcut_modal\n    .simple_title\n      border-bottom: 1px solid $grey-lighter\n    .table\n      th\n        font-weight: normal\n        text-align: right\n        border-width: 0\n      td\n        text-align: left\n        border-width: 0\n    .tag\n      font-weight: bold\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/shortcut_modal.vue","import MemoryRecord from \"js-memory-record\"\nimport Location from \"./location\"\n\nexport default class SideInfo extends MemoryRecord {\n  static get define() {\n    return [\n      /* eslint-disable */\n      { key: \"both\",   name: \"☗☖\", location_keys: [\"black\", \"white\"], },\n      { key: \"black\",  name: \"☗\",   location_keys: [\"black\"],          },\n      { key: \"white\",  name: \"☖\",   location_keys: [\"white\"],          },\n      { key: \"none\",   name: \"なし\", location_keys: [],                 },\n      /* eslint-enable */\n    ]\n  }\n\n  get locations() {\n    return this.location_keys.map((e) => Location.fetch(e))\n  }\n}\n\nif (process.argv[1] === __filename) {\n  console.log(SideInfo.fetch(\"both\").locations)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/side_info.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column\"},[_c('article',{staticClass:\"message is-danger has-text-left\"},[_c('div',{staticClass:\"message-header\"},[_vm._t(\"header\")],2),_c('div',{staticClass:\"message-body\"},[_vm._t(\"default\")],2)])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-23aaa820\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/template-compiler/preprocessor.js?engine=pug!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/ErrorNotify.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nvar __vue_script__ = null\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-23aaa820\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/template-compiler/preprocessor?engine=pug!../../node_modules/vue-loader/lib/selector?type=template&index=0!./ErrorNotify.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/ErrorNotify.vue\n// module id = null\n// module chunks = ","<template lang=\"pug\">\n.shogi-player(:class=\"class_names\")\n  //- すべてのリンクを無効化するためのオーバーレイ\n  .top_overlay(v-if=\"operation_disable\")\n\n  div(v-if=\"error_message\")\n    ErrorNotify\n      p(slot=\"header\") ERROR\n      p {{error_message}}\n\n  template(v-if=\"!mediator\")\n    i.fas.fa-spinner.fa-pulse\n\n  //- | {{mouseover_info}}\n  //- | {{edit_mode_snapshot_sfen}}\n\n  div.edit_mode_controller(v-if=\"current_run_mode === 'edit_mode'\")\n    .edit_mode_controller_wrap\n      b-dropdown(v-model=\"current_preset_key\")\n        //  button.button にすると prevent を指定する場所がないため button で外側の form が反応してしまう\n        .button(slot=\"trigger\")\n          b-tooltip(label=\"初期配置\")\n            b-icon(icon=\"apps\" size=\"is-small\")\n          //- b-icon(icon=\"menu-down\")\n        b-dropdown-item(v-for=\"record in preset_info_values\" :value=\"record.key\" :key=\"record.key\" @click=\"mediator_setup_by_preset(record)\")\n          | {{record.name}}\n      b-dropdown(v-model=\"any_func_key\")\n        .button(slot=\"trigger\")\n          b-tooltip(label=\"操作\")\n            b-icon(icon=\"menu\" size=\"is-small\")\n        b-dropdown-item(v-for=\"e in AnyFuncInfo.values\" :value=\"e.key\" :key=\"e.key\" @click=\"any_func_click_handle(e)\")\n          | {{e.name}}\n      | &nbsp;\n      button.button.yumincho(@click.stop.prevent=\"fn_flip_all\")\n        b-tooltip(label=\"上下反転\")\n          b-icon(icon=\"pan-vertical\" size=\"is-small\")\n      | &nbsp;\n      button.button.yumincho(@click.stop.prevent=\"fn_flip_h\")\n        b-tooltip(label=\"左右反転\")\n          b-icon(icon=\"pan-horizontal\" size=\"is-small\")\n      | &nbsp;\n      button.button.yumincho(@click.stop.prevent=\"init_location_toggle\")\n        b-tooltip(label=\"手番\")\n          | {{init_location.name}}\n      | &nbsp;\n      button.button.yumincho.has-text-weight-bold(@click.stop.prevent=\"shortcut_modal_show_handle\")\n        b-tooltip(label=\"ショートカット\")\n          | ?\n\n  template(v-if=\"mediator\")\n    .turn_edit_container\n      .turn_number_area(v-if=\"summary_show && (current_run_mode === 'view_mode' || current_run_mode === 'play_mode')\")\n        template(v-if=\"!turn_edit\")\n          span.turn_edit_text(@click.stop.prevent=\"turn_edit_run\")\n            template(v-if=\"current_run_mode === 'view_mode'\")\n              | {{mediator.current_turn_label(this.final_label)}}\n            template(v-if=\"current_run_mode === 'play_mode'\")\n              template(v-if=\"turn_base === 0\")\n                | {{turn_offset}}\n              template(v-if=\"turn_base >= 1\")\n                | {{turn_base}}\n                template(v-if=\"turn_offset >= 1\")\n                  | +{{turn_offset}}\n              | 手\n\n        template(v-if=\"turn_edit\")\n          input.turn_edit_input(type=\"number\" v-model.number=\"turn_edit_value\" @blur=\"turn_edit = false\" ref=\"turn_edit_input\")\n\n      span.is-pulled-right.modal_trigger_dots(@click.stop.prevent=\"setting_modal_p = true\" v-if=\"setting_button_show\")\n        b-icon(icon=\"dots-vertical\" size=\"is-small\")\n\n      b-modal(:active.sync=\"setting_modal_p\" has-modal-card)\n        SettingModal(\n          :run_mode.sync=\"current_run_mode\"\n          :kifu_source=\"kifu_source\"\n          @update:kifu_body=\"update_kifu_source\"\n          :play_mode_full_moves_sfen=\"play_mode_full_moves_sfen\"\n          :edit_mode_snapshot_sfen2=\"edit_mode_snapshot_sfen2\"\n          :sp_data=\"$data\"\n        )\n\n    //- 独自のフォントサイズを適用するのは基本このなかだけとする\n    .board_container.font_size_base(ref=\"board_container_ref\")\n      .flippable(:class=\"[current_flip ? 'flip' : 'no_flip']\")\n        PieceStand.flex_item(:location_key=\"'white'\" :hold_pieces=\"mediator.realized_hold_pieces_of('white')\")\n        .flex_item.board_wrap\n          template(v-if=\"overlay_navi\")\n            .overlay_navi.previous(@click.stop.prevent=\"navi_relative_move(-1, $event)\")\n            .overlay_navi.next(@click.stop.prevent=\"navi_relative_move(+1, $event)\")\n            .overlay_navi.flip_trigger_cell(@click.stop.prevent=\"board_flip_run\")\n          .board_outer\n            table.board_inner\n              tr(v-for=\"y in mediator.dimension\")\n                td(\n                  v-for=\"x in mediator.dimension\"\n                  @pointerdown=\"board_cell_pointerdown_handle([x - 1, y - 1], $event)\"\n                  @click.stop.prevent=\"board_cell_left_click([x - 1, y - 1], $event)\"\n                  @click.stop.prevent.right=\"board_cell_right_click([x - 1, y - 1], $event)\"\n                  @mouseover=\"board_mouseover_handle([x - 1, y - 1], $event)\"\n                  @mouseleave=\"mouseleave_handle\")\n                  .piece_back(:class=\"board_piece_back_class([x - 1, y - 1])\" :style=\"board_piece_back_style([x - 1, y - 1])\")\n                    .piece_fore(:class=\"mediator.board_piece_fore_class([x - 1, y - 1])\")\n                      | {{mediator.cell_view([x - 1, y - 1])}}\n        .flex_item\n          template(v-if=\"!current_vlayout\")\n            PieceBox\n            //- 先手の駒台が上にくっつてしまうので防ぐため空のdivを入れる\n            div(v-if=\"current_run_mode !== 'edit_mode'\")\n          PieceStand(:location_key=\"'black'\" :hold_pieces=\"mediator.realized_hold_pieces_of('black')\")\n      //- cursor_elem はこの部分に入るので 1em のサイズを .font_size_base で指定したものを基準にできる\n\n      template(v-if=\"current_vlayout\")\n        PieceBox\n\n    div(v-if=\"current_run_mode === 'view_mode' || current_run_mode === 'play_mode'\")\n      .controller_group.buttons.has-addons.is-centered.is-paddingless(v-if=\"controller_show\")\n        button.button.first(    ref=\"first\"    @click.stop.prevent=\"move_to_first\"):             b-icon(icon=\"menu-left\")\n        button.button.previous( ref=\"previous\" @click.stop.prevent=\"relative_move(-1, $event)\"): b-icon(icon=\"chevron-left\"  size=\"is-small\")\n        button.button.next(     ref=\"next\"     @click.stop.prevent=\"relative_move(+1, $event)\"): b-icon(icon=\"chevron-right\" size=\"is-small\")\n        button.button.last(     ref=\"last\"     @click.stop.prevent=\"move_to_last\"):              b-icon(icon=\"menu-right\")\n        button.button.flip(                    @click.stop.prevent=\"board_flip_run\"):            b-icon(icon=\"swap-vertical\" size=\"is-small\")\n      div(v-if=\"slider_show\")\n        input.turn_slider(type=\"range\" :value=\"turn_offset\" @input=\"current_turn_set($event.target.value)\" :min=\"turn_offset_min\" :max=\"turn_offset_max\" ref=\"turn_slider\")\n\n    //- http://kyokumen.jp/positions/lnsgkgsnl/1r5b1/ppppppppp/9/9/2P6/PP1PPPPPP/1B5R1/LNSGKGSNL%20w%20-\n    .sfen_area.is-size-7.has-text-grey(v-if=\"sfen_show\")\n      slot(name=\"sfen_part\" :sfen=\"mediator.to_simple_sfen\" :mediator=\"mediator\")\n        | {{mediator.to_simple_sfen}}\n\n    CommentArea(:comments_pack=\"mediator.data_source.comments_pack\" :current_comments=\"mediator.current_comments\")\n\n  div.debug_table(v-if=\"current_debug_mode\")\n    table.table.is-bordered.is-striped.is-narrow.is-hoverable.is-fullwidth\n      tbody\n        tr: <th>現在のモード(current_run_mode)</th><td>{{current_run_mode}}</td>\n        tr: <th>update_counter</th><td>{{update_counter}}</td>\n        tr: <th>移動元座標(place_from)</th><td>{{place_from}}</td>\n        tr: <th>駒台・駒箱から移動中の駒(have_piece)</th><td>{{have_piece}}</td>\n        template(v-if=\"mediator\")\n          tr: <th>駒箱</th><td>{{mediator.piece_box_realize()}}</td>\n          tr: <th>持駒</th><td>{{mediator.hold_pieces}}</td>\n          tr: <th>次の手番</th><td>{{mediator.current_location.key}}</td>\n          tr: <th>現局面のSFEN</th><td>{{mediator.to_simple_sfen}}</td>\n          tr: <th>正規化手番(turn_offset)</th><td>{{turn_offset}}</td>\n        tr: <th>開始局面番号(start_turn)</th><td>{{start_turn}}</td>\n        tr: <th>初期配置(current_preset_key)</th><td>{{current_preset_key}}</td>\n        tr: <th>play_modeでの指し手(moves)</th><td>{{moves}}</td>\n        tr: <th>play_modeの開始局面(init_sfen)</th><td>{{init_sfen}}</td>\n        tr: <th>編集モード時の手番(init_location_key)</th><td>{{init_location_key}}</td>\n        tr: <th>編集モード時の手番を反映したSFEN(edit_mode_snapshot_sfen)</th><td>{{edit_mode_snapshot_sfen}}</td>\n        tr: <th>play_modeでのSFEN(play_mode_full_moves_sfen)</th><td>{{play_mode_full_moves_sfen}}</td>\n        tr: <th>key_event_capture</th><td>{{key_event_capture}}</td>\n        tr: <th>interval_id</th><td>{{interval_id}}</td>\n        tr: <th>mouseover_info</th><td>{{mouseover_info}}</td>\n</template>\n\n<script>\nimport _ from \"lodash\"\nimport Vue from 'vue'\n\nimport { mapState } from 'vuex'\n\n// Store\nimport store from \"../store/index.js\"\n\n// My Library\nimport Mediator from \"../mediator\"\nimport Place from \"../place\"\nimport SfenParser from \"../sfen_parser\"\nimport KifParser from \"../kif_parser\"\n\n// components\nimport PieceBox from \"./PieceBox\"\nimport PieceStand from \"./PieceStand\"\nimport SettingModal from \"./SettingModal\"\nimport ErrorNotify from \"./ErrorNotify\"\nimport CommentArea from \"./CommentArea\"\n\n// mixins modules\nimport navi_module from \"./navi_module.js\"\nimport shortcut_module from \"./shortcut_module.js\"\nimport edit_mode_module from \"./edit_mode_module.js\"\nimport play_mode_module from \"./play_mode_module.js\"\nimport sound_module from \"./sound_module.js\"\nimport preset_module from \"./preset_module.js\"\nimport any_func_module from \"./any_func_module.js\"\nimport polling_module from \"./polling_module.js\"\nimport api_module from \"./api_module.js\"\n\n// To use lodash's _ in the vue template\nObject.defineProperty(Vue.prototype, '_', {value: _})\n\n/* eslint-disable no-new */\nexport default {\n  name: 'ShogiPlayer',\n\n  store: store,\n\n  mixins: [\n    // ここで直接 require(\"./xxx.js\"), とは書けないので注意\n    navi_module,\n    shortcut_module,\n    edit_mode_module,\n    play_mode_module,\n    sound_module,\n    preset_module,\n    any_func_module,\n    polling_module,\n    api_module,\n  ],\n\n  /* eslint-disable */\n  props: {\n    run_mode:       { type: String,  default: \"view_mode\", },\n    kifu_body:      { type: String,  default: null,        },\n    start_turn:     { type: Number,  default: -1,          },\n    sfen_show:      { type: Boolean, default: false,       },\n    overlay_navi:   { type: Boolean, default: true,        },\n    url_embed_turn: { type: Boolean, default: false,       },\n    theme:          { type: String,  default: \"real\",      },\n    size:           { type: String,  default: \"default\",   },\n    bg_variant:     { type: String,  default: \"a\"          },\n    piece_variant:  { type: String,  default: \"a\"          },\n    debug_mode:     { type: Boolean, default: false,       }, // process.env.NODE_ENV !== 'production'\n    digit_show:     { type: Boolean, default: false,       },\n    final_label:    { type: String,  default: null,        },\n    board_piece_back_user_style: { type: Function, default: place => { return {} }, }, // FIXME: add to README\n    board_piece_back_user_class: { type: Function, default: place => { return [] }, },\n    board_cell_left_click_user_handle: { type: Function, default: null, },\n    board_cell_pointerdown_user_handle: { type: Function, default: null, },\n    player_info:    { type: Object,  default: null, },\n  },\n  /* eslint-enable */\n\n  components: {\n    PieceBox,\n    PieceStand,\n    SettingModal,\n    ErrorNotify,\n    CommentArea,\n  },\n\n  data() {\n    return {\n      current_run_mode: this.run_mode,\n      turn_edit_value: null,    // numberフィールドで current_turn を直接操作すると空にしたとき補正値 0 に変換されて使いづらいため別にする。あと -1 のときの挙動もわかりやすい。\n      mediator: null,           // 局面管理\n      turn_edit: false,         // N手目編集中\n      error_message: null,\n      update_counter: 0,\n      setting_modal_p: false,\n      inside_custom_kifu: null, // 設定ダイアログで変更されたときに入る\n      env: process.env.NODE_ENV,\n      view_mode_turn_offset_save: null, // viewモードを抜けるとき現在の手数を記憶しておく\n    }\n  },\n\n  created() {\n    this.inside_custom_kifu = null\n\n    /* eslint-disable */\n    // TODO: Vuex の方で外からの引数(this.debug_mode)を参照できないのでこんなことになっている\n    this.$store.state.current_debug_mode = this.debug_mode\n    this.$store.state.current_theme      = this.theme\n    this.$store.state.current_size       = this.size\n    this.$store.state.current_bg_variant  = this.bg_variant\n    this.$store.state.current_piece_variant = this.piece_variant\n    /* eslint-enable */\n\n    if (this.current_run_mode === \"view_mode\") {\n      if (this.kifu_url) {\n        this.axios_call()\n        this.polling_interval_update()\n      } else {\n        this.mediator_setup(this.start_turn)\n      }\n    }\n\n    if (this.current_run_mode === \"play_mode\") {\n      this.mediator_setup(this.start_turn)\n      this.play_mode_setup_from(\"view_mode\")\n    }\n\n    if (this.current_run_mode === \"edit_mode\") {\n      if (this.preset_key) {\n        this.mediator_setup_by_preset(this.preset_key) // 駒箱に「玉」を乗せたいため\n      } else {\n        this.mediator_setup_for_edit_mode()\n      }\n    }\n  },\n\n  watch: {\n    turn_edit_value() {\n      this.current_turn_set(this.turn_edit_value)\n    },\n\n    start_turn() {\n      this.current_turn_set(this.start_turn)\n    },\n\n    kifu_source() {\n      if (this.current_run_mode === \"edit_mode\") {\n        this.mediator_setup_for_edit_mode()\n        return\n      }\n\n      // const before_turn_offset_max = this.turn_offset_max\n      const before_sfen = this.mediator ? this.mediator.to_simple_sfen : \"\"\n      this.log(`before turn_offset_max: ${this.turn_offset_max}`)\n      this.log(`before sfen: ${before_sfen}`)\n      this.mediator_setup(this.start_turn)\n      this.log(`after turn_offset_max: ${this.turn_offset_max}`)\n      this.log(`after sfen: ${this.mediator.to_simple_sfen}`)\n      const sfen_change_p = (before_sfen !== this.mediator.to_simple_sfen)\n      if (this.current_run_mode === \"view_mode\") {\n        if (sfen_change_p) {\n          this.sound_call(\"piece_sound\")\n        }\n      }\n      if (this.current_run_mode === \"play_mode\") {\n        this.play_mode_setup_from(\"view_mode\")\n        // 棋譜を反映された側は\n        // 1. 相手が指したのか → 駒音だす\n        // 2. 自分の指し手が正しい指し手だと判断された棋譜が返って反映されたのか → 駒音なし\n        // この区別が付かない。なのでここで成らさない方がよい\n        // this.sound_call(\"piece_sound\")\n        // ……と思ったが 1 は turn_offset_max が変化したかどうかで判断できる。いや sfen を見ればわかる？ → そこまでする必要ない\n        // if (before_turn_offset_max !== this.turn_offset_max) {\n        if (sfen_change_p) {\n          this.sound_call(\"piece_sound\")\n        }\n      }\n    },\n\n    // 外からまたはダイアログから変更されたとき\n    current_run_mode(new_val, old_val) {\n      this.$emit(\"update:run_mode\", this.current_run_mode)\n\n      if (this.current_run_mode === \"view_mode\") {\n        this.log(\"current_run_mode: view_mode\")\n        // alert(`復元:${this.view_mode_turn_offset_save}`)\n        this.view_mode_mediator_update(this.view_mode_turn_offset_save)\n        this.view_mode_turn_offset_save = null\n      } else {\n        // view_mode ではなくなったときの最初だけ保存しておく(mediatorをまるごと保存しておく手もあるかも)\n        if (this.view_mode_turn_offset_save === null) {\n          this.view_mode_turn_offset_save = this.turn_offset\n          // alert(`保存:${this.view_mode_turn_offset_save}`)\n        }\n      }\n\n      if (this.current_run_mode === \"play_mode\") {\n        this.play_mode_setup_from(old_val)\n      }\n\n      if (this.current_run_mode === \"edit_mode\") {\n        this.log(\"current_run_mode: edit_mode\")\n\n        const new_mediator = new Mediator()\n        new_mediator.data_source = this.data_source_by(this.mediator.to_position_sfen)\n        new_mediator.current_turn = 0\n        new_mediator.run()\n\n        this.mediator = new_mediator\n        this.init_location_key = new_mediator.current_location.key\n      }\n    },\n\n    // これはひどい。わけがわからない。\n    // 外側に通知したいときは Vuex (../store/index.js) のなかでやってもだめ\n    // 呼ばれているコンポーネントで書かないといけない\n    /* eslint-disable */\n    current_debug_mode(v) { this.$emit(\"update:debug_mode\", v)              }, // 内から外への通知\n    debug_mode(v)         { this.$store.commit(\"current_debug_mode_set\", v) }, // 外から内への反映\n    run_mode(v)           { this.current_run_mode = v                       }, // 外側から run_mode を変更されたとき\n\n    current_theme(v)      { this.$emit(\"update:theme\", v)                   }, // 中 -> 外\n    theme(v)              { this.$store.state.current_theme = v             }, // 外 -> 中\n\n    current_size(v)       { this.$emit(\"update:size\", v)                    }, // 中 -> 外\n    size(v)               { this.$store.state.current_size = v              }, // 外 -> 中\n\n    current_bg_variant(v)  { this.$emit(\"update:bg_variant\", v)               }, // 中 -> 外\n    bg_variant(v)          { this.$store.state.current_bg_variant = v         }, // 外 -> 中\n\n    current_piece_variant(v)  { this.$emit(\"update:piece_variant\", v)               }, // 中 -> 外\n    piece_variant(v)          { this.$store.state.current_piece_variant = v         }, // 外 -> 中\n    /* eslint-enable */\n\n    turn_offset_max(v) { this.$emit(\"update:turn_offset_max\", v) },\n  },\n\n  methods: {\n    mediator_setup(turn) {\n      this.mediator = new Mediator()\n      this.mediator.data_source = this.data_source_by(this.kifu_source)\n      this.mediator.current_turn = turn\n      this.mediator.run()\n      this.flip_if_white_run()\n    },\n\n    mediator_setup_for_edit_mode() {\n      // まず0手目の状態を作る\n      this.mediator = new Mediator()\n      this.mediator.data_source = this.data_source_by(this.kifu_source)\n      this.mediator.current_turn = 0\n      this.mediator.run()\n\n      // 0手目の手番を反映\n      this.init_location_key = this.mediator.current_location.key\n\n      // そのあとで指定の手数に変更\n      this.mediator.current_turn = this.start_turn\n      this.mediator.run()\n\n      // 不足駒を駒箱に生成\n      this.mediator.piece_box_piece_couns_adjust()\n\n      this.flip_if_white_run()\n    },\n\n    flip_if_white_run() {\n      if (this.flip_if_white) {\n        this.$store.state.current_flip = (this.mediator.data_source.location_base.key === \"white\")\n      }\n    },\n\n    view_mode_mediator_update(turn) {\n      this.mediator_setup(turn)\n      if (this.url_embed_turn) {\n        document.location.hash = this.turn_offset\n      }\n      // this.sound_call(\"piece_sound\")\n      this.update_counter++\n    },\n\n    data_source_by(str) {\n      let data_source = null\n      if (/position/.test(str)) {\n        data_source = new SfenParser()\n      } else {\n        data_source = new KifParser()\n      }\n      data_source.kifu_body = str\n      data_source.parse()\n      return data_source\n    },\n\n    turn_edit_run() {\n      this.turn_edit = true\n      this.turn_edit_value = this.turn_offset\n      this.$nextTick(() => this.$refs.turn_edit_input.focus())\n    },\n\n    log(...v) {\n      if (this.current_debug_mode) {\n        console.log(...v)\n      }\n    },\n\n    board_piece_back_class(xy) {\n      const place = Place.fetch(xy)\n      const soldier = this.mediator.board.lookup(place)\n      let list = []\n\n      list.push(place.to_css_class) // place_99\n\n      if (this.holding_p) {\n        list.push(\"hoverable_p\")\n      }\n\n      if (!this.holding_p) {\n        if (this.mediator.last_hand) {\n          const origin_place = this.mediator.last_hand.origin_place\n          if (origin_place) {\n            if (_.isEqual(origin_place, place)) {\n              list.push(\"origin_place\")\n            }\n          }\n          if (_.isEqual(this.mediator.last_hand.place, place)) {\n            list.push(\"current\")\n          }\n        }\n      }\n\n      if (_.isEqual(this.place_from, place)) {\n        list.push(\"holding_p\")\n      } else if (soldier) {\n        if (this.current_run_mode === \"edit_mode\" || (!this.cpu_location_p && this.mediator.current_location === soldier.location)) {\n          if (!this.holding_p) {\n            list.push(\"selectable_p\")\n          }\n        }\n      }\n\n      // if (soldier) {\n      //   list = _.concat(list, soldier.to_class_list)\n      // }\n\n      if (this.board_piece_back_user_class) {\n        list = _.concat(list, this.board_piece_back_user_class(place))\n      }\n\n      return list\n    },\n\n    board_piece_back_style(xy) {\n      if (this.board_piece_back_user_style) {\n        return this.board_piece_back_user_style(Place.fetch(xy))\n      }\n    },\n\n    update_kifu_source(v) {\n      this.inside_custom_kifu = v\n      this.$emit(\"update:kifu_body\", v) // 子で emit されたイベントを親(自分)で拾い、同じ内容で親に向けて発火。何この複雑さ。\n    },\n  },\n\n  computed: {\n    class_names() {\n      return [\n        `theme-${this.current_theme}`,\n        `size-${this.current_size}`,\n        `bg_variant-${this.current_bg_variant}`,\n        `piece_variant-${this.current_piece_variant}`,\n        `run_mode-${this.current_run_mode}`,\n        {debug_mode: this.current_debug_mode},\n        {digit_show: this.digit_show},\n        this.current_vlayout ? 'vertical' : 'horizontal',\n      ]\n    },\n\n    kifu_source() {\n      // 設定で棋譜を更新したのが入った inside_custom_kifu が最優先。つまりもう更新はできなくなる。いいのか？\n      return this.inside_custom_kifu || this.kifu_body_from_url || this.kifu_body || this.init_preset_sfen || \"position startpos\"\n    },\n\n    // 本当は delegate したい。this.$watch を使えば動的になりそう？\n    /* eslint-disable */\n    turn_base()       { if (this.mediator) { return this.mediator.turn_base       } }, // 表示する上での開始手数で普通は 0\n    turn_offset()     { if (this.mediator) { return this.mediator.turn_offset     } }, // 手数のオフセット\n    display_turn()    { if (this.mediator) { return this.mediator.display_turn    } }, // turn_base + turn_offset\n    turn_offset_min() { if (this.mediator) { return this.mediator.turn_offset_min } }, // 必ず 0\n    turn_offset_max() { if (this.mediator) { return this.mediator.turn_offset_max } }, // moves.length が 2 なら 2\n    /* eslint-enable */\n\n    // mapState({\n    // // アロー関数は、コードをとても簡潔にできます！\n    // count: state => state.count,\n    // // 文字列を渡すことは、`state => state.count` と同じです\n    // countAlias: 'count',\n    // // `this` からローカルステートを参照するときは、通常の関数を使わなければいけません\n    // countPlusLocalState (state) {\n    //   return state.count + this.localCount\n    // }\n    ...mapState({\n    }),\n    ...mapState([\n      \"current_debug_mode\",\n      \"current_theme\",\n      \"current_size\",\n      \"current_bg_variant\",\n      \"current_piece_variant\",\n    ]),\n  },\n}\n</script>\n\n<style lang=\"sass\">\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/ShogiPlayer.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"shogi-player shortcut_modal modal-card box has-text-left\",staticStyle:{\"width\":\"auto\"},on:{\"click\":_vm.delete_click_handle}},[_c('div',{staticClass:\"has-text-weight-bold simple_title is-size-5 pb-3\"},[_vm._v(\"キーボードショートカット\")]),_c('table',{staticClass:\"modal-card-body table is-fullwidth mt-3 mb-0\"},[_c('tbody',[_c('tr',[_c('th',[_vm._v(\"駒の反転\")]),_c('td',[_c('b-tag',{attrs:{\"type\":\"is-primary\"}},[_vm._v(\"SPACE\")]),_c('b-tag',{staticClass:\"ml-1\",attrs:{\"type\":\"is-primary\"}},[_vm._v(\"V\")]),_c('b-tag',{staticClass:\"ml-1\",attrs:{\"type\":\"is-primary\"}},[_vm._v(\"R\")]),_c('b-tag',{staticClass:\"ml-3\",attrs:{\"type\":\"\"}},[_vm._v(\"修飾キー\")]),_c('span',{staticClass:\"mx-1\"},[_vm._v(\"+\")]),_c('b-tag',{attrs:{\"type\":\"\"}},[_vm._v(\"左クリック\")])],1)]),_c('tr',[_c('th',[_vm._v(\"カーソル下の駒と同じ駒を駒台から取り出す\")]),_c('td',[_c('b-tag',{attrs:{\"type\":\"is-primary\"}},[_vm._v(\"Q\")])],1)]),_c('tr',[_c('th',[_vm._v(\"持った駒を元に戻す\")]),_c('td',[_c('b-tag',{attrs:{\"type\":\"is-primary\"}},[_vm._v(\"ESC\")]),_c('b-tag',{staticClass:\"ml-1\",attrs:{\"type\":\"is-primary\"}},[_vm._v(\"Q\")]),_c('b-tag',{staticClass:\"ml-3\",attrs:{\"type\":\"\"}},[_vm._v(\"右クリック\")])],1)]),_c('tr',[_c('th',[_vm._v(\"カーソル下の駒を☗の駒台に移動\")]),_c('td',[_c('b-tag',{attrs:{\"type\":\"is-primary\"}},[_vm._v(\"B\")])],1)]),_c('tr',[_c('th',[_vm._v(\"カーソル下の駒を☖の駒台に移動\")]),_c('td',[_c('b-tag',{attrs:{\"type\":\"is-primary\"}},[_vm._v(\"W\")])],1)]),_c('tr',[_c('th',[_vm._v(\"カーソル下の駒を駒箱に移動\")]),_c('td',[_c('b-tag',{attrs:{\"type\":\"is-primary\"}},[_vm._v(\"T\")]),_c('b-tag',{staticClass:\"ml-1\",attrs:{\"type\":\"is-primary\"}},[_vm._v(\"BACKSPACE\")]),_c('b-tag',{staticClass:\"ml-1\",attrs:{\"type\":\"is-primary\"}},[_vm._v(\"DELETE\")])],1)]),_c('tr',[_c('th',[_vm._v(\"盤面シャッフル\")]),_c('td',[_c('b-tag',{attrs:{\"type\":\"is-primary\"}},[_vm._v(\"!\")]),_c('span',{staticClass:\"is-size-7 mx-1\"},[_vm._v(\"で ON / OFF して\")]),_c('b-tag',{attrs:{\"type\":\"is-primary\"}},[_vm._v(\"1\")]),_c('span',{staticClass:\"is-size-7 mx-1\"},[_vm._v(\"から\")]),_c('b-tag',{attrs:{\"type\":\"is-primary\"}},[_vm._v(\"9\")])],1)]),_c('tr',[_c('th',[_vm._v(\"盤面ローテイト\")]),_c('td',[_c('b-tag',{attrs:{\"type\":\"is-primary\"}},[_vm._v(\"修飾キー\")]),_c('span',{staticClass:\"mx-1\"},[_vm._v(\"+\")]),_c('b-tag',{attrs:{\"type\":\"is-primary\"}},[_c('b-icon',{attrs:{\"icon\":\"arrow-all\",\"size\":\"is-small\"}})],1)],1)]),_c('tr',[_c('th',[_vm._v(\"キーボードショートカットの表示\")]),_c('td',[_c('b-taglist',[_c('b-tag',{attrs:{\"type\":\"is-primary\"}},[_vm._v(\"?\")])],1)],1)])])]),_c('hr',{staticClass:\"is-marginless mt-2\"}),_c('ul',{staticClass:\"mt-4 has-text-centered is-size-7\"},[_c('li',[_vm._v(\"移動は\"),_c('b-tag',{staticClass:\"mx-1\",attrs:{\"type\":\"is-primary\"}},[_vm._v(\"修飾キー\")]),_vm._v(\"を合わせると\"),_c('b',[_vm._v(\"まとめて\")]),_vm._v(\"行う\")],1)])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-c193ca80\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/template-compiler/preprocessor.js?engine=pug!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/shortcut_modal.vue\n// module id = 2TpH\n// module chunks = 1 2","import _ from \"lodash\"\n\nimport Mediator from \"../mediator\"\nimport Location from \"../location\"\nimport SideInfo from \"../side_info\"\n\nexport default {\n  /* eslint-disable */\n  props: {\n    human_side_key: { type: String, default: \"both\", }, // 含まれる側だけ操作できるようにする\n  },\n  /* eslint-enable */\n\n  data() {\n    return {\n      moves: [],                  // play_mode 時の棋譜\n      init_sfen: null,            // play_mode に入ったときの最初の状態\n      init_location_key: \"black\", // play_mode に入ったときの最初の手番\n    }\n  },\n\n  created() {\n    // this.$watch(\"mediator\", () => this.emit_update_edit_mode_snapshot_sfen(), {deep: true})\n    // this.$watch(\"init_location_key\", () => this.emit_update_edit_mode_snapshot_sfen(), {deep: true})\n\n    this.$watch(() => [\n      this.mediator,\n      this.init_location_key,\n      // this.mediator.hold_pieces,\n    ], () => {\n      this.emit_update_edit_mode_snapshot_sfen()\n      // this.$emit(\"update:edit_mode_snapshot_sfen\", this.edit_mode_snapshot_sfen())\n    }, {deep: true})\n  },\n\n  mounted() {\n  },\n\n  watch: {\n    // 不具合確認用\n    edit_mode_snapshot_sfen2(v) {\n      this.$emit(\"update:edit_mode_snapshot_sfen2\", v)\n    },\n\n    // 操作モード(または再生モード)で盤面が変化したとき(常に更新)\n    mediator: {\n      handler(v) {\n        this.$emit(\"update:mediator_snapshot_sfen\", v.to_position_sfen)\n      },\n      deep: true,\n    },\n\n    // 現在の手数を返す\n    // update:start_turn とは別にしてある\n    turn_offset(v) {\n      this.$emit(\"update:turn_offset\", v)\n    },\n\n    // 操作モードで盤面が変化したときの指し手の配列\n    // ・[a, b, c] の指し手があってポインタが c のとき「←」でポインタを b にするとトリガーする\n    // ・このとき [a, b] を返す\n    moves_take_turn_offset(v) {\n      this.$emit(\"update:moves_take_turn_offset\", v)\n    },\n  },\n\n  methods: {\n    play_mode_setup_from(old_val) {\n      this.log(\"play_mode_setup_from\")\n\n      if (this.mediator.data_source.init_sfen !== undefined) {\n        // 棋譜の最初からの指し手をすべて保持\n        // view_mode -> play_mode\n        if (old_val === \"view_mode\") {\n          this.init_sfen = this.mediator.data_source.init_sfen\n          this.moves = this.mediator.data_source.moves\n        }\n        // edit_mode -> play_mode\n        if (old_val === \"edit_mode\") {\n          this.init_sfen_set()\n        }\n      } else {\n        // 現時点の状態から始める (KIFの場合)\n        if (old_val === \"view_mode\") {\n          this.init_location_key = this.mediator.current_location.key\n        }\n        this.init_sfen_set()\n      }\n\n      this.play_mode_mediator_seek_to(this.turn_offset)\n    },\n\n    // 現在の状態を基点として play_mode に入る\n    init_sfen_set() {\n      this.init_sfen = this.edit_mode_snapshot_sfen()\n      this.moves = []\n    },\n\n    play_mode_mediator_seek_to(turn) {\n      this.mediator = new Mediator()\n      this.mediator.data_source = this.data_source_by(this.play_mode_full_moves_sfen)\n      this.mediator.current_turn = turn\n      this.mediator.run()\n      this.flip_if_white_run()\n    },\n\n    // 「待った」して指す場合を考慮してカレント以降の指し手を削除してから追加する\n    moves_set(value) {\n      this.moves = [...this.moves_take_turn_offset, value]\n    },\n\n    turn_next() {\n      if (this.current_run_mode === \"play_mode\") {\n        this.mediator = new Mediator()\n        this.mediator.data_source = this.data_source_by(this.play_mode_full_moves_sfen)\n        this.mediator.current_turn = -1\n        this.mediator.run()\n        this.sound_call(\"piece_sound\")\n\n        this.$emit(\"update:play_mode_advanced_full_moves_sfen\", this.play_mode_full_moves_sfen)\n        this.$emit(\"update:play_mode_advanced_last_move\", _.last(this.moves))\n        this.$emit(\"update:play_mode_advanced_moves\", this.moves)\n        this.$emit(\"update:play_mode_advanced_snapshot_sfen\", this.mediator.to_position_sfen)\n\n        // 操作モードで詰将棋を動かしていて間違えて1手すぐに戻したいとき「←」キーですぐに戻せるように(スライダーがあれば)フォーカスする\n        if (this.$refs.turn_slider) {\n          this.$refs.turn_slider.focus()\n        }\n      }\n    },\n\n    // 現在の状態を基点とした moves がない棋譜 (init_location が反映されていることが重要)\n    edit_mode_snapshot_sfen() {\n      if (this.mediator) {\n        const serializer = this.mediator.sfen_serializer\n        return [\n          \"position sfen\",\n          serializer.to_board_sfen,\n          this.init_location.key[0],\n          serializer.to_hold_pieces,\n          1,\n        ].join(\" \")\n      }\n    },\n\n    emit_update_edit_mode_snapshot_sfen() {\n      this.$emit(\"update:edit_mode_snapshot_sfen\", this.edit_mode_snapshot_sfen())\n    },\n  },\n\n  computed: {\n    play_mode_full_moves_sfen() {\n      if (this.init_sfen) {\n        return this.init_sfen + \" moves \" + this.moves.join(\" \")\n      }\n    },\n\n    init_location() {\n      return Location.fetch(this.init_location_key)\n    },\n\n    human_locations() {\n      return SideInfo.fetch(this.human_side_key).locations\n    },\n\n    // moves.take(turn_offset) を返す\n    // ・3手ある棋譜で2手目まで戻したときは2手分の指し手を返す\n    // ・たとえば [a, b, c] の指し手があって turn_offset を 2 にしたとき [a, b] を返す\n    moves_take_turn_offset() {\n      return _.take(this.moves, this.turn_offset)\n    },\n\n    // 現在の状態を基点とした moves がない棋譜 (init_location が反映されていることが重要)\n    //\n    // この方法はリアクティブにならない場合がある\n    //\n    // 不具合再現手順\n    // 1. 編集モード→詰将棋\n    // 2. 51の玉をvで反転(OK)\n    //    → this.mediator.sfen_serializer.to_board_sfen は変化する\n    //    → edit_mode_snapshot_sfen2 も変化する\n    // 3. 駒台の玉を11に置いてvで反転(ここがおかしい)\n    //    → this.mediator.sfen_serializer.to_board_sfen は変化する\n    //    → edit_mode_snapshot_sfen2 が変化しない\n    //\n    // 暫定策として mediator と init_location_key だけを監視する watch を入れてそのなかで edit_mode_snapshot_sfen() を実行している\n    //\n    edit_mode_snapshot_sfen2() {\n      return this.edit_mode_snapshot_sfen()\n      // if (this.mediator) {\n      //   const serializer = this.mediator.sfen_serializer\n      //   return [\n      //     \"position sfen\",\n      //     serializer.to_board_sfen,\n      //     this.init_location.key[0],\n      //     serializer.to_hold_pieces,\n      //     1,\n      //   ].join(\" \")\n      // }\n    },\n  },\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/play_mode_module.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"modal-card has-text-left\",staticStyle:{\"width\":\"auto\"}},[_c('header',{staticClass:\"modal-card-head\"},[_c('p',{staticClass:\"modal-card-title\"},[_vm._v(\"設定\")]),_c('button',{staticClass:\"delete\",attrs:{\"aria-label\":\"close\"},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.$parent.close()}}})]),_c('section',{staticClass:\"modal-card-body\"},[_c('b-field',{attrs:{\"label\":\"モード\"}}),_c('b-field',[_vm._l((_vm.RunModeInfo.values),function(e){return [_c('b-radio-button',{attrs:{\"native-value\":e.key},model:{value:(_vm.current_run_mode),callback:function ($$v) {_vm.current_run_mode=$$v},expression:\"current_run_mode\"}},[_vm._v(_vm._s(e.name))])]})],2),_c('b-field',{attrs:{\"grouped\":\"grouped\"}},[_c('b-field',{attrs:{\"label\":\"反転\"}},[_c('b-switch',{model:{value:(_vm.flip),callback:function ($$v) {_vm.flip=$$v},expression:\"flip\"}})],1),_c('b-field',{attrs:{\"label\":\"縦並び\"}},[_c('b-switch',{model:{value:(_vm.vlayout),callback:function ($$v) {_vm.vlayout=$$v},expression:\"vlayout\"}})],1),_c('b-field',{attrs:{\"label\":\"デバッグモード\"}},[_c('b-switch',{model:{value:(_vm.current_debug_mode),callback:function ($$v) {_vm.current_debug_mode=$$v},expression:\"current_debug_mode\"}})],1)],1),(false)?[_c('b-dropdown',{model:{value:(_vm.$store.state.current_bg_variant),callback:function ($$v) {_vm.$set(_vm.$store.state, \"current_bg_variant\", $$v)},expression:\"$store.state.current_bg_variant\"}},[_c('button',{staticClass:\"button\",attrs:{\"slot\":\"trigger\"},slot:\"trigger\"},[_c('span',[_vm._v(_vm._s(_vm.BgVariantInfo.fetch(_vm.$store.state.current_bg_variant).name))]),_c('b-icon',{attrs:{\"icon\":\"menu-down\"}})],1),_vm._l((_vm.BgVariantInfo.values),function(e){return [_c('b-dropdown-item',{attrs:{\"value\":e.key}},[_vm._v(_vm._s(e.name))])]})],2)]:_vm._e(),_c('b-field',{attrs:{\"label\":\"テーマ\"}}),_c('b-field',[_vm._l((_vm.ThemeInfo.values),function(e){return [_c('b-radio-button',{attrs:{\"native-value\":e.key},model:{value:(_vm.$store.state.current_theme),callback:function ($$v) {_vm.$set(_vm.$store.state, \"current_theme\", $$v)},expression:\"$store.state.current_theme\"}},[_vm._v(_vm._s(e.name))])]})],2),(_vm.$store.state.current_theme === 'real')?[_c('div',{staticClass:\"box\"},[_c('b-field',{attrs:{\"label\":\"背景の種類\"}}),_c('b-field',[_vm._l((_vm.BgVariantInfo.values),function(e){return [_c('b-radio-button',{attrs:{\"native-value\":e.key,\"size\":\"is-small\"},model:{value:(_vm.$store.state.current_bg_variant),callback:function ($$v) {_vm.$set(_vm.$store.state, \"current_bg_variant\", $$v)},expression:\"$store.state.current_bg_variant\"}},[_vm._v(_vm._s(e.name))])]})],2),_c('b-field',{attrs:{\"label\":\"駒の種類\"}}),_c('b-field',[_vm._l((_vm.PieceVariantInfo.values),function(e){return [_c('b-radio-button',{attrs:{\"native-value\":e.key},model:{value:(_vm.$store.state.current_piece_variant),callback:function ($$v) {_vm.$set(_vm.$store.state, \"current_piece_variant\", $$v)},expression:\"$store.state.current_piece_variant\"}},[_vm._v(_vm._s(e.name))])]})],2)],1)]:_vm._e(),_c('b-field',{attrs:{\"label\":\"サイズ\"}}),_c('b-field',[_vm._l((_vm.SizeInfo.values),function(e){return [_c('b-radio-button',{attrs:{\"native-value\":e.key,\"size\":\"is-small\"},model:{value:(_vm.$store.state.current_size),callback:function ($$v) {_vm.$set(_vm.$store.state, \"current_size\", $$v)},expression:\"$store.state.current_size\"}},[_vm._v(_vm._s(e.name))])]})],2),(_vm.sp_data.mediator)?[_c('b-field',{attrs:{\"label\":\"再生モードの現局面(Readonly)\"}},[_c('b-input',{attrs:{\"value\":_vm.sp_data.mediator.to_position_sfen,\"type\":\"input\",\"size\":\"is-small\",\"readonly\":\"readonly\"}})],1)]:_vm._e(),_c('b-field',{attrs:{\"label\":\"編集モードの現局面(Readonly) ※BUG:駒を反転したときに反映されない場合がある\"}},[_c('b-input',{attrs:{\"value\":_vm.edit_mode_snapshot_sfen2,\"type\":\"input\",\"size\":\"is-small\",\"readonly\":\"readonly\"}})],1),_c('b-field',{attrs:{\"label\":\"再生モードの棋譜(編集可)\"}},[_c('b-input',{attrs:{\"type\":\"textarea\",\"size\":\"is-small\"},model:{value:(_vm.kifu_source2),callback:function ($$v) {_vm.kifu_source2=$$v},expression:\"kifu_source2\"}})],1),_c('b-field',{attrs:{\"label\":\"操作モードの棋譜(Readonly)\"}},[_c('b-input',{staticClass:\"is-small\",attrs:{\"value\":_vm.play_mode_full_moves_sfen,\"type\":\"textarea\",\"size\":\"is-small\",\"readonly\":\"readonly\"}})],1)],2),_c('footer',{staticClass:\"modal-card-foot\"},[_c('button',{staticClass:\"button is-primary\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.$parent.close()}}},[_vm._v(\"閉じる\")])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-7e177265\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/template-compiler/preprocessor.js?engine=pug!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/SettingModal.vue\n// module id = 2m4z\n// module chunks = 1 2","<template lang=\"pug\">\n//- style=\"width: auto\"\n.modal-card.has-text-left(style=\"width:auto\")\n  header.modal-card-head\n    p.modal-card-title 設定\n    button.delete(aria-label=\"close\" @click.stop.prevent=\"$parent.close()\")\n\n  section.modal-card-body\n    b-field(label=\"モード\")\n    b-field\n      template(v-for=\"e in RunModeInfo.values\")\n        b-radio-button(v-model=\"current_run_mode\" :native-value=\"e.key\") {{e.name}}\n\n    b-field(grouped)\n      b-field(label=\"反転\")\n        b-switch(v-model=\"flip\")\n      b-field(label=\"縦並び\")\n        b-switch(v-model=\"vlayout\")\n      b-field(label=\"デバッグモード\")\n        b-switch(v-model=\"current_debug_mode\")\n\n    template(v-if=\"false\")\n      b-dropdown(v-model=\"$store.state.current_bg_variant\")\n        button.button(slot=\"trigger\")\n          span\n            | {{BgVariantInfo.fetch($store.state.current_bg_variant).name}}\n          b-icon(icon=\"menu-down\")\n        template(v-for=\"e in BgVariantInfo.values\")\n          b-dropdown-item(:value=\"e.key\") {{e.name}}\n\n    b-field(label=\"テーマ\")\n    b-field\n      template(v-for=\"e in ThemeInfo.values\")\n        b-radio-button(v-model=\"$store.state.current_theme\" :native-value=\"e.key\") {{e.name}}\n\n    template(v-if=\"$store.state.current_theme === 'real'\")\n      .box\n        b-field(label=\"背景の種類\")\n        b-field\n          template(v-for=\"e in BgVariantInfo.values\")\n            b-radio-button(v-model=\"$store.state.current_bg_variant\" :native-value=\"e.key\" size=\"is-small\") {{e.name}}\n\n        b-field(label=\"駒の種類\")\n        b-field\n          template(v-for=\"e in PieceVariantInfo.values\")\n            b-radio-button(v-model=\"$store.state.current_piece_variant\" :native-value=\"e.key\") {{e.name}}\n\n    b-field(label=\"サイズ\")\n    b-field\n      template(v-for=\"e in SizeInfo.values\")\n        b-radio-button(v-model=\"$store.state.current_size\" :native-value=\"e.key\" size=\"is-small\") {{e.name}}\n\n    template(v-if=\"sp_data.mediator\")\n      b-field(label=\"再生モードの現局面(Readonly)\")\n        b-input(:value=\"sp_data.mediator.to_position_sfen\" type=\"input\" size=\"is-small\" readonly)\n\n    b-field(label=\"編集モードの現局面(Readonly) ※BUG:駒を反転したときに反映されない場合がある\")\n      b-input(:value=\"edit_mode_snapshot_sfen2\" type=\"input\" size=\"is-small\" readonly)\n\n    b-field(label=\"再生モードの棋譜(編集可)\")\n      b-input(v-model=\"kifu_source2\" type=\"textarea\" size=\"is-small\")\n\n    b-field(label=\"操作モードの棋譜(Readonly)\")\n      b-input.is-small(:value=\"play_mode_full_moves_sfen\" type=\"textarea\" size=\"is-small\" readonly)\n\n  footer.modal-card-foot\n    button.button.is-primary(@click.stop.prevent=\"$parent.close()\") 閉じる\n</template>\n\n<script>\n// ここではあえていろんな方法を試している\n//\n// run_mode: コンポーネントへの数珠繋ぎ方式\n// flip:     Vuex で管理している変数をコンポーネント側でラップする方式\n//\n\n// import Vue from \"vue\"\nimport RunModeInfo from \"../run_mode_info\"\nimport ThemeInfo from \"../theme_info\"\nimport SizeInfo from \"../size_info\"\nimport BgVariantInfo from \"../bg_variant_info\"\nimport PieceVariantInfo from \"../piece_variant_info\"\n\n// ↓このように定義した場合はアプリ側で再定義しないといけなくなる\n// Object.defineProperty(Vue.prototype, 'RunModeInfo', {value: RunModeInfo})\n// Object.defineProperty(Vue.prototype, 'ThemeInfo', {value: ThemeInfo})\n// Object.defineProperty(Vue.prototype, 'SizeInfo', {value: SizeInfo})\n// Object.defineProperty(Vue.prototype, 'BgVariantInfo', {value: BgVariantInfo})\n\nexport default {\n  props: {\n    run_mode: { required: true },\n    kifu_source: { required: false },\n    play_mode_full_moves_sfen: { required: true }, // TODO: 親をそのまま参照したいんだけど $data を渡しても play_mode_full_moves_sfen は computed だから参照できない\n    edit_mode_snapshot_sfen2: { required: true },  // TODO: 親を受けとりたい\n    sp_data: { required: true },                // TODO: $data ではなく親を受けとりたい\n  },\n\n  data() {\n    return {\n      RunModeInfo,\n      ThemeInfo,\n      SizeInfo,\n      BgVariantInfo,\n      PieceVariantInfo,\n\n      current_run_mode: this.run_mode,\n      kifu_source2: this.kifu_source,\n    }\n  },\n\n  watch: {\n    current_run_mode(value) {\n      this.$emit(\"update:run_mode\", value)\n    },\n    kifu_source2(value) {\n      this.$emit(\"update:kifu_body\", value)\n    },\n  },\n\n  methods: {\n  },\n\n  computed: {\n    // http://chibinowa.net/note/vuejs/vue-11.html\n    flip: {\n      get() { return this.$store.state.current_flip },\n      set(v) { this.$store.state.current_flip = v },\n    },\n    vlayout: {\n      get() { return this.$store.state.current_vlayout },\n      set(v) { this.$store.state.current_vlayout = v },\n    },\n    // ...mapState([\n    //   \"current_debug_mode\",      // これだと get() しか作られない\n    // ]),\n    current_debug_mode: {\n      get() { return this.$store.state.current_debug_mode },\n      set(v) {\n        this.$store.commit(\"current_debug_mode_set\", v) // どんだけ冗長なことやらすんだ。面倒くさいぞこれ\n        // というか別に直接更新してもよい\n        // this.$store.state.current_debug_mode = v\n      },\n    },\n  },\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/components/SettingModal.vue","import _ from \"lodash\"\n\nimport Sound from '../sound'\n\nimport piece_sound_wav from \"../assets/piece_sound.wav\"\nimport flip_sound_wav from \"../assets/flip_sound.wav\"\n\nexport default {\n  /* eslint-disable */\n  props: {\n    sound_effect: { type: Boolean, default: false, },\n    volume:       { type: Number,  default: 0.5,   },\n  },\n  /* eslint-enable */\n\n  data() {\n    return {\n    }\n  },\n\n  created() {\n    this.sound_setup()\n  },\n\n  beforeDestroy() {\n    // TODO: ここで何か解放しないといけない気がしている\n  },\n\n  watch: {\n    sound_effect() {\n      this.sound_setup()\n    },\n\n    volume() {\n      this.sound_setup()\n    },\n  },\n\n  methods: {\n    sound_call(key) {\n      if (this.sound_effect) {\n        key = this.as_key(key)\n        const object = this[key]\n        if (object) {\n          object.play()\n          this.log(`sound_call(\"${key}\")`)\n        }\n      }\n    },\n\n    sound_setup() {\n      this.sound_load(\"piece_sound\", piece_sound_wav, 0.5)\n      this.sound_load(\"flip_sound\",  flip_sound_wav,  2.0)\n    },\n\n    sound_load(key, file, volume) {\n      if (this.sound_effect) {\n        key = this.as_key(key)\n        const object = this[key]\n\n        if (_.isNil(object)) {\n          this[key] = new Sound(file)\n        }\n        this[key].options[\"volume\"] = volume * this.volume\n      }\n    },\n\n    // this.piece_sound にすると無意味にリアクティブになるので this.$piece_sound にしておく\n    as_key(key) {\n      return \"$\" + key\n    },\n  },\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/sound_module.js","import MemoryRecord from \"js-memory-record\"\n// import Location from \"../location\"\n\nexport default class PresetInfo extends MemoryRecord {\n  static get define() {\n    return [\n      /* eslint-disable */\n      { key: \"詰将棋\",                  sfen: \"position sfen 4k4/9/9/9/9/9/9/9/9 b 2r2b4g4s4n4l18p 1\",                                       first_location_key: \"black\", piece_box: [[\"K\", 1]]},\n      { key: \"詰将棋 - 美濃\",           sfen: \"position sfen ln1g5/1ks6/1ppp5/p8/9/9/9/9/9 b BGSNL2rb2g2s2n2l14p 1\",                         first_location_key: \"black\", piece_box: [[\"K\", 1]]},\n      { key: \"詰将棋 - 矢倉\",           sfen: \"position sfen 7nl/6gk1/5gspp/5pp2/9/9/9/9/9 b BGSNL2rbg2s2n2l14p 1\",                          first_location_key: \"black\", piece_box: [[\"K\", 1]]},\n      { key: \"戦型 右四間 vs 四間飛車\", sfen: \"position sfen ln1g1g1nl/1ks2r3/1pppp1bpp/p3spp2/9/P1P1SP1PP/1P1PP1P2/1BK1GR3/LNSG3NL b - 25\", first_location_key: \"black\", piece_box: []},\n      { key: \"全部駒箱\",                sfen: \"position sfen 9/9/9/9/9/9/9/9/9 b - 1\",                                                       first_location_key: \"black\", piece_box: [[\"B\", 2], [\"R\", 2], [\"L\", 4], [\"N\", 4], [\"S\", 4], [\"G\", 4], [\"P\", 18], [\"K\", 2]]},\n      { key: \"平手\",                    sfen: \"position sfen lnsgkgsnl/1r5b1/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL b - 1\",               first_location_key: \"black\", piece_box: []},\n      { key: \"香落ち\",                  sfen: \"position sfen lnsgkgsn1/1r5b1/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1\",               first_location_key: \"white\", piece_box: [[\"L\", 1]]},\n      { key: \"右香落ち\",                sfen: \"position sfen 1nsgkgsnl/1r5b1/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1\",               first_location_key: \"white\", piece_box: [[\"L\", 1]]},\n      { key: \"角落ち\",                  sfen: \"position sfen lnsgkgsnl/1r7/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1\",                 first_location_key: \"white\", piece_box: [[\"B\", 1]]},\n      { key: \"飛車落ち\",                sfen: \"position sfen lnsgkgsnl/7b1/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1\",                 first_location_key: \"white\", piece_box: [[\"R\", 1]]},\n      { key: \"飛香落ち\",                sfen: \"position sfen lnsgkgsn1/7b1/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1\",                 first_location_key: \"white\", piece_box: [[\"R\", 1], [\"L\", 1]]},\n      { key: \"二枚落ち\",                sfen: \"position sfen lnsgkgsnl/9/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1\",                   first_location_key: \"white\", piece_box: [[\"B\", 1], [\"R\", 1]]},\n      { key: \"三枚落ち\",                sfen: \"position sfen lnsgkgsn1/9/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1\",                   first_location_key: \"white\", piece_box: [[\"B\", 1], [\"R\", 1], [\"L\", 1]]},\n      { key: \"四枚落ち\",                sfen: \"position sfen 1nsgkgsn1/9/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1\",                   first_location_key: \"white\", piece_box: [[\"B\", 1], [\"R\", 1], [\"L\", 2]]},\n      { key: \"六枚落ち\",                sfen: \"position sfen 2sgkgs2/9/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1\",                     first_location_key: \"white\", piece_box: [[\"B\", 1], [\"R\", 1], [\"L\", 2], [\"N\", 2]]},\n      { key: \"八枚落ち\",                sfen: \"position sfen 3gkg3/9/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1\",                       first_location_key: \"white\", piece_box: [[\"B\", 1], [\"R\", 1], [\"L\", 2], [\"N\", 2], [\"S\", 2]]},\n      { key: \"十枚落ち\",                sfen: \"position sfen 4k4/9/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1\",                         first_location_key: \"white\", piece_box: [[\"B\", 1], [\"R\", 1], [\"L\", 2], [\"N\", 2], [\"S\", 2], [\"G\", 2]]},\n      { key: \"十九枚落ち\",              sfen: \"position sfen 4k4/9/9/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1\",                                 first_location_key: \"white\", piece_box: [[\"B\", 1], [\"R\", 1], [\"L\", 2], [\"N\", 2], [\"S\", 2], [\"G\", 2], [\"P\", 9]]},\n      { key: \"二十枚落ち\",              sfen: \"position sfen 9/9/9/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1\",                                   first_location_key: \"white\", piece_box: [[\"B\", 1], [\"R\", 1], [\"L\", 2], [\"N\", 2], [\"S\", 2], [\"G\", 2], [\"P\", 9], [\"K\", 1]]},\n      /* eslint-enable */\n    ]\n  }\n}\n\nif (process.argv[1] === __filename) {\n  console.log(PresetInfo.fetch(\"平手\"))\n  console.log(PresetInfo.fetch(\"香落ち\").first_location_key)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/preset_info.js","<template>\n<div class=\"comment_area\" v-if=\"comments_pack\">\n  <div v-if=\"current_comments\">\n    <div class=\"columns\">\n      <div class=\"column\"><!-- is-three-fifths is-offset-one-fifth -->\n        <article class=\"message is-info has-text-left\">\n          <div class=\"message-body\">\n            <div class=\"content\">\n              <template v-for=\"str in current_comments\">\n                <template v-if=\"_.isEmpty(str)\">\n                  <br>\n                </template>\n                <template v-else>\n                  <div v-html=\"auto_link(str)\"></div>\n                </template>\n              </template>\n            </div>\n          </div>\n        </article>\n      </div>\n    </div>\n  </div>\n</div>\n</template>\n\n<script>\nimport Vue from 'vue'\nimport _ from \"lodash\"\nimport Autolinker from 'autolinker'\n\n// To use lodash's _ in the vue template\nObject.defineProperty(Vue.prototype, '_', {value: _})\n\nexport default {\n  props: {\n    comments_pack: { required: true },\n    current_comments: { required: true },\n  },\n\n  created() {\n    this.autolinker = new Autolinker()\n  },\n\n  methods: {\n    auto_link(str) {\n      return this.autolinker.link(str)\n    },\n  },\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/components/CommentArea.vue","import axios from \"axios\"\nconst logger_debug = require('debug')('debug')\n\nexport default {\n  /* eslint-disable */\n  props: {\n    kifu_url:           { type: String,  default: null, },\n    polling_interval:   { type: Number,  default: 0,    },\n  },\n  /* eslint-enable */\n\n  data() {\n    return {\n      interval_id: null,\n      kifu_body_from_url: null,\n    }\n  },\n\n  created() {\n  },\n\n  mounted() {\n  },\n\n  watch: {\n    kifu_url() {\n      this.axios_call()\n    },\n    polling_interval() {\n      this.polling_interval_update()\n    },\n  },\n\n  methods: {\n    polling_interval_update() {\n      if (this.polling_interval >= 1) {\n        if (this.interval_id) {\n          this.log(`clearInterval(${this.interval_id})`)\n          clearInterval(this.interval_id)\n          this.interval_id = null\n        }\n        this.interval_id = setInterval(() => { this.axios_call() }, this.polling_interval * 1000)\n        this.log(`setInterval() => ${this.interval_id}`)\n      }\n    },\n\n    axios_call() {\n      const url = this.kifu_url\n      // const url = \"http://localhost:3000/wr/hanairobiyori-ispt-20171104_220810.kif\"\n      // const url = \"http://tk2-221-20341.vs.sakura.ne.jp/shogi/wr/ureshino_friend-doglong-20180122_213544.kif\"\n      const accessd_at = Date.now().toString()\n      axios({\n        url: url,\n        method: \"get\",\n        params: {\"accessd_at\": accessd_at},\n        responseType: \"text\",\n        timeout: 1000 * 3,\n        headers: {\"X-SHOGI-PLAYER-TIMESTAMP\": accessd_at},\n      }).then((response) => {\n        this.error_message = null\n        this.inside_custom_kifu = null\n        this.kifu_body_from_url = response.data\n        // this.mediator_setup(this.start_turn)\n      }).catch((error) => {\n        if (error.response) {\n          logger_debug(\"error.response.data: %o\", error.response.data)\n          logger_debug(\"error.response.status: %o\", error.response.status)\n          logger_debug(\"error.response.statusText: %o\", error.response.statusText)\n          logger_debug(\"error.response.headers: %o\", error.response.headers)\n        } else if (error.request) {\n          logger_debug(\"error.request: %o\", error.request)\n        } else {\n          logger_debug('error.message: %o', error.message)\n        }\n        logger_debug('error.config: %o', error.config)\n\n        this.kifu_body_from_url = null\n        this.error_message = error.message\n      })\n    },\n  },\n\n  computed: {\n  },\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/polling_module.js","var normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./PieceBox.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./PieceBox.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-d8d61cb8\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/template-compiler/preprocessor?engine=pug!../../node_modules/vue-loader/lib/selector?type=template&index=0!./PieceBox.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/PieceBox.vue\n// module id = 8SiQ\n// module chunks = 1 2","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"shogi-player\",class:_vm.class_names},[(_vm.operation_disable)?_c('div',{staticClass:\"top_overlay\"}):_vm._e(),(_vm.error_message)?_c('div',[_c('ErrorNotify',[_c('p',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_vm._v(\"ERROR\")]),_c('p',[_vm._v(_vm._s(_vm.error_message))])])],1):_vm._e(),(!_vm.mediator)?[_c('i',{staticClass:\"fas fa-spinner fa-pulse\"})]:_vm._e(),(_vm.current_run_mode === 'edit_mode')?_c('div',{staticClass:\"edit_mode_controller\"},[_c('div',{staticClass:\"edit_mode_controller_wrap\"},[_c('b-dropdown',{model:{value:(_vm.current_preset_key),callback:function ($$v) {_vm.current_preset_key=$$v},expression:\"current_preset_key\"}},[_c('div',{staticClass:\"button\",attrs:{\"slot\":\"trigger\"},slot:\"trigger\"},[_c('b-tooltip',{attrs:{\"label\":\"初期配置\"}},[_c('b-icon',{attrs:{\"icon\":\"apps\",\"size\":\"is-small\"}})],1)],1),_vm._l((_vm.preset_info_values),function(record){return _c('b-dropdown-item',{key:record.key,attrs:{\"value\":record.key},on:{\"click\":function($event){return _vm.mediator_setup_by_preset(record)}}},[_vm._v(_vm._s(record.name))])})],2),_c('b-dropdown',{model:{value:(_vm.any_func_key),callback:function ($$v) {_vm.any_func_key=$$v},expression:\"any_func_key\"}},[_c('div',{staticClass:\"button\",attrs:{\"slot\":\"trigger\"},slot:\"trigger\"},[_c('b-tooltip',{attrs:{\"label\":\"操作\"}},[_c('b-icon',{attrs:{\"icon\":\"menu\",\"size\":\"is-small\"}})],1)],1),_vm._l((_vm.AnyFuncInfo.values),function(e){return _c('b-dropdown-item',{key:e.key,attrs:{\"value\":e.key},on:{\"click\":function($event){return _vm.any_func_click_handle(e)}}},[_vm._v(_vm._s(e.name))])})],2),_vm._v(\" \"),_c('button',{staticClass:\"button yumincho\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.fn_flip_all($event)}}},[_c('b-tooltip',{attrs:{\"label\":\"上下反転\"}},[_c('b-icon',{attrs:{\"icon\":\"pan-vertical\",\"size\":\"is-small\"}})],1)],1),_vm._v(\" \"),_c('button',{staticClass:\"button yumincho\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.fn_flip_h($event)}}},[_c('b-tooltip',{attrs:{\"label\":\"左右反転\"}},[_c('b-icon',{attrs:{\"icon\":\"pan-horizontal\",\"size\":\"is-small\"}})],1)],1),_vm._v(\" \"),_c('button',{staticClass:\"button yumincho\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.init_location_toggle($event)}}},[_c('b-tooltip',{attrs:{\"label\":\"手番\"}},[_vm._v(_vm._s(_vm.init_location.name))])],1),_vm._v(\" \"),_c('button',{staticClass:\"button yumincho has-text-weight-bold\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.shortcut_modal_show_handle($event)}}},[_c('b-tooltip',{attrs:{\"label\":\"ショートカット\"}},[_vm._v(\"?\")])],1)],1)]):_vm._e(),(_vm.mediator)?[_c('div',{staticClass:\"turn_edit_container\"},[(_vm.summary_show && (_vm.current_run_mode === 'view_mode' || _vm.current_run_mode === 'play_mode'))?_c('div',{staticClass:\"turn_number_area\"},[(!_vm.turn_edit)?[_c('span',{staticClass:\"turn_edit_text\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.turn_edit_run($event)}}},[(_vm.current_run_mode === 'view_mode')?[_vm._v(_vm._s(_vm.mediator.current_turn_label(this.final_label)))]:_vm._e(),(_vm.current_run_mode === 'play_mode')?[(_vm.turn_base === 0)?[_vm._v(_vm._s(_vm.turn_offset))]:_vm._e(),(_vm.turn_base >= 1)?[_vm._v(_vm._s(_vm.turn_base)),(_vm.turn_offset >= 1)?[_vm._v(\"+\"+_vm._s(_vm.turn_offset))]:_vm._e()]:_vm._e(),_vm._v(\"手\")]:_vm._e()],2)]:_vm._e(),(_vm.turn_edit)?[_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.turn_edit_value),expression:\"turn_edit_value\",modifiers:{\"number\":true}}],ref:\"turn_edit_input\",staticClass:\"turn_edit_input\",attrs:{\"type\":\"number\"},domProps:{\"value\":(_vm.turn_edit_value)},on:{\"blur\":[function($event){_vm.turn_edit = false},function($event){return _vm.$forceUpdate()}],\"input\":function($event){if($event.target.composing){ return; }_vm.turn_edit_value=_vm._n($event.target.value)}}})]:_vm._e()],2):_vm._e(),(_vm.setting_button_show)?_c('span',{staticClass:\"is-pulled-right modal_trigger_dots\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();_vm.setting_modal_p = true}}},[_c('b-icon',{attrs:{\"icon\":\"dots-vertical\",\"size\":\"is-small\"}})],1):_vm._e(),_c('b-modal',{attrs:{\"active\":_vm.setting_modal_p,\"has-modal-card\":\"has-modal-card\"},on:{\"update:active\":function($event){_vm.setting_modal_p=$event}}},[_c('SettingModal',{attrs:{\"run_mode\":_vm.current_run_mode,\"kifu_source\":_vm.kifu_source,\"play_mode_full_moves_sfen\":_vm.play_mode_full_moves_sfen,\"edit_mode_snapshot_sfen2\":_vm.edit_mode_snapshot_sfen2,\"sp_data\":_vm.$data},on:{\"update:run_mode\":function($event){_vm.current_run_mode=$event},\"update:kifu_body\":_vm.update_kifu_source}})],1)],1),_c('div',{ref:\"board_container_ref\",staticClass:\"board_container font_size_base\"},[_c('div',{staticClass:\"flippable\",class:[_vm.current_flip ? 'flip' : 'no_flip']},[_c('PieceStand',{staticClass:\"flex_item\",attrs:{\"location_key\":'white',\"hold_pieces\":_vm.mediator.realized_hold_pieces_of('white')}}),_c('div',{staticClass:\"flex_item board_wrap\"},[(_vm.overlay_navi)?[_c('div',{staticClass:\"overlay_navi previous\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.navi_relative_move(-1, $event)}}}),_c('div',{staticClass:\"overlay_navi next\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.navi_relative_move(+1, $event)}}}),_c('div',{staticClass:\"overlay_navi flip_trigger_cell\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.board_flip_run($event)}}})]:_vm._e(),_c('div',{staticClass:\"board_outer\"},[_c('table',{staticClass:\"board_inner\"},_vm._l((_vm.mediator.dimension),function(y){return _c('tr',_vm._l((_vm.mediator.dimension),function(x){return _c('td',{on:{\"pointerdown\":function($event){return _vm.board_cell_pointerdown_handle([x - 1, y - 1], $event)},\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.board_cell_left_click([x - 1, y - 1], $event)},\"contextmenu\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.board_cell_right_click([x - 1, y - 1], $event)},\"mouseover\":function($event){return _vm.board_mouseover_handle([x - 1, y - 1], $event)},\"mouseleave\":_vm.mouseleave_handle}},[_c('div',{staticClass:\"piece_back\",class:_vm.board_piece_back_class([x - 1, y - 1]),style:(_vm.board_piece_back_style([x - 1, y - 1]))},[_c('div',{staticClass:\"piece_fore\",class:_vm.mediator.board_piece_fore_class([x - 1, y - 1])},[_vm._v(_vm._s(_vm.mediator.cell_view([x - 1, y - 1])))])])])}),0)}),0)])],2),_c('div',{staticClass:\"flex_item\"},[(!_vm.current_vlayout)?[_c('PieceBox'),(_vm.current_run_mode !== 'edit_mode')?_c('div'):_vm._e()]:_vm._e(),_c('PieceStand',{attrs:{\"location_key\":'black',\"hold_pieces\":_vm.mediator.realized_hold_pieces_of('black')}})],2)],1),(_vm.current_vlayout)?[_c('PieceBox')]:_vm._e()],2),(_vm.current_run_mode === 'view_mode' || _vm.current_run_mode === 'play_mode')?_c('div',[(_vm.controller_show)?_c('div',{staticClass:\"controller_group buttons has-addons is-centered is-paddingless\"},[_c('button',{ref:\"first\",staticClass:\"button first\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.move_to_first($event)}}},[_c('b-icon',{attrs:{\"icon\":\"menu-left\"}})],1),_c('button',{ref:\"previous\",staticClass:\"button previous\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.relative_move(-1, $event)}}},[_c('b-icon',{attrs:{\"icon\":\"chevron-left\",\"size\":\"is-small\"}})],1),_c('button',{ref:\"next\",staticClass:\"button next\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.relative_move(+1, $event)}}},[_c('b-icon',{attrs:{\"icon\":\"chevron-right\",\"size\":\"is-small\"}})],1),_c('button',{ref:\"last\",staticClass:\"button last\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.move_to_last($event)}}},[_c('b-icon',{attrs:{\"icon\":\"menu-right\"}})],1),_c('button',{staticClass:\"button flip\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.board_flip_run($event)}}},[_c('b-icon',{attrs:{\"icon\":\"swap-vertical\",\"size\":\"is-small\"}})],1)]):_vm._e(),(_vm.slider_show)?_c('div',[_c('input',{ref:\"turn_slider\",staticClass:\"turn_slider\",attrs:{\"type\":\"range\",\"min\":_vm.turn_offset_min,\"max\":_vm.turn_offset_max},domProps:{\"value\":_vm.turn_offset},on:{\"input\":function($event){return _vm.current_turn_set($event.target.value)}}})]):_vm._e()]):_vm._e(),(_vm.sfen_show)?_c('div',{staticClass:\"sfen_area is-size-7 has-text-grey\"},[_vm._t(\"sfen_part\",[_vm._v(_vm._s(_vm.mediator.to_simple_sfen))],{\"sfen\":_vm.mediator.to_simple_sfen,\"mediator\":_vm.mediator})],2):_vm._e(),_c('CommentArea',{attrs:{\"comments_pack\":_vm.mediator.data_source.comments_pack,\"current_comments\":_vm.mediator.current_comments}})]:_vm._e(),(_vm.current_debug_mode)?_c('div',{staticClass:\"debug_table\"},[_c('table',{staticClass:\"table is-bordered is-striped is-narrow is-hoverable is-fullwidth\"},[_c('tbody',[_c('tr',[_c('th',[_vm._v(\"現在のモード(current_run_mode)\")]),_c('td',[_vm._v(_vm._s(_vm.current_run_mode))])]),_c('tr',[_c('th',[_vm._v(\"update_counter\")]),_c('td',[_vm._v(_vm._s(_vm.update_counter))])]),_c('tr',[_c('th',[_vm._v(\"移動元座標(place_from)\")]),_c('td',[_vm._v(_vm._s(_vm.place_from))])]),_c('tr',[_c('th',[_vm._v(\"駒台・駒箱から移動中の駒(have_piece)\")]),_c('td',[_vm._v(_vm._s(_vm.have_piece))])]),(_vm.mediator)?[_c('tr',[_c('th',[_vm._v(\"駒箱\")]),_c('td',[_vm._v(_vm._s(_vm.mediator.piece_box_realize()))])]),_c('tr',[_c('th',[_vm._v(\"持駒\")]),_c('td',[_vm._v(_vm._s(_vm.mediator.hold_pieces))])]),_c('tr',[_c('th',[_vm._v(\"次の手番\")]),_c('td',[_vm._v(_vm._s(_vm.mediator.current_location.key))])]),_c('tr',[_c('th',[_vm._v(\"現局面のSFEN\")]),_c('td',[_vm._v(_vm._s(_vm.mediator.to_simple_sfen))])]),_c('tr',[_c('th',[_vm._v(\"正規化手番(turn_offset)\")]),_c('td',[_vm._v(_vm._s(_vm.turn_offset))])])]:_vm._e(),_c('tr',[_c('th',[_vm._v(\"開始局面番号(start_turn)\")]),_c('td',[_vm._v(_vm._s(_vm.start_turn))])]),_c('tr',[_c('th',[_vm._v(\"初期配置(current_preset_key)\")]),_c('td',[_vm._v(_vm._s(_vm.current_preset_key))])]),_c('tr',[_c('th',[_vm._v(\"play_modeでの指し手(moves)\")]),_c('td',[_vm._v(_vm._s(_vm.moves))])]),_c('tr',[_c('th',[_vm._v(\"play_modeの開始局面(init_sfen)\")]),_c('td',[_vm._v(_vm._s(_vm.init_sfen))])]),_c('tr',[_c('th',[_vm._v(\"編集モード時の手番(init_location_key)\")]),_c('td',[_vm._v(_vm._s(_vm.init_location_key))])]),_c('tr',[_c('th',[_vm._v(\"編集モード時の手番を反映したSFEN(edit_mode_snapshot_sfen)\")]),_c('td',[_vm._v(_vm._s(_vm.edit_mode_snapshot_sfen))])]),_c('tr',[_c('th',[_vm._v(\"play_modeでのSFEN(play_mode_full_moves_sfen)\")]),_c('td',[_vm._v(_vm._s(_vm.play_mode_full_moves_sfen))])]),_c('tr',[_c('th',[_vm._v(\"key_event_capture\")]),_c('td',[_vm._v(_vm._s(_vm.key_event_capture))])]),_c('tr',[_c('th',[_vm._v(\"interval_id\")]),_c('td',[_vm._v(_vm._s(_vm.interval_id))])]),_c('tr',[_c('th',[_vm._v(\"mouseover_info\")]),_c('td',[_vm._v(_vm._s(_vm.mouseover_info))])])],2)])]):_vm._e()],2)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-2c5c139b\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/template-compiler/preprocessor.js?engine=pug!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/ShogiPlayer.vue\n// module id = 9fxs\n// module chunks = 1 2","import MemoryRecord from \"js-memory-record\"\n\nexport default class ThemeInfo extends MemoryRecord {\n  static get define() {\n    return [\n      /* eslint-disable */\n      { key: \"none\",   name: \"なし\",   },\n      { key: \"simple\", name: \"紙面風\", },\n      { key: \"real\",   name: \"画像駒\", },\n      /* eslint-enable */\n    ]\n  }\n}\n\nif (process.argv[1] === __filename) {\n  console.log(ThemeInfo.fetch(\"real\").key)\n  console.log(ThemeInfo.fetch(\"real\").name)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/theme_info.js","module.exports = __webpack_public_path__ + \"static/media/TABLE_TENNIS_Racket_Ball_Hit_07_Hard_mono.fd9b6a8.wav\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/Universal_Sound_FX/TABLE_TENNIS_Racket_Ball_Hit_07_Hard_mono.wav\n// module id = DfsH\n// module chunks = 1 2","import Soldier from \"../soldier\"\nimport Mediator from \"../mediator\"\n\nexport default {\n  methods: {\n    // 盤を消してランダムに駒を配置する\n    api_random_puton() {\n      const soldier = Soldier.random()\n      this.mediator.board.clear()\n      this.mediator.board.place_on(soldier)\n      return soldier\n    },\n\n    // 駒を置く\n    api_place_on(soldier) {\n      this.mediator.board.place_on(soldier)\n    },\n\n    // 盤面クリア\n    api_board_clear() {\n      this.mediator.board.clear()\n    },\n\n    // 指定手数の局面に設定\n    api_board_turn_set(turn) {\n      this.mediator_setup(turn)\n    },\n\n    // 指定手数の局面に設定(play_mode専用・音が出ない)\n    api_play_mode_mediator_seek_to(turn) {\n      this.play_mode_mediator_seek_to(turn)\n    },\n\n    // 反転状態の設定\n    api_flip_set(flag) {\n      this.$store.state.current_flip = flag\n    },\n\n    // 待った\n    api_retract_a_move() {\n      let turn = this.turn_offset - 2\n      if (turn < 0) {\n        turn = 0\n      }\n      this.api_board_turn_set(turn)\n    },\n\n    // 棋譜の反映\n    api_sfen_or_kif_set(sfen_or_kif, options = {}) {\n      this.mediator = new Mediator()\n      this.mediator.data_source = this.data_source_by(sfen_or_kif)\n      this.mediator.current_turn = options.turn || 0\n      this.mediator.run()\n    },\n  },\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/api_module.js","import Vue from \"vue\"\nimport _ from 'lodash'\nimport Board from './board'\nimport Place from './place'\nimport Piece from './piece'\nimport Location from './location'\n\nexport default class Soldier {\n  static random(params = {}) {\n    let place = params.place\n    if (!place) {\n      const x = _.random(0, Board.dimension - 1)\n      const y = _.random(0, Board.dimension - 1)\n      place = Place.fetch([x, y])\n    }\n\n    const piece = Piece.fetch(_.random(0, Piece.values.length - 1))\n    const promoted = piece.promotable_p && _.random(0, 1) === 0\n\n    const location = Location.fetch(_.random(0, Location.values.length - 1))\n\n    return new this({piece: piece, place: place, promoted: promoted, location: location})\n  }\n\n  constructor(attributes) {\n    this.attributes = Object.assign({}, attributes)\n  }\n\n  get piece() {\n    return this.attributes.piece\n  }\n\n  set place(place) {\n    Vue.set(this.attributes, \"place\", place)\n  }\n\n  get place() {\n    return this.attributes.place\n  }\n\n  get location() {\n    return this.attributes.location\n  }\n\n  get promoted() {\n    return !!this.attributes.promoted\n  }\n\n  set promoted(v) {\n    Vue.set(this.attributes, \"promoted\", v)\n  }\n\n  get name() {\n    if (this.promoted) {\n      return this.piece.promoted_name\n    }\n    return this.piece.name\n  }\n\n  get piece_transform() {\n    let attrs = null\n    if (this.piece.promotable_p) {\n      if (this.promoted) {\n        attrs = {location: this.location.flip, promoted: !this.promoted}\n      } else {\n        attrs = {promoted: !this.promoted}\n      }\n    } else {\n      attrs = {location: this.location.flip}\n    }\n    return new Soldier(Object.assign({}, this.attributes, attrs)) // FIXME: this() でいける？\n  }\n\n  get promotable_p() {\n    if (this.piece.promotable_p && !this.promoted) { // 成れるのに成ってなくて\n      return this.danger_zone_p\n    }\n  }\n\n  get danger_zone_p() {\n    if (this.location.key === \"black\") {\n      return this.place.y < Board.danger_zone_size\n    } else {\n      return this.place.y >= (Board.dimension - Board.danger_zone_size)\n    }\n  }\n\n  get to_class_list() {\n    let list = []\n    list.push(`location_${this.location.key}`)\n    list.push(`promoted_${this.promoted}`)\n    list = _.concat(list, this.piece.css_class_list)\n    return list\n  }\n\n  // 自分の側の一番下を0としてどれだけ前に進んでいるかを返す\n  get bottom_spaces() {\n    return Board.dimension - 1 - this.top_spaces\n  }\n\n  // 自分の側の一番上を0としてあとどれだけで突き当たるかの値\n  get top_spaces() {\n    return this.place.flip_if_white(this.location).y\n  }\n}\n\nif (process.argv[1] === __filename) {\n  const soldier = new Soldier({\n    place: new Place([1, 7]),\n    piece: Piece.fetch(\"P\"),\n    promoted: true,\n    location: Location.fetch(\"white\"),\n  })\n  console.log(soldier.name)\n  console.log(soldier.top_spaces)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/soldier.js","import Vuex from \"vuex\"\n\n// ここで Vue.use(Vuex) すると利用する側と干渉するので注意\n\nconst store = () => new Vuex.Store({\n  state: {\n    current_flip: false,                // 反転したか？\n    current_vlayout: false,             // 縦レイアウト\n    current_debug_mode: false,\n    current_theme: null,\n    current_size: null,\n    current_bg_variant: null,\n    current_piece_variant: null,\n  },\n  mutations: {\n    // this.$store.commit(\"flip_toggle\") として呼び出す\n    flip_toggle(state) {\n      state.current_flip = !state.current_flip\n    },\n\n    // this.$store.commit(\"current_debug_mode_set\", true)\n    current_debug_mode_set(state, payload) {\n      state.current_debug_mode = payload\n      // ここで呼び出しても意味ない。効き目なし。\n      this.$emit(\"update:debug_mode\", payload)\n    },\n  },\n})\n\nexport default store\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/index.js","import _ from \"lodash\"\n\nimport Board from \"./board\"\n\nexport default class Place {\n  static fetch(v) {\n    if (v instanceof this) {\n      return v\n    }\n    return Object.freeze(new Place(v))\n  }\n\n  static xy_valid_p(x, y) {\n    return 0 <= x && x < Board.dimension && 0 <= y && y < Board.dimension\n  }\n\n  constructor(value) {\n    let x, y\n    if (_.isString(value)) {\n      [x, y] = this._parse_from_string(value)\n    } else {\n      [x, y] = value            // valus is array\n    }\n    [this._x, this._y] = [x, y]\n  }\n\n  get key() {\n    return [this._x, this._y].toString()\n  }\n\n  get x() {\n    return this._x\n  }\n\n  get y() {\n    return this._y\n  }\n\n  get human_x() {\n    return Board.dimension - this._x\n  }\n\n  get kanji_human_x() {\n    return {1: \"１\", 2: \"２\", 3: \"３\", 4: \"４\", 5: \"５\", 6: \"６\", 7: \"７\", 8: \"８\", 9: \"９\"}[this.human_x]\n  }\n\n  get kanji_human_y() {\n    return {1: \"一\", 2: \"二\", 3: \"三\", 4: \"四\", 5: \"五\", 6: \"六\", 7: \"七\", 8: \"八\", 9: \"九\"}[this.human_y]\n  }\n\n  get human_y() {\n    return this._y + 1\n  }\n\n  get flip_all() {\n    return Place.fetch([Board.dimension - 1 - this._x, Board.dimension - 1 - this._y])\n  }\n\n  get flip_h() {\n    return Place.fetch([Board.dimension - 1 - this._x, this._y])\n  }\n\n  flip_if_white(location) {\n    if (location.key === \"white\") {\n      return this.flip_all\n    } else {\n      return this\n    }\n  }\n\n  _parse_from_string(s) {\n    s = s.replace(/([１-９一二三四五六七八九a-z])/g, (e) => this._replace_table[e])\n    const [x, y] = s.split(\"\").map((e) => Number(e))\n    return [Board.dimension - x, y - 1]\n  }\n\n  get _replace_table() {\n    /* eslint-disable object-property-newline, key-spacing */\n    return {\n      \"１\": 1, \"２\": 2, \"３\": 3, \"４\": 4, \"５\": 5, \"６\": 6, \"７\": 7, \"８\": 8, \"９\": 9,\n      \"一\": 1, \"二\": 2, \"三\": 3, \"四\": 4, \"五\": 5, \"六\": 6, \"七\": 7, \"八\": 8, \"九\": 9,\n      \"a\":  1, \"b\":  2, \"c\":  3, \"d\":  4, \"e\":  5, \"f\":  6, \"g\":  7, \"h\":  8, \"i\":  9,\n    }\n  }\n\n  get to_sfen() {\n    const y_table = [\"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\", \"h\", \"i\"]\n    return [Board.dimension - this._x, y_table[this._y]].join(\"\")\n  }\n\n  get to_css_class() {\n    return `place_${this.human_digits}`\n  }\n\n  get human_xy_ary() {\n    return [this.human_x, this.human_y]\n  }\n\n  get human_digits() {\n    return this.human_xy_ary.join(\"\")\n  }\n\n  get kanji_human() {\n    return [this.kanji_human_x, this.kanji_human_y].join(\"\")\n  }\n\n  // x, y を足した新しい位置を返す\n  // はみでたのは反対側の座標とする\n  rotate_add(x, y) {\n    const nx = this.__new_pos(this._x, x)\n    const ny = this.__new_pos(this._y, y)\n    return Place.fetch([nx, ny])\n  }\n\n  // private\n  __new_pos(origin, v) {\n    return Math.trunc((origin + v + Board.dimension) % Board.dimension) // (x + 1).modulo(dimension)\n  }\n\n}\n\nif (process.argv[1] === __filename) {\n  console.log(Place.fetch(\"6a\").key)\n  console.log(Place.fetch([1, 2]).key)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/place.js","import _ from \"lodash\"\nimport Vue from \"vue\"\n\nimport Board from \"./board\"\nimport Place from \"./place\"\nimport Piece from \"./piece\"\nimport Soldier from \"./soldier\"\nimport SfenParser from \"./sfen_parser\"\nimport SfenSerializer from \"./sfen_serializer\"\nimport PresetInfo from \"./preset_info\"\nimport Location from \"./location.js\"\n\nexport default class Mediator {\n  constructor() {\n    const data_source = new SfenParser()\n    data_source.kifu_body = \"position startpos\"\n    data_source.parse()\n\n    this.data_source = data_source\n    this.current_turn = 0\n    this.board = null\n    this.hold_pieces = null\n    this.last_hand = null\n    this.piece_box = {}\n\n    this.env = process.env.NODE_ENV\n  }\n\n  run() {\n    this.board = this.data_source.board\n    this.hold_pieces = this.data_source.hold_pieces\n    this.last_hand = null\n\n    const move_infos = this.data_source.move_infos\n\n    const num = this.turn_offset - this.turn_offset_min\n    _(num).times((i) => { this.execute_one(move_infos[i]) })\n  }\n\n  execute_one(m) {\n    this.last_hand = m\n    if (m.drop_piece) {\n      const soldier = new Soldier({\n        piece: m.drop_piece,\n        place: m.place,\n        promoted: m.promoted,\n        location: m.location,\n      })\n      this.hold_pieces_add(m.location, soldier.piece, -1)\n      this.board.place_on(soldier)\n    } else {\n      {\n        const soldier = this.board.lookup(m.place)\n        if (soldier) {\n          this.hold_pieces_add(m.location, soldier.piece, 1)\n        }\n      }\n      const soldier = this.board.lookup(m.origin_place)\n      if (m.promoted_trigger) {\n        soldier.promoted = true\n      }\n      soldier.place = m.place\n      this.board.delete_at(m.origin_place)\n      this.board.place_on(soldier)\n    }\n  }\n\n  hold_pieces_count(location, piece) {\n    return this.hold_pieces[location.key][piece.key] || 0\n  }\n\n  hold_pieces_add(location, piece, plus = 1) {\n    const count = this.hold_pieces_count(location, piece) + plus\n    const counts_hash = this.hold_pieces[location.key]\n\n    // 次のように書いた場合、ハッシュの値(count)がいくら変化してもそのタイミングではトリガーが発生しない\n    //\n    //   if (count >= 1) {\n    //     Vue.set(counts_hash, piece.key, count) // ←ここが問題\n    //   } else {\n    //     Vue.delete(counts_hash, piece.key)\n    //   }\n    //\n    // そこで count を更新するときは「キーが新規で追加」されたことでトリガーを発生させるようにする\n    // つまり count を更新するときは「キー削除」→「キー追加」とする\n\n    Vue.delete(counts_hash, piece.key)\n    if (count >= 1) {\n      Vue.set(counts_hash, piece.key, count)\n    }\n  }\n\n  // location の piece を count 減らしたいとき本当に減らせる数を返す\n  hold_pieces_can_be_reduced_count(location, piece, count) {\n    const max = this.hold_pieces_count(location, piece)\n    if (count > max) {\n      count = max\n    }\n    return count\n  }\n\n  board_safe_delete_on(place) {\n    this.board.delete_at(place)\n  }\n\n  board_piece_fore_class(xy) {\n    const place = Place.fetch(xy)\n    const soldier = this.board.lookup(place)\n\n    if (soldier) {\n      return soldier.to_class_list\n    }\n\n    return []\n  }\n\n  cell_piece_class(xy) {\n    const place = Place.fetch(xy)\n    const soldier = this.board.lookup(place)\n    let list = []\n    if (soldier) {\n      list.push(`location_${soldier.location.key}`)\n    }\n    return list\n  }\n\n  cell_view(xy) {\n    const place = Place.fetch(xy)\n    const soldier = this.board.lookup(place)\n    let str = \"\"\n    if (soldier) {\n      str = soldier.name\n    }\n    return str\n  }\n\n  get dimension() {\n    return Board.dimension\n  }\n\n  // ruby style array index access\n  get turn_offset() {\n    let index = Number(this.current_turn)\n    if (index < 0) {\n      index += this.turn_offset_max + 1\n    }\n    return this.turn_clamp(index)\n  }\n\n  turn_clamp(index) {\n    return _.clamp(Number(index), this.turn_offset_min, this.turn_offset_max)\n  }\n\n  get previous_location() {\n    return this.data_source.location_by_offset(this.turn_offset - 1)\n  }\n\n  get current_location() {\n    return this.data_source.location_by_offset(this.turn_offset)\n  }\n\n  get current_comments() {\n    if (this.data_source.comments_pack) {\n      return this.data_source.comments_pack[this.turn_offset]\n    }\n  }\n\n  get turn_offset_min() {\n    return this.data_source.turn_offset_min\n  }\n\n  get turn_offset_max() {\n    return this.data_source.turn_offset_max\n  }\n\n  current_turn_label(final_label) {\n    if (this.turn_offset === this.turn_offset_max) {\n      if (final_label) {\n        return `まで${this.display_turn}手で${final_label}`\n      } else {\n        return `まで${this.display_turn}手で${this.previous_location.name}の勝ち`\n      }\n    } else {\n      return `${this.display_turn}手`\n    }\n  }\n\n  // 100手目から始まっている棋譜でオフセットが20のときは足して 120 を返す\n  get display_turn() {\n    return this.turn_base + this.turn_offset\n  }\n\n  // 何手目から始まっているかを返す\n  get turn_base() {\n    return this.data_source.turn_base\n  }\n\n  realized_hold_pieces_of(location_key) {\n    const list = Object.entries(this.hold_pieces[location_key])\n    return _(list)\n      .filter(([key, count]) => count >= 1)\n      .map(([key, count]) => [Piece.fetch(key), count])\n      .sortBy(([key, count]) => key.code)\n      .value()\n  }\n\n  // -------------------------------------------------------------------------------- serialize\n\n  // 4k4/9/4G4/9/9/9/9/9/9 b G2r2b2g4s4n4l18p 1\n  get to_simple_sfen() {\n    return this.sfen_serializer.to_s\n  }\n\n  // 4k4/9/4G4/9/9/9/9/9/9 b G2r2b2g4s4n4l18p\n  get to_sfen_without_turn() {\n    return this.sfen_serializer.to_s_without_turn\n  }\n\n  // position sfen 4k4/9/4G4/9/9/9/9/9/9 b G2r2b2g4s4n4l18p 1\n  get to_position_sfen() {\n    return `position sfen ${this.to_simple_sfen}`\n  }\n\n  get sfen_serializer() {\n    return new SfenSerializer(this)\n  }\n\n  // -------------------------------------------------------------------------------- piece_box\n\n  piece_box_count(piece) {\n    return this.piece_box[piece.key] || 0\n  }\n\n  piece_box_add(piece, plus = 1) {\n    const count = this.piece_box_count(piece) + plus\n    Vue.delete(this.piece_box, piece.key)\n    if (count >= 1) {\n      Vue.set(this.piece_box, piece.key, count)\n    }\n  }\n\n  // piece を count 減らしたいとき本当に減らせる数を返す\n  piece_box_can_be_reduced_count(piece, count) {\n    const max = this.piece_box_count(piece)\n    if (count > max) {\n      count = max\n    }\n    return count\n  }\n\n  piece_box_realize() {\n    const list = Object.entries(this.piece_box) // {a: 1} => [['a', 1]]\n    return _(list)\n      .filter(([key, count]) => count >= 1)\n      .map(([key, count]) => [Piece.fetch(key), count])\n      .sortBy(([key, count]) => key.code)\n      .value()\n  }\n\n  // -------------------------------------------------------------------------------- Utilities\n\n  // location の駒台の駒をすべて駒箱に移動する\n  hold_pieces_to_piece_box(location) {\n    _.forIn(this.hold_pieces[location.key], (count, piece_key) => {\n      const piece = Piece.fetch(piece_key)\n      this.hold_pieces_add(location, piece, -count)\n      this.piece_box_add(piece, count)\n    })\n  }\n\n  // 駒箱の駒をすべて location の駒台に移動する\n  piece_box_to_hold_pieces(location) {\n    _.forIn(this.piece_box, (count, piece_key) => {\n      const piece = Piece.fetch(piece_key)\n      this.piece_box_add(piece, -count)\n      this.hold_pieces_add(location, piece, count)\n    })\n  }\n\n  // プリセットに対応するように駒箱をセットする\n  piece_box_reset_by_preset(preset_info) {\n    this.piece_box_clear()\n\n    const info = PresetInfo.fetch(preset_info)\n    info.piece_box.forEach(([e, c]) => {\n      this.piece_box_add(Piece.fetch(e), c)\n    })\n  }\n\n  // 駒箱に足りない駒だけにする\n  piece_box_piece_couns_adjust() {\n    this.piece_box_clear()\n\n    const counts_hash = this.hold_piece_all_counts_hash       // 両者の持駒の合計\n    const counts_hash_on_board = this.board.piece_counts_hash // 盤上の駒の合計\n\n    const info = PresetInfo.fetch(\"全部駒箱\")\n    info.piece_box.forEach(([e, c]) => {\n      const piece = Piece.fetch(e)\n      const rest = c - ((counts_hash[piece.key] || 0) + (counts_hash_on_board[piece.key] || 0))\n      this.piece_box_add(piece, rest)\n    })\n  }\n\n  // 両者の持駒を合わせたハッシュを返す\n  get hold_piece_all_counts_hash() {\n    const counts = {}\n    Location.values.forEach(e => {\n      _.forIn(this.hold_pieces[e.key], (count, piece_key) => {\n        counts[piece_key] = (counts[piece_key] || 0) + count\n      })\n    })\n    return counts\n  }\n\n  piece_box_clear() {\n    this.piece_box = {}\n  }\n\n  //////////////////////////////////////////////////////////////////////////////// ランダム配置\n\n  /* eslint-disable */\n  //////////////////////////////////////////////////////////////////////////////// 指将棋用玉配置\n\n  // 指将棋用玉配置(自動)\n  king_formation_auto_set() {\n    let success = false\n    if (!success) {\n      success = this.king_formation_set(\"bottom_left\")\n    }\n    if (!success) {\n      success = this.king_formation_set(\"bottom_right\")\n    }\n    return success\n  }\n\n  // 指将棋用玉配置解除\n  // 玉は駒箱へ\n  // それ以外は相手の駒台へ\n  king_formation_auto_unset() {\n    let success = false\n    if (!success) {\n      success = this.king_formation_unset(\"bottom_left\")\n    }\n    if (!success) {\n      success = this.king_formation_unset(\"bottom_right\")\n    }\n    return success\n  }\n\n  // 指将棋用玉配置\n  king_formation_set(position) {\n    const soldiers = this.king_formation_soldiers(position)\n\n    // 置きたいところに駒が1つでも置かれていたら何もしない\n    if (soldiers.some(e => this.board.lookup(e.place))) {\n      return\n    }\n\n    // 配置\n    soldiers.forEach(e => this.piece_search_and_place_on(e))\n\n    return true\n  }\n\n  // 指将棋用玉配置解除\n  // 玉は駒箱へ\n  // それ以外は相手の駒台へ\n  king_formation_unset(position) {\n    const soldiers = this.king_formation_soldiers(position)\n\n    // 駒がそろってないときは何もしない\n    if (soldiers.some(e => !this.board.lookup(e.place))) {\n      return\n    }\n\n    soldiers.forEach(e => {\n      const soldier = this.board.lookup(e.place)\n      if (soldier) {\n        const piece = soldier.piece\n        this.board.delete_at(soldier.place)\n        if (piece.key === \"K\") {\n          // 玉の場合は駒箱にとらげる\n          this.piece_box_add(piece)\n        } else {\n          // 他の駒は相手の駒箱へ\n          this.hold_pieces_add(Location.fetch(\"white\"), piece)\n        }\n      }\n    })\n\n    return true\n  }\n\n  // soldier.piece に対応する駒を探してあれば -1 して soldier.place の位置に配置する\n  piece_search_and_place_on(soldier) {\n    // すでに何か置かれていれば何もしない\n    if (this.board.lookup(soldier.place)) {\n      return\n    }\n\n    // 玉の場合は初期配置の時点で存在しない場合もあるので「あれば」-1 するだけ\n    if (soldier.piece.key === \"K\") {\n      this.piece_search_and_decrement(soldier.piece)\n    } else {\n      // 玉以外は駒が数が増えてしまってややこしくなるのを防ぐため必ず「あったときだけ」-1 し、なければ何もしない\n      if (!this.piece_search_and_decrement(soldier.piece)) {\n        return\n      }\n    }\n\n    this.board.place_on(soldier)\n  }\n\n  // 相手の駒→駒箱→自分の駒の順で駒を探してあれば -1 して true を返す\n  piece_search_and_decrement(piece) {\n    let found = false\n\n    // 相手の駒から探す\n    if (!found) {\n      found = this.piece_search_on_hold_pieces_and_decrement(\"white\", piece)\n    }\n\n    // 駒箱から探す\n    if (!found) {\n      if (this.piece_box_count(piece) >= 1) {\n        this.piece_box_add(piece, -1)\n        found = true\n      }\n    }\n\n    if (false) {\n      // 自分の駒から探す\n      if (!found) {\n        found = this.piece_search_on_hold_pieces_and_decrement(\"black\", piece)\n      }\n    }\n\n    return found\n  }\n\n  // location_key の持駒から piece を探してあれば -1 して true を返す\n  piece_search_on_hold_pieces_and_decrement(location_key, piece) {\n    const location = Location.fetch(location_key)\n    if (this.hold_pieces_count(location, piece) >= 1) {\n      this.hold_pieces_add(location, piece, -1)\n      return true\n    }\n  }\n\n  // TODO: SFENで定義する方法もあり\n  king_formation_soldiers(position) {\n    let bx = null\n    let sx = null\n    let by = null\n    let sy = null\n    if (position === \"bottom_left\") {\n      bx = 0\n      sx = 1\n      by = Board.dimension - 1\n      sy = -1\n    }\n    if (position === \"bottom_right\") {\n      bx = Board.dimension - 1\n      sx = -1\n      by = Board.dimension - 1\n      sy = -1\n    }\n    return [\n      { piece: \"K\", promoted: false, location: \"black\", place: [bx,           by           ] },\n      { piece: \"P\", promoted: true,  location: \"white\", place: [bx,           by + sy + sy ] },\n      { piece: \"P\", promoted: true,  location: \"white\", place: [bx + sx,      by + sy + sy ] },\n      { piece: \"P\", promoted: true,  location: \"white\", place: [bx + sx + sx, by + sy + sy ] },\n      { piece: \"P\", promoted: true,  location: \"white\", place: [bx + sx + sx, by + sy      ] },\n      { piece: \"P\", promoted: true,  location: \"white\", place: [bx + sx + sx, by           ] },\n    ].map(e => {\n      return new Soldier({\n        piece: Piece.fetch(e.piece),\n        promoted: e.promoted,\n        location: Location.fetch(e.location),\n        place: Place.fetch(e.place),\n      })\n    })\n  }\n\n  ////////////////////////////////////////////////////////////////////////////////\n  /* eslint-enable */\n\n  // 左右スライド\n  slide_xy(x, y) {\n    this.board = this.board.slide_xy(x, y)\n  }\n\n  shuffle_apply(size) {\n    const new_board = this.board.shuffle_apply(size)\n    if (new_board) {\n      this.board = new_board\n      return true\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/mediator.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.comments_pack)?_c('div',{staticClass:\"comment_area\"},[(_vm.current_comments)?_c('div',[_c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column\"},[_c('article',{staticClass:\"message is-info has-text-left\"},[_c('div',{staticClass:\"message-body\"},[_c('div',{staticClass:\"content\"},[_vm._l((_vm.current_comments),function(str){return [(_vm._.isEmpty(str))?[_c('br')]:[_c('div',{domProps:{\"innerHTML\":_vm._s(_vm.auto_link(str))}})]]})],2)])])])])]):_vm._e()]):_vm._e()}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-3a87a5fb\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/CommentArea.vue\n// module id = N+at\n// module chunks = 1 2","import MemoryRecord from \"js-memory-record\"\nimport PieceVector from \"./piece_vector.js\"\n\nexport default class Piece extends MemoryRecord {\n  static get define() {\n    return [\n      // 順序について\n      // http://yaneuraou.yaneu.com/2016/07/15/sfen%E6%96%87%E5%AD%97%E5%88%97%E3%81%AF%E6%9C%AC%E6%9D%A5%E3%81%AF%E4%B8%80%E6%84%8F%E3%81%AB%E5%AE%9A%E3%81%BE%E3%82%8B%E4%BB%B6/\n      // https://web.archive.org/web/20080131070731/http://www.glaurungchess.com/shogi/usi.html\n      { key: \"K\", name: \"玉\", alias_name: \"王\", promoted_name: null, promoted_alias_name: null, },\n      { key: \"R\", name: \"飛\", alias_name: null, promoted_name: \"龍\", promoted_alias_name: \"竜\", },\n      { key: \"B\", name: \"角\", alias_name: null, promoted_name: \"馬\", promoted_alias_name: null, },\n      { key: \"G\", name: \"金\", alias_name: null, promoted_name: null, promoted_alias_name: null, },\n      { key: \"S\", name: \"銀\", alias_name: null, promoted_name: \"全\", promoted_alias_name: null, },\n      { key: \"N\", name: \"桂\", alias_name: null, promoted_name: \"圭\", promoted_alias_name: null, },\n      { key: \"L\", name: \"香\", alias_name: null, promoted_name: \"杏\", promoted_alias_name: null, },\n      { key: \"P\", name: \"歩\", alias_name: null, promoted_name: \"と\", promoted_alias_name: null, },\n    ]\n  }\n\n  static lookup(key) {\n    if (typeof key === \"string\") {\n      key = key.toUpperCase()\n    }\n    return super.lookup(key)\n  }\n\n  static kif_lookup(key) {\n    return this.values.find((e) => [e.name, e.alias_name].includes(key))\n  }\n\n  static kif_promoted_lookup(key) {\n    return this.values.find((e) => [e.promoted_name, e.promoted_alias_name].includes(key))\n  }\n\n  get css_class_list() {\n    return [\"piece_name\", `piece_${this.key}`]\n  }\n\n  get promotable_p() {\n    return !!this.promoted_name\n  }\n\n  get piece_vector() {\n    return PieceVector.fetch(this.key)\n  }\n\n}\n\nif (process.argv[1] === __filename) {\n  console.log(Piece.fetch(\"K\"))\n  console.log(Piece.fetch(\"K\"))\n  console.log(Piece.lookup(\"\"))\n  console.log(Piece.values)\n  console.log(Piece.values_map.get(\"K\"))\n  console.log(Piece.fetch(\"K\").key)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/piece.js","import MemoryRecord from \"js-memory-record\"\n\nexport default class BgVariantInfo extends MemoryRecord {\n  static get define() {\n    return [\n      /* eslint-disable */\n      { key: 'a', },\n      { key: 'b', },\n      { key: 'c', },\n      { key: 'd', },\n      { key: 'e', },\n      { key: 'f', },\n      { key: 'g', },\n      { key: 'h', },\n      { key: 'i', },\n      { key: 'j', },\n      { key: 'k', },\n      { key: 'l', },\n      { key: 'm', },\n      { key: 'n', },\n      { key: 'o', },\n      { key: 'p', },\n      { key: 'q', },\n      { key: 'r', },\n      { key: 's', },\n      { key: 't', },\n      { key: 'u', },\n      { key: 'v', },\n      { key: 'w', },\n      { key: 'x', },\n      { key: 'y', },\n      { key: 'z', },\n      /* eslint-enable */\n    ]\n  }\n}\n\nif (process.argv[1] === __filename) {\n  console.log(BgVariantInfo.fetch(\"a\").key)\n  console.log(BgVariantInfo.fetch(\"a\").name)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/bg_variant_info.js","import MemoryRecord from \"js-memory-record\"\n\nexport default class PieceVariantInfo extends MemoryRecord {\n  static get define() {\n    return [\n      /* eslint-disable */\n      { key: 'a', name: \"デフォルト\",      },\n      { key: 'b', name: \"将棋図案駒(新)\",  },\n      { key: 'c', name: \"将棋図案駒(旧)\",  },\n      /* eslint-enable */\n    ]\n  }\n}\n\nif (process.argv[1] === __filename) {\n  console.log(PieceVariantInfo.fetch(\"a\").key)\n  console.log(PieceVariantInfo.fetch(\"a\").name)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/piece_variant_info.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.piece_stand_show_flag)?_c('div',{staticClass:\"piece_stand_outer\",class:_vm.piece_stand_outer_class},[_c('div',{staticClass:\"location_mark_wrap\"},[_c('div',{staticClass:\"location_mark\",domProps:{\"innerHTML\":_vm._s(_vm.location_name)}}),(_vm.$parent.theme === 'simple')?[(!_vm.$parent.current_vlayout)?[_c('div',{staticClass:\"piece_count piece_count1\"},[_vm._v(\"99\")])]:_vm._e()]:_vm._e(),(_vm.$parent.current_vlayout && _vm.player_name)?[_c('div',{staticClass:\"player_name\"},[_vm._v(_vm._s(_vm.player_name))])]:_vm._e()],2),(!_vm.$parent.current_vlayout && _vm.player_name)?[_c('div',{staticClass:\"player_name\"},[_vm._v(_vm._s(_vm.player_name))])]:_vm._e(),_c('ul',{staticClass:\"piece_stand\",class:_vm.piece_stand_class,on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.$parent.piece_stand_click(_vm.location, $event)},\"contextmenu\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.$parent.hold_cancel($event)}}},_vm._l((_vm.hold_pieces),function(ref){\nvar piece = ref[0];\nvar count = ref[1];\nreturn _c('li',{on:{\"click\":function($event){$event.stopPropagation();return _vm.$parent.piece_stand_piece_click(_vm.location, piece, false, $event)},\"mouseover\":function($event){return _vm.$parent.piece_stand_mouseover_handle(_vm.location, piece, $event)},\"mouseleave\":_vm.$parent.mouseleave_handle}},[_c('div',{staticClass:\"piece_back\",class:_vm.piece_back_class(piece)},[_c('div',{staticClass:\"piece_fore\",class:_vm.piece_fore_class(piece)},[_vm._v(_vm._s(piece.name))])]),(count >= 1)?_c('div',{staticClass:\"piece_count\",class:(\"piece_count\" + count)},[_vm._v(_vm._s(count))]):_vm._e()])}),0)],2):_vm._e()}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-3c933f9b\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/template-compiler/preprocessor.js?engine=pug!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/PieceStand.vue\n// module id = WC9Z\n// module chunks = 1 2","import MemoryRecord from \"js-memory-record\"\nimport Location from \"./location\"\n\nexport default class AnyFuncInfo extends MemoryRecord {\n  static get define() {\n    return [\n      /* eslint-disable */\n      { key: \"☖の持駒を駒箱へ\",   func: e => { e.mediator.hold_pieces_to_piece_box(Location.fetch(\"white\")) }, },\n      { key: \"駒箱から☖の持駒へ\", func: e => { e.mediator.piece_box_to_hold_pieces(Location.fetch(\"white\")) }, },\n      { key: \"駒箱を正規化\",       func: e => { e.mediator.piece_box_piece_couns_adjust() }, },\n      { key: \"駒箱に駒を一式生成\", func: e => { e.mediator.piece_box_reset_by_preset(\"全部駒箱\") }, },\n      { key: \"駒箱の駒をクリア\",   func: e => { e.mediator.piece_box_clear() }, },\n      { key: \"指将棋用玉配置\",     func: e => { e.mediator.king_formation_auto_set()   }, },\n      { key: \"指将棋用玉回収\",     func: e => { e.mediator.king_formation_auto_unset() }, },\n      { key: \"視点切り替え\",       func: e => { e.$store.state.current_flip = !e.$store.state.current_flip }, },\n\n      // { key: \"盤面をシャッフル\",   func: e => { e.mediator.shuffle_apply(4) }, },\n      { key: \"盤面シャッフル\",     func: e => { e.shuffle_dialog_open() }, },\n      { key: \"上ローテイト\",       func: e => { e.mediator.slide_xy(0, -1) }, },\n      { key: \"下ローテイト\",       func: e => { e.mediator.slide_xy(0, 1)  }, },\n      { key: \"左ローテイト\",       func: e => { e.mediator.slide_xy(-1, 0) }, },\n      { key: \"右ローテイト\",       func: e => { e.mediator.slide_xy(1, 0)  }, },\n      // { key: \"指将棋用玉配置(左)\", func: e => { e.mediator.king_formation_set(\"bottom_left\") }, },\n      // { key: \"指将棋用玉回収(左)\", func: e => { e.mediator.king_formation_unset(\"bottom_left\") }, },\n      // { key: \"指将棋用玉配置(右)\", func: e => { e.mediator.king_formation_set(\"bottom_right\") }, },\n      // { key: \"指将棋用玉回収(右)\", func: e => { e.mediator.king_formation_unset(\"bottom_right\") }, },\n      /* eslint-enable */\n    ]\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/any_func_info.js","import _ from \"lodash\"\n\nimport Piece from \"./piece\"\nimport Place from \"./place\"\nimport Mediator from \"./mediator\"\nimport Location from \"./location\"\nimport Board from \"./board\"\n\nexport default class SfenSerializer {\n  constructor(mediator) {\n    this.mediator = mediator\n  }\n\n  get to_s() {\n    const parts = this.__base_parts\n    parts.push(this.mediator.display_turn + 1)           // 1\n    return parts.join(\" \")\n  }\n\n  // 局面ペディア用(ターンを指定するとエラーになるため)\n  get to_s_without_turn() {\n    return this.__base_parts.join(\" \")\n  }\n\n  get to_board_sfen() {\n    const rows = []\n    _.times(Board.dimension, (y) => {\n      let str = \"\"\n      let space = 0\n      _.times(Board.dimension, (x) => {\n        const place = Place.fetch([x, y])\n        const soldier = this.mediator.board.lookup(place)\n        if (_.isNil(soldier)) {\n          space++\n        } else {\n          if (space >= 1) {\n            str += space\n            space = 0\n          }\n          if (soldier.promoted) {\n            str += \"+\"\n          }\n          let key = soldier.piece.key\n          if (soldier.location.key === \"white\") {\n            key = key.toLowerCase()\n          }\n          str += key\n        }\n      })\n      if (space >= 1) {\n        str += space\n      }\n      rows.push(str)\n    })\n    return rows.join(\"/\")\n  }\n\n  get to_hold_pieces() {\n    let str = Location.values.map((location_info) => {\n      const hold_pieces = this.mediator.hold_pieces[location_info.key]\n      const values = Piece.values.map((e) => {\n        let count = hold_pieces[e.key] || 0\n        let str = \"\"\n        if (count === 0) {\n          return null\n        }\n        if (count >= 2) {\n          str += count\n        }\n        let key = e.key\n        if (location_info.key === \"white\") {\n          key = key.toLowerCase()\n        } else {\n          key = key.toUpperCase()\n        }\n        str += key\n        return str\n      })\n      return _.compact(values).join(\"\")\n    }).join(\"\")\n\n    if (_.isEmpty(str)) {\n      str = \"-\"\n    }\n\n    return str\n  }\n\n  // private\n\n  get __base_parts() {\n    const parts = []\n    parts.push(this.to_board_sfen)                    // 9/9/9/9...\n    parts.push(this.mediator.current_location.key[0]) // \"b\"\n    parts.push(this.to_hold_pieces)                   // \"-\"\n    return parts\n  }\n}\n\nif (process.argv[1] === __filename) {\n  const mediator = new Mediator()\n  mediator.kifu_body = \"position sfen +lnsgkgsnl/1r5b1/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL b S2s 1 moves 7i6h S*2d\"\n  mediator.current_turn = 1\n  mediator.run()\n  const sfen_serializer = new SfenSerializer(mediator)\n  console.log(sfen_serializer.to_s)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/sfen_serializer.js","import _ from \"lodash\"\nimport { mapState } from 'vuex'\n\nexport default {\n  /* eslint-disable */\n  props: {\n    slider_show:                 { type: Boolean, default: false, },\n    controller_show:             { type: Boolean, default: false, },\n    key_event_capture:           { type: Boolean, default: false  },\n    shift_key_mag:               { type: Number,  default: 10,    },\n    system_key_mag:              { type: Number,  default: 50,    },\n    flip:                        { type: Boolean, default: false, },\n    vlayout:                     { type: Boolean, default: false, },\n    hidden_if_piece_stand_blank: { type: Boolean, default: false, },\n    setting_button_show:         { type: Boolean, default: true,  },\n    summary_show:                { type: Boolean, default: true,  },\n    operation_disable:           { type: Boolean, default: false, },\n    flip_if_white:               { type: Boolean, default: false, },\n  },\n  /* eslint-enable */\n\n  data() {\n    return {\n    }\n  },\n\n  mounted() {\n    window.addEventListener(\"keydown\", this.keydown_hook, false)\n  },\n\n  beforeDestroy() {\n    window.removeEventListener('keydown', this.keydown_hook)\n  },\n\n  created() {\n    this.$store.state.current_flip = this.flip\n    this.$store.state.current_vlayout = this.vlayout\n  },\n\n  watch: {\n    /* eslint-disable */\n    current_flip(v)     { this.$emit(\"update:flip\", v)       }, // 中 -> 外\n    flip(v)             { this.$store.state.current_flip = v }, // 外 -> 中\n\n    current_vlayout(v)     { this.$emit(\"update:vlayout\", v)       }, // 中 -> 外\n    vlayout(v)             { this.$store.state.current_vlayout = v }, // 外 -> 中\n    /* eslint-enable */\n  },\n\n  methods: {\n    keydown_hook(e) {\n      if (this.current_debug_mode && false) {\n        this.log(document.activeElement)\n        this.log(e.shiftKey, e.ctrlKey, e.altKey, e.metaKey)\n        this.log(\"e\", e)\n        this.log(\"key\", e.key)\n        this.log(\"code\", e.code)\n        this.log(\"repeat\", e.repeat)\n      }\n\n      if (this.operation_disable) {\n        return\n      }\n\n      if (this.shortcut_hook(e)) {\n        return\n      }\n\n      if (!this.key_event_capture) {\n        return\n      }\n\n      if (this.current_run_mode === \"view_mode\" || this.current_run_mode === \"play_mode\") {\n        const dom = document.activeElement\n        const controllers = [this.$refs.first, this.$refs.previous, this.$refs.next, this.$refs.last] // FIXME: 指定DOMの下にあるか？の方法がわかればもっと簡潔になる\n        if (!(dom === undefined || dom.tagName === \"BODY\" || _.includes(controllers, dom))) {\n          return\n        }\n\n        if (e.code === \"Backspace\" || e.code === \"ArrowUp\" || e.code === \"ArrowLeft\" || e.key === \"k\" || e.key === \"p\" || e.key === \"b\") {\n          this.relative_move(-1, e)\n          e.preventDefault()\n        }\n\n        if (e.code === \"Space\" || e.code === \"Enter\" || e.code === \"ArrowDown\" || e.code === \"ArrowRight\" || e.key === \"j\" || e.key === \"n\" || e.key === \"f\") {\n          this.relative_move(1, e)\n          e.preventDefault()\n        }\n      }\n\n      // let gap = null\n      // let force_value = null\n      //\n      // if (e.code === \"Space\" || e.code === \"Enter\" || e.code === \"ArrowDown\" || e.code === \"ArrowRight\" || e.key === \"j\" || e.key === \"n\" || e.key === \"f\") {\n      //   gap = 1\n      // }\n      // if (e.code === \"Backspace\" || e.code === \"ArrowUp\" || e.code === \"ArrowLeft\" || e.key === \"k\" || e.key === \"p\" || e.key === \"b\") {\n      //   gap = -1\n      // }\n      // if (e.key === \"PageUp\") {\n      //   gap = -10\n      // }\n      // if (e.key === \"PageDown\") {\n      //   gap = 10\n      // }\n      // if (e.shiftKey || e.ctrlKey || e.altKey || e.metaKey) {\n      //   if (gap) {\n      //     gap *= 10\n      //   }\n      // }\n      // if (e.key === \"[\" || e.key === \"Home\" || e.code === \"Escape\") {\n      //   force_value = this.turn_offset_min\n      // }\n      // if (e.key === \"]\" || e.key === \"End\") {\n      //   force_value = this.turn_offset_max\n      // }\n      //\n      // let v = this.current_turn\n      // if (gap !== null) {\n      //   v += gap\n      // }\n      // if (force_value !== null) {\n      //   v = force_value\n      // }\n      // if (v < this.turn_offset_min) {\n      //   v = this.turn_offset_min\n      // }\n      // if (this.turn_offset_max < v) {\n      //   v = this.turn_offset_max\n      // }\n      // this.current_turn = v\n      //\n      // if (gap !== null || force_value !== null) {\n      //   e.preventDefault()\n      // }\n    },\n\n    navi_relative_move(v, event) {\n      this.relative_move(v * this.flip_sign, event)\n    },\n\n    relative_move(v, event = null) {\n      if (event) {\n        if (event.shiftKey) {\n          if (this.shift_key_mag) {\n            v *= this.shift_key_mag\n          }\n        }\n        if (event.ctrlKey || event.altKey || event.metaKey) {\n          if (this.system_key_mag) {\n            v *= this.system_key_mag\n          }\n        }\n      }\n\n      this.current_turn_add(v)\n\n      if (!this.focus_to(\"turn_slider\")) {\n        if (v > 0) {\n          this.focus_to(\"next\")\n        } else {\n          this.focus_to(\"previous\")\n        }\n      }\n    },\n\n    move_to_first() {\n      this.current_turn_set(this.turn_offset_min)\n      this.focus_to(\"turn_slider\") || this.focus_to(\"first\")\n    },\n\n    move_to_last() {\n      this.current_turn_set(this.turn_offset_max)\n      this.focus_to(\"turn_slider\") || this.focus_to(\"last\")\n    },\n\n    current_turn_add(v) {\n      this.current_turn_set(this.mediator.turn_offset + v)\n    },\n\n    current_turn_set(v) {\n      const new_val = this.mediator.turn_clamp(v)\n      const updated = this.turn_offset !== new_val\n\n      if (updated) {\n        if (this.current_run_mode === \"view_mode\") {\n          this.view_mode_mediator_update(new_val)\n        }\n        if (this.current_run_mode === \"play_mode\") {\n          this.play_mode_mediator_seek_to(new_val)\n        }\n        this.sound_call(\"piece_sound\")\n        this.$emit(\"update:start_turn\", this.turn_offset)\n      }\n    },\n\n    focus_to(key) {\n      const el = this.$refs[key]\n      if (el) {\n        el.focus()\n        return true\n      }\n      return false\n    },\n\n    board_flip_run() {\n      this.$store.commit(\"flip_toggle\")\n      this.sound_call(\"flip_sound\")\n      this.focus_to(\"turn_slider\")\n    },\n  },\n\n  //\n  // ...mapState([\n  //   \"current_flip\",\n  // ]),\n  //\n  // が、\n  //\n  // Failed to compile.\n  //\n  // ./node_modules/shogi-player/src/components/navi_module.js\n  // Module parse failed: Unexpected token (191:4)\n  // You may need an appropriate loader to handle this file type.\n  // |       return this.current_flip ? -1 : 1\n  // |     },\n  // |     ...mapState([\n  // |       \"current_flip\",\n  // |     ]),\n  //  @ ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./node_modules/shogi-player/src/components/ShogiPlayer.vue 49:19-46\n  //  @ ./node_modules/shogi-player/src/components/ShogiPlayer.vue\n  //  @ ./app/javascript/packs/application.js\n  //  @ multi (webpack)-dev-server/client?http://localhost:3035 ./app/javascript/packs/application.js\n  //\n  // となるため仕方なく Object.assign を使う\n  //\n  computed: Object.assign({}, {\n    flip_sign() {\n      return this.current_flip ? -1 : 1\n    },\n  }, mapState([\n    \"current_flip\",\n    \"current_vlayout\",\n  ])),\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/navi_module.js","import MemoryRecord from \"js-memory-record\"\n\nexport default class SizeInfo extends MemoryRecord {\n  static get define() {\n    return [\n      /* eslint-disable */\n      { key: \"none\",      },\n      { key: \"xx-small\",  },\n      { key: \"x-small\",   },\n      { key: \"small\",     },\n      { key: \"default\",   },\n      { key: \"medium\",    },\n      { key: \"large\",     },\n      { key: \"x-large\",   },\n      { key: \"xx-large\",  },\n      { key: \"xxx-large\", },\n      /* eslint-enable */\n    ]\n  }\n}\n\nif (process.argv[1] === __filename) {\n  console.log(SizeInfo.fetch(\"x-small\").key)\n  console.log(SizeInfo.fetch(\"x-small\").name)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/size_info.js","var normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./PieceStand.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./PieceStand.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3c933f9b\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/template-compiler/preprocessor?engine=pug!../../node_modules/vue-loader/lib/selector?type=template&index=0!./PieceStand.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/PieceStand.vue\n// module id = a83v\n// module chunks = 1 2","// const piece_sound = new Sound(\"../static/piece_sound.wav\", {volume: 0.5})\n// piece_sound.options[:volume] = 0.2\n// piece_sound.play()\n\nimport axios from \"axios\"\n\nvar __audio_context__\n\n// new Sound() のたびに new AudioContext() すると6回目ぐらいでエラーになるため根本的な解決にはなっていないが外で一回だけ呼ぶ\nif (typeof window !== \"undefined\" && process.env.NODE_ENV !== \"test\") {\n  window.AudioContext = window.AudioContext || window.webkitAudioContext\n  __audio_context__ = new AudioContext()\n}\n\nexport default class Sound {\n  constructor(url, options = {}) {\n    this.url = url\n    this.options = options\n    this.buffer = null\n\n    if (process.env.NODE_ENV === \"test\") {\n      return\n    }\n\n    this.__resource_load()\n  }\n\n  play() {\n    if (this.is_loaded) {\n      const source = __audio_context__.createBufferSource()\n      source.buffer = this.buffer\n      if (this.volume === null) {\n        // Sound -> Destination\n        source.connect(__audio_context__.destination)\n      } else {\n        // Sound -> GainNode -> Destination\n        const gain_node = __audio_context__.createGain()\n        source.connect(gain_node)\n        gain_node.connect(__audio_context__.destination)\n        gain_node.gain.value = this.volume\n      }\n      source.start(0)\n    }\n  }\n\n  get is_loaded() {\n    return this.buffer !== null\n  }\n\n  get volume() {\n    let volume = 1.0\n    if (this.options[\"volume\"] !== undefined) {\n      volume = this.options[\"volume\"]\n    }\n    return volume\n  }\n\n  __resource_load() {\n    // 動かない\n    if (false) {\n      axios(this.uri, {responseType: \"arraybuffer\"})\n        .then(data => this.context.decodeAudioData(data))\n        .then(buffer => { this.buffer = buffer })\n    }\n\n    // Safari でも動く\n    if (true) {\n      const req = new XMLHttpRequest()\n      req.responseType = \"arraybuffer\"\n      req.onreadystatechange = () => {\n        if (req.readyState === 4) {\n          if (req.status === 0 || req.status === 200) {\n            console.log(`${this.constructor.name}#__resource_load(\"${this.url}\")`)\n            __audio_context__.decodeAudioData(req.response, buffer => { this.buffer = buffer })\n          }\n        }\n      }\n      req.open(\"GET\", this.url, true)\n      req.send(\"\")\n    }\n\n    // 簡単だけどsafariでは動かない\n    if (false) {\n      fetch(this.url)\n        .then(response => response.arrayBuffer())\n        .then(bin => __audio_context__.decodeAudioData(bin, buffer => (this.buffer = buffer)))\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/sound.js","import Mediator from \"../mediator\"\nimport PresetInfo from \"../preset_info\"\n\nexport default {\n  /* eslint-disable */\n  props: {\n    preset_key: { type: String,  default: null, },\n  },\n  /* eslint-enable */\n\n  data() {\n    return {\n      current_preset_key: this.preset_key, // 選択中の初期配置\n    }\n  },\n\n  created() {\n  },\n\n  mounted() {\n  },\n\n  watch: {\n    preset_key(v) { this.current_preset_key = v },              // 引数の変更を反映\n    current_preset_key(v) { this.mediator_setup_by_preset(v) }, // 設定での変更を反映\n  },\n\n  methods: {\n    // FIXME: pulldown から選択したときに2回呼ばれてしまう\n    mediator_setup_by_preset(preset_info) {\n      preset_info = PresetInfo.fetch(preset_info)\n      this.mediator = new Mediator()\n      if (preset_info.sfen) {\n        this.mediator.data_source = this.data_source_by(preset_info.sfen)\n      }\n      this.mediator.run()\n\n      // 足りない駒を preset_info から設定するのは廃止\n      // this.mediator.piece_box_reset_by_preset(preset_info)\n\n      // 自動的に駒箱を補充\n      this.mediator.piece_box_piece_couns_adjust()\n\n      // 駒落ちのときは△の手番から始まるので edit_mode での手番に反映する\n      // mediator の current_turn が 0 のまま run しているので mediator.current_location.key で最初の手番がわかる\n      this.init_location_key = this.mediator.current_location.key\n    },\n  },\n\n  computed: {\n    // テンプレートの中で PresetInfo を簡単に参照できないVueの制約のため\n    preset_info_values() {\n      return PresetInfo.values\n    },\n\n    // 初期配置指定がある場合、その sfen を返す\n    init_preset_sfen() {\n      if (this.preset_key) {\n        return PresetInfo.fetch(this.preset_key).sfen\n      }\n    },\n  },\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/preset_module.js","module.exports = __webpack_public_path__ + \"static/media/RELOAD_Rechamber_Leaver_Action_stereo.2147123.wav\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/Universal_Sound_FX/RELOAD_Rechamber_Leaver_Action_stereo.wav\n// module id = fopj\n// module chunks = 1 2","<template lang=\"pug\">\nul.piece_box(:class=\"piece_box_class\" v-if=\"$parent.current_run_mode === 'edit_mode'\" @click.stop.prevent=\"$parent.piece_box_other_click\" @click.right.prevent=\"$parent.hold_cancel\")\n  li(v-for=\"[piece, count] in $parent.mediator.piece_box_realize()\" @click.stop.prevent=\"$parent.piece_box_piece_click(piece, $event)\" :class=\"{holding_p: $parent.piece_box_have_p(piece)}\" @mouseover=\"$parent.piece_box_mouseover_handle(piece, $event)\" @mouseleave=\"$parent.mouseleave_handle\")\n    .piece_back(:class=\"$parent.piece_box_piece_back_class(piece)\")\n      .piece_fore(:class=\"$parent.piece_box_piece_inner_class(piece)\" v-text=\"piece.name\")\n    .piece_count(v-if=\"count >= 1\" :class=\"`piece_count${count}`\")\n      | {{count}}\n</template>\n\n<script>\n// import Location from \"../location\"\n// import _ from \"lodash\"\n\nexport default {\n  props: {\n  },\n\n  methods: {\n  },\n\n  computed: {\n    piece_box_class() {\n      const list = []\n\n      if (this.$parent.holding_p) {\n        list.push(\"hoverable_p\")\n      }\n\n      return list\n    },\n  },\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/components/PieceBox.vue","import MemoryRecord from \"js-memory-record\"\n// import Location from \"./location\"\n\nexport default class PieceVector extends MemoryRecord {\n  static get define() {\n    return [\n      // force_promote_length: 死に駒になる前方にある壁との隙間の数(この値以下で死に駒になる)\n      { key: \"K\", basic_once_vectors: \"pattern_king\",       basic_repeat_vectors: null,           promoted_once_vectors: null,           promoted_repeat_vectors: null,           force_promote_length: null, },\n      { key: \"R\", basic_once_vectors: null,                 basic_repeat_vectors: \"pattern_plus\", promoted_once_vectors: \"pattern_x\",    promoted_repeat_vectors: \"pattern_plus\", force_promote_length: null, },\n      { key: \"B\", basic_once_vectors: null,                 basic_repeat_vectors: \"pattern_x\",    promoted_once_vectors: \"pattern_plus\", promoted_repeat_vectors: \"pattern_x\",    force_promote_length: null, },\n      { key: \"G\", basic_once_vectors: \"pattern_gold\",       basic_repeat_vectors: null,           promoted_once_vectors: null,           promoted_repeat_vectors: null,           force_promote_length: null, },\n      { key: \"S\", basic_once_vectors: \"pattern_silver\",     basic_repeat_vectors: null,           promoted_once_vectors: \"pattern_gold\", promoted_repeat_vectors: null,           force_promote_length: null, },\n      { key: \"N\", basic_once_vectors: \"pattern_knight\",     basic_repeat_vectors: null,           promoted_once_vectors: \"pattern_gold\", promoted_repeat_vectors: null,           force_promote_length: 1,    },\n      { key: \"L\", basic_once_vectors: null,                 basic_repeat_vectors: \"pattern_pawn\", promoted_once_vectors: \"pattern_gold\", promoted_repeat_vectors: null,           force_promote_length: 0,    },\n      { key: \"P\", basic_once_vectors: \"pattern_pawn\",       basic_repeat_vectors: null,           promoted_once_vectors: \"pattern_gold\", promoted_repeat_vectors: null,           force_promote_length: 0,    },\n    ]\n  }\n\n  // get brave_p() {\n  //   return this.promoted_repeat_vectors\n  // }\n  //\n  // // get all_vectors(promoted:, location:) {\n  // //   @all_vectors ||= {}\n  // //   @all_vectors[[promoted, location.key]] ||= -> {\n  // //     vectors = __select_vectors(promoted)\n  // //     normalized_vectors(location, vectors)\n  // //   }.call\n  // // }\n  //\n  // // private\n  //\n  // __select_vectors(promoted) {\n  //   // raise MustNotHappen if !piece.promotable? && promoted\n  //\n  //   if (promoted) {\n  //     return this.promoted_vectors\n  //   } else {\n  //     return this.basic_vectors\n  //   }\n  // }\n  //\n  // get piece() {\n  //   Piece.fetch(this.key)\n  // }\n  //\n  // normalized_vectors(location, vectors) {\n  //   if (location.key === \"white\") {\n  //     vectors = vectors.map(e => e.flip_sign)\n  //   }\n  //   return vectors\n  // }\n  //\n  // get basic_vectors() {\n  //   if (this._basic_vectors) { return this._basic_vectors }\n  //   this._basic_vectors = this.build_vectors(this.basic_once_vectors, this.basic_repeat_vectors)\n  //   return this._basic_vectors\n  // }\n  //\n  // get promoted_vectors() {\n  //   if (this._promoted_vectors) { return this._promoted_vectors }\n  //   this._promoted_vectors = this.build_vectors(this.promoted_once_vectors, this.promoted_repeat_vectors)\n  //   return this._promoted_vectors\n  // }\n\n  // get build_vectors(ov, rv) {\n  //   let v = ov.compact + rv.compact\n  //   if (v.size != v.uniq.size) {\n  //     raise MustNotHappen\n  //   }\n  //\n  //   [\n  //       *ov.compact.collect { |v| OnceVector[*v]   },\n  //       *rv.compact.collect { |v| RepeatVector[*v] },\n  //   ].to_set\n  // }\n\n  // get basic_once_vectors()\n  //   return __vectors_at(super)\n  // }\n\n  // get basic_repeat_vectors() {\n  //   return __vectors_at(super)\n  // }\n\n  // get promoted_once_vectors() {\n  // return __vectors_at(super)\n  // }\n\n  // get promoted_repeat_vectors() {\n  //   return __vectors_at(super)\n  // }\n\n  // get __vectors_at(value)\n  //   if value\n  //     if value.kind_of?(Symbol)\n  //       send(value)\n  //     else\n  //       value\n  //     }\n  //   else\n  //     []\n  //   }\n  // }\n\n  static get pattern_plus() {\n    return [\n      null,    [0,-1],   null,\n      [-1, 0],       [1, 0],\n      null,    [0, 1],   null,\n    ]\n  }\n\n  static get pattern_x() {\n    return [\n      [-1, -1], null, [1, -1],\n      null,      null,     null,\n      [-1,  1], null, [1,  1],\n    ]\n  }\n\n  static get pattern_silver() {\n    return [\n      [-1, -1], [0, -1], [1, -1],\n      null,          null,     null,\n      [-1,  1],     null, [1,  1],\n    ]\n  }\n\n  static get pattern_gold() {\n    return [\n      [-1, -1], [0, -1], [1, -1],\n      [-1,  0],          [1,  0],\n      null,      [0,  1],     null,\n    ]\n  }\n\n  static get pattern_king() {\n    return [\n      [-1, -1], [0, -1], [1, -1],\n      [-1,  0],     null, [1,  0],\n      [-1,  1], [0,  1], [1,  1],\n    ]\n  }\n\n  static get pattern_knight() {\n    return [[-1, -2], [1, -2]]\n  }\n\n  static get pattern_pawn() {\n    return [[0, -1]]\n  }\n}\n\nif (process.argv[1] === __filename) {\n  // console.log(Piece.fetch(\"K\"))\n  // console.log(Piece.fetch(\"K\"))\n  // console.log(Piece.lookup(\"\"))\n  // console.log(Piece.values)\n  // console.log(Piece.values_map.get(\"K\"))\n  // console.log(Piece.fetch(\"K\").key)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/piece_vector.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.$parent.current_run_mode === 'edit_mode')?_c('ul',{staticClass:\"piece_box\",class:_vm.piece_box_class,on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.$parent.piece_box_other_click($event)},\"contextmenu\":function($event){$event.preventDefault();return _vm.$parent.hold_cancel($event)}}},_vm._l((_vm.$parent.mediator.piece_box_realize()),function(ref){\nvar piece = ref[0];\nvar count = ref[1];\nreturn _c('li',{class:{holding_p: _vm.$parent.piece_box_have_p(piece)},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.$parent.piece_box_piece_click(piece, $event)},\"mouseover\":function($event){return _vm.$parent.piece_box_mouseover_handle(piece, $event)},\"mouseleave\":_vm.$parent.mouseleave_handle}},[_c('div',{staticClass:\"piece_back\",class:_vm.$parent.piece_box_piece_back_class(piece)},[_c('div',{staticClass:\"piece_fore\",class:_vm.$parent.piece_box_piece_inner_class(piece),domProps:{\"textContent\":_vm._s(piece.name)}})]),(count >= 1)?_c('div',{staticClass:\"piece_count\",class:(\"piece_count\" + count)},[_vm._v(_vm._s(count))]):_vm._e()])}),0):_vm._e()}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-d8d61cb8\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/template-compiler/preprocessor.js?engine=pug!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/PieceBox.vue\n// module id = i2Xt\n// module chunks = 1 2","import _ from 'lodash'\nimport Vue from 'vue'\nimport Soldier from \"./soldier\"\nimport Place from \"./place.js\"\n\nexport default class Board {\n  static get dimension() {\n    return 9\n  }\n\n  static get danger_zone_size() {\n    return 3\n  }\n\n  constructor() {\n    this._surface = {}\n  }\n\n  place_on(soldier) {\n    this.delete_at(soldier.place) // リアクティブにするため「削除」→「追加」とする\n    Vue.set(this._surface, soldier.place.key, soldier)\n  }\n\n  lookup(place) {\n    return this._surface[place.key]\n  }\n\n  delete_at(place) {\n    Vue.delete(this._surface, place.key)\n  }\n\n  clear() {\n    this._surface = {}\n  }\n\n  //////////////////////////////////////////////////////////////////////////////// Utilities\n\n  get soldiers() {\n    return Object.values(this._surface)\n  }\n\n  // soldier を piece にしてその個数をハッシュにして返す\n  get piece_counts_hash() {\n    const counts = {}\n    _.forEach(this.soldiers, e => {\n      counts[e.piece.key] = (counts[e.piece.key] || 0) + 1\n    })\n    return counts\n  }\n\n  get flip_all() {\n    const new_board = new Board()\n    _.forEach(this._surface, (soldier, place) => {\n      const new_soldier = new Soldier(Object.assign({}, soldier.attributes, {\n        location: soldier.location.flip,\n        place: soldier.place.flip_all,\n      }))\n      new_board.place_on(new_soldier)\n    })\n    return new_board\n  }\n\n  // 左右反転\n  get flip_h() {\n    const new_board = new Board()\n    _.forEach(this._surface, (soldier, place) => {\n      const new_soldier = new Soldier(Object.assign({}, soldier.attributes, {\n        location: soldier.location,\n        place: soldier.place.flip_h,\n      }))\n      new_board.place_on(new_soldier)\n    })\n    return new_board\n  }\n\n  // 上下左右ローテイト\n  slide_xy(x, y) {\n    const new_board = new Board()\n    _.forEach(this._surface, (soldier, place) => {\n      const new_soldier = new Soldier(Object.assign({}, soldier.attributes, {\n        location: soldier.location,\n        place: soldier.place.rotate_add(x, y),\n      }))\n      new_board.place_on(new_soldier)\n    })\n    return new_board\n  }\n\n  shuffle_apply(size) {\n    // const new_board = new Board()\n    // _.forEach(this._surface, (soldier, place) => {\n    //   while (true) {\n    //     const nx = _.random(0, size - 1)\n    //     const ny = _.random(0, size - 1)\n    //     const new_place = Place.fetch([nx, ny])\n    //     if (new_board.lookup(new_place)) {\n    //       const new_soldier = new Soldier(Object.assign({}, soldier.attributes, {\n    //         location: soldier.location,\n    //         place: new_place,\n    //       }))\n    //       new_board.place_on(new_soldier)\n    //       break\n    //     }\n    //   }\n    // })\n    // return new_board\n\n    if ((size * size) < this.soldiers.length) {\n      // alert(`再配置するスペースより駒の数の方が多いため処理できません`)\n      return\n    }\n\n    const places = this.all_places(size)\n    const shuffled_places = _.shuffle(places)\n    // console.log(places)\n    // if (places.length < this.soldiers.length) {\n    //   alert(\"空がありません\")\n    //   return\n    // }\n\n    const new_board = new Board()\n    let i = 0\n    _.forEach(this._surface, (soldier, place) => {\n      const new_soldier = new Soldier(Object.assign({}, soldier.attributes, {\n        location: soldier.location,\n        place: shuffled_places[i],\n      }))\n      new_board.place_on(new_soldier)\n      i += 1\n    })\n    return new_board\n  }\n\n  // 単純に右上を原点として size x size のセルの Place オブジェクトの配列を返す\n  all_places(size) {\n    const bx = Board.dimension - size\n    const by = 0\n\n    const places = []\n    for (let y = 0; y < size; y++) {\n      for (let x = 0; x < size; x++) {\n        const place = Place.fetch([bx + x, by + y])\n        // if (!this.lookup(place)) {\n        places.push(place)\n        // }\n      }\n    }\n    return places\n  }\n}\n\nif (process.argv[1] === __filename) {\n  console.log(Board.dimension)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/board.js","import Location from \"../location\"\nimport Place from \"../place\"\nimport shortcut_modal from \"./shortcut_modal.vue\"\n\nexport default {\n  data() {\n    return {\n      mouseover_info: null,    // マウスが hover している物\n      shuffle_mode_p: false,\n    }\n  },\n\n  methods: {\n    shortcut_hook(e) {\n      // w, b で駒台をクリックしたことにする\n      for (const loc of Location.values) {\n        const key = e.key.toLowerCase()\n        if (key === loc.char_key) {\n          this.soldier_hold_unless_holding_p(e)\n          if (this.piece_stand_click_shared(loc, e)) { // 駒台クリック\n            e.preventDefault()\n            return true\n          }\n        }\n      }\n\n      // 駒箱クリック\n      if (this.current_run_mode === \"edit_mode\") {\n        if (e.code === \"Backspace\" || e.code === \"Delete\" || e.key.toLowerCase() === \"t\") {\n          this.soldier_hold_unless_holding_p(e)\n          if (this.piece_box_other_click(e)) {\n            e.preventDefault()\n            return true\n          }\n        }\n      }\n\n      // 移動キャンセル\n      if (e.code === \"Escape\") {\n        if (this.hold_cancel(e)) {\n          e.preventDefault()\n          return true\n        }\n      }\n\n      // 何も持っていない状態 → 持駒に同じ駒があれば持つ\n      // 何か持っている状態   → キャンセル\n      // https://wikiwiki.jp/factorio/%E6%93%8D%E4%BD%9C%E6%96%B9%E6%B3%95\n      if (e.key === \"q\") {\n        // 何か持っている状態ならキャンセルする\n        if (this.holding_p) {\n          if (this.hold_cancel(e)) {\n            e.preventDefault()\n            return true\n          }\n        }\n\n        // 何も持っていない状態なので持駒に同じ駒があれば持つ\n        if (this.mouseover_info) {\n          if (this.mouseover_info.type === \"board\") {\n            const place = Place.fetch(this.mouseover_info.xy)\n            const soldier = this.mediator.board.lookup(place)\n            if (soldier) {\n              this.piece_stand_piece_click(soldier.location, soldier.piece, soldier.promoted, null) // キーボードのイベントなので null 指定\n              e.preventDefault()\n              return true\n            }\n          }\n        }\n      }\n\n      // 反転\n      if (e.key === \"v\" || e.key === \"r\" || e.code === \"Space\") {\n        if (this.mouseover_info) {\n          if (this.mouseover_info.type === \"board\") {\n            this.board_cell_right_click(this.mouseover_info.xy, e)\n            e.preventDefault()\n            return true\n          }\n        }\n      }\n\n      if (this.current_run_mode === \"edit_mode\") {\n        if (e.key === \"?\") {\n          this.shortcut_modal_toggle_handle()\n          e.preventDefault()\n          return true\n        }\n      }\n\n      // 移動\n      if (this.current_run_mode === \"edit_mode\") {\n        if (this.meta_p(e)) {\n          const vector = this.arrow_vector_table[e.key]\n          if (vector) {\n            this.mediator.slide_xy(...vector)\n            e.preventDefault()\n            return true\n          }\n        }\n      }\n\n      if (this.current_run_mode === \"edit_mode\") {\n        if (e.key === \"!\") {\n          this.shuffle_mode_p = !this.shuffle_mode_p\n          if (this.shuffle_mode_p) {\n            this.$buefy.toast.open({message: `盤面シャッフルモード: ON (TAP: 1-9)`, position: \"is-bottom\", queue: false, duration: 1000 * 2, type: \"is-primary\"})\n          } else {\n            this.$buefy.toast.open({message: \"盤面シャッフルモード: OFF\", position: \"is-bottom\", queue: false, duration: 1000 * 0.5})\n          }\n        }\n        if (this.shuffle_mode_p) {\n          if (e.key === \"1\" || e.key === \"2\" || e.key === \"3\" || e.key === \"4\" || e.key === \"5\" || e.key === \"6\" || e.key === \"7\" || e.key === \"8\" || e.key === \"9\") {\n            this.shuffle_run(e.key)\n            e.preventDefault()\n            return true\n          }\n        }\n\n        // if (this.meta_p(e)) {\n        //   const vector = this.arrow_vector_table[e.key]\n        //   if (vector) {\n        //     this.mediator.slide_xy(...vector)\n        //     e.preventDefault()\n        //     return true\n        //   }\n        // }\n      }\n\n      return false\n    },\n\n    board_mouseover_handle(xy, e) {\n      this.mouseover_info = { type: \"board\", xy: xy }\n    },\n\n    piece_stand_mouseover_handle(location, piece, e) {\n      this.mouseover_info = { type: \"piece_stand\", location: location, piece: piece }\n    },\n\n    piece_box_mouseover_handle(piece, e) {\n      this.mouseover_info = { type: \"piece_box\", piece: piece }\n    },\n\n    mouseleave_handle() {\n      this.mouseover_info = null\n    },\n\n    // 盤上にマウスがあって駒を持っていなかったら左クリック\n    soldier_hold_unless_holding_p(e) {\n      if (this.mouseover_info) {                             // 盤上にマウスがあって\n        if (!this.holding_p) {                                // 駒を持っていなかったら\n          if (this.mouseover_info.type === \"board\") {\n            this.board_cell_left_click(this.mouseover_info.xy, e) // 左クリック\n          }\n          if (this.mouseover_info.type === \"piece_stand\") {\n            this.piece_stand_piece_click(this.mouseover_info.location, this.mouseover_info.piece, false, e)\n          }\n          if (this.mouseover_info.type === \"piece_box\") {\n            this.piece_box_piece_click(this.mouseover_info.piece, e)\n          }\n        }\n      }\n    },\n\n    //////////////////////////////////////////////////////////////////////////////// キーボードショートカット modal 表示\n\n    shortcut_modal_toggle_handle() {\n      if (this.shortcut_modal_active_p()) {\n        this.shortcut_modal_close_handle()\n      } else {\n        this.shortcut_modal_show_handle()\n      }\n    },\n    shortcut_modal_show_handle() {\n      this.shortcut_modal_close_handle()\n      if (this.$shortcut_modal) { alert(\"this.$shortcut_modal\") }\n      this.$shortcut_modal = this.$buefy.modal.open({\n        parent: this,\n        hasModalCard: true,\n        props: { },\n        animation: \"\",\n        onCancel: () => { this.shortcut_modal_close_handle() },\n        // fullScreen: true,\n        canCancel: [\"escape\", \"outside\"],\n        component: shortcut_modal,\n        // events: {\n        //   \"close\": () => { alert(\"x\") },\n        // },\n      })\n    },\n    shortcut_modal_close_handle() {\n      if (this.$shortcut_modal) {\n        this.$shortcut_modal.close()\n        this.$shortcut_modal = null\n      }\n    },\n    shortcut_modal_active_p() {\n      return !!this.$shortcut_modal\n    },\n  },\n\n  computed: {\n    arrow_vector_table() {\n      return {\n        \"ArrowRight\": [ 1,  0],\n        \"ArrowLeft\":  [-1,  0],\n        \"ArrowUp\":    [ 0, -1],\n        \"ArrowDown\":  [ 0,  1],\n      }\n    },\n  },\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/shortcut_module.js","import MemoryRecord from \"js-memory-record\"\n\nexport default class Location extends MemoryRecord {\n  static get define() {\n    return [\n      // { key: \"black\", name: '☗', hirate_name: \"先手\", komaochi_name: \"下手\", char_key: \"b\", },\n      // { key: \"white\", name: '☖', hirate_name: \"後手\", komaochi_name: \"上手\", char_key: \"w\", },\n      { key: \"black\", name: '☗', char_key: \"b\", value_sign: +1, },\n      { key: \"white\", name: '☖', char_key: \"w\", value_sign: -1, },\n    ]\n  }\n\n  static cycle_lookup(value) {\n    if (typeof value !== \"number\") {\n      alert(`ArgumentError: ${value}`)\n    }\n    return Location.lookup(Math.abs(value) % Location.values.length)\n  }\n\n  get flip() {\n    return Location.cycle_lookup(this.code + 1)\n  }\n\n  // any_name(komaochi_p) {\n  //   return komaochi_p ? this.komaochi_name : this.hirate_name\n  // }\n\n  advance(value) {\n    return Location.cycle_lookup(this.code + value)\n  }\n}\n\nif (process.argv[1] === __filename) {\n  console.log(Location.cycle_lookup(-1))\n\n  console.log(Location.fetch(\"black\"))\n\n  Location.values.map((e) => {\n    console.log(e)\n  })\n\n  console.log(Location.fetch(\"black\").flip)\n  console.log(Location.fetch(\"white\").flip)\n  // console.log(Location.fetch(\"white\").any_name(false))\n  // console.log(Location.fetch(\"white\").any_name(true))\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/location.js","var normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./CommentArea.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./CommentArea.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3a87a5fb\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./CommentArea.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/CommentArea.vue\n// module id = lujB\n// module chunks = 1 2","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2c5c139b\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"indentedSyntax\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ShogiPlayer.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ShogiPlayer.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ShogiPlayer.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2c5c139b\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/template-compiler/preprocessor?engine=pug!../../node_modules/vue-loader/lib/selector?type=template&index=0!./ShogiPlayer.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/ShogiPlayer.vue\n// module id = oS6v\n// module chunks = 1 2","import XRegExp from \"xregexp\"\nimport assert from \"minimalistic-assert\"\n\nimport ParserBase from \"./parser_base\"\nimport Piece from \"./piece\"\nimport Place from \"./place\"\nimport Location from \"./location\"\nimport SfenParser from \"./sfen_parser\"\n\nexport default class KifParser extends ParserBase {\n  get board() {\n    const sfen_parser = new SfenParser()\n    sfen_parser.kifu_body = \"position startpos\" // TODO: sfen形式の値のテーブルを持って駒落ちに対応する\n    sfen_parser.parse()\n    return sfen_parser.board\n  }\n\n  get location_base() {\n    let key = null\n    const value = this.header[\"手合割\"] || \"平手\"\n    if (value === \"平手\") {\n      key = \"black\"\n    } else {\n      key = \"white\"\n    }\n    return Location.fetch(key)\n  }\n\n  parse() {\n    this.move_infos = []\n    this.comments_pack = {}\n    let before_point = null\n\n    this.kifu_body.split(/\\n/).forEach((line) => {\n      const md = XRegExp.exec(line, this.__kif_format_move_regexp)\n      if (md) {\n        const attrs = {}\n        attrs[\"location\"] = this.location_by_offset(Number(md[\"number\"]) - 1)\n        if (md[\"origin_place\"]) {\n          attrs[\"origin_place\"] = Place.fetch(md[\"origin_place\"])\n        }\n        assert(md[\"to\"] || md[\"same\"])\n        if (md[\"to\"]) {\n          attrs[\"place\"] = Place.fetch(md[\"to\"])\n          before_point = attrs[\"place\"]\n        } else {\n          assert(md[\"same\"])\n          assert(before_point)\n          attrs[\"place\"] = before_point\n        }\n        if (md[\"motion\"] === \"成\") {\n          attrs[\"promoted_trigger\"] = true\n        }\n        if (md[\"motion\"] === \"打\") {\n          attrs[\"drop_piece\"] = Piece.kif_lookup(md[\"piece\"])\n        }\n        this.move_infos.push(attrs)\n      } else {\n        const md = XRegExp.exec(line, XRegExp(\"^\\\\*(?<comment>.*)\"))\n        if (md) {\n          const index = this.move_infos.length\n          this.comments_pack[index] = this.comments_pack[index] || []\n          this.comments_pack[index].push(md[\"comment\"])\n        }\n      }\n    })\n  }\n\n  set move_infos(v) {\n    this._move_infos = v\n  }\n\n  get move_infos() {\n    return this._move_infos || []\n  }\n\n  set comments_pack(v) {\n    this._comments_pack = v\n  }\n\n  get comments_pack() {\n    return this._comments_pack || []\n  }\n\n  get __kif_format_move_regexp() {\n    return XRegExp(`\n        ^\\\\s*(?<number>\\\\d+)\\\\s+\n        (?<to>[１-９1-9一二三四五六七八九]{2})?\n        (?<same>同)?\\\\s*\n        (?<piece>成[銀桂香]|[王玉金銀全桂圭香杏角馬飛龍竜歩と])\n        (?<suffix>[左右直]?[寄引上]?)\n        (?<motion>不?成|打|合|生)?\n        (\\\\((?<origin_place>\\\\d{2})\\\\))? # KIFフォーマットの移動元用\n      `, 'xm')\n  }\n}\n\nif (process.argv[1] === __filename) {\n  const kif_parser = new KifParser()\n//   kif_parser.kifu_body = `\n// # ----  Kifu for Windows V6.26 棋譜ファイル  ----\n// key：value\n// 手数----指手---------消費時間--\n// *コメント0a\n// *コメント0b\n//    1 ７六歩(77)   ( 0:00/00:00:00)\n// *コメント1a\n// *コメント1b\n//    2 ３四歩(33)   ( 0:00/00:00:00)\n//    3 投了         ( 0:00/00:00:00)\n// `\n\n  kif_parser.kifu_body = `\n   1 ２六歩(27)   ( 0:16/00:00:16)\n   2 ３四歩(33)   ( 0:22/00:00:22)\n   3 ７六歩(77)   ( 0:06/00:00:22)\n   4 ８四歩(83)   ( 0:13/00:00:35)\n   5 ２五歩(26)   ( 0:09/00:00:31)\n   6 ８五歩(84)   ( 0:16/00:00:51)\n   7 ７八金(69)   ( 0:04/00:00:35)\n   8 ３二金(41)   ( 0:09/00:01:00)\n   9 ２四歩(25)   ( 0:04/00:00:39)\n  10 同 歩(23)    ( 0:10/00:01:10)\n`\n  kif_parser.parse()\n  // console.log(kif_parser.board)\n  // console.log(kif_parser.location_base)\n  // console.log(kif_parser.hold_pieces)\n  console.log(kif_parser.move_infos)\n  console.log(kif_parser.comments_pack)\n  console.log(kif_parser.init_sfen === undefined)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/kif_parser.js","import MemoryRecord from \"js-memory-record\"\n\nexport default class RunModeInfo extends MemoryRecord {\n  static get define() {\n    return [\n      /* eslint-disable */\n      { key: \"view_mode\", name: \"再生\", },\n      { key: \"play_mode\", name: \"操作\", },\n      { key: \"edit_mode\", name: \"編集\", },\n      /* eslint-enable */\n    ]\n  }\n}\n\nif (process.argv[1] === __filename) {\n  console.log(RunModeInfo.fetch(\"simple\").key)\n  console.log(RunModeInfo.fetch(\"simple\").name)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/run_mode_info.js","<template lang=\"pug\">\n.piece_stand_outer(:class=\"piece_stand_outer_class\" v-if=\"piece_stand_show_flag\")\n  .location_mark_wrap\n    .location_mark(v-html=\"location_name\")\n\n    //- 2桁にして幅を常に予約しておく\n    template(v-if=\"$parent.theme === 'simple'\")\n      template(v-if=\"!$parent.current_vlayout\")\n        .piece_count.piece_count1\n          | 99\n\n    template(v-if=\"$parent.current_vlayout && player_name\")\n      .player_name\n        | {{player_name}}\n\n  template(v-if=\"!$parent.current_vlayout && player_name\")\n    .player_name\n      | {{player_name}}\n\n  ul.piece_stand(:class=\"piece_stand_class\" @click.stop.prevent=\"$parent.piece_stand_click(location, $event)\" @click.right.stop.prevent=\"$parent.hold_cancel\")\n    li(v-for=\"[piece, count] in hold_pieces\" @click.stop=\"$parent.piece_stand_piece_click(location, piece, false, $event)\" @mouseover=\"$parent.piece_stand_mouseover_handle(location, piece, $event)\" @mouseleave=\"$parent.mouseleave_handle\")\n      .piece_back(:class=\"piece_back_class(piece)\")\n        .piece_fore(:class=\"piece_fore_class(piece)\")\n          | {{piece.name}}\n      .piece_count(v-if=\"count >= 1\" :class=\"`piece_count${count}`\")\n        | {{count}}\n\n</template>\n\n<script>\nimport Location from \"../location\"\nimport _ from \"lodash\"\n\nexport default {\n  props: {\n    location_key: { required: true },\n    hold_pieces: { required: true },\n  },\n\n  methods: {\n    hold_piece_holding_p(piece) {\n      return this.$parent.have_piece_location === this.location && this.$parent.have_piece === piece\n    },\n\n    piece_back_class(piece) {\n      let list = []\n\n      // if (this.holding_p) {\n      //   list.push(\"hoverable_p\")\n      // }\n\n      if (this.hold_piece_holding_p(piece)) {\n        list.push(\"holding_p\")\n      } else if (this.$parent.current_run_mode === \"edit_mode\" || (!this.$parent.cpu_location_p && this.$parent.mediator.current_location === this.location)) {\n        if (!this.holding_p) {\n          list.push(\"selectable_p\")\n        }\n      }\n\n      // list = _.concat(list, piece.css_class_list)\n      // list.push(`location_${this.location.key}`)\n      // list.push(\"promoted_false\")\n\n      return list\n    },\n\n    piece_fore_class(piece) {\n      let list = []\n      list = _.concat(list, piece.css_class_list)\n      list.push(`location_${this.location.key}`)\n      list.push(\"promoted_false\")\n      return list\n    },\n  },\n\n  computed: {\n    holding_p() {\n      return this.$parent.holding_p\n    },\n\n    location() {\n      return Location.fetch(this.location_key)\n    },\n\n    piece_stand_outer_class() {\n      const list = []\n\n      list.push(`location_${this.location.key}`)\n      list.push(this.$parent.env)\n      if (this.$parent.mediator.current_location === this.location) {\n        list.push(\"turn_active\")\n      }\n      return list\n    },\n\n    location_name() {\n      // if (this.location.key === \"white\") {\n      //   return '<span style=\"color:white\">☗</span>'\n      // } else {\n      return this.location.name\n      // }\n    },\n\n    piece_stand_class() {\n      const list = []\n\n      if (this.holding_p) {\n        list.push(\"hoverable_p\")\n      }\n\n      return list\n    },\n\n    // ビューモードのとき持駒が空なら駒台を表示しない\n    piece_stand_show_flag() {\n      if (this.$parent.current_run_mode === \"view_mode\" && this.$parent.hidden_if_piece_stand_blank && _.isEmpty(this.hold_pieces)) {\n        return false\n      }\n      return true\n    },\n\n    player_name() {\n      if (this.player_info) {\n        return this.player_info[this.location.key].name\n      }\n    },\n\n    player_info() {\n      return this.$parent.player_info\n    },\n  },\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/components/PieceStand.vue","import AnyFuncInfo from \"../any_func_info\"\nimport Board from \"../board\"\n\nexport default {\n  /* eslint-disable */\n  props: {\n  },\n  /* eslint-enable */\n\n  data() {\n    return {\n      any_func_key: null, // 常に選択してないことにしたくて v-model にして設定して any_func_key 変更のタイミングで null に再設定したけど選択してないことにはできなかったのでこれ意味ない\n    }\n  },\n\n  methods: {\n    any_func_click_handle(any_func_info) {\n      any_func_info.func(this)\n    },\n\n    shuffle_dialog_open() {\n      this.shuffle_mode_p = false // 数字が入力できないため OFF にする\n\n      this.$buefy.dialog.prompt({\n        message: \"寸法の一辺のサイズを指定してください\",\n        confirmText: \"実行\",\n        cancelText: \"キャンセル\",\n        inputAttrs: { type: \"number\", value: 4, min: 1, max: Board.dimension},\n        trapFocus: true,\n        onConfirm: e => this.shuffle_run(e),\n      })\n    },\n\n    shuffle_run(size) {\n      size = parseInt(size)\n      if (!this.mediator.shuffle_apply(size)) {\n        this.$buefy.toast.open({message: `${size} x ${size} が盤上の駒の数より少ないため何もしませんでした`, position: \"is-bottom\", queue: false, duration: 1000 * 2.0, type: \"is-warning\"})\n      }\n    },\n  },\n\n  computed: {\n    AnyFuncInfo() { return AnyFuncInfo },\n  },\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/any_func_module.js","import XRegExp from \"xregexp\"\nimport Vue from \"vue\"\nimport _ from \"lodash\"\n\nimport Board from \"./board\"\nimport ParserBase from \"./parser_base\"\nimport Piece from \"./piece\"\nimport Place from \"./place\"\nimport Soldier from \"./soldier\"\nimport Location from \"./location\"\n\nexport default class SfenParser extends ParserBase {\n  static parse(kifu_body) {\n    const object = new this(kifu_body)\n    object.parse()\n    return object\n  }\n\n  parse() {\n    this.kifu_body = this.kifu_body.replace(/startpos/, \"sfen lnsgkgsnl/1r5b1/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL b - 1\")\n    const regex = XRegExp(\"sfen\\\\s+(?<board>\\\\S+)\\\\s+(?<b_or_w>\\\\S+)\\\\s+(?<hold_pieces>\\\\S+)\\\\s+(?<turn_counter_next>\\\\d+)(\\\\s+moves\\\\s+(?<moves>.*))?\")\n    this.attributes = XRegExp.exec(this.kifu_body, regex)\n    if (process.env.NODE_ENV === \"deveopment\") {\n      console.log(this.attributes)\n    }\n  }\n\n  get board() {\n    const board = new Board()\n    this.attributes[\"board\"].split(\"/\").forEach((e, y) => {\n      let x = 0\n      XRegExp.forEach(e, XRegExp(\"(?<promoted>\\\\+?)(?<piece>\\\\S)\"), (m, i) => {\n        if (/\\d+/.test(m.piece)) {\n          x += Number(m.piece)\n        } else {\n          const soldier = new Soldier({\n            place: new Place([x, y]),\n            piece: Piece.fetch(m.piece),\n            promoted: (m.promoted === \"+\"),\n            location: this.__location_by_upper_or_lower_case(m.piece),\n          })\n          board.place_on(soldier)\n          x++\n        }\n      })\n    })\n    return board\n  }\n\n  get location_base() {\n    let key = null\n    if (this.attributes[\"b_or_w\"] === \"b\") {\n      key = \"black\"\n    } else {\n      key = \"white\"\n    }\n    return Location.fetch(key)\n  }\n\n  get hold_pieces() {\n    const _hold_pieces = super.hold_pieces\n    if (this.attributes[\"hold_pieces\"] !== \"-\") {\n      XRegExp.forEach(this.attributes[\"hold_pieces\"], XRegExp(\"(?<count>\\\\d+)?(?<piece_char>\\\\S)\"), (md, i) => {\n        const piece = Piece.fetch(md.piece_char)\n        let count = Number(md.count || 1)\n        const location = this.__location_by_upper_or_lower_case(md.piece_char)\n        count += _hold_pieces[location.key][piece.key] || 0\n        Vue.set(_hold_pieces[location.key], piece.key, count)\n      })\n    }\n    return _hold_pieces\n  }\n\n  // sfen_serializer 用\n  get turn_base() {\n    return Number(this.attributes[\"turn_counter_next\"]) - 1\n  }\n\n  // \"b - 1\" なら 0\n  // \"w - 2\" なら 1\n  // \"b - 3\" なら 2\n  // get turn_offset_min() {\n  //   // return Number(this.attributes[\"turn_counter_next\"]) - 1\n  //   // return Number(this.attributes[\"turn_counter_next\"]) - 1\n  // }\n\n  // // \"b - 1\" -> turn_offset_min:0 % 2 -> 0 && w\n  // // \"w - 2\" -> turn_offset_min:1 % 2 -> 1 && w\n  // // \"b - 3\" -> turn_offset_min:2 % 2 -> 0 && w\n  // // \"w - 1\" -> turn_offset_min:0 % 2 -> 0 && w -> true\n  // // \"b - 2\" -> turn_offset_min:1 % 2 -> 1 && w\n  // // \"w - 3\" -> turn_offset_min:2 % 2 -> 0 && w -> true\n  // get komaochi_p() {\n  //   return (this.turn_offset_min % 2) === 0 && this.location_base.key === \"white\"\n  // }\n\n  get move_infos() {\n    // this.moves.map((e, i) => { としたかったが break できないため lodash の forEach に変更。lodash のは false で break できる\n    const ary = []\n    _.forEach(this.moves, (e, i) => {\n      const attrs = {}\n      // if (true) {\n      //   attrs[\"scene_index\"] = this.turn_offset_min + i\n      //   attrs[\"scene_offset\"] = i\n      // }\n      attrs[\"location\"] = this.location_base.advance(i)\n      const md = XRegExp.exec(e, XRegExp(\"(?<origin_x>\\\\S)(?<origin_y>\\\\S)(?<pos_x>\\\\S)(?<pos_y>\\\\S)(?<promoted>\\\\+?)?\"))\n      if (!md) {\n        return false            // break\n      }\n      attrs[\"promoted_trigger\"] = (md.promoted === \"+\")\n      if (md[\"origin_y\"] === \"*\") {\n        attrs[\"drop_piece\"] = Piece.fetch(md[\"origin_x\"])\n      } else {\n        attrs[\"origin_place\"] = Place.fetch(`${md[\"origin_x\"]}${md[\"origin_y\"]}`)\n      }\n      attrs[\"place\"] = Place.fetch(`${md[\"pos_x\"]}${md[\"pos_y\"]}`)\n      ary.push(attrs)\n    })\n    return ary\n  }\n\n  get moves() {\n    let moves = this.attributes[\"moves\"]\n    if (_.isNil(moves) || moves === \"\") {\n      return []\n    }\n    return moves.split(/\\s+/)\n  }\n\n  // 最初の局面\n  get init_sfen() {\n    const parts = []\n    parts.push(\"position\")\n    parts.push(\"sfen\")\n    parts.push(this.init_sfen_strip)\n    return parts.join(\" \")\n  }\n\n  // 最初の局面(position sfenなし)\n  get init_sfen_strip() {\n    const parts = []\n    parts.push(this.attributes[\"board\"])\n    parts.push(this.attributes[\"b_or_w\"])\n    parts.push(this.attributes[\"hold_pieces\"])\n    parts.push(this.attributes[\"turn_counter_next\"])\n    return parts.join(\" \")\n  }\n\n  __location_by_upper_or_lower_case(v) {\n    let key = null\n    if (/[A-Z]/.test(v)) {\n      key = \"black\"\n    } else {\n      key = \"white\"\n    }\n    return Location.fetch(key)\n  }\n}\n\nif (process.argv[1] === __filename) {\n  let sfen_parser\n\n  sfen_parser = SfenParser.parse(\"position sfen +lnsgkgsnl/1r5b1/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL b S2s 1 moves 7i6h S*2d\")\n  console.log(sfen_parser)\n\n  sfen_parser = SfenParser.parse(\"position sfen +lnsgkgsnl/1r5b1/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL b S2s 1 moves 7i6h S*2d\")\n  console.log(sfen_parser)\n\n  // sfen_parser = new SfenParser(\"position sfen +lnsgkgsnl/1r5b1/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL b S2s 1 moves 7i6h S*2d\")\n  // sfen_parser.parse()\n  // console.log(sfen_parser.board)\n  // console.log(sfen_parser.location_base.key)\n  // console.log(sfen_parser.hold_pieces)\n  // console.log(sfen_parser.move_infos)\n  // console.log(sfen_parser.moves)\n  // console.log(sfen_parser.init_sfen)\n  //\n  // sfen_parser = new SfenParser(\"position sfen lr4knl/3g2gs1/4ppP2/p4bNpp/2pSsN3/PPPP1P2P/2N1P1G2/2G6/L1K4RL w BPs3p 72 moves 2b3c\")\n  // sfen_parser.parse()\n  // console.log(sfen_parser.location_by_offset(0))\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/sfen_parser.js","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-c193ca80\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"indentedSyntax\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./shortcut_modal.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./shortcut_modal.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./shortcut_modal.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-c193ca80\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/template-compiler/preprocessor?engine=pug!../../node_modules/vue-loader/lib/selector?type=template&index=0!./shortcut_modal.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/shortcut_modal.vue\n// module id = xGbI\n// module chunks = 1 2","import _ from \"lodash\"\n\nimport Place from \"../place\"\nimport Board from \"../board\"\nimport PieceVector from \"../piece_vector.js\"\nimport Soldier from \"../soldier\"\nimport Location from \"../location\"\n\nconst PLAY_MODE_LEGAL_MOVE_ONLY = true // play-mode で合法手のみに絞る\nconst AUTO_PROMOTE              = true // 死に駒になるときは自動的に成る\nconst NOT_PUT_IF_DEATH_SOLDIER  = true // 死に駒になるときは置けないようにする\nconst DOUBLE_CLICK_TIME = 350\n\nexport default {\n  /* eslint-disable */\n  props: {\n  },\n  /* eslint-enable */\n\n  data() {\n    return {\n      // |------------------------+------------+------------+---------------------|\n      // | どこの駒を持ち上げた？ | place_from | have_piece | have_piece_location |\n      // |------------------------+------------+------------+---------------------|\n      // | 盤上                   | ○         |            | ○                  |\n      // | 駒台                   |            | ○         | ○                  |\n      // | 駒箱                   |            | ○         |                     |\n      // |------------------------+------------+------------+---------------------|\n      place_from: null,           // 盤上ら動かそうとしているときの元位置\n      have_piece: null,           // 駒台 or 駒箱から持った駒\n      have_piece_location: null,  // 駒台から持ったときだけ先後が入っている。駒箱から取り出しているときは null\n      have_piece_promoted: null,    // 持ったとき成った状態にするか？\n\n      // プレフィクスに_をつけるとVueに監視されない\n      me_running_p: false,        // mousemove イベント緩和用\n      $me_last_event: null,        // mousemove イベント\n\n      cursor_elem_in_board_container: true,\n\n      $cursor_elem: null,        // 持ちあげている駒のDOM\n      mouse_stick: false,       // 持ち上げている駒をマウスに追随させるか？\n      dialog_p: false,          // 成り確認ダイアログ表示中か？\n\n      $double_tap_time: null,   // ダブルクリック判定用\n    }\n  },\n\n  watch: {\n    current_run_mode() {\n      this.state_reset() // モードが切り替わったときに持ち上げた駒を元に戻す(こうしないとカーソルから駒が離れない)\n    },\n  },\n\n  beforeDestroy() {\n    this.virtual_piece_destroy()\n  },\n\n  methods: {\n    // 盤を押した瞬間\n    board_cell_pointerdown_handle(xy, e) {\n      const place = Place.fetch(xy)\n      const handle = this.board_cell_pointerdown_user_handle\n      if (handle) {\n        if (handle(place, e)) {\n          return\n        }\n      }\n    },\n\n    // 盤をクリック\n    board_cell_left_click(xy, e) {\n      this.log(\"board_cell_left_click\")\n      this.log(`shiftKey: ${e.shiftKey}`)\n\n      const place = Place.fetch(xy)\n\n      const handle = this.board_cell_left_click_user_handle\n      if (handle) {\n        this.log(`ユーザー指定のクリックハンドル実行: ${place.human_digits}`)\n        if (handle(place, e)) {\n          return\n        }\n      }\n\n      if (this.if_view_mode_break) {\n        return\n      }\n\n      // 移動後の取れる駒\n      const soldier = this.mediator.board.lookup(place)\n\n      // 移動後の駒\n      let new_soldier = null\n      let promotable_p = null\n      if (this.origin_soldier1) {\n        new_soldier = new Soldier({\n          piece: this.origin_soldier1.piece,\n          place: place,\n          promoted: this.origin_soldier1.promoted,\n          location: this.origin_soldier1.location,\n        })\n        // 入って成る？ それとも出てなる？\n        promotable_p = new_soldier.promotable_p || this.origin_soldier1.promotable_p\n      }\n\n      // -------------------------------------------------------------------------------- Validation\n\n      if (this.cpu_location_p) {\n        this.log(\"片方の手番だけを操作できるようにする human_side_key の指定があってCPU側なので無効とする\")\n        return\n      }\n\n      if (this.current_run_mode === \"play_mode\" && !this.holding_p && soldier && soldier.location !== this.mediator.current_location) {\n        this.log(\"自分の手番で相手の駒を持ち上げようとしたので無効とする\")\n        return\n      }\n\n      if (this.current_run_mode === \"play_mode\" && this.have_piece && soldier) {\n        this.log(\"駒台や駒箱から持ち上げた駒を盤上の駒の上に置こうとしたので無効とする\")\n        return\n      }\n\n      if (NOT_PUT_IF_DEATH_SOLDIER && this.current_run_mode === \"play_mode\" && this.have_piece && !soldier) {\n        const new_soldier = this.soldier_create_from_stand_or_box_on(place)\n        const force_promote_length = new_soldier.piece.piece_vector.force_promote_length // 死に駒になる上の隙間\n        if (force_promote_length != null) {                                              // チェックしない場合は null\n          if (new_soldier.top_spaces <= force_promote_length) {                          // 実際の上の隙間 <= 死に駒になる上の隙間\n            this.log(\"駒台や駒箱から持ち上げた駒を置こうとしたけど死に駒なので無効とする\")\n            return\n          }\n        }\n      }\n\n      if (!this.holding_p && !soldier) {\n        this.log(\"持たずに何もないところをクリックしたので無効とする\")\n        return\n      }\n\n      if (this.current_run_mode === \"play_mode\" && this.put_on_my_soldier_p(soldier)) {\n        this.log(\"自分の駒の上に駒を重ねようとしたので無効とする(盤上の移動元の駒を含まない)\")\n        // this.state_reset() // ←元の位置に戻す場合\n        return\n      }\n\n      // ダブルタップで裏返すとシングルクリックの遅延がすさまじいことになるためダブルタップは使ってはいけない\n      if (this.current_run_mode === \"edit_mode\") {\n        const old = this.$double_tap_time\n        this.$double_tap_time = Date.now()\n        if (soldier) {\n          if (_.isEqual(this.place_from, place)) { // この処理をスキップすると3連打で2回反転できるが誤操作が頻発するのでやめ\n            if (old) {\n              const gap = this.$double_tap_time - old\n              const enable = gap < DOUBLE_CLICK_TIME\n              this.log(`ダブルクリック判定: (${gap} ms < ${DOUBLE_CLICK_TIME}) -> ${enable}`)\n              if (enable) {\n                this.log(`操作モードで盤上の駒を持って同じ位置に戻したときに盤上の駒を裏返す`)\n                this.mediator.board.place_on(soldier.piece_transform)\n                this.pice_hold_and_put_for_bug(place, e) // 不具合対策\n                return\n              }\n            }\n          }\n        }\n      }\n\n      if (_.isEqual(this.place_from, place)) {\n        this.log(\"盤上の駒を持って同じ位置に戻したので状況キャンセル\")\n        this.state_reset()\n        return\n      }\n\n      // --------------------------------------------------------------------------------\n\n      if (this.current_run_mode === \"edit_mode\") {\n        this.log(`holding_p: ${this.holding_p}`)\n        if (this.meta_p(e)) {\n          if (!this.holding_p && soldier) { // 持ってなくて、駒がある\n            this.log(\"盤上の駒を裏返す\")\n            this.mediator.board.place_on(soldier.piece_transform)\n            this.pice_hold_and_put_for_bug(place, e) // 不具合対策\n            return\n          }\n        }\n      }\n\n      // 盤上の駒を持ちあげる\n      if (!this.holding_p) {\n        this.log(\"盤上の駒を持ちあげる\")\n        this.soldier_hold(place, e)\n        return\n      }\n\n      // 盤上から移動させようとしたとき合法手以外は指せないようにする\n      if (PLAY_MODE_LEGAL_MOVE_ONLY && this.current_run_mode === \"play_mode\" && this.place_from) {\n        const piece_vector = PieceVector.fetch(this.origin_soldier1.piece.key)\n        const ox = this.place_from.x\n        const oy = this.place_from.y\n\n        let method_key = null\n        let found = false\n\n        // 1つだけ動ける系\n        if (!found) {\n          if (this.origin_soldier1.promoted) {\n            method_key = piece_vector.promoted_once_vectors\n          } else {\n            method_key = piece_vector.basic_once_vectors\n          }\n          const vectors = PieceVector[method_key]\n          if (vectors) {\n            found = vectors.some(e => {\n              if (e) {\n                const vx = e[0]\n                const vy = e[1] * this.origin_soldier1.location.value_sign\n                const x = ox + vx\n                const y = oy + vy\n                return x === place.x && y === place.y\n              }\n            })\n          }\n        }\n\n        //\n        if (!found) {\n          if (this.origin_soldier1.promoted) {\n            method_key = piece_vector.promoted_repeat_vectors\n          } else {\n            method_key = piece_vector.basic_repeat_vectors\n          }\n          const vectors = PieceVector[method_key]\n          if (vectors) {\n            found = vectors.some(e => {\n              if (e) {\n                const vx = e[0]\n                const vy = e[1] * this.origin_soldier1.location.value_sign\n\n                let x = ox + vx\n                let y = oy + vy\n\n                while (true) {\n                  if (!Place.xy_valid_p(x, y)) {\n                    break\n                  }\n                  if (x === place.x && y === place.y) {\n                    return true\n                  }\n                  const next_place = Place.fetch([x, y])\n                  const next_soldier = this.mediator.board.lookup(next_place)\n                  if (next_soldier) {\n                    break\n                  }\n                  x += vx\n                  y += vy\n                }\n              }\n            })\n          }\n        }\n\n        if (!found) {\n          return\n        }\n      }\n\n      // 盤上から移動\n      if (this.place_from) {\n        this.log(\"盤上から移動\")\n        if (soldier) {\n          this.mediator.hold_pieces_add(this.origin_soldier1.location, soldier.piece) // 相手の駒があれば取る\n          // this.$forceUpdate()\n        }\n\n        if (this.current_run_mode === \"play_mode\" && promotable_p) { // 入って成る or 出て成る\n\n          let must_dialog = true\n          if (AUTO_PROMOTE) {\n            const force_promote_length = new_soldier.piece.piece_vector.force_promote_length // 死に駒になる上の隙間\n            if (force_promote_length != null) {                                              // チェックしない場合は null\n              if (new_soldier.top_spaces <= force_promote_length) {                          // 実際の上の隙間 <= 死に駒になる上の隙間\n                this.promotable_piece_moved(new_soldier, true)                               // 死に駒になるなら自動的に成る\n                must_dialog = false                                                          // ダイアログを表示する必要はなくなった\n              }\n            }\n          }\n\n          if (must_dialog) {\n            this.mouse_stick = false // ダイアログ選択時時は動かしている駒を止める\n            this.dialog_p = true\n            this.$buefy.dialog.confirm({\n              message: '成りますか？',\n              confirmText: '成る',\n              cancelText: '成らない',\n              onConfirm: () => { this.promotable_piece_moved(new_soldier, true)  },\n              onCancel:  () => { this.promotable_piece_moved(new_soldier, false) },\n            })\n          }\n        } else {\n          if (this.current_run_mode === \"play_mode\") {\n            this.moves_set(this.origin_soldier1.place.to_sfen + place.to_sfen) // 7g7f\n          }\n          this.mediator.board.place_on(new_soldier) // 置く\n          this.mediator.board.delete_at(this.place_from)\n          this.state_reset()\n          this.turn_next()\n        }\n\n        return\n      }\n\n      // 持駒を置く\n      if (this.have_piece) {\n        this.log(\"持駒を置く\")\n\n        // 駒の上に置いた場合は取る\n        if (soldier) {\n          if (this.have_piece_location) {\n            // have_piece_location の駒台から移動した駒で取ったので have_piece_location の方に置く\n            this.mediator.hold_pieces_add(this.have_piece_location, soldier.piece)\n          } else {\n            // 駒箱から移動した駒で取ったので soldier.location に返すとする場合\n            if (false) {\n              this.mediator.hold_pieces_add(soldier.location, soldier.piece)\n            } else {\n              // 駒の向きは先手と同じなのでわかりやすいように 先手に返す\n              this.mediator.hold_pieces_add(Location.fetch(\"black\"), soldier.piece)\n            }\n          }\n        }\n\n        const new_soldier = this.soldier_create_from_stand_or_box_on(place)\n        this.piece_decriment()\n        this.mediator.board.place_on(new_soldier) // 置く\n        this.moves_set(new_soldier.piece.key + \"*\" + place.to_sfen) // P*7g\n        this.state_reset()\n        this.turn_next()\n        return\n      }\n\n      throw new Error(\"must not happen\")\n    },\n\n    // board_cell_left_dblclick(xy, e) {\n    //   if (this.if_view_mode_break) {\n    //     return\n    //   }\n    //\n    //   const place = Place.fetch(xy)\n    //   const soldier = this.mediator.board.lookup(place)\n    //\n    //   if (this.current_run_mode === \"edit_mode\") {\n    //     if (!this.holding_p) {\n    //       if (soldier) {\n    //         this.log(\"操作モードでダブルタップしたので裏返す\")\n    //         // this.mediator.board.place_on(soldier.piece_transform)\n    //         // this.pice_hold_and_put_for_bug(place, e) // 不具合対策\n    //         return\n    //       }\n    //     }\n    //   }\n    //\n    //   return \"eslint対策のreturn\"\n    // },\n\n    // 成れる状態の駒をどうするか\n    promotable_piece_moved(new_soldier, promoted) {\n      this.dialog_p = false\n\n      this.$set(new_soldier, \"promoted\", promoted)\n\n      this.moves_set(this.origin_soldier1.place.to_sfen + new_soldier.place.to_sfen + (new_soldier.promoted ? \"+\" : \"\")) // 7g7f+\n      this.mediator.board.place_on(new_soldier) // 置く\n      this.mediator.board.delete_at(this.place_from)\n      this.state_reset()\n      this.turn_next()\n    },\n\n    board_cell_right_click(xy, e) {\n      this.log(\"盤のセルを右クリック\")\n\n      if (this.if_view_mode_break) {\n        return\n      }\n\n      const place = Place.fetch(xy)\n      const soldier = this.mediator.board.lookup(place)\n\n      if (this.hold_cancel(e)) {\n        return\n      }\n\n      if (this.current_run_mode === \"edit_mode\") {\n        if (!this.holding_p && soldier) {\n          this.log(\"盤上の駒を裏返す\")\n          this.mediator.board.place_on(soldier.piece_transform)\n          this.pice_hold_and_put_for_bug(place, e) // 不具合対策\n        }\n      }\n    },\n\n    // board_cell_right_click2(xy, e) {\n    //   this.log(\"盤のセルを右クリック\")\n    //\n    //   if (this.if_view_mode_break) {\n    //     return\n    //   }\n    //\n    //   const place = Place.fetch(xy)\n    //   const soldier = this.mediator.board.lookup(place)\n    //\n    //   if (this.hold_cancel(e)) {\n    //     return\n    //   }\n    //\n    //   if (this.current_run_mode === \"edit_mode\") {\n    //     if (!this.holding_p && soldier) {\n    //       this.log(\"盤上の駒を裏返す\")\n    //       this.mediator.board.place_on(soldier.piece_transform)\n    //       this.pice_hold_and_put_for_bug(place, e) // 不具合対策\n    //     }\n    //   }\n    // },\n\n    // 駒台 or 駒台の駒をクリックしたときの共通処理\n    piece_stand_click_shared(location, e) {\n      if (this.have_piece_location === location && this.have_piece) {\n        this.log(\"自分の駒台から駒を持ち上げているならキャンセル\")\n        this.state_reset()\n        return true\n      }\n\n      // 相手の駒台から自分の駒台、または駒箱から自分の駒台へ移動\n      if (this.current_run_mode === \"edit_mode\") {\n        // if (this.have_piece_location !== location && this.have_piece) {\n        if (this.have_piece) {\n          // 相手の持駒を自分の駒台に移動\n          this.hold_pieces_move_to_my_hold_pieces(e, location)\n          return true\n        }\n      }\n\n      if (this.current_run_mode === \"play_mode\") {\n        if (this.origin_soldier1) {\n          this.log(\"play_mode では盤上の駒を駒台に置くことはできない\")\n          return true\n        }\n      }\n\n      // 盤上の駒を駒台に置く\n      if (this.origin_soldier1) {\n        this.log(\"盤上の駒を駒台に置く\")\n        this.board_soldir_to_hold_pieces(location)\n        return true\n      }\n\n      return false\n    },\n\n    // 駒台クリック\n    piece_stand_click(location, e) {\n      this.piece_stand_click_shared(location, e)\n    },\n\n    // 駒台の駒をクリック\n    piece_stand_piece_click(location, piece, have_piece_promoted, e) {\n      this.log(\"駒台の駒をクリック\")\n\n      if (this.piece_stand_click_shared(location, e)) {\n        return\n      }\n\n      // クリックしたけど持駒がない\n      if (this.mediator.hold_pieces_count(location, piece) <= 0) {\n        this.log(\"クリックしたけど持駒がない\")\n        return\n      }\n\n      // 相手の持駒を持とうとしたときは無効\n      if (this.current_run_mode === \"play_mode\" && location !== this.mediator.current_location) {\n        this.log(\"相手の持駒を持とうとしたときは無効\")\n        return\n      }\n\n      if (this.cpu_location_p) {\n        this.log(\"片方の手番だけを操作できるようにする human_side_key の指定があってCPU側なので無効とする\")\n        return\n      }\n\n      this.log(\"駒台の駒を持つ\")\n      this.have_piece = piece\n      this.have_piece_location = location\n      this.have_piece_promoted = have_piece_promoted\n      this.virtual_piece_create(e, this.origin_soldier2)\n    },\n\n    // 駒箱の駒を持ち上げている？\n    piece_box_have_p(piece) {\n      return _.isNil(this.have_piece_location) && this.have_piece === piece\n    },\n\n    // FIXME: 駒を持っているときは「駒箱の駒」に対して一切反応しないようにしたい。そうすると駒箱だけの判定で済む\n    piece_box_other_click(e) {\n      this.log(\"piece_box_other_click:駒箱クリック\")\n\n      if (_.isNil(this.have_piece_location) && this.have_piece) {\n        this.log(\"持っているならキャンセル\")\n        this.state_reset()\n        return true\n      }\n\n      if (this.have_piece_location && this.have_piece) {\n        this.log(\"駒台から駒箱に移動\")\n        const count = this.hold_piece_source_cut(e)               // 相手の持駒を減らして減らした分だけ\n        this.mediator.piece_box_add(this.have_piece, count) // 駒箱に加算する\n        this.state_reset()\n        return true\n      }\n\n      if (this.origin_soldier1) {\n        this.log(\"盤上の駒を駒箱に移動\")\n        this.mediator.piece_box_add(this.origin_soldier1.piece)\n        this.mediator.board.delete_at(this.origin_soldier1.place)\n        this.state_reset()\n        return true\n      }\n\n      return false\n    },\n\n    // 駒箱の駒をクリック\n    piece_box_piece_click(piece, e) {\n      // 駒をクリックしたとき駒箱をクリックするのと同じ処理を実行\n      if (this.piece_box_other_click(e)) {\n        return\n      }\n\n      this.log(\"piece_box_piece_click:駒箱の駒を持つ\")\n      this.have_piece = piece\n      this.have_piece_location = null\n      this.have_piece_promoted = false\n      this.virtual_piece_create(e, this.origin_soldier2)\n    },\n\n    // FIXME: click_hook のところだけで行いたい\n    // 成り選択ダイアログ表示中に Escape でこれが呼ばれるので dialog_p のときは実行しない\n    hold_cancel(e) {\n      if (!this.dialog_p) {\n        if (this.holding_p) {\n          this.log(\"持ち上げた駒を元に戻す\")\n          this.state_reset()\n          return true\n        }\n      }\n\n      return false\n    },\n\n    // 盤上の駒を駒台に置く\n    board_soldir_to_hold_pieces(location) {\n      this.mediator.hold_pieces_add(location, this.origin_soldier1.piece) // 駒台にプラス\n      this.mediator.board.delete_at(this.origin_soldier1.place)\n      this.state_reset()\n    },\n\n    hold_pieces_move_to_my_hold_pieces(e, location) {\n      this.log(\"相手の持駒を自分の駒台に移動\")\n      const count = this.hold_piece_source_cut(e)                           // 相手の持駒を減らして減らした分だけ\n      this.mediator.hold_pieces_add(location, this.have_piece, count) // 自分に加算する\n      this.state_reset()\n    },\n\n    // 持ち上げている駒を元の場所から減らす\n    hold_piece_source_cut(e) {\n      let count = 1\n\n      if (this.have_piece_location) {\n        this.log(\"相手の駒箱から移動\")\n        if (this.meta_p(e)) {\n          this.log(\"シフトが押されていたので全部移動\")\n          count = this.mediator.hold_pieces_count(this.have_piece_location, this.have_piece)\n        }\n        count = this.mediator.hold_pieces_can_be_reduced_count(this.have_piece_location, this.have_piece, count)\n        this.mediator.hold_pieces_add(this.have_piece_location, this.have_piece, -count)\n      } else {\n        this.log(\"駒箱から移動\")\n        if (this.meta_p(e)) {\n          this.log(\"シフトが押されていたので全部移動\")\n          count = this.mediator.piece_box_count(this.have_piece)\n        }\n        count = this.mediator.piece_box_can_be_reduced_count(this.have_piece, count) // 減らせる数を clamp する。そうしないと駒箱から移動するときに駒が増えいく\n        this.mediator.piece_box_add(this.have_piece, -count)\n      }\n\n      // 実際に減らせれた数を返す(重要)\n      return count\n    },\n\n    // 駒を1つ減らす\n    piece_decriment() {\n      if (this.have_piece_location) {\n        this.mediator.hold_pieces_add(this.have_piece_location, this.have_piece, -1)\n      } else {\n        this.mediator.piece_box_add(this.have_piece, -1)\n      }\n    },\n\n    // 自分の駒の上に重ねた？ (移動元にある駒を含まない)\n    put_on_my_soldier_p(soldier) {\n      if (this.holding_p) {\n        if (soldier && soldier.location === this.mediator.current_location) {\n          if (_.isEqual(this.place_from, soldier.place)) {\n          } else {\n            return true\n          }\n        }\n      }\n    },\n\n    // 盤面の駒を持ち上げる\n    soldier_hold(place, e) {\n      this.place_from = place\n      this.virtual_piece_create(e, this.origin_soldier1)\n    },\n\n    // 駒を持ってない状態にする\n    state_reset() {\n      if (this.dialog_p) {\n        alert(\"ダイアログ表示中に state_reset が呼ばれてはいけない\")\n      }\n      this.log(\"state_reset\")\n      this.place_from = null // 持ってない状態にする\n      this.have_piece = null\n      this.have_piece_location = null\n      this.have_piece_promoted = null\n      this.virtual_piece_destroy()\n    },\n\n    // 駒を持つ → そのまま置く\n    // これは Vue がリアクティブにならない対策として入れているのでできれば外したい\n    pice_hold_and_put_for_bug(place, e) {\n      // this.soldier_hold(place, e)\n      this.state_reset() // ←これは絶対にいる\n      // emitされない不具合の暫定対策でちょうどここが共通処理になっているのでつっこんでおく\n      // this.emit_update_edit_mode_snapshot_sfen()\n    },\n\n    // -------------------------------------------------------------------------------- piece_box\n\n    // 駒箱の駒\n    piece_box_piece_back_class(piece) {\n      let list = []\n      if (this.piece_box_have_p(piece)) {\n        list.push(\"holding_p\")\n      } else if (this.current_run_mode === \"edit_mode\") {\n        if (!this.holding_p) {\n          list.push(\"selectable_p\")\n        }\n      }\n\n      // list = _.concat(list, piece.css_class_list)\n      // list.push(\"location_black\")\n      // list.push(\"promoted_false\")\n\n      return list\n    },\n\n    // 駒箱の駒のテクスチャ\n    piece_box_piece_inner_class(piece) {\n      let list = []\n      list = _.concat(list, piece.css_class_list)\n      list.push(\"location_black\")\n      list.push(\"promoted_false\")\n      return list\n    },\n\n    // --------------------------------------------------------------------------------\n\n    fn_flip_all() {\n      // 盤面反転\n      this.mediator.board = this.mediator.board.flip_all\n\n      // 持駒反転\n      this.mediator.hold_pieces = _.reduce(Location.values, (a, e) => {\n        a[e.key] = this.mediator.hold_pieces[e.flip.key]\n        return a\n      }, {})\n    },\n\n    fn_flip_h() {\n      // 盤面左右反転\n      this.mediator.board = this.mediator.board.flip_h\n    },\n\n    init_location_toggle() {\n      this.init_location_key = this.init_location.flip.key\n    },\n\n    // 駒箱や駒台から持ち上げている駒\n    soldier_create_from_stand_or_box_on(place) {\n      return new Soldier({\n        piece: this.have_piece,\n        place: place,\n        promoted: this.have_piece_promoted || false,\n        location: this.have_piece_location || Location.fetch(\"black\"),\n      })\n    },\n\n    mousemove_hook(e) {\n      this.$me_last_event = e\n\n      // 連続で呼ばれるイベント処理を緩和する方法\n      // https://qiita.com/noplan1989/items/9333faad731f5ecaaccd\n      // ※試してみているけどあまり効果がない\n      if (true) {\n        // 呼び出されるまで何もしない\n        if (!this.me_running_p) {\n          this.me_running_p = true\n\n          // 描画する前のタイミングで呼び出してもらう\n          window.requestAnimationFrame(() => {\n            this.cursor_elem_set_pos()\n\n            this.me_running_p = false\n          })\n        }\n      } else {\n        this.cursor_elem_set_pos()\n      }\n    },\n\n    // 右クリックならキャンセル(動いてないっぽい)\n    click_hook(e) {\n      if (e.which !== 1) {\n        this.state_reset()\n      }\n    },\n\n    cursor_elem_set_pos() {\n      if (this.$cursor_elem && this.$me_last_event && this.mouse_stick) {\n        // TODO: これが遅いのか？ もっと速く設定できる方法があれば変更したい\n        let x = this.$me_last_event.clientX\n        let y = this.$me_last_event.clientY\n\n        if (this.cursor_elem_in_board_container) {\n          // const rect = this.$refs.board_container_ref.getBoundingClientRect()\n          // x -= rect.left\n          // y -= rect.top\n        }\n\n        this.$cursor_elem.style.left = `${x}px`\n        this.$cursor_elem.style.top  = `${y}px`\n      }\n    },\n\n    // マウス位置に表示する駒の生成\n    //\n    //   .piece_back.cursor_elem\n    //     .piece_fore.virtual_piece_flip\n    //\n    virtual_piece_create(event, soldier) {\n      this.virtual_piece_destroy()\n      this.virtual_piece_dom_create(soldier)\n\n      this.mouse_stick = true   // マウスに追随する\n\n      // キーボードイベントの場合は null が来るようにしている\n      // マウスを動かしてはじめて座標が取れるのでキーボードの場合はすぐに駒は表示されない\n      if (event) {\n        this.$me_last_event = event\n        this.cursor_elem_set_pos()\n      }\n\n      window.addEventListener(\"mousemove\", this.mousemove_hook, false)\n      window.addEventListener(\"click\", this.click_hook, false)\n    },\n\n    // 注意: リターンキーでこの soldier をいくら反転させようと考えてはいけない。(origin_soldier1 が元なので意味がない)\n    virtual_piece_dom_create(soldier) {\n      this.$cursor_elem = document.createElement(\"div\")\n      this.$cursor_elem.classList.add(\"cursor_elem\")\n\n      const piece_back = document.createElement(\"div\")\n      piece_back.classList.add(\"piece_back\")\n\n      const piece_fore = document.createElement(\"div\")\n      piece_fore.classList.add(\"piece_fore\", ...soldier.to_class_list)\n\n      const text = document.createTextNode(soldier.name)\n      piece_fore.appendChild(text)\n\n      // const list = _.concat(class_list, [\"piece_back\"])\n      // piece_fore.classList.add(...list)\n\n      if (this.current_flip) {\n        // this.$cursor_elem.classList.add(\"virtual_piece_flip\") // 盤面を反転している場合は駒も反転する\n        piece_back.classList.add(\"virtual_piece_flip\") // 盤面を反転している場合は駒も反転する\n      }\n\n      piece_back.appendChild(piece_fore)\n      this.$cursor_elem.appendChild(piece_back)\n\n      // マウスイベントが発生するまでは画面内に表示されてしまうので画面外に出す\n      this.$cursor_elem.style.left = \"-50%\"\n      this.$cursor_elem.style.top  = \"-50%\"\n\n      if (this.cursor_elem_in_board_container) {\n        this.$refs.board_container_ref.appendChild(this.$cursor_elem)\n      } else {\n        this.$el.appendChild(this.$cursor_elem)\n      }\n    },\n\n    virtual_piece_destroy() {\n      if (this.$cursor_elem) {\n        if (this.cursor_elem_in_board_container) {\n          this.$refs.board_container_ref.removeChild(this.$cursor_elem)\n        } else {\n          this.$el.removeChild(this.$cursor_elem)\n        }\n\n        this.$cursor_elem = null\n        this.mouse_stick = false\n\n        window.removeEventListener(\"mousemove\", this.mousemove_hook, false)\n        window.removeEventListener(\"click\", this.click_hook, false)\n      }\n    },\n\n    meta_p(e) {\n      return e.shiftKey | e.ctrlKey | e.altKey | e.metaKey\n    },\n  },\n\n  computed: {\n    // 移動元の駒(盤上から)\n    origin_soldier1() {\n      if (this.place_from) {\n        return this.mediator.board.lookup(this.place_from)\n      }\n    },\n\n    // 移動元の駒(駒台 or 駒箱から)\n    origin_soldier2() {\n      if (this.have_piece) {\n        const place = Place.fetch([0, 0])\n        return this.soldier_create_from_stand_or_box_on(place)\n      }\n    },\n\n    // 駒を持ち上げている状態？\n    holding_p() {\n      return !_.isNil(this.place_from) || !_.isNil(this.have_piece)\n    },\n\n    // 片方の手番だけを操作できるようにする human_side_key の指定があってCPUの手番？\n    cpu_location_p() {\n      if (this.current_run_mode === \"play_mode\") {\n        return !_.includes(this.human_locations, this.mediator.current_location)\n      }\n    },\n\n    if_view_mode_break() {\n      // return this.current_run_mode === \"view_mode\"\n    },\n\n  },\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/edit_mode_module.js","var normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./SettingModal.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./SettingModal.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7e177265\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/template-compiler/preprocessor?engine=pug!../../node_modules/vue-loader/lib/selector?type=template&index=0!./SettingModal.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/SettingModal.vue\n// module id = zlNq\n// module chunks = 1 2"],"sourceRoot":""}
{"version":3,"sources":["webpack:///./src/components/ShogiPlayer.vue?5093","webpack:///./src/parser_base.js","webpack:///./src/side_info.js","webpack:///./src/components/ErrorNotify.vue?fcec","webpack:///./src/components/ErrorNotify.vue","webpack:///src/components/ShogiPlayer.vue","webpack:///./src/components/play_mode_module.js","webpack:///src/components/SettingModal.vue","webpack:///./src/components/sound_module.js","webpack:///./src/preset_info.js","webpack:///src/components/CommentArea.vue","webpack:///./src/components/polling_module.js","webpack:///./src/components/PieceBox.vue","webpack:///./src/theme_info.js","webpack:///./src/components/api_module.js","webpack:///./src/assets/flip_sound.wav","webpack:///./src/soldier.js","webpack:///./src/store/index.js","webpack:///./src/components/SettingModal.vue?56db","webpack:///./src/place.js","webpack:///./src/mediator.js","webpack:///./src/components/CommentArea.vue?f2ec","webpack:///./src/assets/piece_sound.wav","webpack:///./src/components/PieceStand.vue?3485","webpack:///./src/piece.js","webpack:///./src/bg_variant_info.js","webpack:///./src/piece_variant_info.js","webpack:///./src/any_func_info.js","webpack:///./src/sfen_serializer.js","webpack:///./src/components/navi_module.js","webpack:///./src/size_info.js","webpack:///./src/components/PieceStand.vue","webpack:///./src/sound.js","webpack:///./src/components/preset_module.js","webpack:///src/components/PieceBox.vue","webpack:///./src/components/PieceBox.vue?d4b7","webpack:///./src/board.js","webpack:///./src/components/shortcut_module.js","webpack:///./src/location.js","webpack:///./src/components/CommentArea.vue","webpack:///./src/components/ShogiPlayer.vue","webpack:///./src/kif_parser.js","webpack:///./src/run_mode_info.js","webpack:///src/components/PieceStand.vue","webpack:///./src/components/any_func_module.js","webpack:///./src/sfen_parser.js","webpack:///./src/components/edit_mode_module.js","webpack:///./src/components/SettingModal.vue"],"names":["esExports","render","_vm","this","_h","$createElement","_c","_self","staticClass","class","class_names","on","click","$event","$emit","_e","attrs","slot","_v","_s","error_message","mediator","current_run_mode","model","value","callback","$$v","current_preset_key","expression","label","icon","size","_l","record","key","mediator_setup_by_preset_info","name","any_func_key","any_func_click_handle","stopPropagation","preventDefault","all_flip_v","all_flip_h","init_location_toggle","init_location","summary_show","turn_edit","turn_edit_run","current_turn_label","final_label","turn_base","turn_offset","directives","rawName","modifiers","number","ref","type","domProps","blur","$forceUpdate","input","target","composing","turn_edit_value","_n","setting_modal_p","active","has-modal-card","update:active","run_mode","kifu_source","play_mode_current_sfen","edit_mode_current_sfen","sp_data","$data","update:run_mode","update:kifu_body","update_kifu_source","current_flip","location_key","hold_pieces","realized_hold_pieces_of","navi_relative_move","board_flip_run","y","x","board_cell_left_click","contextmenu","board_cell_right_click","mouseover","board_mouseover_handle","mouseleave","mouseleave_handle","board_piece_back_class","style","board_piece_back_style","board_piece_fore_class","cell_view","current_vlayout","move_to_first","relative_move","move_to_last","min","turn_offset_min","max","turn_offset_max","current_turn_set","_t","to_simple_sfen","sfen","comments_pack","data_source","current_comments","update_counter","place_from","have_piece","piece_box_realize","current_location","start_turn","moves","init_sfen","init_location_key","key_event_capture","interval_id","mouseover_info","border","textContent","staticStyle","white-space","JSON","stringify","e","$store","staticRenderFns","__webpack_exports__","__webpack_require__","ParserBase","_classCallCheck3","default","kifu_body","header","offset","location_base","advance","_lodash2","reduce","_location2","values","a","move_infos","length","process","argv","SideInfo","location_keys","map","fetch","ErrorNotify","Component","normalizeComponent","_vuex","Object","defineProperty","_vue2","prototype","store","_index2","mixins","_navi_module2","_shortcut_module2","_edit_mode_module2","_play_mode_module2","_sound_module2","_preset_module2","_any_func_module2","_polling_module2","_api_module2","props","String","Number","sfen_show","Boolean","overlay_navi","url_embed_turn","theme","bg_variant","piece_variant","debug_mode","digit_show","board_piece_back_user_style","Function","place","board_piece_back_user_class","board_cell_left_click_user_handle","player_info","components","PieceBox","_PieceBox2","PieceStand","_PieceStand2","SettingModal","_SettingModal2","_ErrorNotify2","CommentArea","_CommentArea2","data","inside_custom_kifu","env","view_mode_turn_offset_save","created","state","current_debug_mode","current_theme","current_size","current_bg_variant","current_piece_variant","kifu_url","axios_call","polling_interval_update","mediator_setup","play_mode_setup_from","preset_key","mediator_setup_by_preset","watch","before_sfen","log","sfen_change_p","sound_call","new_val","old_val","view_mode_mediator_update","new_mediator","_mediator2","data_source_by","to_position_sfen","current_turn","run","v","commit","methods","turn","document","location","hash","str","test","_sfen_parser2","_kif_parser2","parse","_this","$nextTick","$refs","turn_edit_input","focus","xy","_place2","soldier","board","lookup","list","push","to_css_class","holding_p","last_hand","origin_place","isEqual","cpu_location_p","concat","computed","_extends3","kifu_body_from_url","init_preset_sfen","display_turn","mapState","human_side_key","mounted","undefined","init_sfen_set","play_mode_mediator_seek_to","moves_set","_toConsumableArray3","moves_take_turn_offset","turn_next","last","turn_slider","join","human_locations","_side_info2","locations","take","serializer","sfen_serializer","to_board_sfen","to_hold_pieces","required","RunModeInfo","_run_mode_info2","ThemeInfo","_theme_info2","SizeInfo","_size_info2","BgVariantInfo","_bg_variant_info2","PieceVariantInfo","_piece_variant_info2","kifu_source2","flip","get","set","vlayout","sound_effect","volume","sound_setup","object","as_key","play","sound_load","_piece_sound2","_flip_sound2","file","isNil","_sound2","options","PresetInfo","first_location_key","piece_box","autolinker","_autolinker2","auto_link","link","_axios","logger_debug","polling_interval","clearInterval","setInterval","_this2","url","accessd_at","Date","now","toString","_axios2","method","params","responseType","timeout","headers","X-SHOGI-PLAYER-TIMESTAMP","then","response","catch","error","status","statusText","request","message","config","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_d8d61cb8_hasScoped_false_transformToRequire_video_src_poster_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_template_compiler_preprocessor_engine_pug_node_modules_vue_loader_lib_selector_type_template_index_0_PieceBox_vue__","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_PieceBox_vue___default","_soldier","api_random_puton","_soldier2","random","clear","place_on","api_place_on","api_board_clear","api_board_turn_set","api_play_mode_mediator_seek_to","api_flip_set","flag","api_retract_a_move","module","exports","p","Soldier","attributes","_assign2","arguments","_board2","dimension","piece","_piece2","promoted","promotable_p","promoted_name","danger_zone_p","danger_zone_size","css_class_list","__filename","_vuex2","Store","mutations","flip_toggle","current_debug_mode_set","payload","width","aria-label","$parent","close","native-value","grouped","$set","readonly","Place","isString","_parse_from_string2","_parse_from_string","_parse_from_string3","_slicedToArray3","_value","_ref","_x","_y","_freeze2","s","_s$split$map","replace","_replace_table","split","_s$split$map2","1","2","3","4","5","6","7","8","9","human_x","human_y","１","２","３","４","５","６","７","８","９","一","二","三","四","五","六","七","八","九","b","c","d","f","g","h","i","human_digits","human_xy_ary","kanji_human_x","kanji_human_y","Mediator","num","times","execute_one","m","drop_piece","_soldier4","hold_pieces_add","promoted_trigger","delete_at","plus","count","hold_pieces_count","counts_hash","delete","to_class_list","index","clamp","previous_location","_entries2","filter","_ref2","_ref3","_ref4","sortBy","_ref5","_ref6","code","piece_box_count","_ref7","_ref8","_ref9","_ref10","_ref11","_ref12","forIn","piece_key","piece_box_add","_this3","preset_info","_this4","piece_box_clear","info","_preset_info2","forEach","_ref13","_ref14","turn_clamp","location_by_offset","to_s","to_s_without_turn","_sfen_serializer2","_","isEmpty","innerHTML","piece_stand_outer_class","location_name","player_name","piece_stand_class","piece_stand_click","hold_cancel","piece_stand_piece_click","piece_stand_mouseover_handle","piece_back_class","piece_fore_class","Piece","toUpperCase","_get3","__proto__","_getPrototypeOf2","call","find","alias_name","includes","promoted_alias_name","AnyFuncInfo","func","hold_pieces_to_piece_box","piece_box_to_hold_pieces","piece_box_reset_by_preset","SfenSerializer","parts","__base_parts","rows","space","toLowerCase","location_info","compact","slider_show","controller_show","shift_key_mag","system_key_mag","hidden_if_piece_stand_blank","setting_button_show","operation_disable","window","addEventListener","keydown_hook","beforeDestroy","removeEventListener","shortcut_hook","dom","activeElement","controllers","first","previous","next","tagName","event","flip_sign","shiftKey","ctrlKey","altKey","metaKey","current_turn_add","focus_to","el","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_c89f2c72_hasScoped_false_transformToRequire_video_src_poster_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_template_compiler_preprocessor_engine_pug_node_modules_vue_loader_lib_selector_type_template_index_0_PieceStand_vue__","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_PieceStand_vue___default","__audio_context__","AudioContext","webkitAudioContext","Sound","buffer","__resource_load","is_loaded","source","createBufferSource","connect","destination","gain_node","createGain","gain","start","req","XMLHttpRequest","onreadystatechange","readyState","decodeAudioData","open","send","preset_info_values","piece_box_class","piece_box_other_click","piece_box_have_p","piece_box_piece_click","piece_box_mouseover_handle","piece_box_piece_back_class","piece_box_piece_inner_class","Board","_surface","new_soldier","flip_v","flip_h","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","_getIterator3","done","loc","char_key","soldier_hold_unless_holding_p","piece_stand_click_shared","err","return","Location","cycle_lookup","alert","Math","abs","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_3a87a5fb_hasScoped_false_transformToRequire_video_src_poster_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_CommentArea_vue__","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_CommentArea_vue___default","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_8366579e_hasScoped_false_transformToRequire_video_src_poster_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_template_compiler_preprocessor_engine_pug_node_modules_vue_loader_lib_selector_type_template_index_0_ShogiPlayer_vue__","__vue_styles__","ssrContext","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_ShogiPlayer_vue___default","KifParser","before_point","line","md","_xregexp2","exec","__kif_format_move_regexp","_minimalisticAssert2","kif_lookup","sfen_parser","_move_infos","_comments_pack","kif_parser","hold_piece_holding_p","have_piece_location","piece_stand_show_flag","_any_func_info","any_func_info","any_func_info_values","_any_func_info2","SfenParser","regex","__location_by_upper_or_lower_case","_hold_pieces","piece_char","ary","have_piece_promoted","me_running_p","$me_last_event","cursor_elem_in_board_container","$cursor_elem","mouse_stick","dialog_p","state_reset","virtual_piece_destroy","handle","if_view_mode_break","put_on_my_piece_p","meta_p","piece_transform","pice_hold_and_put_for_bug","soldier_hold","origin_soldier2_create","piece_decriment","to_sfen","Error","origin_soldier1","_soldier3","$buefy","dialog","confirm","confirmText","cancelText","onConfirm","promotable_piece_moved","onCancel","hold_pieces_move_to_my_hold_pieces","board_soldir_to_hold_pieces","virtual_piece_create","origin_soldier2","hold_piece_source_cut","hold_pieces_can_be_reduced_count","piece_box_can_be_reduced_count","mousemove_hook","requestAnimationFrame","cursor_elem_set_pos","click_hook","which","clientX","clientY","left","top","virtual_piece_dom_create","_piece_fore$classList","createElement","classList","add","piece_back","piece_fore","apply","text","createTextNode","appendChild","board_container_ref","$el","removeChild","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_59930097_hasScoped_false_transformToRequire_video_src_poster_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_template_compiler_preprocessor_engine_pug_node_modules_vue_loader_lib_selector_type_template_index_0_SettingModal_vue__","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_SettingModal_vue___default"],"mappings":"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","file":"static/js/shogi_player.1edc68a2c38187a79000.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"shogi-player\",class:_vm.class_names,on:{\"click\":function($event){return _vm.$emit('click')}}},[(_vm.operation_disable)?_c('div',{staticClass:\"top_overlay\"}):_vm._e(),(_vm.error_message)?_c('div',[_c('ErrorNotify',[_c('p',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_vm._v(\"ERROR\")]),_c('p',[_vm._v(_vm._s(_vm.error_message))])])],1):_vm._e(),(!_vm.mediator)?[_c('i',{staticClass:\"fas fa-spinner fa-pulse\"})]:_vm._e(),(_vm.current_run_mode === 'edit_mode')?_c('div',{staticClass:\"edit_mode_controller\"},[_c('div',{staticClass:\"edit_mode_controller_wrap\"},[_c('b-dropdown',{model:{value:(_vm.current_preset_key),callback:function ($$v) {_vm.current_preset_key=$$v},expression:\"current_preset_key\"}},[_c('div',{staticClass:\"button\",attrs:{\"slot\":\"trigger\"},slot:\"trigger\"},[_c('b-tooltip',{attrs:{\"label\":\"初期配置\"}},[_c('b-icon',{attrs:{\"icon\":\"apps\",\"size\":\"is-small\"}})],1)],1),_vm._l((_vm.preset_info_values),function(record){return _c('b-dropdown-item',{key:record.key,attrs:{\"value\":record.key},on:{\"click\":function($event){return _vm.mediator_setup_by_preset_info(record)}}},[_vm._v(_vm._s(record.name))])})],2),_c('b-dropdown',{model:{value:(_vm.any_func_key),callback:function ($$v) {_vm.any_func_key=$$v},expression:\"any_func_key\"}},[_c('div',{staticClass:\"button\",attrs:{\"slot\":\"trigger\"},slot:\"trigger\"},[_c('b-tooltip',{attrs:{\"label\":\"操作\"}},[_c('b-icon',{attrs:{\"icon\":\"menu\",\"size\":\"is-small\"}})],1)],1),_vm._l((_vm.any_func_info_values),function(record){return _c('b-dropdown-item',{key:record.key,attrs:{\"value\":record.key},on:{\"click\":function($event){return _vm.any_func_click_handle(record)}}},[_vm._v(_vm._s(record.name))])})],2),_vm._v(\" \"),_c('button',{staticClass:\"button yumincho\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.all_flip_v($event)}}},[_c('b-tooltip',{attrs:{\"label\":\"上下反転\"}},[_c('b-icon',{attrs:{\"icon\":\"pan-vertical\",\"size\":\"is-small\"}})],1)],1),_vm._v(\" \"),_c('button',{staticClass:\"button yumincho\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.all_flip_h($event)}}},[_c('b-tooltip',{attrs:{\"label\":\"左右反転\"}},[_c('b-icon',{attrs:{\"icon\":\"pan-horizontal\",\"size\":\"is-small\"}})],1)],1),_vm._v(\" \"),_c('button',{staticClass:\"button yumincho\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.init_location_toggle($event)}}},[_c('b-tooltip',{attrs:{\"label\":\"手番\"}},[_vm._v(_vm._s(_vm.init_location.name))])],1)],1)]):_vm._e(),(_vm.mediator)?[_c('div',{staticClass:\"turn_edit_container\"},[(_vm.summary_show && (_vm.current_run_mode === 'view_mode' || _vm.current_run_mode === 'play_mode'))?_c('div',{staticClass:\"turn_number_area\"},[(!_vm.turn_edit)?[_c('span',{staticClass:\"turn_edit_text\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.turn_edit_run($event)}}},[(_vm.current_run_mode === 'view_mode')?[_vm._v(_vm._s(_vm.mediator.current_turn_label(this.final_label)))]:_vm._e(),(_vm.current_run_mode === 'play_mode')?[(_vm.turn_base === 0)?[_vm._v(_vm._s(_vm.turn_offset))]:_vm._e(),(_vm.turn_base >= 1)?[_vm._v(_vm._s(_vm.turn_base)),(_vm.turn_offset >= 1)?[_vm._v(\"+\"+_vm._s(_vm.turn_offset))]:_vm._e()]:_vm._e(),_vm._v(\"手\")]:_vm._e()],2)]:_vm._e(),(_vm.turn_edit)?[_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.turn_edit_value),expression:\"turn_edit_value\",modifiers:{\"number\":true}}],ref:\"turn_edit_input\",staticClass:\"turn_edit_input\",attrs:{\"type\":\"number\"},domProps:{\"value\":(_vm.turn_edit_value)},on:{\"blur\":[function($event){_vm.turn_edit = false},function($event){return _vm.$forceUpdate()}],\"input\":function($event){if($event.target.composing){ return; }_vm.turn_edit_value=_vm._n($event.target.value)}}})]:_vm._e()],2):_vm._e(),(_vm.setting_button_show)?_c('span',{staticClass:\"is-pulled-right modal_trigger_dots\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();_vm.setting_modal_p = true}}},[_c('b-icon',{attrs:{\"icon\":\"dots-vertical\",\"size\":\"is-small\"}})],1):_vm._e(),_c('b-modal',{attrs:{\"active\":_vm.setting_modal_p,\"has-modal-card\":\"has-modal-card\"},on:{\"update:active\":function($event){_vm.setting_modal_p=$event}}},[_c('SettingModal',{attrs:{\"run_mode\":_vm.current_run_mode,\"kifu_source\":_vm.kifu_source,\"play_mode_current_sfen\":_vm.play_mode_current_sfen,\"edit_mode_current_sfen\":_vm.edit_mode_current_sfen,\"sp_data\":_vm.$data},on:{\"update:run_mode\":function($event){_vm.current_run_mode=$event},\"update:kifu_body\":_vm.update_kifu_source}})],1)],1),_c('div',{ref:\"board_container_ref\",staticClass:\"board_container font_size_base\"},[_c('div',{staticClass:\"flippable\",class:[_vm.current_flip ? 'flip' : 'no_flip']},[_c('PieceStand',{staticClass:\"flex_item\",attrs:{\"location_key\":'white',\"hold_pieces\":_vm.mediator.realized_hold_pieces_of('white')}}),_c('div',{staticClass:\"flex_item board_wrap\"},[(_vm.overlay_navi)?[_c('div',{staticClass:\"overlay_navi previous\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.navi_relative_move(-1, $event)}}}),_c('div',{staticClass:\"overlay_navi next\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.navi_relative_move(+1, $event)}}}),_c('div',{staticClass:\"overlay_navi flip_trigger_cell\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.board_flip_run($event)}}})]:_vm._e(),_c('div',{staticClass:\"board_outer\"},[_c('table',{staticClass:\"board_inner\"},_vm._l((_vm.mediator.dimension),function(y){return _c('tr',_vm._l((_vm.mediator.dimension),function(x){return _c('td',{on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.board_cell_left_click([x - 1, y - 1], $event)},\"contextmenu\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.board_cell_right_click([x - 1, y - 1], $event)},\"mouseover\":function($event){return _vm.board_mouseover_handle([x - 1, y - 1], $event)},\"mouseleave\":_vm.mouseleave_handle}},[_c('div',{staticClass:\"piece_back\",class:_vm.board_piece_back_class([x - 1, y - 1]),style:(_vm.board_piece_back_style([x - 1, y - 1]))},[_c('div',{staticClass:\"piece_fore\",class:_vm.mediator.board_piece_fore_class([x - 1, y - 1])},[_vm._v(_vm._s(_vm.mediator.cell_view([x - 1, y - 1])))])])])}),0)}),0)])],2),_c('div',{staticClass:\"flex_item\"},[(!_vm.current_vlayout)?[_c('PieceBox'),(_vm.current_run_mode !== 'edit_mode')?_c('div'):_vm._e()]:_vm._e(),_c('PieceStand',{attrs:{\"location_key\":'black',\"hold_pieces\":_vm.mediator.realized_hold_pieces_of('black')}})],2)],1),(_vm.current_vlayout)?[_c('PieceBox')]:_vm._e()],2),(_vm.current_run_mode === 'view_mode' || _vm.current_run_mode === 'play_mode')?_c('div',[(_vm.controller_show)?_c('div',{staticClass:\"controller_group buttons has-addons is-centered is-paddingless\"},[_c('button',{ref:\"first\",staticClass:\"button first\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.move_to_first($event)}}},[_c('b-icon',{attrs:{\"icon\":\"menu-left\"}})],1),_c('button',{ref:\"previous\",staticClass:\"button previous\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.relative_move(-1, $event)}}},[_c('b-icon',{attrs:{\"icon\":\"chevron-left\",\"size\":\"is-small\"}})],1),_c('button',{ref:\"next\",staticClass:\"button next\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.relative_move(+1, $event)}}},[_c('b-icon',{attrs:{\"icon\":\"chevron-right\",\"size\":\"is-small\"}})],1),_c('button',{ref:\"last\",staticClass:\"button last\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.move_to_last($event)}}},[_c('b-icon',{attrs:{\"icon\":\"menu-right\"}})],1),_c('button',{staticClass:\"button flip\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.board_flip_run($event)}}},[_c('b-icon',{attrs:{\"icon\":\"swap-vertical\",\"size\":\"is-small\"}})],1)]):_vm._e(),(_vm.slider_show)?_c('div',[_c('input',{ref:\"turn_slider\",staticClass:\"turn_slider\",attrs:{\"type\":\"range\",\"min\":_vm.turn_offset_min,\"max\":_vm.turn_offset_max},domProps:{\"value\":_vm.turn_offset},on:{\"input\":function($event){return _vm.current_turn_set($event.target.value)}}})]):_vm._e()]):_vm._e(),(_vm.sfen_show)?_c('div',{staticClass:\"sfen_area is-size-7 has-text-grey\"},[_vm._t(\"sfen_part\",[_vm._v(_vm._s(_vm.mediator.to_simple_sfen))],{\"sfen\":_vm.mediator.to_simple_sfen,\"mediator\":_vm.mediator})],2):_vm._e(),_c('CommentArea',{attrs:{\"comments_pack\":_vm.mediator.data_source.comments_pack,\"current_comments\":_vm.mediator.current_comments}})]:_vm._e(),(_vm.current_debug_mode)?_c('div',{staticClass:\"debug_table\"},[_c('table',{staticClass:\"table is-bordered is-striped is-narrow is-hoverable is-fullwidth\"},[_c('tbody',[_c('tr',[_c('th',[_vm._v(\"現在のモード(current_run_mode)\")]),_c('td',[_vm._v(_vm._s(_vm.current_run_mode))])]),_c('tr',[_c('th',[_vm._v(\"update_counter\")]),_c('td',[_vm._v(_vm._s(_vm.update_counter))])]),_c('tr',[_c('th',[_vm._v(\"移動元座標(place_from)\")]),_c('td',[_vm._v(_vm._s(_vm.place_from))])]),_c('tr',[_c('th',[_vm._v(\"駒台・駒箱から移動中の駒(have_piece)\")]),_c('td',[_vm._v(_vm._s(_vm.have_piece))])]),(_vm.mediator)?[_c('tr',[_c('th',[_vm._v(\"駒箱\")]),_c('td',[_vm._v(_vm._s(_vm.mediator.piece_box_realize()))])]),_c('tr',[_c('th',[_vm._v(\"持駒\")]),_c('td',[_vm._v(_vm._s(_vm.mediator.hold_pieces))])]),_c('tr',[_c('th',[_vm._v(\"次の手番\")]),_c('td',[_vm._v(_vm._s(_vm.mediator.current_location.key))])]),_c('tr',[_c('th',[_vm._v(\"現局面のSFEN\")]),_c('td',[_vm._v(_vm._s(_vm.mediator.to_simple_sfen))])]),_c('tr',[_c('th',[_vm._v(\"正規化手番(turn_offset)\")]),_c('td',[_vm._v(_vm._s(_vm.turn_offset))])])]:_vm._e(),_c('tr',[_c('th',[_vm._v(\"開始局面番号(start_turn)\")]),_c('td',[_vm._v(_vm._s(_vm.start_turn))])]),_c('tr',[_c('th',[_vm._v(\"初期配置(current_preset_key)\")]),_c('td',[_vm._v(_vm._s(_vm.current_preset_key))])]),_c('tr',[_c('th',[_vm._v(\"play_modeでの指し手(moves)\")]),_c('td',[_vm._v(_vm._s(_vm.moves))])]),_c('tr',[_c('th',[_vm._v(\"play_modeの開始局面(init_sfen)\")]),_c('td',[_vm._v(_vm._s(_vm.init_sfen))])]),_c('tr',[_c('th',[_vm._v(\"編集モード時の手番(init_location_key)\")]),_c('td',[_vm._v(_vm._s(_vm.init_location_key))])]),_c('tr',[_c('th',[_vm._v(\"編集モード時の手番を判定したSFEN(edit_mode_current_sfen)\")]),_c('td',[_vm._v(_vm._s(_vm.edit_mode_current_sfen))])]),_c('tr',[_c('th',[_vm._v(\"play_modeでのSFEN(play_mode_current_sfen)\")]),_c('td',[_vm._v(_vm._s(_vm.play_mode_current_sfen))])]),_c('tr',[_c('th',[_vm._v(\"key_event_capture\")]),_c('td',[_vm._v(_vm._s(_vm.key_event_capture))])]),_c('tr',[_c('th',[_vm._v(\"interval_id\")]),_c('td',[_vm._v(_vm._s(_vm.interval_id))])]),_c('tr',[_c('th',[_vm._v(\"mouseover_info\")]),_c('td',[_vm._v(_vm._s(_vm.mouseover_info))])])],2)])]):_vm._e(),_c('table',{attrs:{\"border\":\"1\"}},[_c('caption',[_vm._v(\"props\")]),_vm._l((_vm.$props),function(value,key){return _c('tr',[_c('th',{domProps:{\"textContent\":_vm._s(key)}}),_c('td',{staticStyle:{\"white-space\":\"pre\"},domProps:{\"textContent\":_vm._s(JSON.stringify(value, null, 4))}})])})],2),_c('table',{attrs:{\"border\":\"1\"}},[_c('caption',[_vm._v(\"data\")]),_vm._l((_vm.$data),function(value,key){return _c('tr',[_c('th',{domProps:{\"textContent\":_vm._s(key)}}),_c('td',{staticStyle:{\"white-space\":\"pre\"},domProps:{\"textContent\":_vm._s(JSON.stringify(value, null, 4))}})])})],2),_c('table',{attrs:{\"border\":\"1\"}},[_c('caption',[_vm._v(\"computed\")]),_vm._l((_vm._computedWatchers),function(e,key){return _c('tr',[_c('th',{domProps:{\"textContent\":_vm._s(key)}}),_c('td',{staticStyle:{\"white-space\":\"pre\"},domProps:{\"textContent\":_vm._s(JSON.stringify(e.value, null, 4))}})])})],2),_c('table',{attrs:{\"border\":\"1\"}},[_c('caption',[_vm._v(\"$store\")]),_vm._l((_vm.$store.state),function(value,key){return _c('tr',[_c('th',{domProps:{\"textContent\":_vm._s(key)}}),_c('td',{staticStyle:{\"white-space\":\"pre\"},domProps:{\"textContent\":_vm._s(JSON.stringify(value, null, 4))}})])})],2)],2)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-8366579e\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/template-compiler/preprocessor.js?engine=pug!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/ShogiPlayer.vue\n// module id = +0wW\n// module chunks = 1 2","import _ from \"lodash\"\nimport Location from \"./location\"\n\nexport default class ParserBase {\n  constructor() {\n    this.kifu_body = null\n    this.header = {}\n  }\n\n  parse() {\n  }\n\n  get board() {\n    console.warn(\"not implemented\")\n  }\n\n  get hold_pieces() {\n    return _.reduce(Location.values, (a, e) => {\n      a[e.key] = {}\n      return a\n    }, {})\n  }\n\n  get turn_offset_min() {\n    return 0\n  }\n\n  get turn_offset_max() {\n    return this.move_infos.length\n  }\n\n  get turn_base() {\n    return 0\n  }\n\n  location_by_offset(offset) {\n    return this.location_base.advance(offset)\n\n    // 次のようにすると w - 2 から始まるときに後手番なのに先手番になってしまう ← いや、あってる\n    // const index = this.turn_offset_min + offset + (this.komaochi_p ? 1 : 0)\n\n    // const index = this.turn_offset_min + (this.komaochi_p ? 1 : 0) + offset\n    // \"position startpos\" の場合 index が -1 になり (-1 % 2) が -1 になり Location.fetch(-1) でエラーになる\n    // なので Math.abs\n    // return Location.fetch(Math.abs(index) % 2)\n  }\n\n  get move_infos() {\n    console.warn(\"not implemented\")\n  }\n\n  get comments_pack() {\n    return null\n  }\n}\n\nif (process.argv[1] === __filename) {\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/parser_base.js","import MemoryRecord from \"js-memory-record\"\nimport Location from \"./location\"\n\nexport default class SideInfo extends MemoryRecord {\n  static get define() {\n    return [\n      /* eslint-disable */\n      { key: \"both\",   name: \"☗☖\", location_keys: [\"black\", \"white\"], },\n      { key: \"black\",  name: \"☗\",   location_keys: [\"black\"],          },\n      { key: \"white\",  name: \"☖\",   location_keys: [\"white\"],          },\n      { key: \"none\",   name: \"なし\", location_keys: [],                 },\n      /* eslint-enable */\n    ]\n  }\n\n  get locations() {\n    return this.location_keys.map((e) => Location.fetch(e))\n  }\n}\n\nif (process.argv[1] === __filename) {\n  console.log(SideInfo.fetch(\"both\").locations)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/side_info.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column\"},[_c('article',{staticClass:\"message is-danger has-text-left\"},[_c('div',{staticClass:\"message-header\"},[_vm._t(\"header\")],2),_c('div',{staticClass:\"message-body\"},[_vm._t(\"default\")],2)])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-23aaa820\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/template-compiler/preprocessor.js?engine=pug!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/ErrorNotify.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nvar __vue_script__ = null\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-23aaa820\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/template-compiler/preprocessor?engine=pug!../../node_modules/vue-loader/lib/selector?type=template&index=0!./ErrorNotify.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/ErrorNotify.vue\n// module id = null\n// module chunks = ","<template lang=\"pug\">\n.shogi-player(:class=\"class_names\" @click=\"$emit('click')\")\n  //- すべてのリンクを無効化するためのオーバーレイ\n  .top_overlay(v-if=\"operation_disable\")\n\n  div(v-if=\"error_message\")\n    ErrorNotify\n      p(slot=\"header\") ERROR\n      p {{error_message}}\n\n  template(v-if=\"!mediator\")\n    i.fas.fa-spinner.fa-pulse\n\n  //- | {{mouseover_info}}\n  //- | {{edit_mode_current_sfen}}\n\n  div.edit_mode_controller(v-if=\"current_run_mode === 'edit_mode'\")\n    .edit_mode_controller_wrap\n      b-dropdown(v-model=\"current_preset_key\")\n        //  button.button にすると prevent を指定する場所がないため button で外側の form が反応してしまう\n        .button(slot=\"trigger\")\n          b-tooltip(label=\"初期配置\")\n            b-icon(icon=\"apps\" size=\"is-small\")\n          //- b-icon(icon=\"menu-down\")\n        b-dropdown-item(v-for=\"record in preset_info_values\" :value=\"record.key\" :key=\"record.key\" @click=\"mediator_setup_by_preset_info(record)\")\n          | {{record.name}}\n      b-dropdown(v-model=\"any_func_key\")\n        .button(slot=\"trigger\")\n          b-tooltip(label=\"操作\")\n            b-icon(icon=\"menu\" size=\"is-small\")\n        b-dropdown-item(v-for=\"record in any_func_info_values\" :value=\"record.key\" :key=\"record.key\" @click=\"any_func_click_handle(record)\")\n          | {{record.name}}\n      | &nbsp;\n      button.button.yumincho(@click.stop.prevent=\"all_flip_v\")\n        b-tooltip(label=\"上下反転\")\n          b-icon(icon=\"pan-vertical\" size=\"is-small\")\n      | &nbsp;\n      button.button.yumincho(@click.stop.prevent=\"all_flip_h\")\n        b-tooltip(label=\"左右反転\")\n          b-icon(icon=\"pan-horizontal\" size=\"is-small\")\n      | &nbsp;\n      button.button.yumincho(@click.stop.prevent=\"init_location_toggle\")\n        b-tooltip(label=\"手番\")\n          | {{init_location.name}}\n\n  template(v-if=\"mediator\")\n    .turn_edit_container\n      .turn_number_area(v-if=\"summary_show && (current_run_mode === 'view_mode' || current_run_mode === 'play_mode')\")\n        template(v-if=\"!turn_edit\")\n          span.turn_edit_text(@click.stop.prevent=\"turn_edit_run\")\n            template(v-if=\"current_run_mode === 'view_mode'\")\n              | {{mediator.current_turn_label(this.final_label)}}\n            template(v-if=\"current_run_mode === 'play_mode'\")\n              template(v-if=\"turn_base === 0\")\n                | {{turn_offset}}\n              template(v-if=\"turn_base >= 1\")\n                | {{turn_base}}\n                template(v-if=\"turn_offset >= 1\")\n                  | +{{turn_offset}}\n              | 手\n\n        template(v-if=\"turn_edit\")\n          input.turn_edit_input(type=\"number\" v-model.number=\"turn_edit_value\" @blur=\"turn_edit = false\" ref=\"turn_edit_input\")\n\n      span.is-pulled-right.modal_trigger_dots(@click.stop.prevent=\"setting_modal_p = true\" v-if=\"setting_button_show\")\n        b-icon(icon=\"dots-vertical\" size=\"is-small\")\n\n      b-modal(:active.sync=\"setting_modal_p\" has-modal-card)\n        SettingModal(\n          :run_mode.sync=\"current_run_mode\"\n          :kifu_source=\"kifu_source\"\n          @update:kifu_body=\"update_kifu_source\"\n          :play_mode_current_sfen=\"play_mode_current_sfen\"\n          :edit_mode_current_sfen=\"edit_mode_current_sfen\"\n          :sp_data=\"$data\"\n        )\n\n    //- 独自のフォントサイズを適用するのは基本このなかだけとする\n    .board_container.font_size_base(ref=\"board_container_ref\")\n      .flippable(:class=\"[current_flip ? 'flip' : 'no_flip']\")\n        PieceStand.flex_item(:location_key=\"'white'\" :hold_pieces=\"mediator.realized_hold_pieces_of('white')\")\n        .flex_item.board_wrap\n          template(v-if=\"overlay_navi\")\n            .overlay_navi.previous(@click.stop.prevent=\"navi_relative_move(-1, $event)\")\n            .overlay_navi.next(@click.stop.prevent=\"navi_relative_move(+1, $event)\")\n            .overlay_navi.flip_trigger_cell(@click.stop.prevent=\"board_flip_run\")\n          .board_outer\n            table.board_inner\n              tr(v-for=\"y in mediator.dimension\")\n                td(v-for=\"x in mediator.dimension\" @click.stop.prevent=\"board_cell_left_click([x - 1, y - 1], $event)\" @click.stop.prevent.right=\"board_cell_right_click([x - 1, y - 1], $event)\" @mouseover=\"board_mouseover_handle([x - 1, y - 1], $event)\" @mouseleave=\"mouseleave_handle\")\n                  .piece_back(:class=\"board_piece_back_class([x - 1, y - 1])\" :style=\"board_piece_back_style([x - 1, y - 1])\")\n                    .piece_fore(:class=\"mediator.board_piece_fore_class([x - 1, y - 1])\")\n                      | {{mediator.cell_view([x - 1, y - 1])}}\n        .flex_item\n          template(v-if=\"!current_vlayout\")\n            PieceBox\n            //- 先手の駒台が上にくっつてしまうので防ぐため空のdivを入れる\n            div(v-if=\"current_run_mode !== 'edit_mode'\")\n          PieceStand(:location_key=\"'black'\" :hold_pieces=\"mediator.realized_hold_pieces_of('black')\")\n      //- cursor_elem はこの部分に入るので 1em のサイズを .font_size_base で指定したものを基準にできる\n\n      template(v-if=\"current_vlayout\")\n        PieceBox\n\n    div(v-if=\"current_run_mode === 'view_mode' || current_run_mode === 'play_mode'\")\n      .controller_group.buttons.has-addons.is-centered.is-paddingless(v-if=\"controller_show\")\n        button.button.first(    ref=\"first\"    @click.stop.prevent=\"move_to_first\"):             b-icon(icon=\"menu-left\")\n        button.button.previous( ref=\"previous\" @click.stop.prevent=\"relative_move(-1, $event)\"): b-icon(icon=\"chevron-left\"  size=\"is-small\")\n        button.button.next(     ref=\"next\"     @click.stop.prevent=\"relative_move(+1, $event)\"): b-icon(icon=\"chevron-right\" size=\"is-small\")\n        button.button.last(     ref=\"last\"     @click.stop.prevent=\"move_to_last\"):              b-icon(icon=\"menu-right\")\n        button.button.flip(                    @click.stop.prevent=\"board_flip_run\"):            b-icon(icon=\"swap-vertical\" size=\"is-small\")\n      div(v-if=\"slider_show\")\n        input.turn_slider(type=\"range\" :value=\"turn_offset\" @input=\"current_turn_set($event.target.value)\" :min=\"turn_offset_min\" :max=\"turn_offset_max\" ref=\"turn_slider\")\n\n    //- http://kyokumen.jp/positions/lnsgkgsnl/1r5b1/ppppppppp/9/9/2P6/PP1PPPPPP/1B5R1/LNSGKGSNL%20w%20-\n    .sfen_area.is-size-7.has-text-grey(v-if=\"sfen_show\")\n      slot(name=\"sfen_part\" :sfen=\"mediator.to_simple_sfen\" :mediator=\"mediator\")\n        | {{mediator.to_simple_sfen}}\n\n    CommentArea(:comments_pack=\"mediator.data_source.comments_pack\" :current_comments=\"mediator.current_comments\")\n\n  div.debug_table(v-if=\"current_debug_mode\")\n    table.table.is-bordered.is-striped.is-narrow.is-hoverable.is-fullwidth\n      tbody\n        tr: <th>現在のモード(current_run_mode)</th><td>{{current_run_mode}}</td>\n        tr: <th>update_counter</th><td>{{update_counter}}</td>\n        tr: <th>移動元座標(place_from)</th><td>{{place_from}}</td>\n        tr: <th>駒台・駒箱から移動中の駒(have_piece)</th><td>{{have_piece}}</td>\n        template(v-if=\"mediator\")\n          tr: <th>駒箱</th><td>{{mediator.piece_box_realize()}}</td>\n          tr: <th>持駒</th><td>{{mediator.hold_pieces}}</td>\n          tr: <th>次の手番</th><td>{{mediator.current_location.key}}</td>\n          tr: <th>現局面のSFEN</th><td>{{mediator.to_simple_sfen}}</td>\n          tr: <th>正規化手番(turn_offset)</th><td>{{turn_offset}}</td>\n        tr: <th>開始局面番号(start_turn)</th><td>{{start_turn}}</td>\n        tr: <th>初期配置(current_preset_key)</th><td>{{current_preset_key}}</td>\n        tr: <th>play_modeでの指し手(moves)</th><td>{{moves}}</td>\n        tr: <th>play_modeの開始局面(init_sfen)</th><td>{{init_sfen}}</td>\n        tr: <th>編集モード時の手番(init_location_key)</th><td>{{init_location_key}}</td>\n        tr: <th>編集モード時の手番を判定したSFEN(edit_mode_current_sfen)</th><td>{{edit_mode_current_sfen}}</td>\n        tr: <th>play_modeでのSFEN(play_mode_current_sfen)</th><td>{{play_mode_current_sfen}}</td>\n        tr: <th>key_event_capture</th><td>{{key_event_capture}}</td>\n        tr: <th>interval_id</th><td>{{interval_id}}</td>\n        tr: <th>mouseover_info</th><td>{{mouseover_info}}</td>\n\n  table(border=1)\n    caption\n      | props\n    tr(v-for=\"(value, key) in $props\")\n      th(v-text=\"key\")\n      td(style=\"white-space: pre\" v-text=\"JSON.stringify(value, null, 4)\")\n\n  table(border=1)\n    caption\n      | data\n    tr(v-for=\"(value, key) in $data\")\n      th(v-text=\"key\")\n      td(style=\"white-space: pre\" v-text=\"JSON.stringify(value, null, 4)\")\n\n  table(border=1)\n    caption\n      | computed\n    tr(v-for=\"(e, key) in _computedWatchers\")\n      th(v-text=\"key\")\n      td(style=\"white-space: pre\" v-text=\"JSON.stringify(e.value, null, 4)\")\n\n  table(border=1)\n    caption\n      | $store\n    tr(v-for=\"(value, key) in $store.state\")\n      th(v-text=\"key\")\n      td(style=\"white-space: pre\" v-text=\"JSON.stringify(value, null, 4)\")\n</template>\n\n<script>\nimport _ from \"lodash\"\nimport Vue from 'vue'\n\nimport { mapState } from 'vuex'\n\n// Store\nimport store from \"../store/index.js\"\n\n// My Library\nimport Mediator from \"../mediator\"\nimport Place from \"../place\"\nimport SfenParser from \"../sfen_parser\"\nimport KifParser from \"../kif_parser\"\n\n// components\nimport PieceBox from \"./PieceBox\"\nimport PieceStand from \"./PieceStand\"\nimport SettingModal from \"./SettingModal\"\nimport ErrorNotify from \"./ErrorNotify\"\nimport CommentArea from \"./CommentArea\"\n\n// mixins modules\nimport navi_module from \"./navi_module.js\"\nimport shortcut_module from \"./shortcut_module.js\"\nimport edit_mode_module from \"./edit_mode_module.js\"\nimport play_mode_module from \"./play_mode_module.js\"\nimport sound_module from \"./sound_module.js\"\nimport preset_module from \"./preset_module.js\"\nimport any_func_module from \"./any_func_module.js\"\nimport polling_module from \"./polling_module.js\"\nimport api_module from \"./api_module.js\"\n\n// To use lodash's _ in the vue template\nObject.defineProperty(Vue.prototype, '_', {value: _})\n\n/* eslint-disable no-new */\nexport default {\n  name: 'ShogiPlayer',\n\n  store: store,\n\n  mixins: [\n    // ここで直接 require(\"./xxx.js\"), とは書けないので注意\n    navi_module,\n    shortcut_module,\n    edit_mode_module,\n    play_mode_module,\n    sound_module,\n    preset_module,\n    any_func_module,\n    polling_module,\n    api_module,\n  ],\n\n  /* eslint-disable */\n  props: {\n    run_mode:       { type: String,  default: \"view_mode\", },\n    kifu_body:      { type: String,  default: null,        },\n    start_turn:     { type: Number,  default: -1,          },\n    sfen_show:      { type: Boolean, default: false,       },\n    overlay_navi:   { type: Boolean, default: true,        },\n    url_embed_turn: { type: Boolean, default: false,       },\n    theme:          { type: String,  default: \"real\",      },\n    size:           { type: String,  default: \"default\",   },\n    bg_variant:     { type: String,  default: \"a\"          },\n    piece_variant:  { type: String,  default: \"a\"          },\n    debug_mode:     { type: Boolean, default: false,       }, // process.env.NODE_ENV !== 'production'\n    digit_show:     { type: Boolean, default: false,       },\n    final_label:    { type: String,  default: null,        },\n    board_piece_back_user_style: { type: Function, default: place => { return {} }, }, // FIXME: add to README\n    board_piece_back_user_class: { type: Function, default: place => { return [] }, },\n    board_cell_left_click_user_handle: { type: Function, default: null, },\n    player_info:    { type: Object,  default: null, },\n  },\n  /* eslint-enable */\n\n  components: {\n    PieceBox,\n    PieceStand,\n    SettingModal,\n    ErrorNotify,\n    CommentArea,\n  },\n\n  data() {\n    return {\n      current_run_mode: this.run_mode,\n      turn_edit_value: null,    // numberフィールドで current_turn を直接操作すると空にしたとき補正値 0 に変換されて使いづらいため別にする。あと -1 のときの挙動もわかりやすい。\n      mediator: null,           // 局面管理\n      turn_edit: false,         // N手目編集中\n      error_message: null,\n      update_counter: 0,\n      setting_modal_p: false,\n      inside_custom_kifu: null, // 設定ダイアログで変更されたときに入る\n      env: process.env.NODE_ENV,\n      view_mode_turn_offset_save: null, // viewモードを抜けるとき現在の手数を記憶しておく\n    }\n  },\n\n  created() {\n    this.inside_custom_kifu = null\n\n    /* eslint-disable */\n    // TODO: Vuex の方で外からの引数(this.debug_mode)を参照できないのでこんなことになっている\n    this.$store.state.current_debug_mode = this.debug_mode\n    this.$store.state.current_theme      = this.theme\n    this.$store.state.current_size       = this.size\n    this.$store.state.current_bg_variant  = this.bg_variant\n    this.$store.state.current_piece_variant = this.piece_variant\n    /* eslint-enable */\n\n    if (this.current_run_mode === \"view_mode\") {\n      if (this.kifu_url) {\n        this.axios_call()\n        this.polling_interval_update()\n      } else {\n        this.mediator_setup(this.start_turn)\n      }\n    }\n\n    if (this.current_run_mode === \"play_mode\") {\n      this.mediator_setup(this.start_turn)\n      this.play_mode_setup_from(\"view_mode\")\n    }\n\n    if (this.current_run_mode === \"edit_mode\") {\n      if (this.preset_key) {\n        this.mediator_setup_by_preset(this.preset_key) // 駒箱に「玉」を乗せたいため\n      } else {\n        this.mediator_setup(this.start_turn)\n      }\n    }\n  },\n\n  watch: {\n    turn_edit_value() {\n      this.current_turn_set(this.turn_edit_value)\n    },\n\n    start_turn() {\n      this.current_turn_set(this.start_turn)\n    },\n\n    kifu_source() {\n      // const before_turn_offset_max = this.turn_offset_max\n      const before_sfen = this.mediator ? this.mediator.to_simple_sfen : \"\"\n      this.log(`before turn_offset_max: ${this.turn_offset_max}`)\n      this.log(`before sfen: ${before_sfen}`)\n      this.mediator_setup(this.start_turn)\n      this.log(`after turn_offset_max: ${this.turn_offset_max}`)\n      this.log(`after sfen: ${this.mediator.to_simple_sfen}`)\n      const sfen_change_p = (before_sfen !== this.mediator.to_simple_sfen)\n      if (this.current_run_mode === \"view_mode\") {\n        if (sfen_change_p) {\n          this.sound_call(\"piece_sound\")\n        }\n      }\n      if (this.current_run_mode === \"play_mode\") {\n        this.play_mode_setup_from(\"view_mode\")\n        // 棋譜を反映された側は\n        // 1. 相手が指したのか → 駒音だす\n        // 2. 自分の指し手が正しい指し手だと判断された棋譜が返って反映されたのか → 駒音なし\n        // この区別が付かない。なのでここで成らさない方がよい\n        // this.sound_call(\"piece_sound\")\n        // ……と思ったが 1 は turn_offset_max が変化したかどうかで判断できる。いや sfen を見ればわかる？ → そこまでする必要ない\n        // if (before_turn_offset_max !== this.turn_offset_max) {\n        if (sfen_change_p) {\n          this.sound_call(\"piece_sound\")\n        }\n      }\n    },\n\n    // 外からまたはダイアログから変更されたとき\n    current_run_mode(new_val, old_val) {\n      this.$emit(\"update:run_mode\", this.current_run_mode)\n\n      if (this.current_run_mode === \"view_mode\") {\n        this.log(\"current_run_mode: view_mode\")\n        // alert(`復元:${this.view_mode_turn_offset_save}`)\n        this.view_mode_mediator_update(this.view_mode_turn_offset_save)\n        this.view_mode_turn_offset_save = null\n      } else {\n        // view_mode ではなくなったときの最初だけ保存しておく(mediatorをまるごと保存しておく手もあるかも)\n        if (this.view_mode_turn_offset_save === null) {\n          this.view_mode_turn_offset_save = this.turn_offset\n          // alert(`保存:${this.view_mode_turn_offset_save}`)\n        }\n      }\n\n      if (this.current_run_mode === \"play_mode\") {\n        this.play_mode_setup_from(old_val)\n      }\n\n      if (this.current_run_mode === \"edit_mode\") {\n        this.log(\"current_run_mode: edit_mode\")\n\n        const new_mediator = new Mediator()\n        new_mediator.data_source = this.data_source_by(this.mediator.to_position_sfen)\n        new_mediator.current_turn = 0\n        new_mediator.run()\n\n        this.mediator = new_mediator\n        this.init_location_key = new_mediator.current_location.key\n      }\n    },\n\n    // これはひどい。わけがわからない。\n    // 外側に通知したいときは Vuex (../store/index.js) のなかでやってもだめ\n    // 呼ばれているコンポーネントで書かないといけない\n    /* eslint-disable */\n    current_debug_mode(v) { this.$emit(\"update:debug_mode\", v)              }, // 内から外への通知\n    debug_mode(v)         { this.$store.commit(\"current_debug_mode_set\", v) }, // 外から内への反映\n    run_mode(v)           { this.current_run_mode = v                       }, // 外側から run_mode を変更されたとき\n\n    current_theme(v)      { this.$emit(\"update:theme\", v)                   }, // 中 -> 外\n    theme(v)              { this.$store.state.current_theme = v             }, // 外 -> 中\n\n    current_size(v)       { this.$emit(\"update:size\", v)                    }, // 中 -> 外\n    size(v)               { this.$store.state.current_size = v              }, // 外 -> 中\n\n    current_bg_variant(v)  { this.$emit(\"update:bg_variant\", v)               }, // 中 -> 外\n    bg_variant(v)          { this.$store.state.current_bg_variant = v         }, // 外 -> 中\n\n    current_piece_variant(v)  { this.$emit(\"update:piece_variant\", v)               }, // 中 -> 外\n    piece_variant(v)          { this.$store.state.current_piece_variant = v         }, // 外 -> 中\n    /* eslint-enable */\n  },\n\n  methods: {\n    mediator_setup(turn) {\n      this.mediator = new Mediator()\n      this.mediator.data_source = this.data_source_by(this.kifu_source)\n      this.mediator.current_turn = turn\n      this.mediator.run()\n    },\n\n    view_mode_mediator_update(turn) {\n      this.mediator_setup(turn)\n      if (this.url_embed_turn) {\n        document.location.hash = this.turn_offset\n      }\n      // this.sound_call(\"piece_sound\")\n      this.update_counter++\n    },\n\n    data_source_by(str) {\n      let data_source = null\n      if (/position/.test(str)) {\n        data_source = new SfenParser()\n      } else {\n        data_source = new KifParser()\n      }\n      data_source.kifu_body = str\n      data_source.parse()\n      return data_source\n    },\n\n    turn_edit_run() {\n      this.turn_edit = true\n      this.turn_edit_value = this.turn_offset\n      this.$nextTick(() => this.$refs.turn_edit_input.focus())\n    },\n\n    log(v) {\n      if (this.current_debug_mode) {\n        console.log(v)\n      }\n    },\n\n    board_piece_back_class(xy) {\n      const place = Place.fetch(xy)\n      const soldier = this.mediator.board.lookup(place)\n      let list = []\n\n      list.push(place.to_css_class) // place_99\n\n      if (this.holding_p) {\n        list.push(\"hoverable_p\")\n      }\n\n      if (!this.holding_p) {\n        if (this.mediator.last_hand) {\n          const origin_place = this.mediator.last_hand.origin_place\n          if (origin_place) {\n            if (_.isEqual(origin_place, place)) {\n              list.push(\"origin_place\")\n            }\n          }\n          if (_.isEqual(this.mediator.last_hand.place, place)) {\n            list.push(\"current\")\n          }\n        }\n      }\n\n      if (_.isEqual(this.place_from, place)) {\n        list.push(\"holding_p\")\n      } else if (soldier) {\n        if (this.current_run_mode === \"edit_mode\" || (!this.cpu_location_p && this.mediator.current_location === soldier.location)) {\n          if (!this.holding_p) {\n            list.push(\"selectable_p\")\n          }\n        }\n      }\n\n      // if (soldier) {\n      //   list = _.concat(list, soldier.to_class_list)\n      // }\n\n      if (this.board_piece_back_user_class) {\n        list = _.concat(list, this.board_piece_back_user_class(place))\n      }\n\n      return list\n    },\n\n    board_piece_back_style(xy) {\n      if (this.board_piece_back_user_style) {\n        return this.board_piece_back_user_style(Place.fetch(xy))\n      }\n    },\n\n    update_kifu_source(v) {\n      this.inside_custom_kifu = v\n      this.$emit(\"update:kifu_body\", v) // 子で emit されたイベントを親(自分)で拾い、同じ内容で親に向けて発火。何この複雑さ。\n    }\n  },\n\n  computed: {\n    class_names() {\n      return [\n        `theme-${this.current_theme}`,\n        `size-${this.current_size}`,\n        `bg_variant-${this.current_bg_variant}`,\n        `piece_variant-${this.current_piece_variant}`,\n        `run_mode-${this.current_run_mode}`,\n        {debug_mode: this.current_debug_mode},\n        {digit_show: this.digit_show},\n        this.current_vlayout ? 'vertical' : 'horizontal',\n      ]\n    },\n\n    kifu_source() {\n      // 設定で棋譜を更新したのが入った inside_custom_kifu が最優先。つまりもう更新はできなくなる。いいのか？\n      return this.inside_custom_kifu || this.kifu_body_from_url || this.kifu_body || this.init_preset_sfen || \"position startpos\"\n    },\n\n    // 本当は delegate したいシリーズ\n    /* eslint-disable */\n    turn_base() { return this.mediator.turn_base }, // 表示する上での開始手数で普通は 0\n    turn_offset()         { return this.mediator.turn_offset         }, // 手数のオフセット\n    display_turn()      { return this.mediator.display_turn      }, // turn_base + turn_offset\n    turn_offset_min()          { return this.mediator.turn_offset_min          }, // 必ず 0\n    turn_offset_max()          { return this.mediator.turn_offset_max          }, // moves が 2 なら 2\n    /* eslint-enable */\n\n    // mapState({\n    // // アロー関数は、コードをとても簡潔にできます！\n    // count: state => state.count,\n    // // 文字列を渡すことは、`state => state.count` と同じです\n    // countAlias: 'count',\n    // // `this` からローカルステートを参照するときは、通常の関数を使わなければいけません\n    // countPlusLocalState (state) {\n    //   return state.count + this.localCount\n    // }\n    ...mapState({\n    }),\n    ...mapState([\n      \"current_debug_mode\",\n      \"current_theme\",\n      \"current_size\",\n      \"current_bg_variant\",\n      \"current_piece_variant\",\n    ]),\n  },\n}\n</script>\n\n<style lang=\"sass\">\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/ShogiPlayer.vue","import _ from \"lodash\"\n\nimport Mediator from \"../mediator\"\nimport Location from \"../location\"\nimport SideInfo from \"../side_info\"\n\nexport default {\n  /* eslint-disable */\n  props: {\n    human_side_key: { type: String, default: \"both\", }, // 含まれる側だけ操作できるようにする\n  },\n  /* eslint-enable */\n\n  data() {\n    return {\n      moves: [],                  // play_mode 時の棋譜\n      init_sfen: null,            // play_mode に入ったときの最初の状態\n      init_location_key: \"black\", // play_mode に入ったときの最初の手番\n    }\n  },\n\n  created() {\n  },\n\n  mounted() {\n  },\n\n  watch: {\n    edit_mode_current_sfen(v) {\n      this.$emit(\"update:edit_mode_current_sfen\", v)\n    },\n  },\n\n  methods: {\n    play_mode_setup_from(old_val) {\n      this.log(\"play_mode_setup_from\")\n\n      if (this.mediator.data_source.init_sfen !== undefined) {\n        // 棋譜の最初からの指し手をすべて保持\n        // view_mode -> play_mode\n        if (old_val === \"view_mode\") {\n          this.init_sfen = this.mediator.data_source.init_sfen\n          this.moves = this.mediator.data_source.moves\n        }\n        // edit_mode -> play_mode\n        if (old_val === \"edit_mode\") {\n          this.init_sfen_set()\n        }\n      } else {\n        // 現時点の状態から始める (KIFの場合)\n        if (old_val === \"view_mode\") {\n          this.init_location_key = this.mediator.current_location.key\n        }\n        this.init_sfen_set()\n      }\n\n      this.play_mode_mediator_seek_to(this.turn_offset)\n    },\n\n    // 現在の状態を基点として play_mode に入る\n    init_sfen_set() {\n      this.init_sfen = this.edit_mode_current_sfen\n      this.moves = []\n    },\n\n    play_mode_mediator_seek_to(turn) {\n      this.mediator = new Mediator()\n      this.mediator.data_source = this.data_source_by(this.play_mode_current_sfen)\n      this.mediator.current_turn = turn\n      this.mediator.run()\n    },\n\n    // 「待った」して指す場合を考慮してカレント以降の指し手を削除してから追加する\n    moves_set(value) {\n      this.moves = [...this.moves_take_turn_offset, value]\n    },\n\n    turn_next() {\n      if (this.current_run_mode === \"play_mode\") {\n        this.mediator = new Mediator()\n        this.mediator.data_source = this.data_source_by(this.play_mode_current_sfen)\n        this.mediator.current_turn = -1\n        this.mediator.run()\n        this.sound_call(\"piece_sound\")\n\n        this.$emit(\"update:play_mode_long_sfen\", this.play_mode_current_sfen)\n        this.$emit(\"update:play_mode_move\", _.last(this.moves))\n        this.$emit(\"update:play_mode_short_sfen\", this.mediator.to_position_sfen)\n\n        // 操作モードで詰将棋を動かしていて間違えて1手すぐに戻したいとき「←」キーですぐに戻せるように(スライダーがあれば)フォーカスする\n        if (this.$refs.turn_slider) {\n          this.$refs.turn_slider.focus()\n        }\n      }\n    },\n  },\n\n  computed: {\n    play_mode_current_sfen() {\n      if (this.init_sfen) {\n        return this.init_sfen + \" moves \" + this.moves.join(\" \")\n      }\n    },\n\n    init_location() {\n      return Location.fetch(this.init_location_key)\n    },\n\n    human_locations() {\n      return SideInfo.fetch(this.human_side_key).locations\n    },\n\n    // moves.take(turn_offset) を返す\n    // 5手ある棋譜で3手目まで戻したときは3手分の指し手を返す\n    moves_take_turn_offset() {\n      return _.take(this.moves, this.turn_offset)\n    },\n\n    // 現在の状態を基点とした moves がない棋譜 (init_location が反映されていることが重要)\n    edit_mode_current_sfen() {\n      if (this.mediator) {\n        const serializer = this.mediator.sfen_serializer\n        return [\n          \"position sfen\",\n          serializer.to_board_sfen,\n          this.init_location.key[0],\n          serializer.to_hold_pieces,\n          1,\n        ].join(\" \")\n      }\n    },\n  },\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/play_mode_module.js","<template lang=\"pug\">\n//- style=\"width: auto\"\n.modal-card.has-text-left(style=\"width:auto\")\n  header.modal-card-head\n    p.modal-card-title 設定\n    button.delete(aria-label=\"close\" @click.stop.prevent=\"$parent.close()\")\n\n  section.modal-card-body\n    b-field(label=\"モード\")\n    b-field\n      template(v-for=\"e in RunModeInfo.values\")\n        b-radio-button(v-model=\"current_run_mode\" :native-value=\"e.key\") {{e.name}}\n\n    b-field(grouped)\n      b-field(label=\"反転\")\n        b-switch(v-model=\"flip\")\n      b-field(label=\"縦並び\")\n        b-switch(v-model=\"vlayout\")\n      b-field(label=\"デバッグモード\")\n        b-switch(v-model=\"current_debug_mode\")\n\n    template(v-if=\"false\")\n      b-dropdown(v-model=\"$store.state.current_bg_variant\")\n        button.button(slot=\"trigger\")\n          span\n            | {{BgVariantInfo.fetch($store.state.current_bg_variant).name}}\n          b-icon(icon=\"menu-down\")\n        template(v-for=\"e in BgVariantInfo.values\")\n          b-dropdown-item(:value=\"e.key\") {{e.name}}\n\n    b-field(label=\"テーマ\")\n    b-field\n      template(v-for=\"e in ThemeInfo.values\")\n        b-radio-button(v-model=\"$store.state.current_theme\" :native-value=\"e.key\") {{e.name}}\n\n    template(v-if=\"$store.state.current_theme === 'real'\")\n      .box\n        b-field(label=\"背景の種類\")\n        b-field\n          template(v-for=\"e in BgVariantInfo.values\")\n            b-radio-button(v-model=\"$store.state.current_bg_variant\" :native-value=\"e.key\" size=\"is-small\") {{e.name}}\n\n        b-field(label=\"駒の種類\")\n        b-field\n          template(v-for=\"e in PieceVariantInfo.values\")\n            b-radio-button(v-model=\"$store.state.current_piece_variant\" :native-value=\"e.key\") {{e.name}}\n\n    b-field(label=\"サイズ\")\n    b-field\n      template(v-for=\"e in SizeInfo.values\")\n        b-radio-button(v-model=\"$store.state.current_size\" :native-value=\"e.key\" size=\"is-small\") {{e.name}}\n\n    template(v-if=\"sp_data.mediator\")\n      b-field(label=\"再生モードの現局面(Readonly)\")\n        b-input(:value=\"sp_data.mediator.to_position_sfen\" type=\"input\" size=\"is-small\" readonly)\n\n    b-field(label=\"編集モードの現局面(Readonly)\")\n      b-input(:value=\"edit_mode_current_sfen\" type=\"input\" size=\"is-small\" readonly)\n\n    b-field(label=\"再生モードの棋譜(編集可)\")\n      b-input(v-model=\"kifu_source2\" type=\"textarea\" size=\"is-small\")\n\n    b-field(label=\"操作モードの棋譜(Readonly)\")\n      b-input.is-small(:value=\"play_mode_current_sfen\" type=\"textarea\" size=\"is-small\" readonly)\n\n  footer.modal-card-foot\n    button.button.is-primary(@click.stop.prevent=\"$parent.close()\") 閉じる\n</template>\n\n<script>\n// ここではあえていろんな方法を試している\n//\n// run_mode: コンポーネントへの数珠繋ぎ方式\n// flip:     Vuex で管理している変数をコンポーネント側でラップする方式\n//\n\n// import Vue from \"vue\"\nimport RunModeInfo from \"../run_mode_info\"\nimport ThemeInfo from \"../theme_info\"\nimport SizeInfo from \"../size_info\"\nimport BgVariantInfo from \"../bg_variant_info\"\nimport PieceVariantInfo from \"../piece_variant_info\"\n\n// ↓このように定義した場合はアプリ側で再定義しないといけなくなる\n// Object.defineProperty(Vue.prototype, 'RunModeInfo', {value: RunModeInfo})\n// Object.defineProperty(Vue.prototype, 'ThemeInfo', {value: ThemeInfo})\n// Object.defineProperty(Vue.prototype, 'SizeInfo', {value: SizeInfo})\n// Object.defineProperty(Vue.prototype, 'BgVariantInfo', {value: BgVariantInfo})\n\nexport default {\n  props: {\n    run_mode: { required: true },\n    kifu_source: { required: false },\n    play_mode_current_sfen: { required: true }, // TODO: 親をそのまま参照したいんだけど $data を渡しても play_mode_current_sfen は computed だから参照できない\n    edit_mode_current_sfen: { required: true },  // TODO: 親を受けとりたい\n    sp_data: { required: true },                // TODO: $data ではなく親を受けとりたい\n  },\n\n  data() {\n    return {\n      RunModeInfo,\n      ThemeInfo,\n      SizeInfo,\n      BgVariantInfo,\n      PieceVariantInfo,\n\n      current_run_mode: this.run_mode,\n      kifu_source2: this.kifu_source,\n    }\n  },\n\n  watch: {\n    current_run_mode(value) {\n      this.$emit(\"update:run_mode\", value)\n    },\n    kifu_source2(value) {\n      this.$emit(\"update:kifu_body\", value)\n    },\n  },\n\n  methods: {\n  },\n\n  computed: {\n    // http://chibinowa.net/note/vuejs/vue-11.html\n    flip: {\n      get() { return this.$store.state.current_flip },\n      set(v) { this.$store.state.current_flip = v },\n    },\n    vlayout: {\n      get() { return this.$store.state.current_vlayout },\n      set(v) { this.$store.state.current_vlayout = v },\n    },\n    // ...mapState([\n    //   \"current_debug_mode\",      // これだと get() しか作られない\n    // ]),\n    current_debug_mode: {\n      get() { return this.$store.state.current_debug_mode },\n      set(v) {\n        this.$store.commit(\"current_debug_mode_set\", v) // どんだけ冗長なことやらすんだ。面倒くさいぞこれ\n        // というか別に直接更新してもよい\n        // this.$store.state.current_debug_mode = v\n      },\n    },\n  },\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/components/SettingModal.vue","import _ from \"lodash\"\n\nimport Sound from '../sound'\n\nimport piece_sound_wav from \"../assets/piece_sound.wav\"\nimport flip_sound_wav from \"../assets/flip_sound.wav\"\n\nexport default {\n  /* eslint-disable */\n  props: {\n    sound_effect: { type: Boolean, default: false, },\n    volume:       { type: Number,  default: 0.5,   },\n  },\n  /* eslint-enable */\n\n  data() {\n    return {\n    }\n  },\n\n  created() {\n    this.sound_setup()\n  },\n\n  watch: {\n    sound_effect() {\n      this.sound_setup()\n    },\n\n    volume() {\n      this.sound_setup()\n    },\n  },\n\n  methods: {\n    sound_call(key) {\n      if (this.sound_effect) {\n        key = this.as_key(key)\n        const object = this[key]\n        if (object) {\n          object.play()\n          this.log(`sound_call(\"${key}\")`)\n        }\n      }\n    },\n\n    sound_setup() {\n      this.sound_load(\"piece_sound\", piece_sound_wav)\n      this.sound_load(\"flip_sound\", flip_sound_wav)\n    },\n\n    sound_load(key, file) {\n      if (this.sound_effect) {\n        key = this.as_key(key)\n        const object = this[key]\n\n        if (_.isNil(object)) {\n          this[key] = new Sound(file)\n        }\n        this[key].options[\"volume\"] = this.volume\n      }\n    },\n\n    // this.piece_sound にすると無意味にリアクティブになるので this.$piece_sound にしておく\n    as_key(key) {\n      return \"$\" + key\n    },\n  },\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/sound_module.js","import MemoryRecord from \"js-memory-record\"\n// import Location from \"../location\"\n\nexport default class PresetInfo extends MemoryRecord {\n  static get define() {\n    return [\n      /* eslint-disable */\n      { key: \"全部駒箱\",                sfen: \"position sfen 9/9/9/9/9/9/9/9/9 b - 1\",                                                       first_location_key: \"black\", piece_box: [[\"B\", 2], [\"R\", 2], [\"L\", 4], [\"N\", 4], [\"S\", 4], [\"G\", 4], [\"P\", 18], [\"K\", 2]]},\n      { key: \"詰将棋\",                  sfen: \"position sfen 4k4/9/9/9/9/9/9/9/9 b 2r2b4g4s4n4l18p 1\",                                       first_location_key: \"black\", piece_box: [[\"K\", 1]]},\n      { key: \"詰将棋 - 美濃\",           sfen: \"position sfen ln1g5/1ks6/1ppp5/p8/9/9/9/9/9 b BGSNL2rb2g2s2n2l14p 1\",                         first_location_key: \"black\", piece_box: [[\"K\", 1]]},\n      { key: \"詰将棋 - 矢倉\",           sfen: \"position sfen 7nl/6gk1/5gspp/5pp2/9/9/9/9/9 b BGSNL2rbg2s2n2l14p 1\",                          first_location_key: \"black\", piece_box: [[\"K\", 1]]},\n      { key: \"戦型 右四間 vs 四間飛車\", sfen: \"position sfen ln1g1g1nl/1ks2r3/1pppp1bpp/p3spp2/9/P1P1SP1PP/1P1PP1P2/1BK1GR3/LNSG3NL b - 25\", first_location_key: \"black\", piece_box: []},\n      { key: \"平手\",                    sfen: \"position sfen lnsgkgsnl/1r5b1/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL b - 1\",               first_location_key: \"black\", piece_box: []},\n      { key: \"香落ち\",                  sfen: \"position sfen lnsgkgsn1/1r5b1/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1\",               first_location_key: \"white\", piece_box: [[\"L\", 1]]},\n      { key: \"右香落ち\",                sfen: \"position sfen 1nsgkgsnl/1r5b1/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1\",               first_location_key: \"white\", piece_box: [[\"L\", 1]]},\n      { key: \"角落ち\",                  sfen: \"position sfen lnsgkgsnl/1r7/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1\",                 first_location_key: \"white\", piece_box: [[\"B\", 1]]},\n      { key: \"飛車落ち\",                sfen: \"position sfen lnsgkgsnl/7b1/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1\",                 first_location_key: \"white\", piece_box: [[\"R\", 1]]},\n      { key: \"飛香落ち\",                sfen: \"position sfen lnsgkgsn1/7b1/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1\",                 first_location_key: \"white\", piece_box: [[\"R\", 1], [\"L\", 1]]},\n      { key: \"二枚落ち\",                sfen: \"position sfen lnsgkgsnl/9/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1\",                   first_location_key: \"white\", piece_box: [[\"B\", 1], [\"R\", 1]]},\n      { key: \"三枚落ち\",                sfen: \"position sfen lnsgkgsn1/9/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1\",                   first_location_key: \"white\", piece_box: [[\"B\", 1], [\"R\", 1], [\"L\", 1]]},\n      { key: \"四枚落ち\",                sfen: \"position sfen 1nsgkgsn1/9/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1\",                   first_location_key: \"white\", piece_box: [[\"B\", 1], [\"R\", 1], [\"L\", 2]]},\n      { key: \"六枚落ち\",                sfen: \"position sfen 2sgkgs2/9/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1\",                     first_location_key: \"white\", piece_box: [[\"B\", 1], [\"R\", 1], [\"L\", 2], [\"N\", 2]]},\n      { key: \"八枚落ち\",                sfen: \"position sfen 3gkg3/9/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1\",                       first_location_key: \"white\", piece_box: [[\"B\", 1], [\"R\", 1], [\"L\", 2], [\"N\", 2], [\"S\", 2]]},\n      { key: \"十枚落ち\",                sfen: \"position sfen 4k4/9/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1\",                         first_location_key: \"white\", piece_box: [[\"B\", 1], [\"R\", 1], [\"L\", 2], [\"N\", 2], [\"S\", 2], [\"G\", 2]]},\n      { key: \"十九枚落ち\",              sfen: \"position sfen 4k4/9/9/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1\",                                 first_location_key: \"white\", piece_box: [[\"B\", 1], [\"R\", 1], [\"L\", 2], [\"N\", 2], [\"S\", 2], [\"G\", 2], [\"P\", 9]]},\n      { key: \"二十枚落ち\",              sfen: \"position sfen 9/9/9/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1\",                                   first_location_key: \"white\", piece_box: [[\"B\", 1], [\"R\", 1], [\"L\", 2], [\"N\", 2], [\"S\", 2], [\"G\", 2], [\"P\", 9], [\"K\", 1]]},\n      /* eslint-enable */\n    ]\n  }\n}\n\nif (process.argv[1] === __filename) {\n  console.log(PresetInfo.fetch(\"平手\"))\n  console.log(PresetInfo.fetch(\"香落ち\").first_location_key)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/preset_info.js","<template>\n<div class=\"comment_area\" v-if=\"comments_pack\">\n  <div v-if=\"current_comments\">\n    <div class=\"columns\">\n      <div class=\"column\"><!-- is-three-fifths is-offset-one-fifth -->\n        <article class=\"message is-info has-text-left\">\n          <div class=\"message-body\">\n            <div class=\"content\">\n              <template v-for=\"str in current_comments\">\n                <template v-if=\"_.isEmpty(str)\">\n                  <br>\n                </template>\n                <template v-else>\n                  <div v-html=\"auto_link(str)\"></div>\n                </template>\n              </template>\n            </div>\n          </div>\n        </article>\n      </div>\n    </div>\n  </div>\n</div>\n</template>\n\n<script>\nimport Vue from 'vue'\nimport _ from \"lodash\"\nimport Autolinker from 'autolinker'\n\n// To use lodash's _ in the vue template\nObject.defineProperty(Vue.prototype, '_', {value: _})\n\nexport default {\n  props: {\n    comments_pack: { required: true },\n    current_comments: { required: true },\n  },\n\n  created() {\n    this.autolinker = new Autolinker()\n  },\n\n  methods: {\n    auto_link(str) {\n      return this.autolinker.link(str)\n    },\n  },\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/components/CommentArea.vue","import axios from \"axios\"\nconst logger_debug = require('debug')('debug')\n\nexport default {\n  /* eslint-disable */\n  props: {\n    kifu_url:           { type: String,  default: null, },\n    polling_interval:   { type: Number,  default: 0,    },\n  },\n  /* eslint-enable */\n\n  data() {\n    return {\n      interval_id: null,\n      kifu_body_from_url: null,\n    }\n  },\n\n  created() {\n  },\n\n  mounted() {\n  },\n\n  watch: {\n    kifu_url() {\n      this.axios_call()\n    },\n    polling_interval() {\n      this.polling_interval_update()\n    },\n  },\n\n  methods: {\n    polling_interval_update() {\n      if (this.polling_interval >= 1) {\n        if (this.interval_id) {\n          this.log(`clearInterval(${this.interval_id})`)\n          clearInterval(this.interval_id)\n          this.interval_id = null\n        }\n        this.interval_id = setInterval(() => { this.axios_call() }, this.polling_interval * 1000)\n        this.log(`setInterval() => ${this.interval_id}`)\n      }\n    },\n\n    axios_call() {\n      const url = this.kifu_url\n      // const url = \"http://localhost:3000/wr/hanairobiyori-ispt-20171104_220810.kif\"\n      // const url = \"http://tk2-221-20341.vs.sakura.ne.jp/shogi/wr/ureshino_friend-doglong-20180122_213544.kif\"\n      const accessd_at = Date.now().toString()\n      axios({\n        url: url,\n        method: \"get\",\n        params: {\"accessd_at\": accessd_at},\n        responseType: \"text\",\n        timeout: 1000 * 3,\n        headers: {\"X-SHOGI-PLAYER-TIMESTAMP\": accessd_at},\n      }).then((response) => {\n        this.error_message = null\n        this.inside_custom_kifu = null\n        this.kifu_body_from_url = response.data\n        // this.mediator_setup(this.start_turn)\n      }).catch((error) => {\n        if (error.response) {\n          logger_debug(\"error.response.data: %o\", error.response.data)\n          logger_debug(\"error.response.status: %o\", error.response.status)\n          logger_debug(\"error.response.statusText: %o\", error.response.statusText)\n          logger_debug(\"error.response.headers: %o\", error.response.headers)\n        } else if (error.request) {\n          logger_debug(\"error.request: %o\", error.request)\n        } else {\n          logger_debug('error.message: %o', error.message)\n        }\n        logger_debug('error.config: %o', error.config)\n\n        this.kifu_body_from_url = null\n        this.error_message = error.message\n      })\n    },\n  },\n\n  computed: {\n  },\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/polling_module.js","var normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./PieceBox.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./PieceBox.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-d8d61cb8\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/template-compiler/preprocessor?engine=pug!../../node_modules/vue-loader/lib/selector?type=template&index=0!./PieceBox.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/PieceBox.vue\n// module id = 8SiQ\n// module chunks = 1 2","import MemoryRecord from \"js-memory-record\"\n\nexport default class ThemeInfo extends MemoryRecord {\n  static get define() {\n    return [\n      /* eslint-disable */\n      { key: \"none\",   name: \"なし\",   },\n      { key: \"simple\", name: \"紙面風\", },\n      { key: \"real\",   name: \"画像駒\", },\n      /* eslint-enable */\n    ]\n  }\n}\n\nif (process.argv[1] === __filename) {\n  console.log(ThemeInfo.fetch(\"real\").key)\n  console.log(ThemeInfo.fetch(\"real\").name)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/theme_info.js","import Soldier from \"../soldier\"\n\nexport default {\n  methods: {\n    // 盤を消してランダムに駒を配置する\n    api_random_puton() {\n      const soldier = Soldier.random()\n      this.mediator.board.clear()\n      this.mediator.board.place_on(soldier)\n      return soldier\n    },\n\n    // 駒を置く\n    api_place_on(soldier) {\n      this.mediator.board.place_on(soldier)\n    },\n\n    // 盤面クリア\n    api_board_clear() {\n      this.mediator.board.clear()\n    },\n\n    // 指定手数の局面に設定\n    api_board_turn_set(turn) {\n      this.mediator_setup(turn)\n    },\n\n    // 指定手数の局面に設定(play_mode専用・音が出ない)\n    api_play_mode_mediator_seek_to(turn) {\n      this.play_mode_mediator_seek_to(turn)\n    },\n\n    // 反転状態の設定\n    api_flip_set(flag) {\n      this.$store.state.current_flip = flag\n    },\n\n    // 待った\n    api_retract_a_move() {\n      let turn = this.turn_offset - 2\n      if (turn < 0) {\n        turn = 0\n      }\n      this.api_board_turn_set(turn)\n    },\n  },\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/api_module.js","module.exports = __webpack_public_path__ + \"static/media/flip_sound.df51ba2.wav\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/flip_sound.wav\n// module id = G1k4\n// module chunks = 1 2","import _ from 'lodash'\nimport Board from './board'\nimport Place from './place'\nimport Piece from './piece'\nimport Location from './location'\n\nexport default class Soldier {\n  static random(params = {}) {\n    let place = params.place\n    if (!place) {\n      const x = _.random(0, Board.dimension - 1)\n      const y = _.random(0, Board.dimension - 1)\n      place = Place.fetch([x, y])\n    }\n\n    const piece = Piece.fetch(_.random(0, Piece.values.length - 1))\n    const promoted = piece.promotable_p && _.random(0, 1) === 0\n\n    const location = Location.fetch(_.random(0, Location.values.length - 1))\n\n    return new this({piece: piece, place: place, promoted: promoted, location: location})\n  }\n\n  constructor(attributes) {\n    this.attributes = Object.assign({}, attributes)\n  }\n\n  get piece() {\n    return this.attributes.piece\n  }\n\n  set place(place) {\n    this.attributes.place = place\n  }\n\n  get place() {\n    return this.attributes.place\n  }\n\n  get location() {\n    return this.attributes.location\n  }\n\n  get promoted() {\n    return !!this.attributes.promoted\n  }\n\n  set promoted(v) {\n    this.attributes.promoted = v\n  }\n\n  get name() {\n    if (this.promoted) {\n      return this.piece.promoted_name\n    }\n    return this.piece.name\n  }\n\n  get piece_transform() {\n    let attrs = null\n    if (this.piece.promotable_p) {\n      if (this.promoted) {\n        attrs = {location: this.location.flip, promoted: !this.promoted}\n      } else {\n        attrs = {promoted: !this.promoted}\n      }\n    } else {\n      attrs = {location: this.location.flip}\n    }\n    return new Soldier(Object.assign({}, this.attributes, attrs)) // FIXME: this() でいける？\n  }\n\n  get promotable_p() {\n    if (this.piece.promotable_p && !this.promoted) { // 成れるのに成ってなくて\n      return this.danger_zone_p\n    }\n  }\n\n  get danger_zone_p() {\n    if (this.location.key === \"black\") {\n      return this.place.y < Board.danger_zone_size\n    } else {\n      return this.place.y >= (Board.dimension - Board.danger_zone_size)\n    }\n  }\n\n  get to_class_list() {\n    let list = []\n    list.push(`location_${this.location.key}`)\n    list.push(`promoted_${this.promoted}`)\n    list = _.concat(list, this.piece.css_class_list)\n    return list\n  }\n}\n\nif (process.argv[1] === __filename) {\n  const soldier = new Soldier({\n    place: new Place([1, 2]),\n    piece: Piece.fetch(\"P\"),\n    promoted: true,\n    location_key: \"white\",\n  })\n  console.log(soldier.name)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/soldier.js","import Vuex from \"vuex\"\n\n// ここで Vue.use(Vuex) すると利用する側と干渉するので注意\n\nconst store = () => new Vuex.Store({\n  state: {\n    current_flip: false,                // 反転したか？\n    current_vlayout: false,             // 縦レイアウト\n    current_debug_mode: false,\n    current_theme: null,\n    current_size: null,\n    current_bg_variant: null,\n    current_piece_variant: null,\n  },\n  mutations: {\n    // this.$store.commit(\"flip_toggle\") として呼び出す\n    flip_toggle(state) {\n      state.current_flip = !state.current_flip\n    },\n\n    // this.$store.commit(\"current_debug_mode_set\", true)\n    current_debug_mode_set(state, payload) {\n      state.current_debug_mode = payload\n      // ここで呼び出しても意味ない。効き目なし。\n      this.$emit(\"update:debug_mode\", payload)\n    },\n  },\n})\n\nexport default store\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/index.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"modal-card has-text-left\",staticStyle:{\"width\":\"auto\"}},[_c('header',{staticClass:\"modal-card-head\"},[_c('p',{staticClass:\"modal-card-title\"},[_vm._v(\"設定\")]),_c('button',{staticClass:\"delete\",attrs:{\"aria-label\":\"close\"},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.$parent.close()}}})]),_c('section',{staticClass:\"modal-card-body\"},[_c('b-field',{attrs:{\"label\":\"モード\"}}),_c('b-field',[_vm._l((_vm.RunModeInfo.values),function(e){return [_c('b-radio-button',{attrs:{\"native-value\":e.key},model:{value:(_vm.current_run_mode),callback:function ($$v) {_vm.current_run_mode=$$v},expression:\"current_run_mode\"}},[_vm._v(_vm._s(e.name))])]})],2),_c('b-field',{attrs:{\"grouped\":\"grouped\"}},[_c('b-field',{attrs:{\"label\":\"反転\"}},[_c('b-switch',{model:{value:(_vm.flip),callback:function ($$v) {_vm.flip=$$v},expression:\"flip\"}})],1),_c('b-field',{attrs:{\"label\":\"縦並び\"}},[_c('b-switch',{model:{value:(_vm.vlayout),callback:function ($$v) {_vm.vlayout=$$v},expression:\"vlayout\"}})],1),_c('b-field',{attrs:{\"label\":\"デバッグモード\"}},[_c('b-switch',{model:{value:(_vm.current_debug_mode),callback:function ($$v) {_vm.current_debug_mode=$$v},expression:\"current_debug_mode\"}})],1)],1),(false)?[_c('b-dropdown',{model:{value:(_vm.$store.state.current_bg_variant),callback:function ($$v) {_vm.$set(_vm.$store.state, \"current_bg_variant\", $$v)},expression:\"$store.state.current_bg_variant\"}},[_c('button',{staticClass:\"button\",attrs:{\"slot\":\"trigger\"},slot:\"trigger\"},[_c('span',[_vm._v(_vm._s(_vm.BgVariantInfo.fetch(_vm.$store.state.current_bg_variant).name))]),_c('b-icon',{attrs:{\"icon\":\"menu-down\"}})],1),_vm._l((_vm.BgVariantInfo.values),function(e){return [_c('b-dropdown-item',{attrs:{\"value\":e.key}},[_vm._v(_vm._s(e.name))])]})],2)]:_vm._e(),_c('b-field',{attrs:{\"label\":\"テーマ\"}}),_c('b-field',[_vm._l((_vm.ThemeInfo.values),function(e){return [_c('b-radio-button',{attrs:{\"native-value\":e.key},model:{value:(_vm.$store.state.current_theme),callback:function ($$v) {_vm.$set(_vm.$store.state, \"current_theme\", $$v)},expression:\"$store.state.current_theme\"}},[_vm._v(_vm._s(e.name))])]})],2),(_vm.$store.state.current_theme === 'real')?[_c('div',{staticClass:\"box\"},[_c('b-field',{attrs:{\"label\":\"背景の種類\"}}),_c('b-field',[_vm._l((_vm.BgVariantInfo.values),function(e){return [_c('b-radio-button',{attrs:{\"native-value\":e.key,\"size\":\"is-small\"},model:{value:(_vm.$store.state.current_bg_variant),callback:function ($$v) {_vm.$set(_vm.$store.state, \"current_bg_variant\", $$v)},expression:\"$store.state.current_bg_variant\"}},[_vm._v(_vm._s(e.name))])]})],2),_c('b-field',{attrs:{\"label\":\"駒の種類\"}}),_c('b-field',[_vm._l((_vm.PieceVariantInfo.values),function(e){return [_c('b-radio-button',{attrs:{\"native-value\":e.key},model:{value:(_vm.$store.state.current_piece_variant),callback:function ($$v) {_vm.$set(_vm.$store.state, \"current_piece_variant\", $$v)},expression:\"$store.state.current_piece_variant\"}},[_vm._v(_vm._s(e.name))])]})],2)],1)]:_vm._e(),_c('b-field',{attrs:{\"label\":\"サイズ\"}}),_c('b-field',[_vm._l((_vm.SizeInfo.values),function(e){return [_c('b-radio-button',{attrs:{\"native-value\":e.key,\"size\":\"is-small\"},model:{value:(_vm.$store.state.current_size),callback:function ($$v) {_vm.$set(_vm.$store.state, \"current_size\", $$v)},expression:\"$store.state.current_size\"}},[_vm._v(_vm._s(e.name))])]})],2),(_vm.sp_data.mediator)?[_c('b-field',{attrs:{\"label\":\"再生モードの現局面(Readonly)\"}},[_c('b-input',{attrs:{\"value\":_vm.sp_data.mediator.to_position_sfen,\"type\":\"input\",\"size\":\"is-small\",\"readonly\":\"readonly\"}})],1)]:_vm._e(),_c('b-field',{attrs:{\"label\":\"編集モードの現局面(Readonly)\"}},[_c('b-input',{attrs:{\"value\":_vm.edit_mode_current_sfen,\"type\":\"input\",\"size\":\"is-small\",\"readonly\":\"readonly\"}})],1),_c('b-field',{attrs:{\"label\":\"再生モードの棋譜(編集可)\"}},[_c('b-input',{attrs:{\"type\":\"textarea\",\"size\":\"is-small\"},model:{value:(_vm.kifu_source2),callback:function ($$v) {_vm.kifu_source2=$$v},expression:\"kifu_source2\"}})],1),_c('b-field',{attrs:{\"label\":\"操作モードの棋譜(Readonly)\"}},[_c('b-input',{staticClass:\"is-small\",attrs:{\"value\":_vm.play_mode_current_sfen,\"type\":\"textarea\",\"size\":\"is-small\",\"readonly\":\"readonly\"}})],1)],2),_c('footer',{staticClass:\"modal-card-foot\"},[_c('button',{staticClass:\"button is-primary\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.$parent.close()}}},[_vm._v(\"閉じる\")])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-59930097\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/template-compiler/preprocessor.js?engine=pug!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/SettingModal.vue\n// module id = IdNJ\n// module chunks = 1 2","import _ from \"lodash\"\n\nimport Board from \"./board\"\n\nexport default class Place {\n  static fetch(v) {\n    if (v instanceof this) {\n      return v\n    }\n    return Object.freeze(new Place(v))\n  }\n\n  constructor(value) {\n    let x, y\n    if (_.isString(value)) {\n      [x, y] = this._parse_from_string(value)\n    } else {\n      [x, y] = value            // valus is array\n    }\n    [this._x, this._y] = [x, y]\n  }\n\n  get key() {\n    return [this._x, this._y].toString()\n  }\n\n  get x() {\n    return this._x\n  }\n\n  get y() {\n    return this._y\n  }\n\n  get human_x() {\n    return Board.dimension - this._x\n  }\n\n  get kanji_human_x() {\n    return {1: \"１\", 2: \"２\", 3: \"３\", 4: \"４\", 5: \"５\", 6: \"６\", 7: \"７\", 8: \"８\", 9: \"９\"}[this.human_x]\n  }\n\n  get kanji_human_y() {\n    return {1: \"一\", 2: \"二\", 3: \"三\", 4: \"四\", 5: \"五\", 6: \"六\", 7: \"七\", 8: \"八\", 9: \"九\"}[this.human_y]\n  }\n\n  get human_y() {\n    return this._y + 1\n  }\n\n  get flip_v() {\n    return Place.fetch([Board.dimension - 1 - this._x, Board.dimension - 1 - this._y])\n  }\n\n  get flip_h() {\n    return Place.fetch([Board.dimension - 1 - this._x, this._y])\n  }\n\n  _parse_from_string(s) {\n    s = s.replace(/([１-９一二三四五六七八九a-z])/g, (e) => this._replace_table[e])\n    const [x, y] = s.split(\"\").map((e) => Number(e))\n    return [Board.dimension - x, y - 1]\n  }\n\n  get _replace_table() {\n    /* eslint-disable object-property-newline, key-spacing */\n    return {\n      \"１\": 1, \"２\": 2, \"３\": 3, \"４\": 4, \"５\": 5, \"６\": 6, \"７\": 7, \"８\": 8, \"９\": 9,\n      \"一\": 1, \"二\": 2, \"三\": 3, \"四\": 4, \"五\": 5, \"六\": 6, \"七\": 7, \"八\": 8, \"九\": 9,\n      \"a\":  1, \"b\":  2, \"c\":  3, \"d\":  4, \"e\":  5, \"f\":  6, \"g\":  7, \"h\":  8, \"i\":  9,\n    }\n  }\n\n  get to_sfen() {\n    const y_table = [\"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\", \"h\", \"i\"]\n    return [Board.dimension - this._x, y_table[this._y]].join(\"\")\n  }\n\n  get to_css_class() {\n    return `place_${this.human_digits}`\n  }\n\n  get human_xy_ary() {\n    return [this.human_x, this.human_y]\n  }\n\n  get human_digits() {\n    return this.human_xy_ary.join(\"\")\n  }\n\n  get kanji_human() {\n    return [this.kanji_human_x, this.kanji_human_y].join(\"\")\n  }\n}\n\nif (process.argv[1] === __filename) {\n  console.log(Place.fetch(\"6a\").key)\n  console.log(Place.fetch([1, 2]).key)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/place.js","import _ from \"lodash\"\nimport Vue from \"vue\"\n\nimport Board from \"./board\"\nimport Place from \"./place\"\nimport Piece from \"./piece\"\nimport Soldier from \"./soldier\"\nimport SfenParser from \"./sfen_parser\"\nimport SfenSerializer from \"./sfen_serializer\"\nimport PresetInfo from \"./preset_info\"\n\nexport default class Mediator {\n  constructor() {\n    const data_source = new SfenParser()\n    data_source.kifu_body = \"position startpos\"\n    data_source.parse()\n\n    this.data_source = data_source\n    this.current_turn = 0\n    this.board = null\n    this.hold_pieces = null\n    this.last_hand = null\n    this.piece_box = {}\n\n    this.env = process.env.NODE_ENV\n  }\n\n  run() {\n    this.board = this.data_source.board\n    this.hold_pieces = this.data_source.hold_pieces\n    this.last_hand = null\n\n    const move_infos = this.data_source.move_infos\n\n    const num = this.turn_offset - this.turn_offset_min\n    _(num).times((i) => { this.execute_one(move_infos[i]) })\n  }\n\n  execute_one(m) {\n    this.last_hand = m\n    if (m.drop_piece) {\n      const soldier = new Soldier({\n        piece: m.drop_piece,\n        place: m.place,\n        promoted: m.promoted,\n        location: m.location,\n      })\n      this.hold_pieces_add(m.location, soldier.piece, -1)\n      this.board.place_on(soldier)\n    } else {\n      {\n        const soldier = this.board.lookup(m.place)\n        if (soldier) {\n          this.hold_pieces_add(m.location, soldier.piece, 1)\n        }\n      }\n      const soldier = this.board.lookup(m.origin_place)\n      if (m.promoted_trigger) {\n        soldier.promoted = true\n      }\n      soldier.place = m.place\n      this.board.delete_at(m.origin_place)\n      this.board.place_on(soldier)\n    }\n  }\n\n  hold_pieces_count(location, piece) {\n    return this.hold_pieces[location.key][piece.key] || 0\n  }\n\n  hold_pieces_add(location, piece, plus = 1) {\n    const count = this.hold_pieces_count(location, piece) + plus\n    const counts_hash = this.hold_pieces[location.key]\n    if (count >= 1) {\n      Vue.set(counts_hash, piece.key, count)\n    } else {\n      Vue.delete(counts_hash, piece.key)\n    }\n  }\n\n  // location の piece を count 減らしたいとき本当に減らせる数を返す\n  hold_pieces_can_be_reduced_count(location, piece, count) {\n    const max = this.hold_pieces_count(location, piece)\n    if (count > max) {\n      count = max\n    }\n    return count\n  }\n\n  board_safe_delete_on(place) {\n    this.board.delete_at(place)\n  }\n\n  board_piece_fore_class(xy) {\n    const place = Place.fetch(xy)\n    const soldier = this.board.lookup(place)\n\n    if (soldier) {\n      return soldier.to_class_list\n    }\n\n    return []\n  }\n\n  cell_piece_class(xy) {\n    const place = Place.fetch(xy)\n    const soldier = this.board.lookup(place)\n    let list = []\n    if (soldier) {\n      list.push(`location_${soldier.location.key}`)\n    }\n    return list\n  }\n\n  cell_view(xy) {\n    const place = Place.fetch(xy)\n    const soldier = this.board.lookup(place)\n    let str = \"\"\n    if (soldier) {\n      str = soldier.name\n    }\n    return str\n  }\n\n  get dimension() {\n    return Board.dimension\n  }\n\n  // ruby style array index access\n  get turn_offset() {\n    let index = Number(this.current_turn)\n    if (index < 0) {\n      index += this.turn_offset_max + 1\n    }\n    return this.turn_clamp(index)\n  }\n\n  turn_clamp(index) {\n    return _.clamp(Number(index), this.turn_offset_min, this.turn_offset_max)\n  }\n\n  get previous_location() {\n    return this.data_source.location_by_offset(this.turn_offset - 1)\n  }\n\n  get current_location() {\n    return this.data_source.location_by_offset(this.turn_offset)\n  }\n\n  get current_comments() {\n    if (this.data_source.comments_pack) {\n      return this.data_source.comments_pack[this.turn_offset]\n    }\n  }\n\n  get turn_offset_min() {\n    return this.data_source.turn_offset_min\n  }\n\n  get turn_offset_max() {\n    return this.data_source.turn_offset_max\n  }\n\n  current_turn_label(final_label) {\n    if (this.turn_offset === this.turn_offset_max) {\n      if (final_label) {\n        return `まで${this.display_turn}手で${final_label}`\n      } else {\n        return `まで${this.display_turn}手で${this.previous_location.name}の勝ち`\n      }\n    } else {\n      return `${this.display_turn}手`\n    }\n  }\n\n  // 100手目から始まっている棋譜でオフセットが20のときは足して 120 を返す\n  get display_turn() {\n    return this.turn_base + this.turn_offset\n  }\n\n  // 何手目から始まっているかを返す\n  get turn_base() {\n    return this.data_source.turn_base\n  }\n\n  realized_hold_pieces_of(location_key) {\n    const list = Object.entries(this.hold_pieces[location_key])\n    return _(list)\n      .filter(([key, count]) => count >= 1)\n      .map(([key, count]) => [Piece.fetch(key), count])\n      .sortBy(([key, count]) => key.code)\n      .value()\n  }\n\n  // -------------------------------------------------------------------------------- serialize\n\n  // 4k4/9/4G4/9/9/9/9/9/9 b G2r2b2g4s4n4l18p 1\n  get to_simple_sfen() {\n    return this.sfen_serializer.to_s\n  }\n\n  // 4k4/9/4G4/9/9/9/9/9/9 b G2r2b2g4s4n4l18p\n  get to_sfen_without_turn() {\n    return this.sfen_serializer.to_s_without_turn\n  }\n\n  // position sfen 4k4/9/4G4/9/9/9/9/9/9 b G2r2b2g4s4n4l18p 1\n  get to_position_sfen() {\n    return `position sfen ${this.to_simple_sfen}`\n  }\n\n  get sfen_serializer() {\n    return new SfenSerializer(this)\n  }\n\n  // -------------------------------------------------------------------------------- piece_box\n\n  piece_box_count(piece) {\n    return this.piece_box[piece.key] || 0\n  }\n\n  piece_box_add(piece, plus = 1) {\n    const count = this.piece_box_count(piece) + plus\n    if (count >= 1) {\n      Vue.set(this.piece_box, piece.key, count)\n    } else {\n      Vue.delete(this.piece_box, piece.key)\n    }\n  }\n\n  // piece を count 減らしたいとき本当に減らせる数を返す\n  piece_box_can_be_reduced_count(piece, count) {\n    const max = this.piece_box_count(piece)\n    if (count > max) {\n      count = max\n    }\n    return count\n  }\n\n  piece_box_realize() {\n    const list = Object.entries(this.piece_box) // {a: 1} => [['a', 1]]\n    return _(list)\n      .filter(([key, count]) => count >= 1)\n      .map(([key, count]) => [Piece.fetch(key), count])\n      .sortBy(([key, count]) => key.code)\n      .value()\n  }\n\n  // -------------------------------------------------------------------------------- Utilities\n\n  // location の駒台の駒をすべて駒箱に移動する\n  hold_pieces_to_piece_box(location) {\n    _.forIn(this.hold_pieces[location.key], (count, piece_key) => {\n      const piece = Piece.fetch(piece_key)\n      this.hold_pieces_add(location, piece, -count)\n      this.piece_box_add(piece, count)\n    })\n  }\n\n  // 駒箱の駒をすべて location の駒台に移動する\n  piece_box_to_hold_pieces(location) {\n    _.forIn(this.piece_box, (count, piece_key) => {\n      const piece = Piece.fetch(piece_key)\n      this.piece_box_add(piece, -count)\n      this.hold_pieces_add(location, piece, count)\n    })\n  }\n\n  // プリセットに対応するように駒箱をセットする\n  piece_box_reset_by_preset(preset_info) {\n    this.piece_box_clear()\n\n    const info = PresetInfo.fetch(preset_info)\n    if (info.piece_box) {\n      info.piece_box.forEach(([e, c]) => {\n        this.piece_box_add(Piece.fetch(e), c)\n      })\n    }\n  }\n\n  piece_box_clear() {\n    this.piece_box = {}\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/mediator.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.comments_pack)?_c('div',{staticClass:\"comment_area\"},[(_vm.current_comments)?_c('div',[_c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column\"},[_c('article',{staticClass:\"message is-info has-text-left\"},[_c('div',{staticClass:\"message-body\"},[_c('div',{staticClass:\"content\"},[_vm._l((_vm.current_comments),function(str){return [(_vm._.isEmpty(str))?[_c('br')]:[_c('div',{domProps:{\"innerHTML\":_vm._s(_vm.auto_link(str))}})]]})],2)])])])])]):_vm._e()]):_vm._e()}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-3a87a5fb\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/CommentArea.vue\n// module id = N+at\n// module chunks = 1 2","module.exports = __webpack_public_path__ + \"static/media/piece_sound.8673c34.wav\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/piece_sound.wav\n// module id = N1+3\n// module chunks = 1 2","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.piece_stand_show_flag)?_c('div',{staticClass:\"piece_stand_outer\",class:_vm.piece_stand_outer_class},[_c('div',{staticClass:\"location_mark_wrap\"},[_c('div',{staticClass:\"location_mark\",domProps:{\"innerHTML\":_vm._s(_vm.location_name)}}),(!_vm.$parent.current_vlayout)?[_c('div',{staticClass:\"piece_count piece_count1\"},[_vm._v(\"99\")])]:_vm._e(),(_vm.$parent.current_vlayout && _vm.player_name)?[_c('div',{staticClass:\"player_name\"},[_vm._v(_vm._s(_vm.player_name))])]:_vm._e()],2),(!_vm.$parent.current_vlayout && _vm.player_name)?[_c('div',{staticClass:\"player_name\"},[_vm._v(_vm._s(_vm.player_name))])]:_vm._e(),_c('ul',{staticClass:\"piece_stand\",class:_vm.piece_stand_class,on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.$parent.piece_stand_click(_vm.location, $event)},\"contextmenu\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.$parent.hold_cancel($event)}}},_vm._l((_vm.hold_pieces),function(ref){\nvar piece = ref[0];\nvar count = ref[1];\nreturn _c('li',{on:{\"click\":function($event){$event.stopPropagation();return _vm.$parent.piece_stand_piece_click(_vm.location, piece, false, $event)},\"mouseover\":function($event){return _vm.$parent.piece_stand_mouseover_handle(_vm.location, piece, $event)},\"mouseleave\":_vm.$parent.mouseleave_handle}},[_c('div',{staticClass:\"piece_back\",class:_vm.piece_back_class(piece)},[_c('div',{staticClass:\"piece_fore\",class:_vm.piece_fore_class(piece)},[_vm._v(_vm._s(piece.name))])]),(count >= 1)?_c('div',{staticClass:\"piece_count\",class:(\"piece_count\" + count)},[_vm._v(_vm._s(count))]):_vm._e()])}),0)],2):_vm._e()}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-c89f2c72\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/template-compiler/preprocessor.js?engine=pug!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/PieceStand.vue\n// module id = N9V9\n// module chunks = 1 2","import MemoryRecord from \"js-memory-record\"\n\nexport default class Piece extends MemoryRecord {\n  static get define() {\n    return [\n      // 順序について\n      // http://yaneuraou.yaneu.com/2016/07/15/sfen%E6%96%87%E5%AD%97%E5%88%97%E3%81%AF%E6%9C%AC%E6%9D%A5%E3%81%AF%E4%B8%80%E6%84%8F%E3%81%AB%E5%AE%9A%E3%81%BE%E3%82%8B%E4%BB%B6/\n      // https://web.archive.org/web/20080131070731/http://www.glaurungchess.com/shogi/usi.html\n      { key: \"K\", name: \"玉\", alias_name: \"王\", promoted_name: null, promoted_alias_name: null, },\n      { key: \"R\", name: \"飛\", alias_name: null, promoted_name: \"龍\", promoted_alias_name: \"竜\", },\n      { key: \"B\", name: \"角\", alias_name: null, promoted_name: \"馬\", promoted_alias_name: null, },\n      { key: \"G\", name: \"金\", alias_name: null, promoted_name: null, promoted_alias_name: null, },\n      { key: \"S\", name: \"銀\", alias_name: null, promoted_name: \"全\", promoted_alias_name: null, },\n      { key: \"N\", name: \"桂\", alias_name: null, promoted_name: \"圭\", promoted_alias_name: null, },\n      { key: \"L\", name: \"香\", alias_name: null, promoted_name: \"杏\", promoted_alias_name: null, },\n      { key: \"P\", name: \"歩\", alias_name: null, promoted_name: \"と\", promoted_alias_name: null, },\n    ]\n  }\n\n  static lookup(key) {\n    if (typeof key === \"string\") {\n      key = key.toUpperCase()\n    }\n    return super.lookup(key)\n  }\n\n  static kif_lookup(key) {\n    return this.values.find((e) => [e.name, e.alias_name].includes(key))\n  }\n\n  static kif_promoted_lookup(key) {\n    return this.values.find((e) => [e.promoted_name, e.promoted_alias_name].includes(key))\n  }\n\n  get css_class_list() {\n    return [\"piece_name\", `piece_${this.key}`]\n  }\n\n  get promotable_p() {\n    return !!this.promoted_name\n  }\n}\n\nif (process.argv[1] === __filename) {\n  console.log(Piece.fetch(\"K\"))\n  console.log(Piece.fetch(\"K\"))\n  console.log(Piece.lookup(\"\"))\n  console.log(Piece.values)\n  console.log(Piece.values_map.get(\"K\"))\n  console.log(Piece.fetch(\"K\").key)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/piece.js","import MemoryRecord from \"js-memory-record\"\n\nexport default class BgVariantInfo extends MemoryRecord {\n  static get define() {\n    return [\n      /* eslint-disable */\n      { key: 'a', },\n      { key: 'b', },\n      { key: 'c', },\n      { key: 'd', },\n      { key: 'e', },\n      { key: 'f', },\n      { key: 'g', },\n      { key: 'h', },\n      { key: 'i', },\n      { key: 'j', },\n      { key: 'k', },\n      { key: 'l', },\n      { key: 'm', },\n      { key: 'n', },\n      { key: 'o', },\n      { key: 'p', },\n      { key: 'q', },\n      { key: 'r', },\n      { key: 's', },\n      { key: 't', },\n      { key: 'u', },\n      { key: 'v', },\n      { key: 'w', },\n      { key: 'x', },\n      { key: 'y', },\n      { key: 'z', },\n      /* eslint-enable */\n    ]\n  }\n}\n\nif (process.argv[1] === __filename) {\n  console.log(BgVariantInfo.fetch(\"a\").key)\n  console.log(BgVariantInfo.fetch(\"a\").name)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/bg_variant_info.js","import MemoryRecord from \"js-memory-record\"\n\nexport default class PieceVariantInfo extends MemoryRecord {\n  static get define() {\n    return [\n      /* eslint-disable */\n      { key: 'a', name: \"デフォルト\",      },\n      { key: 'b', name: \"将棋図案駒(新)\",  },\n      { key: 'c', name: \"将棋図案駒(旧)\",  },\n      /* eslint-enable */\n    ]\n  }\n}\n\nif (process.argv[1] === __filename) {\n  console.log(PieceVariantInfo.fetch(\"a\").key)\n  console.log(PieceVariantInfo.fetch(\"a\").name)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/piece_variant_info.js","import MemoryRecord from \"js-memory-record\"\nimport Location from \"./location\"\n\nexport default class AnyFuncInfo extends MemoryRecord {\n  static get define() {\n    return [\n      /* eslint-disable */\n      { key: \"☖の持駒を駒箱へ\",   func: e => { e.mediator.hold_pieces_to_piece_box(Location.fetch(\"white\")) }, },\n      { key: \"駒箱から☖の持駒へ\", func: e => { e.mediator.piece_box_to_hold_pieces(Location.fetch(\"white\")) }, },\n      { key: \"駒箱に駒を一式生成\", func: e => { e.mediator.piece_box_reset_by_preset(\"全部駒箱\") }, },\n      { key: \"駒箱の駒をクリア\",   func: e => { e.mediator.piece_box_clear() }, },\n      /* eslint-enable */\n    ]\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/any_func_info.js","import _ from \"lodash\"\n\nimport Piece from \"./piece\"\nimport Place from \"./place\"\nimport Mediator from \"./mediator\"\nimport Location from \"./location\"\nimport Board from \"./board\"\n\nexport default class SfenSerializer {\n  constructor(mediator) {\n    this.mediator = mediator\n  }\n\n  get to_s() {\n    const parts = this.__base_parts\n    parts.push(this.mediator.display_turn + 1)           // 1\n    return parts.join(\" \")\n  }\n\n  // 局面ペディア用(ターンを指定するとエラーになるため)\n  get to_s_without_turn() {\n    return this.__base_parts.join(\" \")\n  }\n\n  get to_board_sfen() {\n    const rows = []\n    _.times(Board.dimension, (y) => {\n      let str = \"\"\n      let space = 0\n      _.times(Board.dimension, (x) => {\n        const place = Place.fetch([x, y])\n        const soldier = this.mediator.board.lookup(place)\n        if (_.isNil(soldier)) {\n          space++\n        } else {\n          if (space >= 1) {\n            str += space\n            space = 0\n          }\n          if (soldier.promoted) {\n            str += \"+\"\n          }\n          let key = soldier.piece.key\n          if (soldier.location.key === \"white\") {\n            key = key.toLowerCase()\n          }\n          str += key\n        }\n      })\n      if (space >= 1) {\n        str += space\n      }\n      rows.push(str)\n    })\n    return rows.join(\"/\")\n  }\n\n  get to_hold_pieces() {\n    let str = Location.values.map((location_info) => {\n      const hold_pieces = this.mediator.hold_pieces[location_info.key]\n      const values = Piece.values.map((e) => {\n        let count = hold_pieces[e.key] || 0\n        let str = \"\"\n        if (count === 0) {\n          return null\n        }\n        if (count >= 2) {\n          str += count\n        }\n        let key = e.key\n        if (location_info.key === \"white\") {\n          key = key.toLowerCase()\n        } else {\n          key = key.toUpperCase()\n        }\n        str += key\n        return str\n      })\n      return _.compact(values).join(\"\")\n    }).join(\"\")\n\n    if (_.isEmpty(str)) {\n      str = \"-\"\n    }\n\n    return str\n  }\n\n  // private\n\n  get __base_parts() {\n    const parts = []\n    parts.push(this.to_board_sfen)                    // 9/9/9/9...\n    parts.push(this.mediator.current_location.key[0]) // \"b\"\n    parts.push(this.to_hold_pieces)                   // \"-\"\n    return parts\n  }\n}\n\nif (process.argv[1] === __filename) {\n  const mediator = new Mediator()\n  mediator.kifu_body = \"position sfen +lnsgkgsnl/1r5b1/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL b S2s 1 moves 7i6h S*2d\"\n  mediator.current_turn = 1\n  mediator.run()\n  const sfen_serializer = new SfenSerializer(mediator)\n  console.log(sfen_serializer.to_s)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/sfen_serializer.js","import _ from \"lodash\"\nimport { mapState } from 'vuex'\n\nexport default {\n  /* eslint-disable */\n  props: {\n    slider_show:                 { type: Boolean, default: false, },\n    controller_show:             { type: Boolean, default: false, },\n    key_event_capture:           { type: Boolean, default: false  },\n    shift_key_mag:               { type: Number,  default: 10,    },\n    system_key_mag:              { type: Number,  default: 50,    },\n    flip:                        { type: Boolean, default: false, },\n    vlayout:                     { type: Boolean, default: false, },\n    hidden_if_piece_stand_blank: { type: Boolean, default: false, },\n    setting_button_show:         { type: Boolean, default: true,  },\n    summary_show:                { type: Boolean, default: true,  },\n    operation_disable:           { type: Boolean, default: false, },\n  },\n  /* eslint-enable */\n\n  data() {\n    return {\n    }\n  },\n\n  mounted() {\n    window.addEventListener(\"keydown\", this.keydown_hook, false)\n  },\n\n  beforeDestroy() {\n    window.removeEventListener('keydown', this.keydown_hook)\n  },\n\n  created() {\n    this.$store.state.current_flip = this.flip\n    this.$store.state.current_vlayout = this.vlayout\n  },\n\n  watch: {\n    /* eslint-disable */\n    current_flip(v)     { this.$emit(\"update:flip\", v)       }, // 中 -> 外\n    flip(v)             { this.$store.state.current_flip = v }, // 外 -> 中\n\n    current_vlayout(v)     { this.$emit(\"update:vlayout\", v)       }, // 中 -> 外\n    vlayout(v)             { this.$store.state.current_vlayout = v }, // 外 -> 中\n    /* eslint-enable */\n  },\n\n  methods: {\n    keydown_hook(e) {\n      if (this.current_debug_mode && false) {\n        this.log(document.activeElement)\n        this.log(e.shiftKey, e.ctrlKey, e.altKey, e.metaKey)\n        this.log(\"e\", e)\n        this.log(\"key\", e.key)\n        this.log(\"code\", e.code)\n        this.log(\"repeat\", e.repeat)\n      }\n\n      if (this.operation_disable) {\n        return\n      }\n\n      if (this.shortcut_hook(e)) {\n        return\n      }\n\n      if (!this.key_event_capture) {\n        return\n      }\n\n      const dom = document.activeElement\n      const controllers = [this.$refs.first, this.$refs.previous, this.$refs.next, this.$refs.last] // FIXME: 指定DOMの下にあるか？の方法がわかればもっと簡潔になる\n      if (!(dom === undefined || dom.tagName === \"BODY\" || _.includes(controllers, dom))) {\n        return\n      }\n\n      if (e.code === \"Backspace\" || e.code === \"ArrowUp\" || e.code === \"ArrowLeft\" || e.key === \"k\" || e.key === \"p\" || e.key === \"b\") {\n        this.relative_move(-1, e)\n        e.preventDefault()\n      }\n\n      if (e.code === \"Space\" || e.code === \"Enter\" || e.code === \"ArrowDown\" || e.code === \"ArrowRight\" || e.key === \"j\" || e.key === \"n\" || e.key === \"f\") {\n        this.relative_move(1, e)\n        e.preventDefault()\n      }\n\n      // let gap = null\n      // let force_value = null\n      //\n      // if (e.code === \"Space\" || e.code === \"Enter\" || e.code === \"ArrowDown\" || e.code === \"ArrowRight\" || e.key === \"j\" || e.key === \"n\" || e.key === \"f\") {\n      //   gap = 1\n      // }\n      // if (e.code === \"Backspace\" || e.code === \"ArrowUp\" || e.code === \"ArrowLeft\" || e.key === \"k\" || e.key === \"p\" || e.key === \"b\") {\n      //   gap = -1\n      // }\n      // if (e.key === \"PageUp\") {\n      //   gap = -10\n      // }\n      // if (e.key === \"PageDown\") {\n      //   gap = 10\n      // }\n      // if (e.shiftKey || e.ctrlKey || e.altKey || e.metaKey) {\n      //   if (gap) {\n      //     gap *= 10\n      //   }\n      // }\n      // if (e.key === \"[\" || e.key === \"Home\" || e.code === \"Escape\") {\n      //   force_value = this.turn_offset_min\n      // }\n      // if (e.key === \"]\" || e.key === \"End\") {\n      //   force_value = this.turn_offset_max\n      // }\n      //\n      // let v = this.current_turn\n      // if (gap !== null) {\n      //   v += gap\n      // }\n      // if (force_value !== null) {\n      //   v = force_value\n      // }\n      // if (v < this.turn_offset_min) {\n      //   v = this.turn_offset_min\n      // }\n      // if (this.turn_offset_max < v) {\n      //   v = this.turn_offset_max\n      // }\n      // this.current_turn = v\n      //\n      // if (gap !== null || force_value !== null) {\n      //   e.preventDefault()\n      // }\n    },\n\n    navi_relative_move(v, event) {\n      this.relative_move(v * this.flip_sign, event)\n    },\n\n    relative_move(v, event = null) {\n      if (event) {\n        if (event.shiftKey) {\n          if (this.shift_key_mag) {\n            v *= this.shift_key_mag\n          }\n        }\n        if (event.ctrlKey || event.altKey || event.metaKey) {\n          if (this.system_key_mag) {\n            v *= this.system_key_mag\n          }\n        }\n      }\n\n      this.current_turn_add(v)\n\n      if (!this.focus_to(\"turn_slider\")) {\n        if (v > 0) {\n          this.focus_to(\"next\")\n        } else {\n          this.focus_to(\"previous\")\n        }\n      }\n    },\n\n    move_to_first() {\n      this.current_turn_set(this.turn_offset_min)\n      this.focus_to(\"turn_slider\") || this.focus_to(\"first\")\n    },\n\n    move_to_last() {\n      this.current_turn_set(this.turn_offset_max)\n      this.focus_to(\"turn_slider\") || this.focus_to(\"last\")\n    },\n\n    current_turn_add(v) {\n      this.current_turn_set(this.mediator.turn_offset + v)\n    },\n\n    current_turn_set(v) {\n      const new_val = this.mediator.turn_clamp(v)\n      const updated = this.turn_offset !== new_val\n\n      if (updated) {\n        if (this.current_run_mode === \"view_mode\") {\n          this.view_mode_mediator_update(new_val)\n        }\n        if (this.current_run_mode === \"play_mode\") {\n          this.play_mode_mediator_seek_to(new_val)\n        }\n        this.sound_call(\"piece_sound\")\n        this.$emit(\"update:start_turn\", this.turn_offset)\n      }\n    },\n\n    focus_to(key) {\n      const el = this.$refs[key]\n      if (el) {\n        el.focus()\n        return true\n      }\n      return false\n    },\n\n    board_flip_run() {\n      this.$store.commit(\"flip_toggle\")\n      this.sound_call(\"flip_sound\")\n      this.focus_to(\"turn_slider\")\n    },\n  },\n\n  //\n  // ...mapState([\n  //   \"current_flip\",\n  // ]),\n  //\n  // が、\n  //\n  // Failed to compile.\n  //\n  // ./node_modules/shogi-player/src/components/navi_module.js\n  // Module parse failed: Unexpected token (191:4)\n  // You may need an appropriate loader to handle this file type.\n  // |       return this.current_flip ? -1 : 1\n  // |     },\n  // |     ...mapState([\n  // |       \"current_flip\",\n  // |     ]),\n  //  @ ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./node_modules/shogi-player/src/components/ShogiPlayer.vue 49:19-46\n  //  @ ./node_modules/shogi-player/src/components/ShogiPlayer.vue\n  //  @ ./app/javascript/packs/application.js\n  //  @ multi (webpack)-dev-server/client?http://localhost:3035 ./app/javascript/packs/application.js\n  //\n  // となるため仕方なく Object.assign を使う\n  //\n  computed: Object.assign({}, {\n    flip_sign() {\n      return this.current_flip ? -1 : 1\n    },\n  }, mapState([\n    \"current_flip\",\n    \"current_vlayout\",\n  ])),\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/navi_module.js","import MemoryRecord from \"js-memory-record\"\n\nexport default class SizeInfo extends MemoryRecord {\n  static get define() {\n    return [\n      /* eslint-disable */\n      { key: \"none\",      },\n      { key: \"xx-small\",  },\n      { key: \"x-small\",   },\n      { key: \"small\",     },\n      { key: \"default\",   },\n      { key: \"medium\",    },\n      { key: \"large\",     },\n      { key: \"x-large\",   },\n      { key: \"xx-large\",  },\n      { key: \"xxx-large\", },\n      /* eslint-enable */\n    ]\n  }\n}\n\nif (process.argv[1] === __filename) {\n  console.log(SizeInfo.fetch(\"x-small\").key)\n  console.log(SizeInfo.fetch(\"x-small\").name)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/size_info.js","var normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./PieceStand.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./PieceStand.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-c89f2c72\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/template-compiler/preprocessor?engine=pug!../../node_modules/vue-loader/lib/selector?type=template&index=0!./PieceStand.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/PieceStand.vue\n// module id = a83v\n// module chunks = 1 2","// const piece_sound = new Sound(\"../static/piece_sound.wav\", {volume: 0.5})\n// piece_sound.options[:volume] = 0.2\n// piece_sound.play()\n\nimport axios from \"axios\"\n\nvar __audio_context__\n\n// new Sound() のたびに new AudioContext() すると6回目ぐらいでエラーになるため根本的な解決にはなっていないが外で一回だけ呼ぶ\nif (typeof window !== \"undefined\" && process.env.NODE_ENV !== \"test\") {\n  window.AudioContext = window.AudioContext || window.webkitAudioContext\n  __audio_context__ = new AudioContext()\n}\n\nexport default class Sound {\n  constructor(url, options = {}) {\n    this.url = url\n    this.options = options\n    this.buffer = null\n\n    if (process.env.NODE_ENV === \"test\") {\n      return\n    }\n\n    this.__resource_load()\n  }\n\n  play() {\n    if (this.is_loaded) {\n      const source = __audio_context__.createBufferSource()\n      source.buffer = this.buffer\n      if (this.volume === null) {\n        // Sound -> Destination\n        source.connect(__audio_context__.destination)\n      } else {\n        // Sound -> GainNode -> Destination\n        const gain_node = __audio_context__.createGain()\n        source.connect(gain_node)\n        gain_node.connect(__audio_context__.destination)\n        gain_node.gain.value = this.volume\n      }\n      source.start(0)\n    }\n  }\n\n  get is_loaded() {\n    return this.buffer !== null\n  }\n\n  get volume() {\n    let volume = 1.0\n    if (this.options[\"volume\"] !== undefined) {\n      volume = this.options[\"volume\"]\n    }\n    return volume\n  }\n\n  __resource_load() {\n    // 動かない\n    if (false) {\n      axios(this.uri, {responseType: \"arraybuffer\"})\n        .then(data => this.context.decodeAudioData(data))\n        .then(buffer => { this.buffer = buffer })\n    }\n\n    // Safari でも動く\n    if (true) {\n      const req = new XMLHttpRequest()\n      req.responseType = \"arraybuffer\"\n      req.onreadystatechange = () => {\n        if (req.readyState === 4) {\n          if (req.status === 0 || req.status === 200) {\n            console.log(`${this.constructor.name}#__resource_load(\"${this.url}\")`)\n            __audio_context__.decodeAudioData(req.response, buffer => { this.buffer = buffer })\n          }\n        }\n      }\n      req.open(\"GET\", this.url, true)\n      req.send(\"\")\n    }\n\n    // 簡単だけどsafariでは動かない\n    if (false) {\n      fetch(this.url)\n        .then(response => response.arrayBuffer())\n        .then(bin => __audio_context__.decodeAudioData(bin, buffer => (this.buffer = buffer)))\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/sound.js","import Mediator from \"../mediator\"\nimport PresetInfo from \"../preset_info\"\n\nexport default {\n  /* eslint-disable */\n  props: {\n    preset_key: { type: String,  default: null, },\n  },\n  /* eslint-enable */\n\n  data() {\n    return {\n      current_preset_key: this.preset_key, // 選択中の初期配置\n    }\n  },\n\n  created() {\n  },\n\n  mounted() {\n  },\n\n  watch: {\n    preset_key(v) { this.current_preset_key = v },              // 引数の変更を反映\n    current_preset_key(v) { this.mediator_setup_by_preset(v) }, // 設定での変更を反映\n  },\n\n  methods: {\n    mediator_setup_by_preset(value) {\n      if (value) {\n        const preset_info = PresetInfo.fetch(value)\n        this.mediator_setup_by_preset_info(preset_info)\n      }\n    },\n\n    // FIXME: pulldown から選択したときに2回呼ばれてしまう\n    mediator_setup_by_preset_info(preset_info) {\n      this.mediator = new Mediator()\n      if (preset_info.sfen) {\n        this.mediator.data_source = this.data_source_by(preset_info.sfen)\n      }\n      this.mediator.piece_box_reset_by_preset(preset_info)\n      this.mediator.run()\n\n      // 駒落ちのときは△の手番から始まるので edit_mode での手番に反映する\n      // mediator の current_turn が 0 のまま run しているので mediator.current_location.key で最初の手番がわかる\n      this.init_location_key = this.mediator.current_location.key\n    },\n  },\n\n  computed: {\n    // テンプレートの中で PresetInfo を簡単に参照できないVueの制約のため\n    preset_info_values() {\n      return PresetInfo.values\n    },\n\n    // 初期配置指定がある場合、その sfen を返す\n    init_preset_sfen() {\n      if (this.preset_key) {\n        return PresetInfo.fetch(this.preset_key).sfen\n      }\n    },\n  },\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/preset_module.js","<template lang=\"pug\">\nul.piece_box(:class=\"piece_box_class\" v-if=\"$parent.current_run_mode === 'edit_mode'\" @click.stop.prevent=\"$parent.piece_box_other_click\" @click.right.prevent=\"$parent.hold_cancel\")\n  li(v-for=\"[piece, count] in $parent.mediator.piece_box_realize()\" @click.stop.prevent=\"$parent.piece_box_piece_click(piece, $event)\" :class=\"{holding_p: $parent.piece_box_have_p(piece)}\" @mouseover=\"$parent.piece_box_mouseover_handle(piece, $event)\" @mouseleave=\"$parent.mouseleave_handle\")\n    .piece_back(:class=\"$parent.piece_box_piece_back_class(piece)\")\n      .piece_fore(:class=\"$parent.piece_box_piece_inner_class(piece)\" v-text=\"piece.name\")\n    .piece_count(v-if=\"count >= 1\" :class=\"`piece_count${count}`\")\n      | {{count}}\n</template>\n\n<script>\n// import Location from \"../location\"\n// import _ from \"lodash\"\n\nexport default {\n  props: {\n  },\n\n  methods: {\n  },\n\n  computed: {\n    piece_box_class() {\n      const list = []\n\n      if (this.$parent.holding_p) {\n        list.push(\"hoverable_p\")\n      }\n\n      return list\n    },\n  },\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/components/PieceBox.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.$parent.current_run_mode === 'edit_mode')?_c('ul',{staticClass:\"piece_box\",class:_vm.piece_box_class,on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.$parent.piece_box_other_click($event)},\"contextmenu\":function($event){$event.preventDefault();return _vm.$parent.hold_cancel($event)}}},_vm._l((_vm.$parent.mediator.piece_box_realize()),function(ref){\nvar piece = ref[0];\nvar count = ref[1];\nreturn _c('li',{class:{holding_p: _vm.$parent.piece_box_have_p(piece)},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.$parent.piece_box_piece_click(piece, $event)},\"mouseover\":function($event){return _vm.$parent.piece_box_mouseover_handle(piece, $event)},\"mouseleave\":_vm.$parent.mouseleave_handle}},[_c('div',{staticClass:\"piece_back\",class:_vm.$parent.piece_box_piece_back_class(piece)},[_c('div',{staticClass:\"piece_fore\",class:_vm.$parent.piece_box_piece_inner_class(piece),domProps:{\"textContent\":_vm._s(piece.name)}})]),(count >= 1)?_c('div',{staticClass:\"piece_count\",class:(\"piece_count\" + count)},[_vm._v(_vm._s(count))]):_vm._e()])}),0):_vm._e()}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-d8d61cb8\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/template-compiler/preprocessor.js?engine=pug!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/PieceBox.vue\n// module id = i2Xt\n// module chunks = 1 2","import _ from 'lodash'\nimport Vue from 'vue'\nimport Soldier from \"./soldier\"\n\nexport default class Board {\n  static get dimension() {\n    return 9\n  }\n\n  static get danger_zone_size() {\n    return 3\n  }\n\n  constructor() {\n    this._surface = {}\n  }\n\n  place_on(soldier) {\n    Vue.set(this._surface, soldier.place.key, soldier)\n  }\n\n  lookup(place) {\n    return this._surface[place.key]\n  }\n\n  delete_at(place) {\n    delete this._surface[place.key]\n  }\n\n  clear() {\n    this._surface = {}\n  }\n\n  get flip_v() {\n    const value = new Board()\n    _.forEach(this._surface, (soldier, place) => {\n      const new_soldier = new Soldier(Object.assign({}, soldier.attributes, {\n        location: soldier.location.flip,\n        place: soldier.place.flip_v,\n      }))\n      value.place_on(new_soldier)\n    })\n    return value\n  }\n\n  // 左右反転\n  get flip_h() {\n    const value = new Board()\n    _.forEach(this._surface, (soldier, place) => {\n      const new_soldier = new Soldier(Object.assign({}, soldier.attributes, {\n        location: soldier.location,\n        place: soldier.place.flip_h,\n      }))\n      value.place_on(new_soldier)\n    })\n    return value\n  }\n}\n\nif (process.argv[1] === __filename) {\n  console.log(Board.dimension)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/board.js","import Location from \"../location\"\nimport Place from \"../place\"\n\nexport default {\n  data() {\n    return {\n      mouseover_info: null,    // マウスが hover している物\n    }\n  },\n\n  methods: {\n    shortcut_hook(e) {\n      // w, b で駒台をクリックしたことにする\n      for (const loc of Location.values) {\n        const key = e.key.toLowerCase()\n        if (key === loc.char_key) {\n          this.soldier_hold_unless_holding_p(e)\n          if (this.piece_stand_click_shared(loc, e)) { // 駒台クリック\n            e.preventDefault()\n            return true\n          }\n        }\n      }\n\n      // 駒箱クリック\n      if (this.current_run_mode === \"edit_mode\") {\n        if (e.code === \"Backspace\" || e.key.toLowerCase() === \"t\") {\n          this.soldier_hold_unless_holding_p(e)\n          if (this.piece_box_other_click(e)) {\n            e.preventDefault()\n            return true\n          }\n        }\n      }\n\n      // 移動キャンセル\n      if (e.code === \"Escape\") {\n        if (this.hold_cancel(e)) {\n          e.preventDefault()\n          return true\n        }\n      }\n\n      // 何も持っていない状態 → 持駒に同じ駒があれば持つ\n      // 何か持っている状態   → キャンセル\n      // https://wikiwiki.jp/factorio/%E6%93%8D%E4%BD%9C%E6%96%B9%E6%B3%95\n      if (e.key === \"q\") {\n        // 何か持っている状態ならキャンセルする\n        if (this.holding_p) {\n          if (this.hold_cancel(e)) {\n            e.preventDefault()\n            return true\n          }\n        }\n\n        // 何も持っていない状態なので持駒に同じ駒があれば持つ\n        if (this.mouseover_info) {\n          if (this.mouseover_info.type === \"board\") {\n            const place = Place.fetch(this.mouseover_info.xy)\n            const soldier = this.mediator.board.lookup(place)\n            if (soldier) {\n              this.piece_stand_piece_click(soldier.location, soldier.piece, soldier.promoted, null) // キーボードのイベントなので null 指定\n              e.preventDefault()\n              return true\n            }\n          }\n        }\n      }\n\n      // 反転\n      if (e.key === \"v\" || e.key === \"r\" || e.code === \"Space\") {\n        if (this.mouseover_info) {\n          if (this.mouseover_info.type === \"board\") {\n            this.board_cell_right_click(this.mouseover_info.xy, e)\n            e.preventDefault()\n            return true\n          }\n        }\n      }\n\n      return false\n    },\n\n    board_mouseover_handle(xy, e) {\n      this.mouseover_info = { type: \"board\", xy: xy }\n    },\n\n    piece_stand_mouseover_handle(location, piece, e) {\n      this.mouseover_info = { type: \"piece_stand\", location: location, piece: piece }\n    },\n\n    piece_box_mouseover_handle(piece, e) {\n      this.mouseover_info = { type: \"piece_box\", piece: piece }\n    },\n\n    mouseleave_handle() {\n      this.mouseover_info = null\n    },\n\n    // 盤上にマウスがあって駒を持っていなかったら左クリック\n    soldier_hold_unless_holding_p(e) {\n      if (this.mouseover_info) {                             // 盤上にマウスがあって\n        if (!this.holding_p) {                                // 駒を持っていなかったら\n          if (this.mouseover_info.type === \"board\") {\n            this.board_cell_left_click(this.mouseover_info.xy, e) // 左クリック\n          }\n          if (this.mouseover_info.type === \"piece_stand\") {\n            this.piece_stand_piece_click(this.mouseover_info.location, this.mouseover_info.piece, false, e)\n          }\n          if (this.mouseover_info.type === \"piece_box\") {\n            this.piece_box_piece_click(this.mouseover_info.piece, e)\n          }\n        }\n      }\n    },\n  },\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/shortcut_module.js","import MemoryRecord from \"js-memory-record\"\n\nexport default class Location extends MemoryRecord {\n  static get define() {\n    return [\n      // { key: \"black\", name: '☗', hirate_name: \"先手\", komaochi_name: \"下手\", char_key: \"b\", },\n      // { key: \"white\", name: '☖', hirate_name: \"後手\", komaochi_name: \"上手\", char_key: \"w\", },\n      { key: \"black\", name: '☗', char_key: \"b\", },\n      { key: \"white\", name: '☖', char_key: \"w\", },\n    ]\n  }\n\n  static cycle_lookup(value) {\n    if (typeof value !== \"number\") {\n      alert(`ArgumentError: ${value}`)\n    }\n    return Location.lookup(Math.abs(value) % Location.values.length)\n  }\n\n  get flip() {\n    return Location.cycle_lookup(this.code + 1)\n  }\n\n  // any_name(komaochi_p) {\n  //   return komaochi_p ? this.komaochi_name : this.hirate_name\n  // }\n\n  advance(value) {\n    return Location.cycle_lookup(this.code + value)\n  }\n}\n\nif (process.argv[1] === __filename) {\n  console.log(Location.cycle_lookup(-1))\n\n  console.log(Location.fetch(\"black\"))\n\n  Location.values.map((e) => {\n    console.log(e)\n  })\n\n  console.log(Location.fetch(\"black\").flip)\n  console.log(Location.fetch(\"white\").flip)\n  // console.log(Location.fetch(\"white\").any_name(false))\n  // console.log(Location.fetch(\"white\").any_name(true))\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/location.js","var normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./CommentArea.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./CommentArea.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3a87a5fb\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./CommentArea.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/CommentArea.vue\n// module id = lujB\n// module chunks = 1 2","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-8366579e\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"indentedSyntax\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ShogiPlayer.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ShogiPlayer.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ShogiPlayer.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-8366579e\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/template-compiler/preprocessor?engine=pug!../../node_modules/vue-loader/lib/selector?type=template&index=0!./ShogiPlayer.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/ShogiPlayer.vue\n// module id = oS6v\n// module chunks = 1 2","import XRegExp from \"xregexp\"\nimport assert from \"minimalistic-assert\"\n\nimport ParserBase from \"./parser_base\"\nimport Piece from \"./piece\"\nimport Place from \"./place\"\nimport Location from \"./location\"\nimport SfenParser from \"./sfen_parser\"\n\nexport default class KifParser extends ParserBase {\n  get board() {\n    const sfen_parser = new SfenParser()\n    sfen_parser.kifu_body = \"position startpos\" // TODO: sfen形式の値のテーブルを持って駒落ちに対応する\n    sfen_parser.parse()\n    return sfen_parser.board\n  }\n\n  get location_base() {\n    let key = null\n    const value = this.header[\"手合割\"] || \"平手\"\n    if (value === \"平手\") {\n      key = \"black\"\n    } else {\n      key = \"white\"\n    }\n    return Location.fetch(key)\n  }\n\n  parse() {\n    this.move_infos = []\n    this.comments_pack = {}\n    let before_point = null\n\n    this.kifu_body.split(/\\n/).forEach((line) => {\n      const md = XRegExp.exec(line, this.__kif_format_move_regexp)\n      if (md) {\n        const attrs = {}\n        attrs[\"location\"] = this.location_by_offset(Number(md[\"number\"]) - 1)\n        if (md[\"origin_place\"]) {\n          attrs[\"origin_place\"] = Place.fetch(md[\"origin_place\"])\n        }\n        assert(md[\"to\"] || md[\"same\"])\n        if (md[\"to\"]) {\n          attrs[\"place\"] = Place.fetch(md[\"to\"])\n          before_point = attrs[\"place\"]\n        } else {\n          assert(md[\"same\"])\n          assert(before_point)\n          attrs[\"place\"] = before_point\n        }\n        if (md[\"motion\"] === \"成\") {\n          attrs[\"promoted_trigger\"] = true\n        }\n        if (md[\"motion\"] === \"打\") {\n          attrs[\"drop_piece\"] = Piece.kif_lookup(md[\"piece\"])\n        }\n        this.move_infos.push(attrs)\n      } else {\n        const md = XRegExp.exec(line, XRegExp(\"^\\\\*(?<comment>.*)\"))\n        if (md) {\n          const index = this.move_infos.length\n          this.comments_pack[index] = this.comments_pack[index] || []\n          this.comments_pack[index].push(md[\"comment\"])\n        }\n      }\n    })\n  }\n\n  set move_infos(v) {\n    this._move_infos = v\n  }\n\n  get move_infos() {\n    return this._move_infos || []\n  }\n\n  set comments_pack(v) {\n    this._comments_pack = v\n  }\n\n  get comments_pack() {\n    return this._comments_pack || []\n  }\n\n  get __kif_format_move_regexp() {\n    return XRegExp(`\n        ^\\\\s*(?<number>\\\\d+)\\\\s+\n        (?<to>[１-９1-9一二三四五六七八九]{2})?\n        (?<same>同)?\\\\s*\n        (?<piece>成[銀桂香]|[王玉金銀全桂圭香杏角馬飛龍竜歩と])\n        (?<suffix>[左右直]?[寄引上]?)\n        (?<motion>不?成|打|合|生)?\n        (\\\\((?<origin_place>\\\\d{2})\\\\))? # KIFフォーマットの移動元用\n      `, 'xm')\n  }\n}\n\nif (process.argv[1] === __filename) {\n  const kif_parser = new KifParser()\n//   kif_parser.kifu_body = `\n// # ----  Kifu for Windows V6.26 棋譜ファイル  ----\n// key：value\n// 手数----指手---------消費時間--\n// *コメント0a\n// *コメント0b\n//    1 ７六歩(77)   ( 0:00/00:00:00)\n// *コメント1a\n// *コメント1b\n//    2 ３四歩(33)   ( 0:00/00:00:00)\n//    3 投了         ( 0:00/00:00:00)\n// `\n\n  kif_parser.kifu_body = `\n   1 ２六歩(27)   ( 0:16/00:00:16)\n   2 ３四歩(33)   ( 0:22/00:00:22)\n   3 ７六歩(77)   ( 0:06/00:00:22)\n   4 ８四歩(83)   ( 0:13/00:00:35)\n   5 ２五歩(26)   ( 0:09/00:00:31)\n   6 ８五歩(84)   ( 0:16/00:00:51)\n   7 ７八金(69)   ( 0:04/00:00:35)\n   8 ３二金(41)   ( 0:09/00:01:00)\n   9 ２四歩(25)   ( 0:04/00:00:39)\n  10 同 歩(23)    ( 0:10/00:01:10)\n`\n  kif_parser.parse()\n  // console.log(kif_parser.board)\n  // console.log(kif_parser.location_base)\n  // console.log(kif_parser.hold_pieces)\n  console.log(kif_parser.move_infos)\n  console.log(kif_parser.comments_pack)\n  console.log(kif_parser.init_sfen === undefined)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/kif_parser.js","import MemoryRecord from \"js-memory-record\"\n\nexport default class RunModeInfo extends MemoryRecord {\n  static get define() {\n    return [\n      /* eslint-disable */\n      { key: \"view_mode\", name: \"再生\", },\n      { key: \"play_mode\", name: \"操作\", },\n      { key: \"edit_mode\", name: \"編集\", },\n      /* eslint-enable */\n    ]\n  }\n}\n\nif (process.argv[1] === __filename) {\n  console.log(RunModeInfo.fetch(\"simple\").key)\n  console.log(RunModeInfo.fetch(\"simple\").name)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/run_mode_info.js","<template lang=\"pug\">\n.piece_stand_outer(:class=\"piece_stand_outer_class\" v-if=\"piece_stand_show_flag\")\n  .location_mark_wrap\n    .location_mark(v-html=\"location_name\")\n\n    //- 2桁にして幅を常に予約しておく\n    template(v-if=\"!$parent.current_vlayout\")\n      .piece_count.piece_count1\n        | 99\n\n    template(v-if=\"$parent.current_vlayout && player_name\")\n      .player_name\n        | {{player_name}}\n\n  template(v-if=\"!$parent.current_vlayout && player_name\")\n    .player_name\n      | {{player_name}}\n\n  ul.piece_stand(:class=\"piece_stand_class\" @click.stop.prevent=\"$parent.piece_stand_click(location, $event)\" @click.right.stop.prevent=\"$parent.hold_cancel\")\n    li(v-for=\"[piece, count] in hold_pieces\" @click.stop=\"$parent.piece_stand_piece_click(location, piece, false, $event)\" @mouseover=\"$parent.piece_stand_mouseover_handle(location, piece, $event)\" @mouseleave=\"$parent.mouseleave_handle\")\n      .piece_back(:class=\"piece_back_class(piece)\")\n        .piece_fore(:class=\"piece_fore_class(piece)\")\n          | {{piece.name}}\n      .piece_count(v-if=\"count >= 1\" :class=\"`piece_count${count}`\")\n        | {{count}}\n\n</template>\n\n<script>\nimport Location from \"../location\"\nimport _ from \"lodash\"\n\nexport default {\n  props: {\n    location_key: { required: true },\n    hold_pieces: { required: true },\n  },\n\n  methods: {\n    hold_piece_holding_p(piece) {\n      return this.$parent.have_piece_location === this.location && this.$parent.have_piece === piece\n    },\n\n    piece_back_class(piece) {\n      let list = []\n\n      // if (this.holding_p) {\n      //   list.push(\"hoverable_p\")\n      // }\n\n      if (this.hold_piece_holding_p(piece)) {\n        list.push(\"holding_p\")\n      } else if (this.$parent.current_run_mode === \"edit_mode\" || (!this.$parent.cpu_location_p && this.$parent.mediator.current_location === this.location)) {\n        if (!this.holding_p) {\n          list.push(\"selectable_p\")\n        }\n      }\n\n      // list = _.concat(list, piece.css_class_list)\n      // list.push(`location_${this.location.key}`)\n      // list.push(\"promoted_false\")\n\n      return list\n    },\n\n    piece_fore_class(piece) {\n      let list = []\n      list = _.concat(list, piece.css_class_list)\n      list.push(`location_${this.location.key}`)\n      list.push(\"promoted_false\")\n      return list\n    },\n  },\n\n  computed: {\n    holding_p() {\n      return this.$parent.holding_p\n    },\n\n    location() {\n      return Location.fetch(this.location_key)\n    },\n\n    piece_stand_outer_class() {\n      const list = []\n\n      list.push(`location_${this.location.key}`)\n      list.push(this.$parent.env)\n      if (this.$parent.mediator.current_location === this.location) {\n        list.push(\"turn_active\")\n      }\n      return list\n    },\n\n    location_name() {\n      // if (this.location.key === \"white\") {\n      //   return '<span style=\"color:white\">☗</span>'\n      // } else {\n      return this.location.name\n      // }\n    },\n\n    piece_stand_class() {\n      const list = []\n\n      if (this.holding_p) {\n        list.push(\"hoverable_p\")\n      }\n\n      return list\n    },\n\n    // ビューモードのとき持駒が空なら駒台を表示しない\n    piece_stand_show_flag() {\n      if (this.$parent.current_run_mode === \"view_mode\" && this.$parent.hidden_if_piece_stand_blank && _.isEmpty(this.hold_pieces)) {\n        return false\n      }\n      return true\n    },\n\n    player_name() {\n      if (this.player_info) {\n        return this.player_info[this.location.key].name\n      }\n    },\n\n    player_info() {\n      return this.$parent.player_info\n    },\n  },\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/components/PieceStand.vue","import AnyFuncInfo from \"../any_func_info\"\n\nexport default {\n  /* eslint-disable */\n  props: {\n  },\n  /* eslint-enable */\n\n  data() {\n    return {\n      any_func_key: null, // 常に選択してないことにしたくて v-model にして設定して any_func_key 変更のタイミングで null に再設定したけど選択してないことにはできなかったのでこれ意味ない\n    }\n  },\n\n  methods: {\n    any_func_click_handle(any_func_info) {\n      any_func_info.func(this)\n    },\n  },\n\n  computed: {\n    any_func_info_values() {\n      return AnyFuncInfo.values\n    },\n  },\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/any_func_module.js","import XRegExp from \"xregexp\"\nimport Vue from \"vue\"\nimport _ from \"lodash\"\n\nimport Board from \"./board\"\nimport ParserBase from \"./parser_base\"\nimport Piece from \"./piece\"\nimport Place from \"./place\"\nimport Soldier from \"./soldier\"\nimport Location from \"./location\"\n\nexport default class SfenParser extends ParserBase {\n  parse() {\n    this.kifu_body = this.kifu_body.replace(/startpos/, \"sfen lnsgkgsnl/1r5b1/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL b - 1\")\n    const regex = XRegExp(\"sfen\\\\s+(?<sfen>\\\\S+)\\\\s+(?<b_or_w>\\\\S+)\\\\s+(?<hold_pieces>\\\\S+)\\\\s+(?<turn_counter_next>\\\\d+)(\\\\s+moves\\\\s+(?<moves>.*))?\")\n    this.attributes = XRegExp.exec(this.kifu_body, regex)\n    if (process.env.NODE_ENV === \"deveopment\") {\n      console.log(this.attributes)\n    }\n  }\n\n  get board() {\n    const board = new Board()\n    this.attributes[\"sfen\"].split(\"/\").forEach((e, y) => {\n      let x = 0\n      XRegExp.forEach(e, XRegExp(\"(?<promoted>\\\\+?)(?<piece>\\\\S)\"), (m, i) => {\n        if (/\\d+/.test(m.piece)) {\n          x += Number(m.piece)\n        } else {\n          const soldier = new Soldier({\n            place: new Place([x, y]),\n            piece: Piece.fetch(m.piece),\n            promoted: (m.promoted === \"+\"),\n            location: this.__location_by_upper_or_lower_case(m.piece),\n          })\n          board.place_on(soldier)\n          x++\n        }\n      })\n    })\n    return board\n  }\n\n  get location_base() {\n    let key = null\n    if (this.attributes[\"b_or_w\"] === \"b\") {\n      key = \"black\"\n    } else {\n      key = \"white\"\n    }\n    return Location.fetch(key)\n  }\n\n  get hold_pieces() {\n    const _hold_pieces = super.hold_pieces\n    if (this.attributes[\"hold_pieces\"] !== \"-\") {\n      XRegExp.forEach(this.attributes[\"hold_pieces\"], XRegExp(\"(?<count>\\\\d+)?(?<piece_char>\\\\S)\"), (md, i) => {\n        const piece = Piece.fetch(md.piece_char)\n        let count = Number(md.count || 1)\n        const location = this.__location_by_upper_or_lower_case(md.piece_char)\n        count += _hold_pieces[location.key][piece.key] || 0\n        Vue.set(_hold_pieces[location.key], piece.key, count)\n      })\n    }\n    return _hold_pieces\n  }\n\n  // sfen_serializer 用\n  get turn_base() {\n    return Number(this.attributes[\"turn_counter_next\"]) - 1\n  }\n\n  // \"b - 1\" なら 0\n  // \"w - 2\" なら 1\n  // \"b - 3\" なら 2\n  // get turn_offset_min() {\n  //   // return Number(this.attributes[\"turn_counter_next\"]) - 1\n  //   // return Number(this.attributes[\"turn_counter_next\"]) - 1\n  // }\n\n  // // \"b - 1\" -> turn_offset_min:0 % 2 -> 0 && w\n  // // \"w - 2\" -> turn_offset_min:1 % 2 -> 1 && w\n  // // \"b - 3\" -> turn_offset_min:2 % 2 -> 0 && w\n  // // \"w - 1\" -> turn_offset_min:0 % 2 -> 0 && w -> true\n  // // \"b - 2\" -> turn_offset_min:1 % 2 -> 1 && w\n  // // \"w - 3\" -> turn_offset_min:2 % 2 -> 0 && w -> true\n  // get komaochi_p() {\n  //   return (this.turn_offset_min % 2) === 0 && this.location_base.key === \"white\"\n  // }\n\n  get move_infos() {\n    // this.moves.map((e, i) => { としたかったが break できないため lodash の forEach に変更。lodash のは false で break できる\n    const ary = []\n    _.forEach(this.moves, (e, i) => {\n      const attrs = {}\n      // if (true) {\n      //   attrs[\"scene_index\"] = this.turn_offset_min + i\n      //   attrs[\"scene_offset\"] = i\n      // }\n      attrs[\"location\"] = this.location_base.advance(i)\n      const md = XRegExp.exec(e, XRegExp(\"(?<origin_x>\\\\S)(?<origin_y>\\\\S)(?<pos_x>\\\\S)(?<pos_y>\\\\S)(?<promoted>\\\\+?)?\"))\n      if (!md) {\n        return false            // break\n      }\n      attrs[\"promoted_trigger\"] = (md.promoted === \"+\")\n      if (md[\"origin_y\"] === \"*\") {\n        attrs[\"drop_piece\"] = Piece.fetch(md[\"origin_x\"])\n      } else {\n        attrs[\"origin_place\"] = Place.fetch(`${md[\"origin_x\"]}${md[\"origin_y\"]}`)\n      }\n      attrs[\"place\"] = Place.fetch(`${md[\"pos_x\"]}${md[\"pos_y\"]}`)\n      ary.push(attrs)\n    })\n    return ary\n  }\n\n  get moves() {\n    let moves = this.attributes[\"moves\"]\n    if (_.isNil(moves) || moves === \"\") {\n      return []\n    }\n    return moves.split(/\\s+/)\n  }\n\n  // 最初の局面\n  get init_sfen() {\n    const parts = []\n    parts.push(\"position\")\n    parts.push(\"sfen\")\n    parts.push(this.attributes[\"sfen\"])\n    parts.push(this.attributes[\"b_or_w\"])\n    parts.push(this.attributes[\"hold_pieces\"])\n    parts.push(this.attributes[\"turn_counter_next\"])\n    return parts.join(\" \")\n  }\n\n  __location_by_upper_or_lower_case(v) {\n    let key = null\n    if (/[A-Z]/.test(v)) {\n      key = \"black\"\n    } else {\n      key = \"white\"\n    }\n    return Location.fetch(key)\n  }\n}\n\nif (process.argv[1] === __filename) {\n  let sfen_parser\n\n  sfen_parser = new SfenParser()\n  sfen_parser.kifu_body = \"position sfen +lnsgkgsnl/1r5b1/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL b S2s 1 moves 7i6h S*2d\"\n  sfen_parser.parse()\n  console.log(sfen_parser.board)\n  console.log(sfen_parser.location_base.key)\n  console.log(sfen_parser.hold_pieces)\n  console.log(sfen_parser.move_infos)\n  console.log(sfen_parser.moves)\n  console.log(sfen_parser.init_sfen)\n\n  sfen_parser = new SfenParser()\n  sfen_parser.kifu_body = \"position sfen lr4knl/3g2gs1/4ppP2/p4bNpp/2pSsN3/PPPP1P2P/2N1P1G2/2G6/L1K4RL w BPs3p 72 moves 2b3c\"\n  sfen_parser.parse()\n  console.log(sfen_parser.location_by_offset(0))\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/sfen_parser.js","import _ from \"lodash\"\n\nimport Place from \"../place\"\nimport Soldier from \"../soldier\"\nimport Location from \"../location\"\n\nexport default {\n  /* eslint-disable */\n  props: {\n  },\n  /* eslint-enable */\n\n  data() {\n    return {\n      // |------------------------+------------+------------+---------------------|\n      // | どこの駒を持ち上げた？ | place_from | have_piece | have_piece_location |\n      // |------------------------+------------+------------+---------------------|\n      // | 盤上                   | ○         |            | ○                  |\n      // | 駒台                   |            | ○         | ○                  |\n      // | 駒箱                   |            | ○         |                     |\n      // |------------------------+------------+------------+---------------------|\n      place_from: null,           // 盤上ら動かそうとしているときの元位置\n      have_piece: null,           // 駒台 or 駒箱から持った駒\n      have_piece_location: null,  // 駒台から持ったときだけ先後が入っている。駒箱から取り出しているときは null\n      have_piece_promoted: null,    // 持ったとき成った状態にするか？\n\n      // プレフィクスに_をつけるとVueに監視されない\n      me_running_p: false,        // mousemove イベント緩和用\n      $me_last_event: null,        // mousemove イベント\n\n      cursor_elem_in_board_container: true,\n\n      $cursor_elem: null,        // 持ちあげている駒のDOM\n      mouse_stick: false,       // 持ち上げている駒をマウスに追随させるか？\n      dialog_p: false,          // 成り確認ダイアログ表示中か？\n    }\n  },\n\n  watch: {\n    current_run_mode() {\n      this.state_reset() // モードが切り替わったときに持ち上げた駒を元に戻す(こうしないとカーソルから駒が離れない)\n    },\n\n    // mediator: { handler() { }, deep: true, },\n  },\n\n  beforeDestroy() {\n    this.virtual_piece_destroy()\n  },\n\n  methods: {\n    // 盤をクリック\n    board_cell_left_click(xy, e) {\n      this.log(\"board_cell_left_click\")\n      this.log(`shiftKey: ${e.shiftKey}`)\n\n      const place = Place.fetch(xy)\n\n      const handle = this.board_cell_left_click_user_handle\n      if (handle) {\n        this.log(`ユーザー指定のクリックハンドル実行: ${place.human_digits}`)\n        if (handle(place, e)) {\n          return\n        }\n      }\n\n      if (this.if_view_mode_break) {\n        return\n      }\n\n      const soldier = this.mediator.board.lookup(place)\n\n      // -------------------------------------------------------------------------------- Validation\n\n      if (this.cpu_location_p) {\n        this.log(\"片方の手番だけを操作できるようにする human_side_key の指定があってCPU側なので無効とする\")\n        return\n      }\n\n      // 自分の手番で相手の駒を持ち上げようとしたので無効とする\n      if (this.current_run_mode === \"play_mode\" && !this.holding_p && soldier && soldier.location !== this.mediator.current_location) {\n        this.log(\"自分の手番で相手の駒を持ち上げようとしたので無効とする\")\n        return\n      }\n\n      // 持たずに何もないところをクリックしたので無効とする\n      if (!this.holding_p && !soldier) {\n        this.log(\"持たずに何もないところをクリックしたので無効とする\")\n        return\n      }\n\n      // 自分の駒の上に駒を重ねようとしたので状況キャンセル\n      if (this.current_run_mode === \"play_mode\" && this.put_on_my_piece_p(soldier)) {\n        this.log(\"自分の駒の上に駒を重ねようとしたので状況キャンセル\")\n        this.state_reset()\n        return\n      }\n\n      // 盤上の駒を持って同じ位置に戻したので状況キャンセル\n      if (_.isEqual(this.place_from, place)) {\n        this.log(\"盤上の駒を持って同じ位置に戻したので状況キャンセル\")\n        this.state_reset()\n        return\n      }\n\n      // --------------------------------------------------------------------------------\n\n      if (this.current_run_mode === \"edit_mode\") {\n        this.log(`holding_p: ${this.holding_p}`)\n        if (!this.holding_p && soldier && this.meta_p(e)) {\n          this.log(\"盤上の駒を裏返す\")\n          this.mediator.board.place_on(soldier.piece_transform)\n          this.pice_hold_and_put_for_bug(place, e) // 不具合対策\n          return\n        }\n      }\n\n      // 盤上の駒を持ちあげる\n      if (!this.holding_p) {\n        this.log(\"盤上の駒を持ちあげる\")\n        this.soldier_hold(place, e)\n        return\n      }\n\n      // 盤上から移動\n      if (this.place_from) {\n        this.log(\"盤上から移動\")\n        if (soldier) {\n          this.mediator.hold_pieces_add(this.origin_soldier1.location, soldier.piece) // 相手の駒があれば取る\n          // this.$forceUpdate()\n        }\n\n        const new_soldier = new Soldier({\n          piece: this.origin_soldier1.piece,\n          place: place,\n          promoted: this.origin_soldier1.promoted,\n          location: this.origin_soldier1.location,\n        })\n\n        if (this.current_run_mode === \"play_mode\" && (new_soldier.promotable_p || this.origin_soldier1.promotable_p)) { // 入って成る or 出て成る\n          this.mouse_stick = false // ダイアログ選択時時は動かしている駒を止める\n          this.dialog_p = true\n\n          this.$buefy.dialog.confirm({\n            message: '成りますか？',\n            confirmText: '成る',\n            cancelText: '成らない',\n            onConfirm: () => { this.promotable_piece_moved(new_soldier, true)  },\n            onCancel:  () => { this.promotable_piece_moved(new_soldier, false) },\n          })\n        } else {\n          if (this.current_run_mode === \"play_mode\") {\n            this.moves_set(this.origin_soldier1.place.to_sfen + place.to_sfen) // 7g7f\n          }\n          this.mediator.board.place_on(new_soldier) // 置く\n          this.mediator.board.delete_at(this.place_from)\n          this.state_reset()\n          this.turn_next()\n        }\n\n        return\n      }\n\n      // 持駒を置く\n      if (this.have_piece) {\n        const soldier = this.origin_soldier2_create(place)\n        this.piece_decriment()\n        this.mediator.board.place_on(soldier) // 置く\n        this.moves_set(soldier.piece.key + \"*\" + place.to_sfen) // P*7g\n        this.state_reset()\n        this.turn_next()\n        return\n      }\n\n      throw new Error(\"must not happen\")\n    },\n\n    // 成れる状態の駒をどうするか\n    promotable_piece_moved(new_soldier, promoted) {\n      this.dialog_p = false\n\n      new_soldier.promoted = promoted\n\n      this.moves_set(this.origin_soldier1.place.to_sfen + new_soldier.place.to_sfen + (new_soldier.promoted ? \"+\" : \"\")) // 7g7f+\n      this.mediator.board.place_on(new_soldier) // 置く\n      this.mediator.board.delete_at(this.place_from)\n      this.state_reset()\n      this.turn_next()\n    },\n\n    board_cell_right_click(xy, e) {\n      this.log(\"盤のセルを右クリック\")\n\n      if (this.if_view_mode_break) {\n        return\n      }\n\n      const place = Place.fetch(xy)\n      const soldier = this.mediator.board.lookup(place)\n\n      if (this.hold_cancel(e)) {\n        return\n      }\n\n      if (this.current_run_mode === \"edit_mode\") {\n        if (!this.holding_p && soldier) {\n          this.log(\"盤上の駒を裏返す\")\n          this.mediator.board.place_on(soldier.piece_transform)\n          this.pice_hold_and_put_for_bug(place, e) // 不具合対策\n        }\n      }\n    },\n\n    // board_cell_right_click2(xy, e) {\n    //   this.log(\"盤のセルを右クリック\")\n    //\n    //   if (this.if_view_mode_break) {\n    //     return\n    //   }\n    //\n    //   const place = Place.fetch(xy)\n    //   const soldier = this.mediator.board.lookup(place)\n    //\n    //   if (this.hold_cancel(e)) {\n    //     return\n    //   }\n    //\n    //   if (this.current_run_mode === \"edit_mode\") {\n    //     if (!this.holding_p && soldier) {\n    //       this.log(\"盤上の駒を裏返す\")\n    //       this.mediator.board.place_on(soldier.piece_transform)\n    //       this.pice_hold_and_put_for_bug(place, e) // 不具合対策\n    //     }\n    //   }\n    // },\n\n    // 駒台 or 駒台の駒をクリックしたときの共通処理\n    piece_stand_click_shared(location, e) {\n      if (this.have_piece_location === location && this.have_piece) {\n        this.log(\"自分の駒台から駒を持ち上げているならキャンセル\")\n        this.state_reset()\n        return true\n      }\n\n      // 相手の駒台から自分の駒台、まあは駒箱から自分の駒台へ移動\n      if (this.current_run_mode === \"edit_mode\") {\n        // if (this.have_piece_location !== location && this.have_piece) {\n        if (this.have_piece) {\n          // 相手の持駒を自分の駒台に移動\n          this.hold_pieces_move_to_my_hold_pieces(e, location)\n          return true\n        }\n      }\n\n      if (this.current_run_mode === \"play_mode\") {\n        if (this.origin_soldier1) {\n          this.log(\"play_mode では盤上の駒を駒台に置くことはできない\")\n          return true\n        }\n      }\n\n      // 盤上の駒を駒台に置く\n      if (this.origin_soldier1) {\n        this.log(\"盤上の駒を駒台に置く\")\n        this.board_soldir_to_hold_pieces(location)\n        return true\n      }\n\n      return false\n    },\n\n    // 駒台クリック\n    piece_stand_click(location, e) {\n      this.piece_stand_click_shared(location, e)\n    },\n\n    // 駒台の駒をクリック\n    piece_stand_piece_click(location, piece, have_piece_promoted, e) {\n      this.log(\"駒台の駒をクリック\")\n\n      if (this.piece_stand_click_shared(location, e)) {\n        return\n      }\n\n      // クリックしたけど持駒がない\n      if (this.mediator.hold_pieces_count(location, piece) <= 0) {\n        this.log(\"クリックしたけど持駒がない\")\n        return\n      }\n\n      // 相手の持駒を持とうとしたときは無効\n      if (this.current_run_mode === \"play_mode\" && location !== this.mediator.current_location) {\n        this.log(\"相手の持駒を持とうとしたときは無効\")\n        return\n      }\n\n      if (this.cpu_location_p) {\n        this.log(\"片方の手番だけを操作できるようにする human_side_key の指定があってCPU側なので無効とする\")\n        return\n      }\n\n      this.log(\"駒台の駒を持つ\")\n      this.have_piece = piece\n      this.have_piece_location = location\n      this.have_piece_promoted = have_piece_promoted\n      this.virtual_piece_create(e, this.origin_soldier2)\n    },\n\n    // 駒箱の駒を持ち上げている？\n    piece_box_have_p(piece) {\n      return _.isNil(this.have_piece_location) && this.have_piece === piece\n    },\n\n    // FIXME: 駒を持っているときは「駒箱の駒」に対して一切反応しないようにしたい。そうすると駒箱だけの判定で済む\n    piece_box_other_click(e) {\n      this.log(\"piece_box_other_click:駒箱クリック\")\n\n      if (_.isNil(this.have_piece_location) && this.have_piece) {\n        this.log(\"持っているならキャンセル\")\n        this.state_reset()\n        return true\n      }\n\n      if (this.have_piece_location && this.have_piece) {\n        this.log(\"駒台から駒箱に移動\")\n        const count = this.hold_piece_source_cut(e)               // 相手の持駒を減らして減らした分だけ\n        this.mediator.piece_box_add(this.have_piece, count) // 駒箱に加算する\n        this.state_reset()\n        return true\n      }\n\n      if (this.origin_soldier1) {\n        this.log(\"盤上の駒を駒箱に移動\")\n        this.mediator.piece_box_add(this.origin_soldier1.piece)\n        this.mediator.board.delete_at(this.origin_soldier1.place)\n        this.state_reset()\n        return true\n      }\n\n      return false\n    },\n\n    // 駒箱の駒をクリック\n    piece_box_piece_click(piece, e) {\n      // 駒をクリックしたとき駒箱をクリックするのと同じ処理を実行\n      if (this.piece_box_other_click(e)) {\n        return\n      }\n\n      this.log(\"piece_box_piece_click:駒箱の駒を持つ\")\n      this.have_piece = piece\n      this.have_piece_location = null\n      this.have_piece_promoted = false\n      this.virtual_piece_create(e, this.origin_soldier2)\n    },\n\n    // FIXME: click_hook のところだけで行いたい\n    // 成り選択ダイアログ表示中に Escape でこれが呼ばれるので dialog_p のときは実行しない\n    hold_cancel(e) {\n      if (!this.dialog_p) {\n        if (this.holding_p) {\n          this.log(\"持ち上げた駒を元に戻す\")\n          this.state_reset()\n          return true\n        }\n      }\n\n      return false\n    },\n\n    // 盤上の駒を駒台に置く\n    board_soldir_to_hold_pieces(location) {\n      this.mediator.hold_pieces_add(location, this.origin_soldier1.piece) // 駒台にプラス\n      this.mediator.board.delete_at(this.origin_soldier1.place)\n      this.state_reset()\n    },\n\n    hold_pieces_move_to_my_hold_pieces(e, location) {\n      this.log(\"相手の持駒を自分の駒台に移動\")\n      const count = this.hold_piece_source_cut(e)                           // 相手の持駒を減らして減らした分だけ\n      this.mediator.hold_pieces_add(location, this.have_piece, count) // 自分に加算する\n      this.state_reset()\n    },\n\n    // 持ち上げている駒を元の場所から減らす\n    hold_piece_source_cut(e) {\n      let count = 1\n\n      if (this.have_piece_location) {\n        this.log(\"相手の駒箱から移動\")\n        if (this.meta_p(e)) {\n          this.log(\"シフトが押されていたので全部移動\")\n          count = this.mediator.hold_pieces_count(this.have_piece_location, this.have_piece)\n        }\n        count = this.mediator.hold_pieces_can_be_reduced_count(this.have_piece_location, this.have_piece, count)\n        this.mediator.hold_pieces_add(this.have_piece_location, this.have_piece, -count)\n      } else {\n        this.log(\"駒箱から移動\")\n        if (this.meta_p(e)) {\n          this.log(\"シフトが押されていたので全部移動\")\n          count = this.mediator.piece_box_count(this.have_piece)\n        }\n        count = this.mediator.piece_box_can_be_reduced_count(this.have_piece, count) // 減らせる数を clamp する。そうしないと駒箱から移動するときに駒が増えいく\n        this.mediator.piece_box_add(this.have_piece, -count)\n      }\n\n      // 実際に減らせれた数を返す(重要)\n      return count\n    },\n\n    // 駒を1つ減らす\n    piece_decriment() {\n      if (this.have_piece_location) {\n        this.mediator.hold_pieces_add(this.have_piece_location, this.have_piece, -1)\n      } else {\n        this.mediator.piece_box_add(this.have_piece, -1)\n      }\n    },\n\n    // 自分の駒の上に重ねた？\n    put_on_my_piece_p(soldier) {\n      return this.holding_p && soldier && soldier.location === this.mediator.current_location\n    },\n\n    // 盤面の駒を持ち上げる\n    soldier_hold(place, e) {\n      this.place_from = place\n      this.virtual_piece_create(e, this.origin_soldier1)\n    },\n\n    // 駒を持ってない状態にする\n    state_reset() {\n      if (this.dialog_p) {\n        alert(\"ダイアログ表示中に state_reset が呼ばれてはいけない\")\n      }\n      this.log(\"state_reset\")\n      this.place_from = null // 持ってない状態にする\n      this.have_piece = null\n      this.have_piece_location = null\n      this.have_piece_promoted = null\n      this.virtual_piece_destroy()\n    },\n\n    // 駒を持つ → そのまま置く\n    // これは Vue がリアクティブにならない対策として入れているのでできれば外したい\n    pice_hold_and_put_for_bug(place, e) {\n      this.soldier_hold(place, e)\n      this.state_reset()\n    },\n\n    // -------------------------------------------------------------------------------- piece_box\n\n    // 駒箱の駒\n    piece_box_piece_back_class(piece) {\n      let list = []\n      if (this.piece_box_have_p(piece)) {\n        list.push(\"holding_p\")\n      } else if (this.current_run_mode === \"edit_mode\") {\n        if (!this.holding_p) {\n          list.push(\"selectable_p\")\n        }\n      }\n\n      // list = _.concat(list, piece.css_class_list)\n      // list.push(\"location_black\")\n      // list.push(\"promoted_false\")\n\n      return list\n    },\n\n    // 駒箱の駒のテクスチャ\n    piece_box_piece_inner_class(piece) {\n      let list = []\n      list = _.concat(list, piece.css_class_list)\n      list.push(\"location_black\")\n      list.push(\"promoted_false\")\n      return list\n    },\n\n    // --------------------------------------------------------------------------------\n\n    all_flip_v() {\n      // 盤面反転\n      this.mediator.board = this.mediator.board.flip_v\n\n      // 持駒反転\n      this.mediator.hold_pieces = _.reduce(Location.values, (a, e) => {\n        a[e.key] = this.mediator.hold_pieces[e.flip.key]\n        return a\n      }, {})\n    },\n\n    all_flip_h() {\n      // 盤面左右反転\n      this.mediator.board = this.mediator.board.flip_h\n    },\n\n    init_location_toggle() {\n      this.init_location_key = this.init_location.flip.key\n    },\n\n    // 駒箱や駒台から持ち上げている駒\n    origin_soldier2_create(place) {\n      return new Soldier({\n        piece: this.have_piece,\n        place: place,\n        promoted: this.have_piece_promoted || false,\n        location: this.have_piece_location || Location.fetch(\"black\"),\n      })\n    },\n\n    mousemove_hook(e) {\n      this.$me_last_event = e\n\n      // 連続で呼ばれるイベント処理を緩和する方法\n      // https://qiita.com/noplan1989/items/9333faad731f5ecaaccd\n      // ※試してみているけどあまり効果がない\n      if (true) {\n        // 呼び出されるまで何もしない\n        if (!this.me_running_p) {\n          this.me_running_p = true\n\n          // 描画する前のタイミングで呼び出してもらう\n          window.requestAnimationFrame(() => {\n            this.cursor_elem_set_pos()\n\n            this.me_running_p = false\n          })\n        }\n      } else {\n        this.cursor_elem_set_pos()\n      }\n    },\n\n    // 右クリックならキャンセル(動いてないっぽい)\n    click_hook(e) {\n      if (e.which !== 1) {\n        this.state_reset()\n      }\n    },\n\n    cursor_elem_set_pos() {\n      if (this.$cursor_elem && this.$me_last_event && this.mouse_stick) {\n        // TODO: これが遅いのか？ もっと速く設定できる方法があれば変更したい\n        let x = this.$me_last_event.clientX\n        let y = this.$me_last_event.clientY\n\n        if (this.cursor_elem_in_board_container) {\n          // const rect = this.$refs.board_container_ref.getBoundingClientRect()\n          // x -= rect.left\n          // y -= rect.top\n        }\n\n        this.$cursor_elem.style.left = `${x}px`\n        this.$cursor_elem.style.top  = `${y}px`\n      }\n    },\n\n    // マウス位置に表示する駒の生成\n    //\n    //   .piece_back.cursor_elem\n    //     .piece_fore.virtual_piece_flip\n    //\n    virtual_piece_create(event, soldier) {\n      this.virtual_piece_destroy()\n      this.virtual_piece_dom_create(soldier)\n\n      this.mouse_stick = true   // マウスに追随する\n\n      // キーボードイベントの場合は null が来るようにしている\n      // マウスを動かしてはじめて座標が取れるのでキーボードの場合はすぐに駒は表示されない\n      if (event) {\n        this.$me_last_event = event\n        this.cursor_elem_set_pos()\n      }\n\n      window.addEventListener(\"mousemove\", this.mousemove_hook, false)\n      window.addEventListener(\"click\", this.click_hook, false)\n    },\n\n    // 注意: リターンキーでこの soldier をいくら反転させようと考えてはいけない。(origin_soldier1 が元なので意味がない)\n    virtual_piece_dom_create(soldier) {\n      this.$cursor_elem = document.createElement(\"div\")\n      this.$cursor_elem.classList.add(\"cursor_elem\")\n\n      const piece_back = document.createElement(\"div\")\n      piece_back.classList.add(\"piece_back\")\n\n      const piece_fore = document.createElement(\"div\")\n      piece_fore.classList.add(\"piece_fore\", ...soldier.to_class_list)\n\n      const text = document.createTextNode(soldier.name)\n      piece_fore.appendChild(text)\n\n      // const list = _.concat(class_list, [\"piece_back\"])\n      // piece_fore.classList.add(...list)\n\n      if (this.current_flip) {\n        // this.$cursor_elem.classList.add(\"virtual_piece_flip\") // 盤面を反転している場合は駒も反転する\n        piece_back.classList.add(\"virtual_piece_flip\") // 盤面を反転している場合は駒も反転する\n      }\n\n      piece_back.appendChild(piece_fore)\n      this.$cursor_elem.appendChild(piece_back)\n\n      // マウスイベントが発生するまでは画面内に表示されてしまうので画面外に出す\n      this.$cursor_elem.style.left = \"-50%\"\n      this.$cursor_elem.style.top  = \"-50%\"\n\n      if (this.cursor_elem_in_board_container) {\n        this.$refs.board_container_ref.appendChild(this.$cursor_elem)\n      } else {\n        this.$el.appendChild(this.$cursor_elem)\n      }\n    },\n\n    virtual_piece_destroy() {\n      if (this.$cursor_elem) {\n        if (this.cursor_elem_in_board_container) {\n          this.$refs.board_container_ref.removeChild(this.$cursor_elem)\n        } else {\n          this.$el.removeChild(this.$cursor_elem)\n        }\n\n        this.$cursor_elem = null\n        this.mouse_stick = false\n\n        window.removeEventListener(\"mousemove\", this.mousemove_hook, false)\n        window.removeEventListener(\"click\", this.click_hook, false)\n      }\n    },\n\n    meta_p(e) {\n      return e.shiftKey | e.ctrlKey | e.altKey | e.metaKey\n    },\n  },\n\n  computed: {\n    // 移動元の駒(盤上から)\n    origin_soldier1() {\n      if (this.place_from) {\n        return this.mediator.board.lookup(this.place_from)\n      }\n    },\n\n    // 移動元の駒(駒台 or 駒箱から)\n    origin_soldier2() {\n      if (this.have_piece) {\n        const place = Place.fetch([0, 0])\n        return this.origin_soldier2_create(place)\n      }\n    },\n\n    // 駒を持ち上げている状態？\n    holding_p() {\n      return !_.isNil(this.place_from) || !_.isNil(this.have_piece)\n    },\n\n    // 片方の手番だけを操作できるようにする human_side_key の指定があってCPUの手番？\n    cpu_location_p() {\n      if (this.current_run_mode === \"play_mode\") {\n        return !_.includes(this.human_locations, this.mediator.current_location)\n      }\n    },\n\n    if_view_mode_break() {\n      // return this.current_run_mode === \"view_mode\"\n    },\n\n  },\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/edit_mode_module.js","var normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./SettingModal.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./SettingModal.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-59930097\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/template-compiler/preprocessor?engine=pug!../../node_modules/vue-loader/lib/selector?type=template&index=0!./SettingModal.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/SettingModal.vue\n// module id = zlNq\n// module chunks = 1 2"],"sourceRoot":""}
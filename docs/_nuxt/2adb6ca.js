(window.webpackJsonp=window.webpackJsonp||[]).push([[33,4,8,9,10,11,12,13,14,15,16,17,18,19,20,22,23,25,29,30,31,32,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,60,62,64,65,68,69,70,71],{1:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var o={inject:["TheSp"]}},100:function(e,t,n){"use strict";(function(e,o){n.d(t,"a",(function(){return d}));n(11),n(517);var r=n(177),c=n(178),_=n(518),l=n(519),f=n(516);n(12);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Object(f.a)(e);if(t){var r=Object(f.a)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Object(l.a)(this,n)}}var d=function(e){Object(_.a)(n,e);var t=h(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,null,[{key:"define",get:function(){return[{key:"none",name:"none"},{key:"wood_normal",name:"普通の木目"},{key:"wood_bright",name:"明るい木目"}]}}]),n}(n(520).a);void 0!==e&&e.argv[1]===o&&(console.log(d.fetch("wood_normal").key),console.log(d.fetch("wood_normal").name))}).call(this,n(179),"/index.js")},101:function(e,t,n){"use strict";(function(e,o){n.d(t,"a",(function(){return d}));n(11),n(517);var r=n(177),c=n(178),_=n(518),l=n(519),f=n(516);n(12);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Object(f.a)(e);if(t){var r=Object(f.a)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Object(l.a)(this,n)}}var d=function(e){Object(_.a)(n,e);var t=h(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,null,[{key:"define",get:function(){return[{key:"none",name:"none",format:""},{key:"nureyon",name:"ぬれよん",format:"SVG"},{key:"paper",name:"紙面風",format:"SVG"},{key:"zuan",name:"図案駒",format:"PNG"},{key:"portella",name:"Portella",format:"PNG"}]}}]),n}(n(520).a);void 0!==e&&e.argv[1]===o&&(console.log(d.fetch("a").key),console.log(d.fetch("a").name))}).call(this,n(179),"/index.js")},127:function(e,t,n){"use strict";(function(e,o){n.d(t,"a",(function(){return h}));var r=n(21),c=n(177),_=n(178),l=(n(11),n(45),n(98),n(530),n(57),n(74),n(543),n(23),n(180)),f=n(532),h=function(){function e(t){var n,o;if(Object(c.a)(this,e),"string"==typeof t){var _=this.__parse_from_string(t),l=Object(r.a)(_,2);n=l[0],o=l[1]}else{var f=Object(r.a)(t,2);n=f[0],o=f[1]}var h=[n,o];this._x=h[0],this._y=h[1]}return Object(_.a)(e,[{key:"key",get:function(){return[this._x,this._y].toString()}},{key:"x",get:function(){return this._x}},{key:"y",get:function(){return this._y}},{key:"to_a",get:function(){return[this.x,this.y]}},{key:"to_h",get:function(){return{x:this.x,y:this.y}}},{key:"human_x",get:function(){return l.a.dimension-this._x}},{key:"kanji_human_x",get:function(){return e.TO_KANJI_REPLACE_TABLE_X[this.human_x]}},{key:"kanji_human_y",get:function(){return e.TO_KANJI_REPLACE_TABLE_Y[this.human_y]}},{key:"yomiage_x",get:function(){return f.a.fetch(this.human_x.toString()).yomiage}},{key:"yomiage_y",get:function(){return f.a.fetch(this.human_y.toString()).yomiage}},{key:"human_y",get:function(){return this._y+1}},{key:"flip_all",get:function(){return e.fetch([l.a.dimension-1-this._x,l.a.dimension-1-this._y])}},{key:"flop",get:function(){return e.fetch([l.a.dimension-1-this._x,this._y])}},{key:"flop_if",value:function(e){return e?this.flop:this}},{key:"sp_flip_if_white",value:function(e){return"white"===e.key?this.flip_all:this}},{key:"to_sfen",get:function(){return[l.a.dimension-this._x,e.TO_SFEN_REPLACE_TABLE_Y[this._y]].join("")}},{key:"css_place_key",get:function(){return["place",this.human_x,this.human_y].join("_")}},{key:"human_xy_ary",get:function(){return[this.human_x,this.human_y]}},{key:"kanji_human",get:function(){return[this.kanji_human_x,this.kanji_human_y].join("")}},{key:"digit_human",get:function(){return[this.human_x,this.human_y].join("")}},{key:"even_p",get:function(){return 0==(this.human_x+this.human_y&1)}},{key:"odd_p",get:function(){return!this.even_p}},{key:"tennozan_p",get:function(){return this.x===Math.trunc(l.a.dimension/2)&&this.y===Math.trunc(l.a.dimension/2)}},{key:"rotate_add",value:function(t,n){var o=this.__new_pos(this._x,t),r=this.__new_pos(this._y,n);return e.fetch([o,r])}},{key:"__new_pos",value:function(e,t){return Math.trunc((e+t+l.a.dimension)%l.a.dimension)}},{key:"__parse_from_string",value:function(s){var t=s.split("").map((function(t){var n;return Number(null!==(n=e.ANY_TO_NUMBER_REPLACE_TABLE[t])&&void 0!==n?n:t)})),n=Object(r.a)(t,2),o=n[0],c=n[1];return[l.a.dimension-o,c-1]}}],[{key:"fetch",value:function(t){return t instanceof this?t:Object.freeze(new e(t))}},{key:"xy_valid_p",value:function(e,t){return 0<=e&&e<l.a.dimension&&0<=t&&t<l.a.dimension}},{key:"xy_invalid_p",value:function(e,t){return!this.xy_valid_p(e,t)}}]),e}();h.ANY_TO_NUMBER_REPLACE_TABLE={"１":1,"２":2,"３":3,"４":4,"５":5,"６":6,"７":7,"８":8,"９":9,"一":1,"二":2,"三":3,"四":4,"五":5,"六":6,"七":7,"八":8,"九":9,a:1,b:2,c:3,d:4,e:5,f:6,g:7,h:8,i:9},h.TO_KANJI_REPLACE_TABLE_X={1:"１",2:"２",3:"３",4:"４",5:"５",6:"６",7:"７",8:"８",9:"９"},h.TO_KANJI_REPLACE_TABLE_Y={1:"一",2:"二",3:"三",4:"四",5:"五",6:"六",7:"七",8:"八",9:"九"},h.TO_SFEN_REPLACE_TABLE_Y=["a","b","c","d","e","f","g","h","i"],void 0!==e&&e.argv[1]===o&&(console.log(h.fetch("6a").key),console.log(h.fetch([1,2]).key))}).call(this,n(179),"/index.js")},128:function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));var o=n(21),r=n(177),c=n(178),_=(n(37),n(12),n(74),n(51),n(317),n(57),n(36),n(11),n(31),n(22),n(23)),l=n.n(_),f=n(2),h=n(180),d=n(127),v=n(522),y=n(521),m=n(314),k=n(537),O=n(524),j=n(71),x=n(570),w=function(){function e(){Object(r.a)(this,e);var t=new m.a;t.raw_body="position startpos",t.parse(),this.data_source=t,this.current_turn=0,this.board=null,this.hold_pieces=null,this.last_hand=null,this.piece_box={},this.env="production"}return Object(c.a)(e,[{key:"run",value:function(){var e=this;this.board=this.data_source.board,this.hold_pieces=this.data_source.hold_pieces,this.last_hand=null;var t=this.data_source.move_infos,n=this.turn_offset-this.turn_offset_min;l()(n).times((function(i){e.execute_one(t[i])}))}},{key:"execute_one",value:function(e){if(this.last_hand=e,e.drop_piece){var t=new y.a({piece:e.drop_piece,place:e.place,promoted:e.promoted,location:e.location});this.hold_pieces_add(e.location,t.piece,-1),this.board.place_on(t)}else{var n=this.board.lookup(e.place);n&&this.hold_pieces_add(e.location,n.piece,1);var o=this.board.lookup(e.origin_place);e.promoted_trigger&&(o.promoted=!0),o.place=e.place,this.board.delete_at(e.origin_place),this.board.place_on(o)}}},{key:"hold_pieces_count",value:function(e,t){return this.hold_pieces[e.key][t.key]||0}},{key:"hold_pieces_blank_p",value:function(e){return 0===Object.keys(this.hold_pieces[e.key]).length}},{key:"hold_pieces_add",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=this.hold_pieces_count(e,t)+n,r=this.hold_pieces[e.key];f.a.delete(r,t.key),o>=1&&f.a.set(r,t.key,o)}},{key:"hold_pieces_can_be_reduced_count",value:function(e,t,n){var o=this.hold_pieces_count(e,t);return n>o&&(n=o),n}},{key:"board_safe_delete_on",value:function(e){this.board.delete_at(e)}},{key:"board_piece_fore_class",value:function(e){var t=d.a.fetch(e),n=this.board.lookup(t);return n?n.css_class_list:[]}},{key:"cell_piece_class",value:function(e){var t=d.a.fetch(e),n=this.board.lookup(t),o=[];return n&&o.push("location_".concat(n.location.key)),o}},{key:"cell_view",value:function(e){var t=d.a.fetch(e),n=this.board.lookup(t),o="";return n&&(o=n.name),o}},{key:"dimension",get:function(){return h.a.dimension}},{key:"turn_offset",get:function(){var e=Number(this.current_turn);return e<0&&(e+=this.turn_offset_max+1),this.turn_clamp(e)}},{key:"turn_clamp",value:function(e){return l.a.clamp(Number(e),this.turn_offset_min,this.turn_offset_max)}},{key:"turn_cycle",value:function(e){return x.Xinteger.imodulo(Number(e),this.turn_offset_max+1)}},{key:"previous_location",get:function(){return this.data_source.location_by_offset(this.turn_offset-1)}},{key:"current_location",get:function(){return this.data_source.location_by_offset(this.turn_offset)}},{key:"current_comments",get:function(){if(this.data_source.comment_lines_hash)return this.data_source.comment_lines_hash[this.turn_offset]}},{key:"turn_offset_min",get:function(){return this.data_source.turn_offset_min}},{key:"turn_offset_max",get:function(){return this.data_source.turn_offset_max}},{key:"current_turn_label",get:function(){return this.turn_offset===this.turn_offset_max?"まで".concat(this.display_turn,"手で").concat(this.previous_location.name,"の勝ち"):"".concat(this.display_turn,"手")}},{key:"display_turn",get:function(){return this.turn_base+this.turn_offset}},{key:"turn_base",get:function(){return this.data_source.turn_base}},{key:"realized_hold_pieces_of",value:function(e){var t=Object.entries(this.hold_pieces[e.key]);return l()(t).map((function(e){var t=Object(o.a)(e,2),n=t[0],r=t[1];return[v.a.fetch(n),r]})).sortBy((function(e){var t=Object(o.a)(e,2),n=t[0];t[1];return n.code})).value()}},{key:"to_simple_sfen",get:function(){return this.sfen_serializer.to_s}},{key:"to_sfen_without_turn",get:function(){return this.sfen_serializer.to_s_without_turn}},{key:"to_short_sfen",get:function(){return"position sfen ".concat(this.to_simple_sfen)}},{key:"sfen_serializer",get:function(){return new k.a(this)}},{key:"piece_box_count",value:function(e){return this.piece_box[e.key]||0}},{key:"piece_box_add",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this.piece_box_count(e)+t;f.a.delete(this.piece_box,e.key),n>=1&&f.a.set(this.piece_box,e.key,n)}},{key:"piece_box_can_be_reduced_count",value:function(e,t){var n=this.piece_box_count(e);return t>n&&(t=n),t}},{key:"piece_box_realize",get:function(){var e=Object.entries(this.piece_box);return l()(e).filter((function(e){var t=Object(o.a)(e,2);t[0];return t[1]>=1})).map((function(e){var t=Object(o.a)(e,2),n=t[0],r=t[1];return[v.a.fetch(n),r]})).sortBy((function(e){var t=Object(o.a)(e,2),n=t[0];t[1];return n.code})).value()}},{key:"hold_pieces_to_piece_box",value:function(e){var t=this;l.a.forIn(this.hold_pieces[e.key],(function(n,o){var r=v.a.fetch(o);t.hold_pieces_add(e,r,-n),t.piece_box_add(r,n)}))}},{key:"piece_box_to_hold_pieces",value:function(e){var t=this;l.a.forIn(this.piece_box,(function(n,o){var r=v.a.fetch(o);t.piece_box_add(r,-n),t.hold_pieces_add(e,r,n)}))}},{key:"piece_box_reset_by_preset",value:function(e){var t=this;this.piece_box_clear(),O.a.fetch(e).piece_box.forEach((function(e){var n=Object(o.a)(e,2),r=n[0],c=n[1];t.piece_box_add(v.a.fetch(r),c)}))}},{key:"piece_box_piece_counts_adjust",value:function(){var e=this;this.piece_box_clear();var t=this.hold_piece_all_counts_hash,n=this.board.piece_counts_hash;O.a.fetch("全部駒箱").piece_box.forEach((function(r){var c=Object(o.a)(r,2),_=c[0],l=c[1],f=v.a.fetch(_),h=l-((t[f.key]||0)+(n[f.key]||0));e.piece_box_add(f,h)}))}},{key:"hold_piece_all_counts_hash",get:function(){var e=this,t={};return j.a.values.forEach((function(n){l.a.forIn(e.hold_pieces[n.key],(function(e,n){t[n]=(t[n]||0)+e}))})),t}},{key:"piece_box_clear",value:function(){this.piece_box={}}},{key:"king_formation_auto_set_on_off",value:function(e){return e?this.king_formation_auto_set():this.king_formation_auto_unset()}},{key:"king_formation_auto_set",value:function(){var e=!1;return e||(e=this.king_formation_set("bottom_left")),e||(e=this.king_formation_set("bottom_right")),e}},{key:"king_formation_auto_unset",value:function(){var e=!1;return e||(e=this.king_formation_unset("bottom_left")),e||(e=this.king_formation_unset("bottom_right")),e}},{key:"king_formation_set",value:function(e){var t=this,n=this.king_formation_soldiers(e);if(!n.some((function(e){return t.board.lookup(e.place)})))return n.forEach((function(e){return t.piece_search_and_place_on(e)})),!0}},{key:"king_formation_unset",value:function(e){var t=this,n=this.king_formation_soldiers(e);if(!n.some((function(e){return!t.board.lookup(e.place)})))return n.forEach((function(e){var n=t.board.lookup(e.place);if(n){var o=n.piece;t.board.delete_at(n.place),"K"===o.key?t.piece_box_add(o):t.hold_pieces_add(j.a.fetch("white"),o)}})),!0}},{key:"piece_search_and_place_on",value:function(e){if(!this.board.lookup(e.place)){if("K"===e.piece.key)this.piece_search_and_decrement(e.piece);else if(!this.piece_search_and_decrement(e.piece))return;this.board.place_on(e)}}},{key:"piece_search_and_decrement",value:function(e){var t=!1;return t||(t=this.piece_search_on_hold_pieces_and_decrement("white",e)),t||this.piece_box_count(e)>=1&&(this.piece_box_add(e,-1),t=!0),t}},{key:"piece_search_on_hold_pieces_and_decrement",value:function(e,t){var n=j.a.fetch(e);if(this.hold_pieces_count(n,t)>=1)return this.hold_pieces_add(n,t,-1),!0}},{key:"king_formation_soldiers",value:function(e){var t=null,n=null,o=null,r=null;return"bottom_left"===e&&(t=0,n=1,o=h.a.dimension-1,r=-1),"bottom_right"===e&&(t=h.a.dimension-1,n=-1,o=h.a.dimension-1,r=-1),[{piece:"K",promoted:!1,location:"black",place:[t,o]},{piece:"P",promoted:!0,location:"white",place:[t,o+r+r]},{piece:"P",promoted:!0,location:"white",place:[t+n,o+r+r]},{piece:"P",promoted:!0,location:"white",place:[t+n+n,o+r+r]},{piece:"P",promoted:!0,location:"white",place:[t+n+n,o+r]},{piece:"P",promoted:!0,location:"white",place:[t+n+n,o]}].map((function(e){return new y.a({piece:v.a.fetch(e.piece),promoted:e.promoted,location:j.a.fetch(e.location),place:d.a.fetch(e.place)})}))}},{key:"slide_xy",value:function(e,t){this.board=this.board.slide_xy(e,t)}},{key:"shuffle_apply",value:function(e){var t=this.board.shuffle_apply(e);if(t)return this.board=t,!0}}]),e}()},180:function(e,t,n){"use strict";(function(e,o){n.d(t,"a",(function(){return m}));n(37),n(32),n(43),n(44);var r=n(20),c=n(177),_=n(178),l=(n(11),n(542),n(529),n(36),n(31),n(98),n(23)),f=n.n(l),h=n(2),d=n(521),v=n(127);function y(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}var m=function(){function e(){Object(c.a)(this,e),this._surface={}}return Object(_.a)(e,[{key:"delete_at",value:function(e){h.a.delete(this._surface,e.key)}},{key:"place_on",value:function(e){this.delete_at(e.place),h.a.set(this._surface,e.place.key,e)}},{key:"move_m1",value:function(e,t){this.delete_at(e.place),this.place_on(t)}},{key:"move_m2",value:function(e,t){this.move_m1(e,e.clone_with_attrs({place:t}))}},{key:"lookup",value:function(e){return this._surface[e.key]}},{key:"clear",value:function(){this._surface={}}},{key:"pawn_exist_by_x",value:function(t,n){for(var o=!1,r=0;r<e.dimension;r++){var c=v.a.fetch([t,r]),_=this.lookup(c);if(_&&_.location.key===n.key&&"P"===_.piece.key&&!_.promoted){o=!0;break}}return o}},{key:"reach_p",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.once_reach(e,t)||this.repeat_reach(e,t,n)}},{key:"once_reach",value:function(e,t){var n=this,o=!1,r=e.once_vectors;return r&&(o=r.some((function(o){if(o)return n.once_reach_vec(e,t,o)}))),o}},{key:"once_reach_vec",value:function(e,t,n){var o=n[0],r=n[1]*e.location.value_sign,c=e.place.x+o,_=e.place.y+r;return c===t.x&&_===t.y}},{key:"repeat_reach",value:function(e,t){var n=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=!1,c=e.repeat_vectors;return c&&(r=c.some((function(r){if(r)return n.repeat_reach_vec(e,t,r,o)}))),r}},{key:"repeat_reach_vec",value:function(e,t,n){for(var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=e.place.x,c=e.place.y,_=n[0],l=n[1]*e.location.value_sign,f=r+_,h=c+l,d=!1;!v.a.xy_invalid_p(f,h);){if(f===t.x&&h===t.y){d=!0;break}if("non_stop"==o.mode);else{var y=v.a.fetch([f,h]);if(this.lookup(y))break}f+=_,h+=l}return d}},{key:"move_then_king_capture_p",value:function(e,t){var n=this.shallow_clone;return n.move_m2(e,t),n.king_capture_p(e.location)}},{key:"puton_then_king_capture_p",value:function(e){var t=this.shallow_clone;return t.place_on(e),t.king_capture_p(e.location)}},{key:"king_capture_p",value:function(e){var t=this,n=this.king_find_by_location(e);if(n)return this.soldiers_by_location(e.flip).some((function(e){return t.reach_p(e,n.place)}))}},{key:"king_find_by_location",value:function(e){return this.soldiers.find((function(t){return"K"==t.piece.key&&t.location.key==e.key}))}},{key:"shallow_clone",get:function(){var t=new e;return t._surface=function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?y(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):y(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},this._surface),t}},{key:"soldiers",get:function(){return Object.values(this._surface)}},{key:"soldiers_by_location",value:function(e){var t=e.key;return this.soldiers.filter((function(e){return e.location.key==t}))}},{key:"piece_counts_hash",get:function(){var e={};return f.a.forEach(this.soldiers,(function(t){e[t.piece.key]=(e[t.piece.key]||0)+1})),e}},{key:"flip_all",get:function(){var t=new e;return f.a.forEach(this._surface,(function(e,n){var o=new d.a(Object.assign({},e.attributes,{location:e.location.flip,place:e.place.flip_all}));t.place_on(o)})),t}},{key:"flop",get:function(){var t=new e;return f.a.forEach(this._surface,(function(e,n){var o=new d.a(Object.assign({},e.attributes,{location:e.location,place:e.place.flop}));t.place_on(o)})),t}},{key:"slide_xy",value:function(t,n){var o=new e;return f.a.forEach(this._surface,(function(e,r){var c=new d.a(Object.assign({},e.attributes,{location:e.location,place:e.place.rotate_add(t,n)}));o.place_on(c)})),o}},{key:"shuffle_apply",value:function(t){if(!(t*t<this.soldiers.length)){var n=this.all_places(t),o=f.a.shuffle(n),r=new e,i=0;return f.a.forEach(this._surface,(function(e,t){var n=new d.a(Object.assign({},e.attributes,{location:e.location,place:o[i]}));r.place_on(n),i+=1})),r}}},{key:"all_places",value:function(t){for(var n=e.dimension-t,o=[],r=0;r<t;r++)for(var c=0;c<t;c++){var _=v.a.fetch([n+c,0+r]);o.push(_)}return o}},{key:"to_sfen",get:function(){var t=this,n=[];return f.a.times(e.dimension,(function(o){var r="",c=0;f.a.times(e.dimension,(function(e){var n=v.a.fetch([e,o]),_=t.lookup(n);if(f.a.isNil(_))c++;else{c>=1&&(r+=c,c=0),_.promoted&&(r+="+");var l=_.piece.key;"white"===_.location.key&&(l=l.toLowerCase()),r+=l}})),c>=1&&(r+=c),n.push(r)})),n.join("/")}}],[{key:"dimension",get:function(){return 9}},{key:"danger_zone_size",get:function(){return 3}},{key:"vector_flip",value:function(e,t){return[this.dimension-e-1,this.dimension-t-1]}}]),e}();void 0!==e&&e.argv[1]===o&&console.log(m.dimension)}).call(this,n(179),"/index.js")},314:function(e,t,n){"use strict";(function(e,o){n.d(t,"a",(function(){return L}));n(517);var r=n(177),c=n(178),_=n(526),l=n(518),f=n(519),h=n(516),d=(n(33),n(75),n(11),n(31),n(74),n(527),n(98),n(57),n(525)),v=n.n(d),y=n(2),m=n(23),k=n.n(m),O=n(180),j=n(528),x=n(522),w=n(127),P=n(521),R=n(71),B=n(536);n(128);function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Object(f.a)(this,n)}}v.a.uninstall("namespacing");var S,L=function(e){Object(l.a)(n,e);var t=E(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"reset",value:function(){Object(_.a)(Object(h.a)(n.prototype),"reset",this).call(this),this.attributes={}}},{key:"parse",value:function(){this.raw_body=this.raw_body.replace(/startpos/,"sfen lnsgkgsnl/1r5b1/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL b - 1");var e=v()("sfen\\s+(?<board>\\S+)\\s+(?<b_or_w>\\S+)\\s+(?<hold_pieces>\\S+)\\s+(?<turn_counter_next>\\d+)(\\s+moves\\s+(?<moves>.*))?");this.attributes=v.a.exec(this.raw_body,e)}},{key:"board",get:function(){var e=this,t=new O.a;return this.attributes.board.split("/").forEach((function(n,o){var r=0;v.a.forEach(n,v()("(?<promoted>\\+?)(?<piece>\\S)"),(function(n,i){if(/\d+/.test(n.piece))r+=Number(n.piece);else{var c=new P.a({place:new w.a([r,o]),piece:x.a.fetch(n.piece),promoted:"+"===n.promoted,location:e.__location_by_upper_or_lower_case(n.piece)});t.place_on(c),r++}}))})),t}},{key:"base_location",get:function(){var e=null;return e="b"===this.attributes.b_or_w?"black":"white",R.a.fetch(e)}},{key:"hold_pieces",get:function(){var e=this,t=this.hold_pieces_empty_hash();return"-"!==this.attributes.hold_pieces&&v.a.forEach(this.attributes.hold_pieces,v()("(?<count>\\d+)?(?<piece_char>\\S)"),(function(n,i){var o=x.a.fetch(n.piece_char),r=Number(n.count||1),c=e.__location_by_upper_or_lower_case(n.piece_char);r+=t[c.key][o.key]||0,y.a.set(t[c.key],o.key,r)})),t}},{key:"turn_base",get:function(){return Number(this.attributes.turn_counter_next)-1}},{key:"move_infos",get:function(){var e=this,t=[];return k.a.forEach(this.moves,(function(n,i){var o=B.a.parse(n);if(!o)return!1;o.location=e.location_by_offset(i),t.push(o)})),t}},{key:"moves",get:function(){return this.moves_exist_p?this.attributes.moves.split(/\s+/):[]}},{key:"moves_exist_p",get:function(){return""!==(this.attributes.moves||"")}},{key:"init_sfen_from_one",get:function(){var e=[];return e.push("position"),e.push("sfen"),e.push(this.attributes.board),e.push(this.attributes.b_or_w),e.push(this.attributes.hold_pieces),e.push(1),e.join(" ")}},{key:"init_sfen",get:function(){var e=[];return e.push("position"),e.push("sfen"),e.push(this.init_sfen_strip),e.join(" ")}},{key:"init_sfen_strip",get:function(){var e=[];return e.push(this.attributes.board),e.push(this.attributes.b_or_w),e.push(this.attributes.hold_pieces),e.push(this.attributes.turn_counter_next),e.join(" ")}},{key:"to_sfen",get:function(){var e=[];return e.push("position"),e.push("sfen"),e.push(this.attributes.board),e.push(this.attributes.b_or_w),e.push(this.attributes.hold_pieces),e.push(this.attributes.turn_counter_next),this.moves_exist_p&&(e.push("moves"),e.push(this.attributes.moves)),e.join(" ")}},{key:"__location_by_upper_or_lower_case",value:function(e){var t=null;return t=/[A-Z]/.test(e)?"black":"white",R.a.fetch(t)}}],[{key:"sfen_flop",value:function(e){var source=this.parse(e);return source.attributes.board=source.board.flop.to_sfen,source.attributes.moves=source.move_infos.map((function(e){return e.to_flop_sfen})).join(" "),source.to_sfen}}]),n}(j.a);void 0!==e&&e.argv[1]===o&&(S=L.parse("position sfen +lnsgkgsnl/1r5b1/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL b S2s 1 moves 7i6h S*2d"),console.log(S),S=L.parse("position sfen +lnsgkgsnl/1r5b1/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL b S2s 1 moves 7i6h S*2d"),console.log(S))}).call(this,n(179),"/index.js")},315:function(e,t,n){"use strict";(function(e,o){n.d(t,"a",(function(){return y}));n(11),n(517);var r=n(177),c=n(178),_=n(518),l=n(519),f=n(516),h=(n(57),n(520)),d=n(71);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Object(f.a)(e);if(t){var r=Object(f.a)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Object(l.a)(this,n)}}var y=function(e){Object(_.a)(n,e);var t=v(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"locations",get:function(){return this.location_keys.map((function(e){return d.a.fetch(e)}))}}],[{key:"define",get:function(){return[{key:"none",name:"none",location_keys:[]},{key:"both",name:"☗☖",location_keys:["black","white"]},{key:"black",name:"☗",location_keys:["black"]},{key:"white",name:"☖",location_keys:["white"]}]}}]),n}(h.a);void 0!==e&&e.argv[1]===o&&console.log(y.fetch("both").locations)}).call(this,n(179),"/index.js")},316:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));n(11),n(517);var o=n(177),r=n(178),c=n(518),_=n(519),l=n(516);function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Object(l.a)(e);if(t){var r=Object(l.a)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Object(_.a)(this,n)}}var h=function(e){Object(c.a)(n,e);var t=f(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,null,[{key:"define",get:function(){return[{key:"standard",name:"無効な場所をタップで駒を離す",radio_button_name:"別駒",smooth_cancel:!0},{key:"reality",name:"移動元をタップしたときに駒を離す",radio_button_name:"元位置",smooth_cancel:!1},{key:"rehold",name:"移動元をタップしたときに駒を離して持つ",radio_button_name:"持ち替え",smooth_cancel:!0}]}}]),n}(n(520).a)},323:function(e,t,n){"use strict";(function(e,o){n.d(t,"a",(function(){return N}));n(517);var r=n(177),c=n(178),_=n(526),l=n(518),f=n(519),h=n(516),d=(n(98),n(529),n(11),n(31),n(33),n(527),n(498),n(320),n(75),n(74),n(525)),v=n.n(d),y=n(535),m=n.n(y),k=n(528),O=n(180),j=n(522),x=n(127),w=n(71),P=n(314),R=n(524),B=n(521),E=n(538);function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Object(f.a)(this,n)}}v.a.uninstall("namespacing");var L=v()(Object.values({header:"(?<key>.*)：s*(?<value>.*)",board:"\\|(?<board>.*)\\|",direct_location:"(?<direct_location>^[上下先後]手番)",latest_triangle:"^手数＝.*(?<latest_triangle>[▲△])",comment:"^\\*(?<comment>.*)",hand:"^\\s*(?<number>\\d+)\\s+                                # 1    ; 手数\n         (?<to>[１-９1-9一二三四五六七八九]+)?                   # 76   ; 移動先\n         (?<same>同)?\\s*                                        # 同   ; 座標を書いてくれ\n         (?<piece>成[銀桂香]|[王玉金銀全桂圭香杏角馬飛龍竜歩と]) # 歩   ; 駒\n         (?<suffix>[左右直]?[寄引上]?)                           # 上   ; KI2っぽい表記は読み捨てる\n         (?<motion>不?成|打|合|生)?                              # 打   ; 成や打\n         (\\((?<origin_place>\\d+)\\))?                          # (77) ; 移動元"}).join("|"),"x"),N=function(e){Object(l.a)(n,e);var t=S(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"reset",value:function(){Object(_.a)(Object(h.a)(n.prototype),"reset",this).call(this),this.move_infos=[],this.comment_lines_hash={},this.board_lines=[],this.direct_location=null,this.hold_pieces=this.hold_pieces_empty_hash()}},{key:"board",get:function(){if(this.board_lines.length>=1)return this.board_setup_from_board_lines();var e=new P.a;return e.raw_body=this.preset_info.sfen,e.parse(),e.board}},{key:"preset_key",get:function(){var e=this.header["手合割"];return"その他"===e?null:e||"平手"}},{key:"preset_info",get:function(){return R.a.lookup(this.preset_key)}},{key:"base_location",get:function(){return this.direct_location?this.direct_location:this.preset_key?w.a.fetch(this.preset_info.first_location_key):w.a.fetch("black")}},{key:"parse",value:function(){var e=this,t=null;this.raw_body.split(/\n/).forEach((function(line){var n=v.a.exec(line,L);if(n)if(n.key){var o=n.value.trim();if(e.header[n.key]=o,n.key.match(/手の持駒/))if("なし"===o);else{var s=E.a.kanji_to_number_string(o);s=s.replace(/\s+/g,""),v.a.forEach(s,v()("(?<piece_char>\\D)(?<count>\\d*)"),(function(t,o){var r=j.a.lookup_by_name(t.piece_char),c=Number(t.count||1),_=n.key.match(/[上後]/)?"white":"black";c+=e.hold_pieces[_][r.key]||0,e.hold_pieces[_][r.key]=c}))}}else if(n.comment){var r,c,i=e.move_infos.length;null!==(c=(r=e.comment_lines_hash)[i])&&void 0!==c||(r[i]=[]),e.comment_lines_hash[i].push(n.comment)}else if(n.board)e.board_lines.push(n.board);else if(n.direct_location)e.direct_location=w.a.fetch(n.direct_location.match(/[上後]/)?"white":"black");else if(n.latest_triangle)e.direct_location=w.a.fetch("▲"===n.latest_triangle?"white":"black");else if(n.number){var _={};_.location=e.location_by_offset(Number(n.number)-1),n.origin_place&&(_.origin_place=x.a.fetch(n.origin_place)),m()(n.to||n.same),n.to?(_.place=x.a.fetch(n.to),t=_.place):(m()(n.same),m()(t),_.place=t),"成"===n.motion&&(_.promoted_trigger=!0),"打"===n.motion&&(_.drop_piece=j.a.lookup_by_name(n.piece)),e.move_infos.push(_)}}))}},{key:"move_infos",get:function(){return this._move_infos},set:function(e){this._move_infos=e}},{key:"comment_lines_hash",get:function(){return this._comment_lines_hash},set:function(e){this._comment_lines_hash=e}},{key:"board_setup_from_board_lines",value:function(){m()(this.board_lines.length>=1);var e=new O.a;return this.board_lines.forEach((function(t,n){v.a.forEach(t,v()("(?<arrow>.)(?<piece>\\S)"),(function(t,o){if("・"===t.piece);else{var r="v"===t.arrow?"white":"black",c=j.a.lookup_by_name(t.piece),_=!1;c||(c=j.a.lookup_by_promoted_name(t.piece),m()(c),_=!0);var l=new B.a({place:new x.a([o,n]),piece:c,promoted:_,location:w.a.fetch(r)});e.place_on(l)}}))})),e}}]),n}(k.a);if(void 0!==e&&e.argv[1]===o){var A=new N;A.raw_body="\n   1 ２六歩(27)   ( 0:16/00:00:16)\n   2 ３四歩(33)   ( 0:22/00:00:22)\n   3 ７六歩(77)   ( 0:06/00:00:22)\n   4 ８四歩(83)   ( 0:13/00:00:35)\n   5 ２五歩(26)   ( 0:09/00:00:31)\n   6 ８五歩(84)   ( 0:16/00:00:51)\n   7 ７八金(69)   ( 0:04/00:00:35)\n   8 ３二金(41)   ( 0:09/00:01:00)\n   9 ２四歩(25)   ( 0:04/00:00:39)\n  10 同 歩(23)    ( 0:10/00:01:10)\n",A.parse(),console.log(A.move_infos),console.log(A.comment_lines_hash),console.log(void 0===A.init_sfen)}}).call(this,n(179),"/index.js")},324:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));n(11),n(517);var o=n(177),r=n(178),c=n(518),_=n(519),l=n(516);function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Object(l.a)(e);if(t){var r=Object(l.a)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Object(_.a)(this,n)}}var h=function(e){Object(c.a)(n,e);var t=f(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,null,[{key:"define",get:function(){return[{key:"vertical",name:"縦"},{key:"horizontal",name:"横"}]}}]),n}(n(520).a)},325:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n(23),n(71);var o=n(571),r={props:{sp_mounted_focus_to_slider:{type:Boolean,default:!1}},beforeMount:function(){this.debug_or_development_p&&(console.log("sp_mobile_p: ".concat(this.sp_mobile_p)),console.log("devise_info.key: ".concat(this.devise_info.key)),console.log("focus_disable_p: ".concat(this.focus_disable_p)))},mounted:function(){this.sp_mounted_focus_to_slider&&this.turn_slider_focus()},methods:{focus_on_input_tag_p:function(){var e=document.activeElement;if("TEXTAREA"===e.tagName||"INPUT"===e.tagName)return!0},nav_focus_to:function(e){if(this.focus_disable_p)return!1;var t=this.__navigate_block_element_refs(e);return!!t&&(t.focus(),!0)},turn_slider_focus:function(){if(this.focus_disable_p)return!1;var e=this.__navigate_block_element_refs("SpSlider");return!!e&&e.focus_to_self()},__navigate_block_element_refs:function(e){if(this.$NavigateBlock)return this.$NavigateBlock.$refs[e]}},computed:{focus_enable_p:function(){return!this.focus_disable_p},focus_disable_p:function(){return this.sp_mobile_p||"touch"===this.devise_info.key},sp_mobile_p:function(){return Object(o.a)(window.navigator).any}}}},326:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));n(319),n(72),n(73);var o=n(23),r=n.n(o),c=(n(71),{props:{sp_turn_show:{type:Boolean,default:!1},sp_slider:{type:Boolean,default:!1},sp_controller:{type:Boolean,default:!1},sp_operation_disabled:{type:Boolean,default:!1},sp_piece_stand_blank_then_hidden:{type:Boolean,default:!1},sp_key_event_capture:{type:Boolean,default:!1}},mounted:function(){window.addEventListener("keydown",this.keydown_hook,!1)},beforeDestroy:function(){window.removeEventListener("keydown",this.keydown_hook)},methods:{keydown_hook:function(e){if(this.debug_or_development_p&&(this.log(document.activeElement),this.log(e.shiftKey,e.ctrlKey,e.altKey,e.metaKey),this.log("e",e),this.log("key",e.key),this.log("code",e.code),this.log("repeat",e.repeat)),!this.sp_operation_disabled&&!this.focus_on_input_tag_p()&&!this.shortcut_hook(e)&&this.sp_key_event_capture&&(this.view_p||this.play_p)){var t=document.activeElement;if(this.$NavigateBlock){var n=[this.$NavigateBlock.$refs.first,this.$NavigateBlock.$refs.previous,this.$NavigateBlock.$refs.next,this.$NavigateBlock.$refs.last];if(void 0!==t&&"BODY"!==t.tagName&&!r.a.includes(n,t))return}"Backspace"!==e.code&&"ArrowUp"!==e.code&&"ArrowLeft"!==e.code&&"k"!==e.key&&"p"!==e.key&&"b"!==e.key||(this.api_turn_add(-1,{interactive:e}),e.preventDefault()),"Space"!==e.code&&"Enter"!==e.code&&"ArrowDown"!==e.code&&"ArrowRight"!==e.code&&"j"!==e.key&&"n"!==e.key&&"f"!==e.key||(this.api_turn_add(1,{interactive:e}),e.preventDefault())}},api_turn_add:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.current_turn_add(e,t),this.turn_slider_focus()||(e>0?this.nav_focus_to("next"):this.nav_focus_to("previous"))},api_turn_set_to_min:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.current_turn_set(this.turn_offset_min,e),this.turn_slider_focus()||this.nav_focus_to("first")},api_turn_set_to_max:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.current_turn_set(this.turn_offset_max,e),this.turn_slider_focus()||this.nav_focus_to("last")},current_turn_add:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.current_turn_set(this.xcontainer.turn_offset+e,t)},current_turn_set:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null;n=t.cycle?this.xcontainer.turn_cycle(e):this.xcontainer.turn_clamp(e),this.turn_offset!==n&&(this.lifted_piece_cancel(),this.view_p&&this.view_mode_xcontainer_update(n),this.play_p&&this.play_mode_xcontainer_seek_to(n),this.event_call("update:sp_turn",this.turn_offset),t.interactive&&(this.log("局面を人が故意に変更"),this.event_call("ev_action_turn_change",this.turn_offset)))}},computed:{inside_controller_p:function(){return this.sp_controller&&(this.view_p||this.play_p)},inside_slider_p:function(){return this.sp_slider&&(this.view_p||this.play_p)},inside_navigate_p:function(){return this.inside_controller_p||this.inside_slider_p}}})},327:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n(72),n(73),n(11),n(22);var o=n(71),r={props:{sp_viewpoint:{type:String,default:"black",validator:function(e){return o.a.keys.includes(e)}},sp_active_side_viewpoint:{type:Boolean,default:!1}},data:function(){return{mut_viewpoint:this.sp_viewpoint}},watch:{sp_viewpoint:function(e){this.mut_viewpoint=e},mut_viewpoint:function(e){this.event_call("update:sp_viewpoint",e)}},methods:{viewpoint_flip_handle:function(){this.viewpoint_flip(),this.event_call("ev_action_viewpoint_flip"),this.turn_slider_focus()},viewpoint_flip:function(){this.mut_viewpoint=o.a.fetch(this.mut_viewpoint).flip.key}},computed:{fliped:function(){return"white"===this.mut_viewpoint}}}},328:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var o={components:{ShortcutViewer:n(322).default},data:function(){return{shortcut_viewer_p:!1}},methods:{shortcut_viewer_toggle_handle:function(){this.shortcut_viewer_p?this.shortcut_viewer_close_handle():this.shortcut_viewer_open_handle()},shortcut_viewer_open_handle:function(){this.shortcut_viewer_p=!0},shortcut_viewer_close_handle:function(){this.shortcut_viewer_p=!1}}}},329:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));n(58),n(45),n(12),n(76),n(52),n(33),n(32),n(77),n(78);var o=n(523),r=(n(11),n(22),n(71)),c=n(127);function _(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,c=!0,_=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){_=!0,r=e},f:function(){try{c||null==n.return||n.return()}finally{if(_)throw r}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var f={data:function(){return{mouseover_info:null,shuffle_mode_p:!1}},methods:{shortcut_hook:function(e){if(!this.play_p&&!this.edit_p)return!0;var t,n=_(r.a.values);try{for(n.s();!(t=n.n()).done;){var l=t.value;if(e.key.toLowerCase()===l.char_key&&(this.soldier_hold_unless_lifted_p(e),this.membership_click_handle(l,e)))return e.preventDefault(),!0}}catch(e){n.e(e)}finally{n.f()}if(this.edit_p&&("Backspace"===e.code||"Delete"===e.code||!this.meta_p(e)&&"t"===e.key)&&(this.soldier_hold_unless_lifted_p(e),this.piece_box_other_click(e)))return e.preventDefault(),!0;if("Escape"===e.code&&this.hold_cancel(e))return e.preventDefault(),!0;if("q"===e.key){if(this.lifted_p&&this.hold_cancel(e))return e.preventDefault(),!0;if(this.mouseover_info&&"board"===this.mouseover_info.type){var f=c.a.fetch(this.mouseover_info.xy),h=this.xcontainer.board.lookup(f);if(h)return this.piece_stand_piece_click(h.location,h.piece,h.promoted,null),e.preventDefault(),!0}}if(!this.meta_p(e)&&("v"===e.key||"r"===e.key||"Space"===e.code)&&this.mouseover_info&&"board"===this.mouseover_info.type)return this.board_cell_right_click(this.mouseover_info.xy,e),e.preventDefault(),!0;if(this.edit_p&&"?"===e.key)return this.shortcut_viewer_toggle_handle(),e.preventDefault(),!0;if(this.edit_p&&this.meta_p(e)){var d,v=this.arrow_vector_table[e.key];if(v)return(d=this.xcontainer).slide_xy.apply(d,Object(o.a)(v)),e.preventDefault(),!0}return!(!this.edit_p||("!"===e.key&&(this.shuffle_mode_p=!this.shuffle_mode_p,this.shuffle_mode_p?this.toast_call("盤面シャッフルモード: ON (TAP: 1-9)",{duration:2,type:"is-primary"}):this.toast_call("盤面シャッフルモード: OFF",{duration:.5})),!this.shuffle_mode_p||"1"!==e.key&&"2"!==e.key&&"3"!==e.key&&"4"!==e.key&&"5"!==e.key&&"6"!==e.key&&"7"!==e.key&&"8"!==e.key&&"9"!==e.key))&&(this.shuffle_run(e.key),e.preventDefault(),!0)},board_mouseover_handle:function(e,t){this.mouseover_info={type:"board",xy:e}},piece_stand_mouseover_handle:function(e,t,n){this.mouseover_info={type:"MembershipStand",location:e,piece:t}},piece_box_mouseover_handle:function(e,t){this.mouseover_info={type:"PieceBox",piece:e}},mouseleave_handle:function(){this.mouseover_info=null},soldier_hold_unless_lifted_p:function(e){this.mouseover_info&&(this.lifted_p||("board"===this.mouseover_info.type&&this.board_cell_left_click(this.mouseover_info.xy,e),"MembershipStand"===this.mouseover_info.type&&this.piece_stand_piece_click(this.mouseover_info.location,this.mouseover_info.piece,!1,e),"PieceBox"===this.mouseover_info.type&&this.piece_box_piece_click(this.mouseover_info.piece,e)))}},computed:{arrow_vector_table:function(){return{ArrowRight:[1,0],ArrowLeft:[-1,0],ArrowUp:[0,-1],ArrowDown:[0,1]}}}}},330:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var o=n(20),r=(n(74),n(72),n(73),n(11),n(22),n(51),n(37),n(32),n(36),n(43),n(31),n(44),n(23)),c=n.n(r),_=n(539),l=n(127),f=(n(180),n(521)),h=n(71),d=n(316);function v(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function y(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?v(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):v(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var m={props:{sp_legal_move_only:{type:Boolean,default:!0},sp_piece_auto_promote:{type:Boolean,default:!0},sp_my_piece_only_move:{type:Boolean,default:!0},sp_my_piece_kill_disabled:{type:Boolean,default:!0},sp_double_click_threshold_ms:{type:Number,default:350},sp_view_mode_piece_movable:{type:Boolean,default:!0},sp_lift_cancel_action:{type:String,default:"standard",validator:function(e){return d.a.keys.includes(e)}}},data:function(){return{place_from:null,have_piece:null,have_piece_location:null,have_piece_promoted:null,dialog_soldier:null,_last_clicked_cell:null,_double_tap_time:null,last_move_info:null,killed_soldier:null}},watch:{mut_mode:function(){this.lifted_piece_cancel()}},methods:{board_cell_pointerdown_handle:function(e,t){this.event_call("ev_action_board_cell_pointerdown",l.a.fetch(e),t)},board_cell_left_click:function(e,t){this.log("board_cell_left_click"),this.log("shiftKey: ".concat(t.shiftKey)),this.$data._last_clicked_cell=t.target,this.illegal_init();var n=l.a.fetch(e);if(this.sp_board_cell_left_click_disabled)this.log("セルをクリックしたときの通常処理を無効化する");else if(!this.break_if_view_mode){this.killed_soldier=this.xcontainer.board.lookup(n);var o=null,r=null;if(this.origin_soldier1&&(r=(o=this.origin_soldier1.clone_with_attrs({place:n})).promotable_p||this.origin_soldier1.promotable_p),this.cpu_location_p)return this.log("片方の手番だけを操作できるようにする sp_human_side の指定があってCPU側なので無効とする"),void this.event_call("ev_illegal_click_but_self_is_not_turn");if(this.sp_my_piece_only_move&&this.play_p&&!this.lifted_p&&this.killed_soldier&&this.killed_soldier.location!==this.xcontainer.current_location)return this.log("自分の手番で相手の駒を持ち上げようとしたので無効とする"),void this.event_call("ev_illegal_my_turn_but_oside_click");if(this.play_p&&this.have_piece&&this.killed_soldier)return this.log("駒台や駒箱から持ち上げた駒を盤上の駒の上に置こうとしたので無効とする"),void this.if_standard_then_unhold();if(this.sp_illegal_validate&&this.play_p&&this.have_piece&&!this.killed_soldier){var _=this.soldier_create_from_stand_or_box_on(n),f=_.piece.piece_vector.force_promote_length;if(null!=f&&_.top_spaces<=f&&(this.log("駒台や駒箱から持ち上げた駒を置こうとしたけど死に駒なので無効とする"),"__cancel__"===this.illegal_add("illegal_dead_soldier",{soldier:_})))return}if(this.lifted_p||this.killed_soldier){if(this.play_p&&this.sp_my_piece_kill_disabled&&this.put_on_my_soldier_p(this.killed_soldier))return this.log("自分の駒の上に駒を重ねようとしたので無効とする(盤上の移動元の駒を含まない)"),"rehold"===this.lift_cancel_action_info.key?(this.log("盤上の駒を持って別の盤上の駒に持ち直した"),void this.soldier_hold(n,t)):void this.if_standard_then_unhold();if(this.edit_p){var d=this.$data._double_tap_time;if(this.$data._double_tap_time=Date.now(),this.killed_soldier&&c.a.isEqual(this.place_from,n)&&d){var v=this.$data._double_tap_time-d,y=v<this.sp_double_click_threshold_ms;if(this.log("ダブルクリック判定: (".concat(v," ms < ").concat(this.sp_double_click_threshold_ms,") -> ").concat(y)),y)return this.log("操作モードで盤上の駒を持って同じ位置に戻したときに盤上の駒を裏返す"),this.xcontainer.board.place_on(this.killed_soldier.transform_clone),void this.piece_hold_and_put_for_bug(n,t)}}if(c.a.isEqual(this.place_from,n))return this.log("盤上の駒を持って同じ位置に戻したので状況キャンセル"),this.event_call("ev_action_piece_cancel"),void this.lifted_piece_cancel();if(this.edit_p&&(this.log("lifted_from_p: ".concat(this.lifted_p)),this.meta_p(t)&&!this.lifted_p&&this.killed_soldier))return this.log("盤上の駒を裏返す"),this.xcontainer.board.place_on(this.killed_soldier.transform_clone),void this.piece_hold_and_put_for_bug(n,t);if(!this.lifted_p)return this.log("盤上の駒を持ちあげる"),void this.soldier_hold(n,t);if(this.sp_legal_move_only&&this.play_p&&this.place_from){var m=!1;if(m||(m=this.xcontainer.board.once_reach(this.origin_soldier1,n)),!m)if(this.xcontainer.board.repeat_reach(this.origin_soldier1,n,{mode:"non_stop"})){if(this.log("障害物を素通りすれば目的地に行ける"),this.sp_illegal_validate)if(this.xcontainer.board.repeat_reach(this.origin_soldier1,n))this.log("障害物なく目的地に行ける");else if(this.log("障害物を飛び越えれば目的地に行ける"),"__cancel__"===this.illegal_add("illegal_piece_warp",{soldier:this.origin_soldier1}))return;m=!0}else this.log("目的地に対して効きがずれている");if(!m)return this.log("操作モードで盤上の駒を動かし中だが動けないセルをタップしたので無効"),void this.if_standard_then_unhold();if(this.sp_illegal_validate&&this.xcontainer.board.move_then_king_capture_p(this.origin_soldier1,n)&&"__cancel__"===this.illegal_add("illegal_death_king",{soldier:this.origin_soldier1,place:n}))return}if(!this.place_from){if(this.have_piece){if(this.log("持駒を置く"),this.sp_illegal_validate&&this.play_p){var k=this.soldier_create_from_stand_or_box_on(n);if(this.xcontainer.board.puton_then_king_capture_p(k,n)&&"__cancel__"===this.illegal_add("illegal_death_king",{soldier:k,place:n}))return}if(this.sp_illegal_validate&&this.play_p&&"P"===this.have_piece.key&&this.have_piece_location&&this.xcontainer.board.pawn_exist_by_x(n.x,this.have_piece_location)&&"__cancel__"===this.illegal_add("illegal_two_pawn"))return;this.killed_soldier&&(this.have_piece_location?this.xcontainer.hold_pieces_add(this.have_piece_location,this.killed_soldier.piece):this.xcontainer.hold_pieces_add(h.a.fetch("black"),this.killed_soldier.piece));var O=this.soldier_create_from_stand_or_box_on(n);return this.piece_decriment(),this.xcontainer.board.place_on(O),this.move_info_create({type:"put",to:O}),this.moves_set(),this.lifted_piece_cancel(),void this.turn_next()}throw new Error("must not happen")}if(this.log("盤上から移動"),this.killed_soldier&&this.xcontainer.hold_pieces_add(this.origin_soldier1.location,this.killed_soldier.piece),(this.view_p||this.play_p)&&r){var j=!0;if(this.sp_piece_auto_promote){var x=o.piece.piece_vector.force_promote_length;null!=x&&o.top_spaces<=x&&(this.promotable_piece_moved(o,!0),j=!1)}j&&(this.lp_mouse_stick_p=!1,this.dialog_soldier=o,this.lp_destroy())}else this.play_p&&(this.move_info_create({type:"move",from:this.origin_soldier1,to:o,killed_soldier:this.killed_soldier}),this.moves_set()),this.xcontainer.board.place_on(o),this.xcontainer.board.delete_at(this.place_from),this.lifted_piece_cancel(),this.turn_next()}else this.log("持たずに何もないところをクリックしたので無効とする")}},promotable_piece_moved2:function(e){this.promotable_piece_moved(this.dialog_soldier,e)},promotable_piece_moved:function(e,t){e=e.clone_with_attrs({promoted:t}),this.move_info_create({type:"promotable",from:this.origin_soldier1,to:e}),this.moves_set(),this.xcontainer.board.place_on(e),this.xcontainer.board.delete_at(this.place_from),this.lifted_piece_cancel(),this.turn_next()},move_info_create:function(e){this.last_move_info=new _.a(y(y({},e),{},{next_turn_offset:this.turn_offset+1,player_location:this.xcontainer.current_location,killed_soldier:this.killed_soldier,illegal_list:this.illegal_list}))},board_cell_right_click:function(e,t){this.log("盤のセルを右クリック");var n=l.a.fetch(e);if(n.tennozan_p&&t.shiftKey&&t.altKey&&(t.metaKey||t.ctrlKey))this.dev_tools_toggle_handle();else if(!this.break_if_view_mode){var o=this.xcontainer.board.lookup(n);this.hold_cancel(t)||this.edit_p&&!this.lifted_p&&o&&(this.log("盤上の駒を裏返す"),this.xcontainer.board.place_on(o.transform_clone),this.piece_hold_and_put_for_bug(n,t))}},membership_click_handle:function(e,t){if(!this.break_if_view_mode)return this.have_piece&&this.have_piece_location===e?(this.log("自分の駒台から駒を持ち上げているならキャンセル"),this.event_call("ev_action_piece_cancel"),this.lifted_piece_cancel(),!0):this.edit_p&&this.have_piece?(this.hold_pieces_move_to_my_hold_pieces(t,e),!0):this.play_p&&this.origin_soldier1?(this.log("play では盤上の駒を駒台に置くことはできない"),this.if_standard_then_unhold(),!0):!!this.origin_soldier1&&(this.log("盤上の駒を駒台に置く"),this.board_soldir_to_hold_pieces(e),!0)},piece_stand_piece_click:function(e,t,n,o){if(this.log("駒台の駒をクリック"),!this.break_if_view_mode)if(this.xcontainer.hold_pieces_count(e,t)<=0)this.log("クリックしたけど持駒がない");else if(this.sp_my_piece_only_move&&this.play_p&&e!==this.xcontainer.current_location)this.log("相手の持駒を持とうとしたときは無効");else{if(this.cpu_location_p)return this.log("片方の手番だけを操作できるようにする sp_human_side の指定があってCPU側なので無効とする"),void this.event_call("ev_illegal_click_but_self_is_not_turn");this.log("駒台の駒を持つ"),this.have_piece=t,this.have_piece_location=e,this.have_piece_promoted=n,this.lp_create(o,this.origin_soldier2)}},piece_box_have_p:function(e){return c.a.isNil(this.have_piece_location)&&this.have_piece===e},piece_box_other_click:function(e){if(this.log("piece_box_other_click:駒箱クリック"),c.a.isNil(this.have_piece_location)&&this.have_piece)return this.log("持っているならキャンセル"),this.lifted_piece_cancel(),!0;if(this.have_piece_location&&this.have_piece){this.log("駒台から駒箱に移動");var t=this.hold_piece_source_cut(e);return this.xcontainer.piece_box_add(this.have_piece,t),this.lifted_piece_cancel(),!0}return!!this.origin_soldier1&&(this.log("盤上の駒を駒箱に移動"),this.xcontainer.piece_box_add(this.origin_soldier1.piece),this.xcontainer.board.delete_at(this.origin_soldier1.place),this.lifted_piece_cancel(),!0)},piece_box_piece_click:function(e,t){this.piece_box_other_click(t)||(this.log("piece_box_piece_click:駒箱の駒を持つ"),this.have_piece=e,this.have_piece_location=null,this.have_piece_promoted=!1,this.lp_create(t,this.origin_soldier2))},hold_cancel:function(e){return!(this.dialog_soldier||!this.lifted_p)&&(this.log("持ち上げた駒を元に戻す"),this.lifted_piece_cancel(),!0)},board_soldir_to_hold_pieces:function(e){this.xcontainer.hold_pieces_add(e,this.origin_soldier1.piece),this.xcontainer.board.delete_at(this.origin_soldier1.place),this.lifted_piece_cancel()},hold_pieces_move_to_my_hold_pieces:function(e,t){this.log("相手の持駒を自分の駒台に移動");var n=this.hold_piece_source_cut(e);this.xcontainer.hold_pieces_add(t,this.have_piece,n),this.lifted_piece_cancel()},hold_piece_source_cut:function(e){var t=1;return this.have_piece_location?(this.log("相手の駒箱から移動"),this.meta_p(e)&&(this.log("シフトが押されていたので全部移動"),t=this.xcontainer.hold_pieces_count(this.have_piece_location,this.have_piece)),t=this.xcontainer.hold_pieces_can_be_reduced_count(this.have_piece_location,this.have_piece,t),this.xcontainer.hold_pieces_add(this.have_piece_location,this.have_piece,-t)):(this.log("駒箱から移動"),this.meta_p(e)&&(this.log("シフトが押されていたので全部移動"),t=this.xcontainer.piece_box_count(this.have_piece)),t=this.xcontainer.piece_box_can_be_reduced_count(this.have_piece,t),this.xcontainer.piece_box_add(this.have_piece,-t)),t},piece_decriment:function(){this.have_piece_location?this.xcontainer.hold_pieces_add(this.have_piece_location,this.have_piece,-1):this.xcontainer.piece_box_add(this.have_piece,-1)},put_on_my_soldier_p:function(e){if(this.lifted_p&&e&&e.location===this.xcontainer.current_location&&!c.a.isEqual(this.place_from,e.place))return!0},soldier_hold:function(e,t){this.place_from=e,this.lp_create(t,this.origin_soldier1)},lifted_piece_cancel:function(){this.log("lifted_piece_cancel"),this.dialog_soldier=null,this.place_from=null,this.have_piece=null,this.have_piece_location=null,this.have_piece_promoted=null,this.killed_soldier=null,this.illegal_clear(),this.lp_destroy()},if_standard_then_unhold:function(){this.lift_cancel_action_info.smooth_cancel&&(this.log("持った状態で自分の非合法セルタップでキャンセル"),this.event_call("ev_action_piece_cancel"),this.lifted_piece_cancel())},piece_hold_and_put_for_bug:function(e,t){this.lifted_piece_cancel()},fn_flip_all:function(){var e=this;this.xcontainer.board=this.xcontainer.board.flip_all,this.xcontainer.hold_pieces=c.a.reduce(h.a.values,(function(a,t){return a[t.key]=e.xcontainer.hold_pieces[t.flip.key],a}),{})},fn_flop:function(){this.xcontainer.board=this.xcontainer.board.flop},init_location_toggle:function(){this.init_location_key=this.init_location.flip.key},soldier_create_from_stand_or_box_on:function(e){return new f.a({piece:this.have_piece,place:e,promoted:this.have_piece_promoted||!1,location:this.have_piece_location||h.a.fetch("black")})},meta_p:function(e){return e.shiftKey|e.ctrlKey|e.altKey|e.metaKey}},computed:{LiftCancelActionInfo:function(){return d.a},lift_cancel_action_info:function(){return d.a.fetch(this.sp_lift_cancel_action)},origin_soldier1:function(){if(this.place_from)return this.xcontainer.board.lookup(this.place_from)},origin_soldier2:function(){if(this.have_piece){return this.soldier_create_from_stand_or_box_on(null)}},soldier_or_stand_p:function(){return this.place_from||this.have_piece_location},lifted_p:function(){return!c.a.isNil(this.place_from)||!c.a.isNil(this.have_piece)},cpu_location_p:function(){if(this.play_p)return!c.a.includes(this.human_locations,this.xcontainer.current_location)},break_if_view_mode:function(){if(this.view_p&&!this.sp_view_mode_piece_movable)return!0}}}},331:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));n(37),n(32),n(36),n(11),n(43),n(31),n(44);var o=n(20),r=(n(12),n(540));function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function _(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var l={props:{sp_illegal_validate:{type:Boolean,default:!0},sp_illegal_cancel:{type:Boolean,default:!1}},data:function(){return{illegal_list:[]}},methods:{illegal_init:function(){this.illegal_list=[]},illegal_clear:function(){this.illegal_list=[]},illegal_add:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.a.fetch(e);if(this.log("反則: ".concat(n.name)),t=_(_({},n),t),this.sp_illegal_cancel)return this.event_call("ev_illegal_illegal_accident",t),"__cancel__";this.illegal_list.push(t)}}}},332:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var o=n(523),r=(n(72),n(73),n(11),n(22),n(51),n(98),n(23)),c=n.n(r),_=n(128),l=n(71),f=n(315),h=n(535),d=n.n(h),v={props:{sp_human_side:{type:String,default:"both",validator:function(e){return f.a.keys.includes(e)}}},data:function(){return{moves:[],init_sfen:null,init_location_key:"black"}},created:function(){var e=this;this.$watch((function(){return[e.xcontainer,e.init_location_key]}),(function(){e.emit_update_edit_mode_short_sfen()}),{deep:!0})},mounted:function(){},watch:{edit_mode_short_sfen2:function(e){this.event_call("ev_edit_mode_short_sfen2_change",e)},"xcontainer.to_short_sfen":{handler:function(e){this.event_call("ev_short_sfen_change",e)}},turn_offset:function(e){this.event_call("ev_turn_offset_change",e)},moves_take_turn_offset:function(e){this.event_call("ev_play_mode_moves_change",e)},current_comments:function(e){this.event_call("ev_comment_change",e)}},methods:{play_mode_setup_from:function(e){this.log("play_mode_setup_from"),void 0!==this.xcontainer.data_source.init_sfen?("view"===e&&this.play_mode_setup(),"edit"===e&&this.init_sfen_set()):("view"===e&&(this.init_location_key=this.xcontainer.current_location.key),this.init_sfen_set()),this.play_mode_xcontainer_seek_to(this.turn_offset)},play_mode_setup:function(){d()(this.xcontainer.data_source.init_sfen),this.init_sfen=this.xcontainer.data_source.init_sfen,this.moves=this.xcontainer.data_source.moves},init_sfen_set:function(){this.init_sfen=this.edit_mode_short_sfen(),this.moves=[]},play_mode_xcontainer_seek_to:function(e){this.xcontainer=new _.a,this.xcontainer.data_source=this.data_source_by(this.play_mode_full_moves_sfen),this.xcontainer.current_turn=e,this.xcontainer.run(),this.flip_if_white_run()},moves_set:function(){this.moves=[].concat(Object(o.a)(this.moves_take_turn_offset),[this.last_move_info.to_sfen])},turn_next:function(){this.play_p&&(this.xcontainer=new _.a,this.xcontainer.data_source=this.data_source_by(this.play_mode_full_moves_sfen),this.xcontainer.current_turn=-1,this.xcontainer.run(),this.event_call("ev_play_mode_move",{sfen:this.play_mode_full_moves_sfen,turn:this.turn_offset,last_move_info:this.last_move_info,snapshot_hash:this.xcontainer.to_sfen_without_turn}),this.event_call("ev_play_mode_next_moves",this.moves),this.turn_slider_focus())},edit_mode_short_sfen:function(){if(this.xcontainer){var e=this.xcontainer.sfen_serializer;return["position sfen",e.to_board_sfen,this.init_location.key[0],e.to_hold_pieces,1].join(" ")}},emit_update_edit_mode_short_sfen:function(){this.edit_p&&this.event_call("ev_edit_mode_short_sfen_change",this.edit_mode_short_sfen())}},computed:{play_mode_full_moves_sfen:function(){if(this.init_sfen)return this.init_sfen+" moves "+this.moves.join(" ")},init_location:function(){return l.a.fetch(this.init_location_key)},human_locations:function(){return f.a.fetch(this.sp_human_side).locations},moves_take_turn_offset:function(){return c.a.take(this.moves,this.turn_offset)},edit_mode_short_sfen2:function(){return this.edit_mode_short_sfen()}}}},333:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var o={data:function(){return{_ShogiPlayerRenderCount:0,_MainBoardRenderCount:0}},beforeUpdate:function(){this.$data._ShogiPlayerRenderCount+=1}}},334:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));n(72),n(73),n(11),n(22);var o=n(128),r=n(524),c={props:{sp_preset:{type:String,default:null,validator:function(e){return r.a.keys.includes(e)}}},data:function(){return{mut_preset_key:this.sp_preset}},watch:{sp_preset:function(e){this.mut_preset_key=e},mut_preset_key:function(e){this.xcontainer_setup_by_preset(e)}},methods:{xcontainer_setup_by_preset:function(e){null!=e&&(e=r.a.fetch(e),this.xcontainer=new o.a,e.sfen&&(this.xcontainer.data_source=this.data_source_by(e.sfen)),this.xcontainer.run(),this.xcontainer.piece_box_piece_counts_adjust(),this.init_location_key=this.xcontainer.current_location.key)}},computed:{preset_info_values:function(){return r.a.values},init_preset_sfen:function(){if(this.sp_preset)return r.a.fetch(this.sp_preset).sfen}}}},335:function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));var o=n(180),r=n(521),c=n(128),_={methods:{api_board_shuffle:function(){this.xcontainer.shuffle_apply(o.a.dimension)},api_random_puton:function(){var e=r.a.random();return this.xcontainer.board.clear(),this.xcontainer.board.place_on(e),e},api_place_on:function(e){this.xcontainer.board.place_on(e)},api_board_clear:function(){this.xcontainer.board.clear()},api_board_turn_set:function(e){this.xcontainer_setup(e)},api_play_mode_seek_to:function(e){this.play_mode_xcontainer_seek_to(e)},api_viewpoint_set:function(e){this.mut_viewpoint=e},api_viewpoint_flip:function(){this.viewpoint_flip()},api_retract_a_move:function(){var e=this.turn_offset-2;e<0&&(e=0),this.api_board_turn_set(e)},api_sfen_or_kif_set:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.xcontainer=new c.a,this.xcontainer.data_source=this.data_source_by(e),this.xcontainer.current_turn=t.turn||0,this.xcontainer.run()},api_play_mode_setup:function(){this.play_mode_setup()},api_lifted_piece_cancel:function(){this.lifted_piece_cancel()},api_turn_slider_focus:function(){this.turn_slider_focus()},api_moves_take_turn_offset:function(){return this.moves_take_turn_offset}}}},336:function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));n(37),n(32),n(36),n(11),n(43),n(31),n(44);var o=n(20);function r(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function c(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?r(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):r(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var _={methods:{place_to_cell_info:function(e){var t=e.css_place_key,n=this.$el.querySelector("."+t).getBoundingClientRect(),o=n.width,r=n.height,c=o/2,_=r/2;return{center:{x:n.left+c,y:n.top+_},rect:{x:o,y:r},radius:{x:c,y:_}}},element_vector_set:function(e,t){e.style.left="".concat(t.x,"px"),e.style.top="".concat(t.y,"px")},toast_call:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(t=c({container:this.root_container_query,message:e,position:"is-bottom",type:"is-primary",duration:2,queue:!1},t)).duration=1e3*t.duration,this.$buefy.toast.open(t)},dialog_call:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=c({container:this.root_container_query,message:e,confirmText:"実行",cancelText:"キャンセル",trapFocus:!0,animation:""},t),this.$buefy.dialog.prompt(t)}}}},337:function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));var o=n(523),r=(n(11),n(51),n(23)),c=n.n(r),_={props:{sp_debug:{type:Boolean,default:!1},sp_event_log:{type:Boolean,default:!1},sp_layer:{type:Boolean,default:!1}},data:function(){return{mut_debug:this.sp_debug,mut_event_log:this.sp_event_log,mut_layer:this.sp_layer,event_logs:[]}},watch:{sp_debug:function(e){this.mut_debug=e},sp_event_log:function(e){this.mut_event_log=e},sp_layer:function(e){this.mut_layer=e}},methods:{log:function(){var e;this.debug_or_development_p&&(e=console).log.apply(e,arguments)},event_call:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.mut_event_log&&(this.event_log_print(e,n),this.event_logs=c.a.take([{key:e,time:Date.now(),args:n}].concat(Object(o.a)(this.event_logs)),200)),this.$emit.apply(this,[e].concat(n))},event_log_print:function(e,t){var n,r="[SP] ".concat(e);console.group(r),(n=console).log.apply(n,Object(o.a)(t)),console.groupEnd(r)}},computed:{debug_p:function(){return this.mut_debug},debug_or_development_p:function(){return this.debug_p||!1}}}},338:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var o={methods:{vector_one:function(){return{x:1,y:1}},vector_scale:function(e,t){return{x:e.x*t,y:e.y*t}},vector_add:function(e,t){return{x:e.x+t.x,y:e.y+t.y}}}}},339:function(e,t,n){"use strict";n.d(t,"a",(function(){return E}));n(72),n(73),n(11),n(22);var o=n(321),r=n(20),c=(n(31),n(37),n(32),n(36),n(43),n(44),n(531));function _(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function l(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?_(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):_(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var f="__sp_dev_tools__",h={watch:{ls_store_hash:function(){c.a.set(f,this.ls_store_hash)}},methods:{dev_tools_restore:function(){var e=this,t=c.a.get(f);t&&this.DevToolsVariableInfo.values.forEach((function(n){if(null==e.$props[n.imm_var]){var o=t[n.imm_var];null!=o&&(e.$data[n.mut_var]=o)}}))},dev_tools_reset_handle:function(){var e=this;this.DevToolsVariableInfo.values.forEach((function(t){e.$data[t.mut_var]=e.$options.props[t.imm_var].default})),c.a.remove(f)}},computed:{Pstore:function(){return c.a},ls_store_hash:function(){var e=this;return this.DevToolsVariableInfo.values.reduce((function(a,t){return l(l({},a),{},Object(r.a)({},t.imm_var,e.$data[t.mut_var]))}),{})}}},d=(n(517),n(177)),v=n(178),y=n(518),m=n(519),k=n(516),O=n(520);function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Object(k.a)(e);if(t){var r=Object(k.a)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Object(m.a)(this,n)}}var x=function(e){Object(y.a)(n,e);var t=j(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(v.a)(n,null,[{key:"define",get:function(){return[{key:"main",name:"Main",icon:null,component:"GroupMain"},{key:"style",name:"Style",icon:null,component:"GroupStyle"},{key:"event",name:"Event",icon:null,component:"GroupEvent"},{key:"sfen",name:"SFEN",icon:null,component:"GroupSfen"},{key:"debug",name:"Debug",icon:null,component:"GroupDebug"},{key:"props",name:"$props",icon:null,component:"GroupProps"},{key:"data",name:"$data",icon:null,component:"GroupData"},{key:"cog",name:null,icon:"cog",component:"GroupCog"}]}}]),n}(O.a);function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Object(k.a)(e);if(t){var r=Object(k.a)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Object(m.a)(this,n)}}var P=function(e){Object(y.a)(n,e);var t=w(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(v.a)(n,[{key:"css_class",get:function(){return"is_dev_tools_position_".concat(this.key)}}],[{key:"define",get:function(){return[{key:"left",name:"←"},{key:"bottom",name:"↓"},{key:"right",name:"→"},{key:"top",name:"↑"}]}}]),n}(O.a);function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Object(k.a)(e);if(t){var r=Object(k.a)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Object(m.a)(this,n)}}var B=function(e){Object(y.a)(n,e);var t=R(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(v.a)(n,[{key:"imm_var",get:function(){return this.key}}],[{key:"define",get:function(){return[{key:"sp_dev_tools_position",mut_var:"mut_dev_tools_position"},{key:"sp_dev_tools_group",mut_var:"mut_dev_tools_group"}]}}]),n}(O.a),E={mixins:[h],components:{DevTools:o.default},props:{sp_dev_tools:{type:Boolean,default:!1},sp_dev_tools_position:{type:String,default:null,validator:function(e){return P.keys.includes(e)}},sp_dev_tools_group:{type:String,default:null,validator:function(e){return x.keys.includes(e)}}},data:function(){return{mut_dev_tools:this.sp_dev_tools,mut_dev_tools_position:this.sp_dev_tools_position,mut_dev_tools_group:this.sp_dev_tools_group}},watch:{sp_dev_tools:function(e){this.mut_dev_tools=e},sp_dev_tools_position:function(e){this.mut_dev_tools_position=e},sp_dev_tools_group:function(e){this.mut_dev_tools_group=e}},methods:{dev_tools_toggle_handle:function(){this.mut_dev_tools?this.dev_tools_close_handle():this.dev_tools_open_handle()},dev_tools_open_handle:function(){this.mut_dev_tools=!0},dev_tools_close_handle:function(){this.mut_dev_tools=!1}},computed:{DevToolsGroupInfo:function(){return x},dev_tools_group_info:function(){return x.lookup_or_first(this.mut_dev_tools_group)},DevToolsPositionInfo:function(){return P},dev_tools_position_info:function(){return P.lookup_or_first(this.mut_dev_tools_position)},DevToolsVariableInfo:function(){return B}}}},340:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));n(51),n(11),n(517);var o=n(177),r=n(178),c=n(518),_=n(519),l=n(516),f=n(520),h=n(71);function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Object(l.a)(e);if(t){var r=Object(l.a)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Object(_.a)(this,n)}}var v=function(e){Object(c.a)(n,e);var t=d(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,null,[{key:"define",get:function(){return[{name:"☖持駒 → 駒箱",func:function(e){e.xcontainer.hold_pieces_to_piece_box(h.a.fetch("white"))}},{name:"☖持駒 ← 駒箱",func:function(e){e.xcontainer.piece_box_to_hold_pieces(h.a.fetch("white"))}},{separator:!0},{name:"駒箱: セット",func:function(e){e.xcontainer.piece_box_reset_by_preset("全部駒箱")}},{name:"駒箱: クリア",func:function(e){e.xcontainer.piece_box_clear()}},{name:"駒箱: 正規化",func:function(e){e.xcontainer.piece_box_piece_counts_adjust()}},{separator:!0},{name:"玉: 配置",func:function(e){e.xcontainer.king_formation_auto_set()}},{name:"玉: 回収",func:function(e){e.xcontainer.king_formation_auto_unset()}},{separator:!0},{name:"シャッフル",func:function(e){e.shuffle_dialog_open_handle()}},{separator:!0},{name:"ローテイト ←",func:function(e){e.xcontainer.slide_xy(-1,0)}},{name:"ローテイト →",func:function(e){e.xcontainer.slide_xy(1,0)}},{name:"ローテイト ↑",func:function(e){e.xcontainer.slide_xy(0,-1)}},{name:"ローテイト ↓",func:function(e){e.xcontainer.slide_xy(0,1)}}]}}]),n}(f.a),y=n(524);function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Object(l.a)(e);if(t){var r=Object(l.a)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Object(_.a)(this,n)}}var k=function(e){Object(c.a)(n,e);var t=m(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"preset_info",get:function(){if(!this.separator)return y.a.fetch(this.key)}}],[{key:"define",get:function(){return[{key:"平手"},{separator:!0},{key:"詰将棋"},{key:"詰将棋 - 美濃"},{key:"詰将棋 - 矢倉"},{separator:!0},{key:"戦型 - 右四間 vs 四間飛車"},{key:"戦型 - 角換わり"},{separator:!0},{key:"全部駒箱"},{separator:!0},{key:"香落ち"},{key:"右香落ち"},{key:"角落ち"},{key:"飛車落ち"},{key:"飛香落ち"},{key:"二枚落ち"},{key:"三枚落ち"},{key:"四枚落ち"},{key:"六枚落ち"},{key:"八枚落ち"},{key:"十枚落ち"},{key:"十九枚落ち"},{key:"二十枚落ち"},{separator:!0},{key:"青空将棋"}]}}]),n}(f.a),O=n(180),j={data:function(){return{edit_tool_key:null}},methods:{edit_tool_click_handle:function(e){e.func(this)},shuffle_dialog_open_handle:function(){var e=this;this.shuffle_mode_p=!1,this.dialog_call("寸法の一辺のサイズを指定してください",{inputAttrs:{type:"number",value:4,min:1,max:O.a.dimension},onConfirm:function(t){return e.shuffle_run(t)}})},shuffle_run:function(e){e=parseInt(e),this.xcontainer.shuffle_apply(e)||this.toast_call("".concat(e," x ").concat(e," が盤上の駒の数より少ないため何もしませんでした"),{type:"is-warning"})}},computed:{EditToolInfo:function(){return v},PresetDropdownInfo:function(){return k}}}},341:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));n(11),n(31),n(22),n(51),n(517);var o=n(177),r=n(178),c=n(518),_=n(519),l=n(516);function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Object(l.a)(e);if(t){var r=Object(l.a)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Object(_.a)(this,n)}}var h=function(e){Object(c.a)(n,e);var t=f(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,null,[{key:"define",get:function(){return[{key:"MainBoard",selector:".MainBoard",threshold:0,attr_w:"sp_board_w",attr_h:"sp_board_h"},{key:"BoardCell",selector:".BoardCell",threshold:1.5,attr_w:"sp_cell_w",attr_h:"sp_cell_h"}]}}]),n}(n(520).a),d=(n(23),{data:function(){return{sp_board_w:1,sp_board_h:1,sp_cell_w:1,sp_cell_h:1}},mounted:function(){this.ro_start()},beforeDestroy:function(){this.ro_stop()},methods:{ro_start:function(){var e=this;this.log("ResizeObserver: requestAnimationFrame ".concat("ON")),this.log("ResizeObserver: debounce(callback, ".concat(50,") ").concat("OFF")),this.ro_stop();var t=function(t,n){e.$animation_frame_id=requestAnimationFrame((function(){return e.ro_entries_each_call(t)})),e.log("ResizeObserver: requestAnimationFrameの戻値=".concat(e.$animation_frame_id))},n=null;n=t,this.$ro=new ResizeObserver(n),h.values.forEach((function(t){return e.ro_observe(t)}))},ro_entries_each_call:function(e){var t=this;this.log("ResizeObserver: ro_entries_each_call entries.length=".concat(e.length)),e.forEach((function(e){h.values.forEach((function(n){return t.ro_read(n,e)}))}))},ro_observe:function(e){var t=this.$el.querySelector(e.selector);null==t&&alert('querySelector("'.concat(e.selector,'") is blank')),this.$ro.observe(t)},ro_stop:function(){this.$ro&&(this.$ro.disconnect(),this.$ro=null,null!=this.$animation_frame_id&&(cancelAnimationFrame(this.$animation_frame_id),this.$animation_frame_id=null))},ro_read:function(e,t){if(t.target.dataset.resize_observer_id===e.key){var n=t.contentRect.width,o=t.contentRect.height;if(n>0&&o>0){var r=this[e.attr_w],c=this[e.attr_h],_=Math.abs(r-n),l=Math.abs(c-o),f=_>e.threshold||l>e.threshold;f&&(this[e.attr_w]=n,this[e.attr_h]=o),this.debug_or_development_p&&this.log("ResizeObserver[".concat(e.key,"] ").concat(r,"x").concat(c," -> ").concat(n,"x").concat(o," ").concat(f?"(update)":"(skip)"))}}}},computed:{ro_css_variables_hash:function(){return{"--sp_board_w":"".concat(this.sp_board_w,"px"),"--sp_board_h":"".concat(this.sp_board_h,"px"),"--sp_cell_w":"".concat(this.sp_cell_w,"px"),"--sp_cell_h":"".concat(this.sp_cell_h,"px")}}}})},342:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var o=n(523),r=(n(51),n(11),n(517),n(177)),c=n(178),_=n(518),l=n(519),f=n(516);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Object(f.a)(e);if(t){var r=Object(f.a)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Object(l.a)(this,n)}}var d=function(e){Object(_.a)(n,e);var t=h(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,null,[{key:"define",get:function(){return[{key:"is_position_north",name:"北",sign:-1},{key:"is_position_south",name:"南",sign:1}]}}]),n}(n(520).a),v={data:function(){return{lp_pos_update_need_p:!1,_lp_latest_mouse_event:null,_LiftedPieceElement:null,lp_mouse_stick_p:!1}},beforeDestroy:function(){this.lp_destroy()},methods:{lp_pos_update:function(){if(this.$data._LiftedPieceElement&&this.$data._lp_latest_mouse_event&&this.lp_mouse_stick_p){var e=this.$data._lp_latest_mouse_event.clientX,t=this.$data._lp_latest_mouse_event.clientY;this.element_vector_set(this.$data._LiftedPieceElement,{x:e,y:t})}},lp_create:function(e,t){this.event_call("ev_action_piece_lift"),this.lp_destroy(),this.lp_element_create(t),this.lp_mouse_stick_p=!0,e&&(this.$data._lp_latest_mouse_event=e,this.lp_pos_update()),this.$el.addEventListener("mousemove",this.lp_mousemove_hook),this.$el.addEventListener("click",this.lp_click_hook)},lp_element_create:function(e){this.$data._LiftedPieceElement=this.lp_el_create(["LiftedPieceElement"]);var t=this.lp_el_create(["PieceTap"]),n=this.lp_el_create(["PieceObject"]),r=this.lp_el_create(["PieceTexture"].concat(Object(o.a)(e.css_class_list)));t.classList.add(e.location.flip_if(this.fliped).position_key),n.appendChild(r),t.appendChild(n),this.$data._LiftedPieceElement.appendChild(t);var c=e.location.flip_if(this.fliped).position_key,_=d.fetch(c);if(e.place){var l=this.place_to_cell_info(e.place),f=this.vector_scale(l.radius,this.devise_info.gap*_.sign*-1),h=this.vector_add(l.center,f);this.element_vector_set(this.$data._LiftedPieceElement,h)}else this.$data._LiftedPieceElement.style.left="-50%",this.$data._LiftedPieceElement.style.top="-50%";this.$el.appendChild(this.$data._LiftedPieceElement)},lp_destroy:function(){this.$data._LiftedPieceElement&&(this.$el.removeChild(this.$data._LiftedPieceElement),this.$data._LiftedPieceElement=null,this.lp_mouse_stick_p=!1,this.$el.removeEventListener("mousemove",this.lp_mousemove_hook),this.$el.removeEventListener("click",this.lp_click_hook))},lp_mousemove_hook:function(e){var t=this;this.$data._lp_latest_mouse_event=e,this.lp_pos_update_need_p||(this.lp_pos_update_need_p=!0,window.requestAnimationFrame((function(){t.lp_pos_update(),t.lp_pos_update_need_p=!1})))},lp_click_hook:function(e){1!==e.which&&this.lifted_piece_cancel()},lp_el_create:function(e){var t,n=document.createElement("div");return(t=n.classList).add.apply(t,Object(o.a)(e)),n}}}},343:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));n(72),n(73),n(11),n(22),n(517);var o=n(177),r=n(178),c=n(518),_=n(519),l=n(516);function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Object(l.a)(e);if(t){var r=Object(l.a)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Object(_.a)(this,n)}}var h=function(e){Object(c.a)(n,e);var t=f(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,null,[{key:"define",get:function(){return[{key:"mouse",name:"マウス操作",gap:0,description:"タップも可能な端末であっても先にマウス操作したらマウス"},{key:"touch",name:"タップ操作",gap:0,description:"基本的にスマホはこちら"}]}}]),n}(n(520).a),d={props:{sp_device:{type:String,default:null,validator:function(e){return h.keys.includes(e)}}},data:function(){return{detected_real_device:null}},beforeMount:function(){this.device_detect_create()},beforeDestroy:function(){this.device_detect_destroy()},methods:{device_detect_create:function(){document.addEventListener("touchstart",this.device_detect_hook),document.addEventListener("mousemove",this.device_detect_hook)},device_detect_destroy:function(){document.removeEventListener("touchstart",this.device_detect_hook),document.removeEventListener("mousemove",this.device_detect_hook)},device_detect_hook:function(e){this.detected_real_device="changedTouches"in e?"touch":"mouse",this.device_detect_destroy()}},computed:{any_devise_key:function(){return this.sp_device||this.detected_real_device||"mouse"},devise_info:function(){return h.fetch(this.any_devise_key)}}}},499:function(e,t,n){"use strict"},520:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));n(11),n(517);var o=n(177),r=n(178),c=n(518),_=n(519),l=n(516),f=(n(98),n(12),n(541));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Object(l.a)(e);if(t){var r=Object(l.a)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Object(_.a)(this,n)}}var d=function(e){Object(c.a)(n,e);var t=h(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"unique_key",get:function(){return[this.constructor.name,this.key].join("/")}}]),n}(n.n(f).a)},521:function(e,t,n){"use strict";(function(e,o){n.d(t,"a",(function(){return j}));n(37),n(32),n(36),n(43),n(31),n(44);var r=n(20),c=n(177),_=n(178),l=(n(12),n(51),n(11),n(22),n(2)),f=n(23),h=n.n(f),d=n(180),v=n(127),y=n(522),m=n(71);function k(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function O(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?k(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):k(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var j=function(){function e(t){Object(c.a)(this,e),this.attributes=Object.assign({},t)}return Object(_.a)(e,[{key:"piece",get:function(){return this.attributes.piece}},{key:"place",get:function(){return this.attributes.place},set:function(e){l.a.set(this.attributes,"place",e)}},{key:"location",get:function(){return this.attributes.location}},{key:"promoted",get:function(){return!!this.attributes.promoted},set:function(e){l.a.set(this.attributes,"promoted",e)}},{key:"name",get:function(){return this.promoted?this.piece.promoted_name:this.piece.name}},{key:"yomiage_name",get:function(){return this.piece.piece_yomiage.yomiage(this.promoted)}},{key:"transform_clone",get:function(){var e=null;return e=this.piece.promotable_p?this.promoted?{location:this.location.flip,promoted:!this.promoted}:{promoted:!this.promoted}:{location:this.location.flip},this.clone_with_attrs(e)}},{key:"clone_with_attrs",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new e(O(O({},this.attributes),t))}},{key:"promotable_p",get:function(){if(this.piece.promotable_p&&!this.promoted)return this.danger_zone_p}},{key:"danger_zone_p",get:function(){return"black"===this.location.key?this.place.y<d.a.danger_zone_size:this.place.y>=d.a.dimension-d.a.danger_zone_size}},{key:"css_class_list",get:function(){var e=[];return e.push("location_".concat(this.location.key)),e.push("promoted_".concat(this.promoted)),e=h.a.concat(e,this.piece.css_class_list)}},{key:"bottom_spaces",get:function(){return d.a.dimension-1-this.top_spaces}},{key:"top_spaces",get:function(){return this.place.sp_flip_if_white(this.location).y}},{key:"once_vectors",get:function(){return this.piece.once_vectors(this.promoted)}},{key:"repeat_vectors",get:function(){return this.piece.repeat_vectors(this.promoted)}}],[{key:"random",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).place;if(!e){var t=h.a.random(0,d.a.dimension-1),n=h.a.random(0,d.a.dimension-1);e=v.a.fetch([t,n])}var o=y.a.fetch(h.a.random(0,y.a.values.length-1));return new this({piece:o,place:e,promoted:o.promotable_p&&0===h.a.random(0,1),location:m.a.fetch(h.a.random(0,m.a.values.length-1))})}}]),e}();if(void 0!==e&&e.argv[1]===o){var x=new j({place:new v.a([1,7]),piece:y.a.fetch("P"),promoted:!0,location:m.a.fetch("white")});console.log(x.name),console.log(x.top_spaces)}}).call(this,n(179),"/index.js")},522:function(e,t,n){"use strict";(function(e,o){n.d(t,"a",(function(){return k}));n(517);var r=n(177),c=n(178),_=n(526),l=n(518),f=n(519),h=n(516),d=(n(11),n(22),n(520)),v=n(533),y=n(534);function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Object(f.a)(this,n)}}var k=function(e){Object(l.a)(n,e);var t=m(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"css_class_list",get:function(){return["piece_name","piece_".concat(this.key)]}},{key:"promotable_p",get:function(){return!!this.promoted_name}},{key:"piece_vector",get:function(){return v.a.fetch(this.key)}},{key:"once_vectors",value:function(e){return this.piece_vector.once_vectors(e)}},{key:"repeat_vectors",value:function(e){return this.piece_vector.repeat_vectors(e)}},{key:"piece_yomiage",get:function(){return y.a.fetch(this.key)}}],[{key:"define",get:function(){return[{key:"K",name:"玉",alias_name:"王",promoted_name:null,promoted_alias_name:null},{key:"R",name:"飛",alias_name:null,promoted_name:"龍",promoted_alias_name:"竜"},{key:"B",name:"角",alias_name:null,promoted_name:"馬",promoted_alias_name:null},{key:"G",name:"金",alias_name:null,promoted_name:null,promoted_alias_name:null},{key:"S",name:"銀",alias_name:null,promoted_name:"全",promoted_alias_name:null},{key:"N",name:"桂",alias_name:null,promoted_name:"圭",promoted_alias_name:null},{key:"L",name:"香",alias_name:null,promoted_name:"杏",promoted_alias_name:null},{key:"P",name:"歩",alias_name:null,promoted_name:"と",promoted_alias_name:null}]}},{key:"lookup",value:function(e){return"string"==typeof e&&(e=e.toUpperCase()),Object(_.a)(Object(h.a)(n),"lookup",this).call(this,e)}},{key:"lookup_by_name",value:function(e){return null==this._lookup_by_name&&(this._lookup_by_name=this.memory_record_create_index_by(["name","alias_name"])),this._lookup_by_name[e]}},{key:"lookup_by_promoted_name",value:function(e){return null==this._lookup_by_promoted_name&&(this._lookup_by_promoted_name=this.memory_record_create_index_by(["promoted_name","promoted_alias_name"])),this._lookup_by_promoted_name[e]}}]),n}(d.a);void 0!==e&&e.argv[1]===o&&(console.log(k.fetch("K")),console.log(k.fetch("K")),console.log(k.lookup("")),console.log(k.values),console.log(k.values_map.get("K")),console.log(k.fetch("K").key))}).call(this,n(179),"/index.js")},524:function(e,t,n){"use strict";(function(e,o){n.d(t,"a",(function(){return d}));n(11),n(517);var r=n(177),c=n(178),_=n(518),l=n(519),f=n(516);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Object(f.a)(e);if(t){var r=Object(f.a)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Object(l.a)(this,n)}}var d=function(e){Object(_.a)(n,e);var t=h(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,null,[{key:"define",get:function(){return[{key:"詰将棋",sfen:"position sfen 4k4/9/9/9/9/9/9/9/9 b 2r2b4g4s4n4l18p 1",first_location_key:"black",piece_box:[["K",1]]},{key:"詰将棋 - 美濃",sfen:"position sfen ln1g5/1ks6/1ppp5/p8/9/9/9/9/9 b BGSNL2rb2g2s2n2l14p 1",first_location_key:"black",piece_box:[["K",1]]},{key:"詰将棋 - 矢倉",sfen:"position sfen 7nl/6gk1/5gspp/5pp2/9/9/9/9/9 b BGSNL2rbg2s2n2l14p 1",first_location_key:"black",piece_box:[["K",1]]},{key:"戦型 - 右四間 vs 四間飛車",sfen:"position sfen ln1g1g1nl/1ks2r3/1pppp1bpp/p3spp2/9/P1P1SP1PP/1P1PP1P2/1BK1GR3/LNSG3NL b - 1",first_location_key:"black",piece_box:[]},{key:"戦型 - 角換わり",sfen:"position sfen lr5nl/3g1kg2/2n1ppsp1/pppps1p1p/9/P1PPSPPPP/1PS1P1N2/2GK1G3/LN5RL b Bb 1",first_location_key:"black",piece_box:[]},{key:"全部駒箱",sfen:"position sfen 9/9/9/9/9/9/9/9/9 b - 1",first_location_key:"black",piece_box:[["B",2],["R",2],["L",4],["N",4],["S",4],["G",4],["P",18],["K",2]]},{key:"平手",sfen:"position sfen lnsgkgsnl/1r5b1/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL b - 1",first_location_key:"black",piece_box:[]},{key:"香落ち",sfen:"position sfen lnsgkgsn1/1r5b1/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1",first_location_key:"white",piece_box:[["L",1]]},{key:"右香落ち",sfen:"position sfen 1nsgkgsnl/1r5b1/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1",first_location_key:"white",piece_box:[["L",1]]},{key:"角落ち",sfen:"position sfen lnsgkgsnl/1r7/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1",first_location_key:"white",piece_box:[["B",1]]},{key:"飛車落ち",sfen:"position sfen lnsgkgsnl/7b1/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1",first_location_key:"white",piece_box:[["R",1]]},{key:"飛香落ち",sfen:"position sfen lnsgkgsn1/7b1/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1",first_location_key:"white",piece_box:[["R",1],["L",1]]},{key:"二枚落ち",sfen:"position sfen lnsgkgsnl/9/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1",first_location_key:"white",piece_box:[["B",1],["R",1]]},{key:"三枚落ち",sfen:"position sfen lnsgkgsn1/9/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1",first_location_key:"white",piece_box:[["B",1],["R",1],["L",1]]},{key:"四枚落ち",sfen:"position sfen 1nsgkgsn1/9/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1",first_location_key:"white",piece_box:[["B",1],["R",1],["L",2]]},{key:"六枚落ち",sfen:"position sfen 2sgkgs2/9/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1",first_location_key:"white",piece_box:[["B",1],["R",1],["L",2],["N",2]]},{key:"八枚落ち",sfen:"position sfen 3gkg3/9/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1",first_location_key:"white",piece_box:[["B",1],["R",1],["L",2],["N",2],["S",2]]},{key:"十枚落ち",sfen:"position sfen 4k4/9/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1",first_location_key:"white",piece_box:[["B",1],["R",1],["L",2],["N",2],["S",2],["G",2]]},{key:"十九枚落ち",sfen:"position sfen 4k4/9/9/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1",first_location_key:"white",piece_box:[["B",1],["R",1],["L",2],["N",2],["S",2],["G",2],["P",9]]},{key:"二十枚落ち",sfen:"position sfen 9/9/9/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w - 1",first_location_key:"white",piece_box:[["B",1],["R",1],["L",2],["N",2],["S",2],["G",2],["P",9],["K",1]]},{key:"青空将棋",sfen:"position sfen lnsgkgsnl/1r5b1/9/9/9/9/9/1B5R1/LNSGKGSNL b - 1",first_location_key:"black",piece_box:[]}]}}]),n}(n(520).a);void 0!==e&&e.argv[1]===o&&(console.log(d.fetch("平手")),console.log(d.fetch("香落ち").first_location_key))}).call(this,n(179),"/index.js")},528:function(e,t,n){"use strict";(function(e,o){n.d(t,"a",(function(){return h}));var r=n(177),c=n(178),_=(n(11),n(22),n(23)),l=n.n(_),f=n(71),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;Object(r.a)(this,e),this.reset(),this.raw_body=t}return Object(c.a)(e,[{key:"reset",value:function(){this.raw_body="",this.header={}}},{key:"parse",value:function(){}},{key:"board",get:function(){console.warn("not implemented")}},{key:"hold_pieces_empty_hash",value:function(){return l.a.reduce(f.a.values,(function(a,e){return a[e.key]={},a}),{})}},{key:"turn_offset_min",get:function(){return 0}},{key:"turn_offset_max",get:function(){return this.move_infos.length}},{key:"turn_base",get:function(){return 0}},{key:"location_by_offset",value:function(e){return this.base_location.advance(e)}},{key:"last_location",get:function(){return this.location_by_offset(this.turn_offset_max-1)}},{key:"next_location",get:function(){return this.location_by_offset(this.turn_offset_max)}},{key:"move_infos",get:function(){console.warn("not implemented")}},{key:"comment_lines_hash",get:function(){return null}}],[{key:"parse",value:function(e){var t=new this(e);return t.parse(),t}}]),e}();void 0!==e&&e.argv[1]}).call(this,n(179),"/index.js")},531:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var o=n(20),r=n(177),c=n(178);n(51),n(37),n(12),n(98),n(11),n(22),n(32),n(36),n(43),n(31),n(44);function _(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function l(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?_(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):_(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var f=function(){function e(){Object(r.a)(this,e)}return Object(c.a)(e,null,[{key:"set",value:function(e,t){this.core&&(this.development_p&&console.log("storage.set('".concat(e,"', ").concat(JSON.stringify(t),")")),this.core.setItem(e,JSON.stringify(t)))}},{key:"lookup",value:function(e){if(this.core){var t=this.core.getItem(e);if(t)try{return JSON.parse(t)}catch(o){var n="".concat(this.name,".lookup(").concat(JSON.stringify(e),") # => ").concat(JSON.stringify(t));console.error(n),alert(n),console.error(o)}}}},{key:"get",value:function(e){return this.lookup(e)}},{key:"fetch",value:function(e){var t=this.lookup(e);if(!t)throw new Error(["".concat(this.name,".fetch(").concat(JSON.stringify(e),") does not match anything"),"keys: ".concat(JSON.stringify(this.keys))].join("\n"));return t}},{key:"keys",get:function(){var e=[];if(this.core)for(var i=0;i<this.core.length;i++)e.push(this.core.key(i));return e}},{key:"remove",value:function(e){this.core&&this.core.removeItem(e)}},{key:"attributes",get:function(){var e=this;return this.keys.reduce((function(a,t){return l(l({},a),{},Object(o.a)({},t,e.lookup(t)))}),{})}},{key:"to_h",get:function(){return this.attributes}},{key:"remove_all",value:function(){this.core&&this.core.clear()}},{key:"core",get:function(){return"undefined"!=typeof window&&this.storage}},{key:"storage",get:function(){return localStorage}},{key:"development_p",get:function(){return!1}}]),e}()},532:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));n(11),n(517);var o=n(177),r=n(178),c=n(518),_=n(519),l=n(516);function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Object(l.a)(e);if(t){var r=Object(l.a)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Object(_.a)(this,n)}}var h=function(e){Object(c.a)(n,e);var t=f(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,null,[{key:"define",get:function(){return[{key:"1",yomiage:"1"},{key:"2",yomiage:"にー"},{key:"3",yomiage:"さん"},{key:"4",yomiage:"よん"},{key:"5",yomiage:"ごー"},{key:"6",yomiage:"6"},{key:"7",yomiage:"なな"},{key:"8",yomiage:"8"},{key:"9",yomiage:"きゅー"}]}}]),n}(n(520).a)},533:function(e,t,n){"use strict";(function(e,o){n.d(t,"a",(function(){return d}));n(11),n(517);var r=n(177),c=n(178),_=n(518),l=n(519),f=n(516);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Object(f.a)(e);if(t){var r=Object(f.a)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Object(l.a)(this,n)}}var d=function(e){Object(_.a)(n,e);var t=h(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"once_vectors",value:function(e){var t=null;return t=e?this.promoted_once_vectors:this.basic_once_vectors,this.constructor[t]}},{key:"repeat_vectors",value:function(e){var t=null;return t=e?this.promoted_repeat_vectors:this.basic_repeat_vectors,this.constructor[t]}}],[{key:"define",get:function(){return[{key:"K",basic_once_vectors:"pattern_king",basic_repeat_vectors:null,promoted_once_vectors:null,promoted_repeat_vectors:null,force_promote_length:null},{key:"R",basic_once_vectors:null,basic_repeat_vectors:"pattern_plus",promoted_once_vectors:"pattern_x",promoted_repeat_vectors:"pattern_plus",force_promote_length:null},{key:"B",basic_once_vectors:null,basic_repeat_vectors:"pattern_x",promoted_once_vectors:"pattern_plus",promoted_repeat_vectors:"pattern_x",force_promote_length:null},{key:"G",basic_once_vectors:"pattern_gold",basic_repeat_vectors:null,promoted_once_vectors:null,promoted_repeat_vectors:null,force_promote_length:null},{key:"S",basic_once_vectors:"pattern_silver",basic_repeat_vectors:null,promoted_once_vectors:"pattern_gold",promoted_repeat_vectors:null,force_promote_length:null},{key:"N",basic_once_vectors:"pattern_knight",basic_repeat_vectors:null,promoted_once_vectors:"pattern_gold",promoted_repeat_vectors:null,force_promote_length:1},{key:"L",basic_once_vectors:null,basic_repeat_vectors:"pattern_pawn",promoted_once_vectors:"pattern_gold",promoted_repeat_vectors:null,force_promote_length:0},{key:"P",basic_once_vectors:"pattern_pawn",basic_repeat_vectors:null,promoted_once_vectors:"pattern_gold",promoted_repeat_vectors:null,force_promote_length:0}]}},{key:"pattern_plus",get:function(){return[null,[0,-1],null,[-1,0],[1,0],null,[0,1],null]}},{key:"pattern_x",get:function(){return[[-1,-1],null,[1,-1],null,null,null,[-1,1],null,[1,1]]}},{key:"pattern_silver",get:function(){return[[-1,-1],[0,-1],[1,-1],null,null,null,[-1,1],null,[1,1]]}},{key:"pattern_gold",get:function(){return[[-1,-1],[0,-1],[1,-1],[-1,0],[1,0],null,[0,1],null]}},{key:"pattern_king",get:function(){return[[-1,-1],[0,-1],[1,-1],[-1,0],null,[1,0],[-1,1],[0,1],[1,1]]}},{key:"pattern_knight",get:function(){return[[-1,-2],[1,-2]]}},{key:"pattern_pawn",get:function(){return[[0,-1]]}}]),n}(n(520).a);void 0!==e&&e.argv[1]}).call(this,n(179),"/index.js")},534:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));n(11),n(517);var o=n(177),r=n(178),c=n(518),_=n(519),l=n(516);n(12);function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Object(l.a)(e);if(t){var r=Object(l.a)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Object(_.a)(this,n)}}var h=function(e){Object(c.a)(n,e);var t=f(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"yomiage",value:function(e){return e?this.promoted_name:this.name}}],[{key:"define",get:function(){return[{key:"K",prefix_name:"gyoku",name:"gyoku",promoted_name:null},{key:"R",prefix_name:"ひしゃ",name:"ひしゃっ！",promoted_name:"りゅー！"},{key:"B",prefix_name:"かく",name:"かくっ！",promoted_name:"うまっ！"},{key:"G",prefix_name:"きん",name:"きんっ！",promoted_name:null},{key:"S",prefix_name:"ぎん",name:"ぎんっ！",promoted_name:"なりぎんっ！"},{key:"N",prefix_name:"けい",name:"けいっ！",promoted_name:"なりけいっ！"},{key:"L",prefix_name:"きょー",name:"きょー！",promoted_name:"なりきょー！"},{key:"P",prefix_name:"ふ",name:"ふ！",promoted_name:"ときんっ！"}]}}]),n}(n(520).a)},536:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var o=n(177),r=n(178),c=(n(51),n(98),n(57),n(33),n(527),n(525)),_=n.n(c),l=n(522),f=n(127);_.a.uninstall("namespacing");var h=function(){function e(t){Object(o.a)(this,e),this.promoted_trigger="+"===t.promoted,"*"===t.origin_y?this.drop_piece=l.a.fetch(t.origin_x):this.origin_place=f.a.fetch("".concat(t.origin_x).concat(t.origin_y)),this.place=f.a.fetch("".concat(t.pos_x).concat(t.pos_y))}return Object(r.a)(e,[{key:"to_sfen",get:function(){return this.to_custom_sfen()}},{key:"to_flop_sfen",get:function(){return this.to_custom_sfen({flop:!0})}},{key:"to_custom_sfen",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=[];return this.drop_piece?(a.push(this.drop_piece.key),a.push("*")):a.push(this.origin_place.flop_if(e.flop).to_sfen),a.push(this.place.flop_if(e.flop).to_sfen),this.promoted_trigger&&a.push("+"),a.join("")}}],[{key:"line_flop",value:function(e){return this.parse_line(e).map((function(e){return e.to_flop_sfen})).join(" ")}},{key:"str_flop",value:function(e){var t=this.parse(e);if(t)return t.to_flop_sfen}},{key:"parse_line",value:function(line){var e=this,s=line||"";return""===s?[]:s.split(/\s+/).map((function(t){return e.parse(t)}))}},{key:"parse",value:function(e){var t=_.a.exec(e,_()("(?<origin_x>\\S)(?<origin_y>\\S)(?<pos_x>\\S)(?<pos_y>\\S)(?<promoted>\\+?)?"));return t?new this(t):null}}]),e}()},537:function(e,t,n){"use strict";(function(e,o){n.d(t,"a",(function(){return v}));var r=n(177),c=n(178),_=(n(98),n(57),n(11),n(22),n(23)),l=n.n(_),f=n(522),h=(n(127),n(128)),d=n(71),v=(n(180),function(){function e(t){Object(r.a)(this,e),this.xcontainer=t}return Object(c.a)(e,[{key:"to_s",get:function(){var e=this.__base_parts;return e.push(this.xcontainer.display_turn+1),e.join(" ")}},{key:"to_s_without_turn",get:function(){return this.__base_parts.join(" ")}},{key:"to_board_sfen",get:function(){return this.xcontainer.board.to_sfen}},{key:"to_hold_pieces",get:function(){var e=this,t=d.a.values.map((function(t){var n=e.xcontainer.hold_pieces[t.key],o=f.a.values.map((function(e){var o=n[e.key]||0,r="";if(0===o)return null;o>=2&&(r+=o);var c=e.key;return r+=c="white"===t.key?c.toLowerCase():c.toUpperCase()}));return l.a.compact(o).join("")})).join("");return l.a.isEmpty(t)&&(t="-"),t}},{key:"__base_parts",get:function(){var e=[];return e.push(this.to_board_sfen),e.push(this.xcontainer.current_location.key[0]),e.push(this.to_hold_pieces),e}}]),e}());if(void 0!==e&&e.argv[1]===o){var y=new h.a;y.source="position sfen +lnsgkgsnl/1r5b1/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL b S2s 1 moves 7i6h S*2d",y.current_turn=1,y.run();var m=new v(y);console.log(m.to_s)}}).call(this,n(179),"/index.js")},538:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var o=n(20),r=n(523),c=n(177),_=n(178),l=(n(33),n(75),n(318),n(45),n(74),n(530),n(98),n(51),n(11),n(31),n(37),n(32),n(36),n(43),n(44),n(525)),f=n.n(l);function h(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function d(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?h(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):h(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}f.a.uninstall("namespacing");var v=function(){function e(){Object(c.a)(this,e)}return Object(_.a)(e,null,[{key:"kanji_to_number_string",value:function(s){var e=this;s=s.replace(new RegExp("[".concat(this.KANJI_TABLE,"]"),"g"),(function(t){return e.TRANSRATE_TABLE[t]}));for(var t=function(i){var t=f()("(?<number>\\d+)?(?<unit>[".concat(e.UNIT_TABLE.charAt(i),"])(?<rest>\\d+)?"),"g");s=f.a.replace(s,t,(function(e){var t,n;return Number(null!==(t=e.number)&&void 0!==t?t:1)*Math.pow(10,i+1)+Number(null!==(n=e.rest)&&void 0!==n?n:0)}))},i=0;i<this.unit_size;i++)t(i);return s}},{key:"number_to_kanji",value:function(e){for(var t=[],n=this.unit_size;n>=1;n--){var s=this.UNIT_TABLE.charAt(n-1),o=Math.pow(10,n),q=Math.trunc(e/o),r=Math.trunc(e%o);1===q?n>=this.one_number_insert_level?t.push(this.KANJI_TABLE.charAt(q)+s):t.push(s):q>=2&&t.push(this.KANJI_TABLE.charAt(q)+s),e=r}return(0===e&&0===t.length||e>=1)&&t.push(this.KANJI_TABLE.charAt(e)),t.join("")}},{key:"regexp",get:function(){return f()("[".concat(this.KANJI_TABLE).concat(this.UNIT_TABLE,"]+"))}},{key:"extract",value:function(s){var e=[];return f.a.forEach(s,this.regexp,(function(t){e.push(t[0])})),e}}]),e}();v.unit_size=6,v.one_number_insert_level=4,v.KANJI_TABLE="〇一二三四五六七八九",v.UNIT_TABLE="十百千万憶兆",v.NUMBER_TABLE="0123456789",v.TRANSRATE_TABLE=Object(r.a)(v.KANJI_TABLE).reduce((function(a,e,i){return d(d({},a),{},Object(o.a)({},e,v.NUMBER_TABLE.charAt(i)))}),{})},539:function(e,t,n){"use strict";(function(e,o){n.d(t,"a",(function(){return f}));n(37),n(32),n(36),n(11),n(43),n(31),n(44);var r=n(20),c=n(177),_=n(178);n(98),n(12);function l(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}var f=function(){function e(t){Object(c.a)(this,e),Object.assign(this,t)}return Object(_.a)(e,[{key:"to_sfen",get:function(){var e=null;if("move"===this.type)e=this.from.place.to_sfen+this.to.place.to_sfen;else if("promotable"===this.type)e=this.from.place.to_sfen+this.to.place.to_sfen+(this.to.promoted?"+":"");else{if("put"!==this.type)throw new Error("must not happen");e=this.to.piece.key+"*"+this.to.place.to_sfen}return e}},{key:"to_kif",get:function(){return this.to_custom_kif()}},{key:"to_kif_without_from",get:function(){return this.to_custom_kif({from:!1})}},{key:"to_yomiage",get:function(){var e=null;if("move"===this.type)e=this.from.yomiage_name;else if("promotable"===this.type)e=this.from.piece.piece_yomiage.prefix_name+"、"+(this.to.promoted?"なりっ！":"ならずっ！");else{if("put"!==this.type)throw new Error("must not happen");e=this.to.piece.piece_yomiage.prefix_name+"、うつ！"}return[this.to.place.yomiage_x,this.to.place.yomiage_y,e].join(" ")}},{key:"effect_key",get:function(){if(this.killed_soldier)return"kill_attack";if("move"===this.type)return"move_or_appear";if("promotable"===this.type)return this.to.promoted,"move_or_appear";if("put"===this.type)return"move_or_appear";throw new Error("must not happen")}},{key:"to_custom_kif",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({location:!0,from:!0},e);var t=null,n="";if("move"===this.type)t=this.from.name,e.from&&(n=this.__from_xy);else if("promotable"===this.type)t=this.from.name+(this.to.promoted?"成":"不成"),e.from&&(n=this.__from_xy);else{if("put"!==this.type)throw new Error("must not happen");t=this.to.name+"打"}return[e.location?this.to.location.name:"",this.__to_xy,t,n].join("")}},{key:"__from_xy",get:function(){return["(",this.from.place.digit_human,")"].join("")}},{key:"__to_xy",get:function(){return[this.to.place.human_x,this.to.place.kanji_human_y].join("")}}]),e}();void 0!==e&&e.argv[1]}).call(this,n(179),"/index.js")},540:function(e,t,n){"use strict";(function(e,o){n.d(t,"a",(function(){return d}));n(11),n(517);var r=n(177),c=n(178),_=n(518),l=n(519),f=n(516);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Object(f.a)(e);if(t){var r=Object(f.a)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Object(l.a)(this,n)}}var d=function(e){Object(_.a)(n,e);var t=h(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,null,[{key:"define",get:function(){return[{key:"illegal_two_pawn",name:"二歩"},{key:"illegal_death_king",name:"王手放置"},{key:"illegal_piece_warp",name:"駒ワープ"},{key:"illegal_dead_soldier",name:"死に駒"}]}}]),n}(n(520).a);void 0!==e&&e.argv[1]===o&&console.log(d.fetch("illegal_two_pawn").attributes)}).call(this,n(179),"/index.js")},71:function(e,t,n){"use strict";(function(e,o){n.d(t,"a",(function(){return d}));n(517);var r=n(177),c=n(178),_=n(518),l=n(519),f=n(516);n(51),n(12),n(11),n(22),n(57);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Object(f.a)(e);if(t){var r=Object(f.a)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Object(l.a)(this,n)}}var d=function(e){Object(_.a)(n,e);var t=h(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"flip",get:function(){return this.constructor.cycle_lookup(this.code+1)}},{key:"any_long_name",value:function(e){return e?this.handicap_long_name:this.long_name}},{key:"advance",value:function(e){return this.constructor.cycle_lookup(this.code+e)}},{key:"flip_if",value:function(e){return this.advance(e?1:0)}}],[{key:"define",get:function(){return[{key:"black",name:"☗",char_key:"b",value_sign:1,position_key:"is_position_south",long_name:"先手",handicap_long_name:"下手"},{key:"white",name:"☖",char_key:"w",value_sign:-1,position_key:"is_position_north",long_name:"後手",handicap_long_name:"上手"}]}},{key:"cycle_lookup",value:function(e){if("number"!=typeof e)throw new Error("ArgumentError: ".concat(this.name,".cycle_lookup(").concat(JSON.stringify(e),")"));return this.lookup(Math.abs(e)%this.values.length)}}]),n}(n(520).a);void 0!==e&&e.argv[1]===o&&(console.log(d.cycle_lookup(-1)),console.log(d.fetch("black")),d.values.map((function(e){console.log(e)})),console.log(d.fetch("black").flip),console.log(d.fetch("white").flip))}).call(this,n(179),"/index.js")},99:function(e,t,n){"use strict";(function(e,o){n.d(t,"a",(function(){return d}));n(11),n(517);var r=n(177),c=n(178),_=n(518),l=n(519),f=n(516);n(12);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Object(f.a)(e);if(t){var r=Object(f.a)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Object(l.a)(this,n)}}var d=function(e){Object(_.a)(n,e);var t=h(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,null,[{key:"define",get:function(){return[{key:"view",name:"再生"},{key:"play",name:"操作"},{key:"edit",name:"編集"}]}}]),n}(n(520).a);void 0!==e&&e.argv[1]===o&&(console.log(d.fetch("simple").key),console.log(d.fetch("simple").name))}).call(this,n(179),"/index.js")}}]);